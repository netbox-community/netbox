{% extends 'generic/object.html' %}
{% load helpers %}
{% load plugins %}
{% load render_table from django_tables2 %}

{% block content %}
<div class="row mb-3">
	<div class="col col-md-6">
        <div class="card">
            <h5 class="card-header">
                L2VPN Attributes
            </h5>
            <div class="card-body">
                <table class="table table-hover attr-table
                    <tr>
                        <th scope="row">Name</th>
                        <td>{{ object.name|placeholder }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Slug</th>
                        <td>{{ object.slug|placeholder }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Identifier</th>
                        <td>{{ object.identifier|placeholder }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Type</th>
                        <td>{{ object.get_type_display }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Description</th>
                        <td>{{ object.description|placeholder }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Tenant</th>
                        <td>{{ object.tenant|placeholder }}</td>
                    </tr>
                </table>
            </div>
        </div>
        {% include 'inc/panels/contacts.html' %}
        {% plugin_left_page object %}
	</div>
	<div class="col col-md-6">
        {% include 'inc/panels/tags.html' with tags=object.tags.all url='circuits:circuit_list' %}
        {% include 'inc/panels/custom_fields.html' %}
        {% plugin_right_page object %}
    </div>
</div>
<div class="row mb-3">
	<div class="col col-md-6">
    {% include 'inc/panel_table.html' with table=import_targets_table heading="Import Route Targets" %}
  </div>
	<div class="col col-md-6">
    {% include 'inc/panel_table.html' with table=export_targets_table heading="Export Route Targets" %}
  </div>
</div>
<div class="row mb-3">
	<div class="col col-md-12">
        <div class="card">
          <h5 class="card-header">L2VPN Terminations</h5>
          <div class="card-body">
            {% with terminations=object.terminations.all %}
              {% if terminations.exists %}
                <table class="table table-hover">
                  <tr>
                    <th>Termination Type</th>
                    <th>Termination</th>
                    <th></th>
                  </tr>
                  {% for termination in terminations %}
                    <tr>
                      <td>{{ termination.assigned_object|meta:"verbose_name" }}</td>
                      <td>{{ termination.assigned_object|linkify }}</td>
                      <td class="text-end noprint">
                        {% if perms.ipam.change_l2vpntermination %}
                          <a href="{% url 'ipam:l2vpntermination_edit' pk=termination.pk %}?return_url={{ object.get_absolute_url }}" class="btn btn-warning btn-sm lh-1" title="Edit">
                            <i class="mdi mdi-pencil" aria-hidden="true"></i>
                          </a>
                        {% endif %}
                        {% if perms.ipam.delete_l2vpntermination %}
                          <a href="{% url 'ipam:l2vpntermination_delete' pk=termination.pk %}?return_url={{ object.get_absolute_url }}" class="btn btn-danger btn-sm lh-1" title="Delete">
                            <i class="mdi mdi-trash-can-outline" aria-hidden="true"></i>
                          </a>
                        {% endif %}
                      </td>
                    </tr>
                  {% endfor %}
                </table>
              {% else %}
                <div class="text-muted">None</div>
              {% endif %}
            {% endwith %}
          </div>
          {% if perms.ipam.add_l2vpntermination %}
            <div class="card-footer text-end noprint">
              <a href="{% url 'ipam:l2vpntermination_add' %}?l2vpn={{ object.pk }}&return_url={{ object.get_absolute_url }}" class="btn btn-primary btn-sm">
                <i class="mdi mdi-plus-thick" aria-hidden="true"></i> Add a Termination
              </a>
            </div>
          {% endif %}
        </div>
    </div>
</div>
<div class="row mb-3">
	<div class="col col-md-12">
        {% plugin_full_width_page object %}
  </div>
</div>
{% endblock %}
