{
  "version": 3,
  "sources": ["../node_modules/clipboard/dist/clipboard.js", "../node_modules/@popperjs/core/lib/index.js", "../node_modules/@popperjs/core/lib/enums.js", "../node_modules/@popperjs/core/lib/dom-utils/getNodeName.js", "../node_modules/@popperjs/core/lib/dom-utils/getWindow.js", "../node_modules/@popperjs/core/lib/dom-utils/instanceOf.js", "../node_modules/@popperjs/core/lib/modifiers/applyStyles.js", "../node_modules/@popperjs/core/lib/utils/getBasePlacement.js", "../node_modules/@popperjs/core/lib/utils/math.js", "../node_modules/@popperjs/core/lib/utils/userAgent.js", "../node_modules/@popperjs/core/lib/dom-utils/isLayoutViewport.js", "../node_modules/@popperjs/core/lib/dom-utils/getBoundingClientRect.js", "../node_modules/@popperjs/core/lib/dom-utils/getLayoutRect.js", "../node_modules/@popperjs/core/lib/dom-utils/contains.js", "../node_modules/@popperjs/core/lib/dom-utils/getComputedStyle.js", "../node_modules/@popperjs/core/lib/dom-utils/isTableElement.js", "../node_modules/@popperjs/core/lib/dom-utils/getDocumentElement.js", "../node_modules/@popperjs/core/lib/dom-utils/getParentNode.js", "../node_modules/@popperjs/core/lib/dom-utils/getOffsetParent.js", "../node_modules/@popperjs/core/lib/utils/getMainAxisFromPlacement.js", "../node_modules/@popperjs/core/lib/utils/within.js", "../node_modules/@popperjs/core/lib/utils/getFreshSideObject.js", "../node_modules/@popperjs/core/lib/utils/mergePaddingObject.js", "../node_modules/@popperjs/core/lib/utils/expandToHashMap.js", "../node_modules/@popperjs/core/lib/modifiers/arrow.js", "../node_modules/@popperjs/core/lib/utils/getVariation.js", "../node_modules/@popperjs/core/lib/modifiers/computeStyles.js", "../node_modules/@popperjs/core/lib/modifiers/eventListeners.js", "../node_modules/@popperjs/core/lib/utils/getOppositePlacement.js", "../node_modules/@popperjs/core/lib/utils/getOppositeVariationPlacement.js", "../node_modules/@popperjs/core/lib/dom-utils/getWindowScroll.js", "../node_modules/@popperjs/core/lib/dom-utils/getWindowScrollBarX.js", "../node_modules/@popperjs/core/lib/dom-utils/getViewportRect.js", "../node_modules/@popperjs/core/lib/dom-utils/getDocumentRect.js", "../node_modules/@popperjs/core/lib/dom-utils/isScrollParent.js", "../node_modules/@popperjs/core/lib/dom-utils/getScrollParent.js", "../node_modules/@popperjs/core/lib/dom-utils/listScrollParents.js", "../node_modules/@popperjs/core/lib/utils/rectToClientRect.js", "../node_modules/@popperjs/core/lib/dom-utils/getClippingRect.js", "../node_modules/@popperjs/core/lib/utils/computeOffsets.js", "../node_modules/@popperjs/core/lib/utils/detectOverflow.js", "../node_modules/@popperjs/core/lib/utils/computeAutoPlacement.js", "../node_modules/@popperjs/core/lib/modifiers/flip.js", "../node_modules/@popperjs/core/lib/modifiers/hide.js", "../node_modules/@popperjs/core/lib/modifiers/offset.js", "../node_modules/@popperjs/core/lib/modifiers/popperOffsets.js", "../node_modules/@popperjs/core/lib/utils/getAltAxis.js", "../node_modules/@popperjs/core/lib/modifiers/preventOverflow.js", "../node_modules/@popperjs/core/lib/dom-utils/getHTMLElementScroll.js", "../node_modules/@popperjs/core/lib/dom-utils/getNodeScroll.js", "../node_modules/@popperjs/core/lib/dom-utils/getCompositeRect.js", "../node_modules/@popperjs/core/lib/utils/orderModifiers.js", "../node_modules/@popperjs/core/lib/utils/debounce.js", "../node_modules/@popperjs/core/lib/utils/mergeByName.js", "../node_modules/@popperjs/core/lib/createPopper.js", "../node_modules/@popperjs/core/lib/popper-lite.js", "../node_modules/@popperjs/core/lib/popper.js", "../node_modules/bootstrap/js/src/dom/data.js", "../node_modules/bootstrap/js/src/util/index.js", "../node_modules/bootstrap/js/src/dom/event-handler.js", "../node_modules/bootstrap/js/src/dom/manipulator.js", "../node_modules/bootstrap/js/src/util/config.js", "../node_modules/bootstrap/js/src/base-component.js", "../node_modules/bootstrap/js/src/dom/selector-engine.js", "../node_modules/bootstrap/js/src/util/component-functions.js", "../node_modules/bootstrap/js/src/alert.js", "../node_modules/bootstrap/js/src/button.js", "../node_modules/bootstrap/js/src/util/swipe.js", "../node_modules/bootstrap/js/src/carousel.js", "../node_modules/bootstrap/js/src/collapse.js", "../node_modules/bootstrap/js/src/dropdown.js", "../node_modules/bootstrap/js/src/util/backdrop.js", "../node_modules/bootstrap/js/src/util/focustrap.js", "../node_modules/bootstrap/js/src/util/scrollbar.js", "../node_modules/bootstrap/js/src/modal.js", "../node_modules/bootstrap/js/src/offcanvas.js", "../node_modules/bootstrap/js/src/util/sanitizer.js", "../node_modules/bootstrap/js/src/util/template-factory.js", "../node_modules/bootstrap/js/src/tooltip.js", "../node_modules/bootstrap/js/src/popover.js", "../node_modules/bootstrap/js/src/scrollspy.js", "../node_modules/bootstrap/js/src/tab.js", "../node_modules/bootstrap/js/src/toast.js", "../node_modules/htmx.org/dist/htmx.esm.js", "../node_modules/tom-select/src/contrib/microevent.ts", "../node_modules/tom-select/src/contrib/microplugin.ts", "../node_modules/@orchidjs/unicode-variants/lib/regex.ts", "../node_modules/@orchidjs/unicode-variants/lib/strings.ts", "../node_modules/@orchidjs/unicode-variants/lib/index.ts", "../node_modules/@orchidjs/sifter/lib/utils.ts", "../node_modules/@orchidjs/sifter/lib/sifter.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/contrib/highlight.ts", "../node_modules/tom-select/src/constants.ts", "../node_modules/tom-select/src/defaults.ts", "../node_modules/tom-select/src/getSettings.ts", "../node_modules/tom-select/src/tom-select.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/plugins/change_listener/plugin.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/plugins/checkbox_options/plugin.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/plugins/clear_button/plugin.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/plugins/drag_drop/plugin.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/plugins/dropdown_header/plugin.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/plugins/caret_position/plugin.ts", "../node_modules/tom-select/src/constants.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/plugins/dropdown_input/plugin.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/plugins/input_autogrow/plugin.ts", "../node_modules/tom-select/src/plugins/no_backspace_delete/plugin.ts", "../node_modules/tom-select/src/plugins/no_active_items/plugin.ts", "../node_modules/tom-select/src/constants.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/plugins/optgroup_columns/plugin.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/plugins/remove_button/plugin.ts", "../node_modules/tom-select/src/plugins/restore_on_backspace/plugin.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/tom-select/src/plugins/virtual_scroll/plugin.ts", "../node_modules/tom-select/src/tom-select.complete.ts", "../src/util.ts", "../src/forms/elements.ts", "../src/forms/speedSelector.ts", "../src/forms/index.ts", "../src/bs.ts", "../src/search.ts", "../src/select/config.ts", "../src/select/static.ts", "../node_modules/tom-select/src/utils.ts", "../node_modules/tom-select/src/vanilla.ts", "../node_modules/query-string/base.js", "../node_modules/decode-uri-component/index.js", "../node_modules/filter-obj/index.js", "../node_modules/split-on-first/index.js", "../node_modules/query-string/index.js", "../src/select/types.ts", "../src/select/classes/dynamicParamsMap.ts", "../src/select/classes/dynamicTomSelect.ts", "../src/select/dynamic.ts", "../src/select/index.ts", "../src/buttons/connectionToggle.ts", "../src/state/index.ts", "../src/stores/objectDepth.ts", "../src/stores/rackImages.ts", "../src/stores/previousPkCheck.ts", "../src/stores/secret.ts", "../src/buttons/depthToggle.ts", "../src/buttons/moveOptions.ts", "../src/buttons/reslug.ts", "../src/buttons/selectAll.ts", "../src/buttons/floatBulk.ts", "../src/buttons/selectMultiple.ts", "../src/buttons/markdownPreview.ts", "../src/buttons/secretToggle.ts", "../src/buttons/index.ts", "../src/colorMode.ts", "../src/messages.ts", "../src/clipboard.ts", "../node_modules/flatpickr/dist/esm/types/options.js", "../node_modules/flatpickr/dist/esm/l10n/default.js", "../node_modules/flatpickr/dist/esm/utils/index.js", "../node_modules/flatpickr/dist/esm/utils/dom.js", "../node_modules/flatpickr/dist/esm/utils/formatting.js", "../node_modules/flatpickr/dist/esm/utils/dates.js", "../node_modules/flatpickr/dist/esm/utils/polyfills.js", "../node_modules/flatpickr/dist/esm/index.js", "../src/dateSelector.ts", "../src/tableConfig.ts", "../src/tables/interfaceTable.ts", "../src/sidenav.ts", "../node_modules/gridstack/src/utils.ts", "../node_modules/gridstack/src/gridstack-engine.ts", "../node_modules/gridstack/src/types.ts", "../node_modules/gridstack/src/dd-manager.ts", "../node_modules/gridstack/src/dd-touch.ts", "../node_modules/gridstack/src/dd-resizable-handle.ts", "../node_modules/gridstack/src/dd-base-impl.ts", "../node_modules/gridstack/src/dd-resizable.ts", "../node_modules/gridstack/src/dd-draggable.ts", "../node_modules/gridstack/src/dd-droppable.ts", "../node_modules/gridstack/src/dd-element.ts", "../node_modules/gridstack/src/dd-gridstack.ts", "../node_modules/gridstack/src/gridstack.ts", "../src/dashboard.ts", "../src/racks.ts", "../src/objectSelector.ts", "../src/quickAdd.ts", "../src/htmx.ts", "../src/forms/savedFiltersSelect.ts", "../src/netbox.ts"],
  "sourcesContent": ["/*!\n * clipboard.js v2.0.11\n * https://clipboardjs.com/\n *\n * Licensed MIT \u00A9 Zeno Rocha\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ClipboardJS\"] = factory();\n\telse\n\t\troot[\"ClipboardJS\"] = factory();\n})(this, function() {\nreturn /******/ (function() { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ 686:\n/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, {\n  \"default\": function() { return /* binding */ clipboard; }\n});\n\n// EXTERNAL MODULE: ./node_modules/tiny-emitter/index.js\nvar tiny_emitter = __webpack_require__(279);\nvar tiny_emitter_default = /*#__PURE__*/__webpack_require__.n(tiny_emitter);\n// EXTERNAL MODULE: ./node_modules/good-listener/src/listen.js\nvar listen = __webpack_require__(370);\nvar listen_default = /*#__PURE__*/__webpack_require__.n(listen);\n// EXTERNAL MODULE: ./node_modules/select/src/select.js\nvar src_select = __webpack_require__(817);\nvar select_default = /*#__PURE__*/__webpack_require__.n(src_select);\n;// CONCATENATED MODULE: ./src/common/command.js\n/**\n * Executes a given operation type.\n * @param {String} type\n * @return {Boolean}\n */\nfunction command(type) {\n  try {\n    return document.execCommand(type);\n  } catch (err) {\n    return false;\n  }\n}\n;// CONCATENATED MODULE: ./src/actions/cut.js\n\n\n/**\n * Cut action wrapper.\n * @param {String|HTMLElement} target\n * @return {String}\n */\n\nvar ClipboardActionCut = function ClipboardActionCut(target) {\n  var selectedText = select_default()(target);\n  command('cut');\n  return selectedText;\n};\n\n/* harmony default export */ var actions_cut = (ClipboardActionCut);\n;// CONCATENATED MODULE: ./src/common/create-fake-element.js\n/**\n * Creates a fake textarea element with a value.\n * @param {String} value\n * @return {HTMLElement}\n */\nfunction createFakeElement(value) {\n  var isRTL = document.documentElement.getAttribute('dir') === 'rtl';\n  var fakeElement = document.createElement('textarea'); // Prevent zooming on iOS\n\n  fakeElement.style.fontSize = '12pt'; // Reset box model\n\n  fakeElement.style.border = '0';\n  fakeElement.style.padding = '0';\n  fakeElement.style.margin = '0'; // Move element out of screen horizontally\n\n  fakeElement.style.position = 'absolute';\n  fakeElement.style[isRTL ? 'right' : 'left'] = '-9999px'; // Move element to the same position vertically\n\n  var yPosition = window.pageYOffset || document.documentElement.scrollTop;\n  fakeElement.style.top = \"\".concat(yPosition, \"px\");\n  fakeElement.setAttribute('readonly', '');\n  fakeElement.value = value;\n  return fakeElement;\n}\n;// CONCATENATED MODULE: ./src/actions/copy.js\n\n\n\n/**\n * Create fake copy action wrapper using a fake element.\n * @param {String} target\n * @param {Object} options\n * @return {String}\n */\n\nvar fakeCopyAction = function fakeCopyAction(value, options) {\n  var fakeElement = createFakeElement(value);\n  options.container.appendChild(fakeElement);\n  var selectedText = select_default()(fakeElement);\n  command('copy');\n  fakeElement.remove();\n  return selectedText;\n};\n/**\n * Copy action wrapper.\n * @param {String|HTMLElement} target\n * @param {Object} options\n * @return {String}\n */\n\n\nvar ClipboardActionCopy = function ClipboardActionCopy(target) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    container: document.body\n  };\n  var selectedText = '';\n\n  if (typeof target === 'string') {\n    selectedText = fakeCopyAction(target, options);\n  } else if (target instanceof HTMLInputElement && !['text', 'search', 'url', 'tel', 'password'].includes(target === null || target === void 0 ? void 0 : target.type)) {\n    // If input type doesn't support `setSelectionRange`. Simulate it. https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n    selectedText = fakeCopyAction(target.value, options);\n  } else {\n    selectedText = select_default()(target);\n    command('copy');\n  }\n\n  return selectedText;\n};\n\n/* harmony default export */ var actions_copy = (ClipboardActionCopy);\n;// CONCATENATED MODULE: ./src/actions/default.js\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n\n\n/**\n * Inner function which performs selection from either `text` or `target`\n * properties and then executes copy or cut operations.\n * @param {Object} options\n */\n\nvar ClipboardActionDefault = function ClipboardActionDefault() {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  // Defines base properties passed from constructor.\n  var _options$action = options.action,\n      action = _options$action === void 0 ? 'copy' : _options$action,\n      container = options.container,\n      target = options.target,\n      text = options.text; // Sets the `action` to be performed which can be either 'copy' or 'cut'.\n\n  if (action !== 'copy' && action !== 'cut') {\n    throw new Error('Invalid \"action\" value, use either \"copy\" or \"cut\"');\n  } // Sets the `target` property using an element that will be have its content copied.\n\n\n  if (target !== undefined) {\n    if (target && _typeof(target) === 'object' && target.nodeType === 1) {\n      if (action === 'copy' && target.hasAttribute('disabled')) {\n        throw new Error('Invalid \"target\" attribute. Please use \"readonly\" instead of \"disabled\" attribute');\n      }\n\n      if (action === 'cut' && (target.hasAttribute('readonly') || target.hasAttribute('disabled'))) {\n        throw new Error('Invalid \"target\" attribute. You can\\'t cut text from elements with \"readonly\" or \"disabled\" attributes');\n      }\n    } else {\n      throw new Error('Invalid \"target\" value, use a valid Element');\n    }\n  } // Define selection strategy based on `text` property.\n\n\n  if (text) {\n    return actions_copy(text, {\n      container: container\n    });\n  } // Defines which selection strategy based on `target` property.\n\n\n  if (target) {\n    return action === 'cut' ? actions_cut(target) : actions_copy(target, {\n      container: container\n    });\n  }\n};\n\n/* harmony default export */ var actions_default = (ClipboardActionDefault);\n;// CONCATENATED MODULE: ./src/clipboard.js\nfunction clipboard_typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { clipboard_typeof = function _typeof(obj) { return typeof obj; }; } else { clipboard_typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return clipboard_typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (clipboard_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n\n\n\n\n\n/**\n * Helper function to retrieve attribute value.\n * @param {String} suffix\n * @param {Element} element\n */\n\nfunction getAttributeValue(suffix, element) {\n  var attribute = \"data-clipboard-\".concat(suffix);\n\n  if (!element.hasAttribute(attribute)) {\n    return;\n  }\n\n  return element.getAttribute(attribute);\n}\n/**\n * Base class which takes one or more elements, adds event listeners to them,\n * and instantiates a new `ClipboardAction` on each click.\n */\n\n\nvar Clipboard = /*#__PURE__*/function (_Emitter) {\n  _inherits(Clipboard, _Emitter);\n\n  var _super = _createSuper(Clipboard);\n\n  /**\n   * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n   * @param {Object} options\n   */\n  function Clipboard(trigger, options) {\n    var _this;\n\n    _classCallCheck(this, Clipboard);\n\n    _this = _super.call(this);\n\n    _this.resolveOptions(options);\n\n    _this.listenClick(trigger);\n\n    return _this;\n  }\n  /**\n   * Defines if attributes would be resolved using internal setter functions\n   * or custom functions that were passed in the constructor.\n   * @param {Object} options\n   */\n\n\n  _createClass(Clipboard, [{\n    key: \"resolveOptions\",\n    value: function resolveOptions() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      this.action = typeof options.action === 'function' ? options.action : this.defaultAction;\n      this.target = typeof options.target === 'function' ? options.target : this.defaultTarget;\n      this.text = typeof options.text === 'function' ? options.text : this.defaultText;\n      this.container = clipboard_typeof(options.container) === 'object' ? options.container : document.body;\n    }\n    /**\n     * Adds a click event listener to the passed trigger.\n     * @param {String|HTMLElement|HTMLCollection|NodeList} trigger\n     */\n\n  }, {\n    key: \"listenClick\",\n    value: function listenClick(trigger) {\n      var _this2 = this;\n\n      this.listener = listen_default()(trigger, 'click', function (e) {\n        return _this2.onClick(e);\n      });\n    }\n    /**\n     * Defines a new `ClipboardAction` on each click event.\n     * @param {Event} e\n     */\n\n  }, {\n    key: \"onClick\",\n    value: function onClick(e) {\n      var trigger = e.delegateTarget || e.currentTarget;\n      var action = this.action(trigger) || 'copy';\n      var text = actions_default({\n        action: action,\n        container: this.container,\n        target: this.target(trigger),\n        text: this.text(trigger)\n      }); // Fires an event based on the copy operation result.\n\n      this.emit(text ? 'success' : 'error', {\n        action: action,\n        text: text,\n        trigger: trigger,\n        clearSelection: function clearSelection() {\n          if (trigger) {\n            trigger.focus();\n          }\n\n          window.getSelection().removeAllRanges();\n        }\n      });\n    }\n    /**\n     * Default `action` lookup function.\n     * @param {Element} trigger\n     */\n\n  }, {\n    key: \"defaultAction\",\n    value: function defaultAction(trigger) {\n      return getAttributeValue('action', trigger);\n    }\n    /**\n     * Default `target` lookup function.\n     * @param {Element} trigger\n     */\n\n  }, {\n    key: \"defaultTarget\",\n    value: function defaultTarget(trigger) {\n      var selector = getAttributeValue('target', trigger);\n\n      if (selector) {\n        return document.querySelector(selector);\n      }\n    }\n    /**\n     * Allow fire programmatically a copy action\n     * @param {String|HTMLElement} target\n     * @param {Object} options\n     * @returns Text copied.\n     */\n\n  }, {\n    key: \"defaultText\",\n\n    /**\n     * Default `text` lookup function.\n     * @param {Element} trigger\n     */\n    value: function defaultText(trigger) {\n      return getAttributeValue('text', trigger);\n    }\n    /**\n     * Destroy lifecycle.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function destroy() {\n      this.listener.destroy();\n    }\n  }], [{\n    key: \"copy\",\n    value: function copy(target) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        container: document.body\n      };\n      return actions_copy(target, options);\n    }\n    /**\n     * Allow fire programmatically a cut action\n     * @param {String|HTMLElement} target\n     * @returns Text cutted.\n     */\n\n  }, {\n    key: \"cut\",\n    value: function cut(target) {\n      return actions_cut(target);\n    }\n    /**\n     * Returns the support of the given action, or all actions if no action is\n     * given.\n     * @param {String} [action]\n     */\n\n  }, {\n    key: \"isSupported\",\n    value: function isSupported() {\n      var action = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : ['copy', 'cut'];\n      var actions = typeof action === 'string' ? [action] : action;\n      var support = !!document.queryCommandSupported;\n      actions.forEach(function (action) {\n        support = support && !!document.queryCommandSupported(action);\n      });\n      return support;\n    }\n  }]);\n\n  return Clipboard;\n}((tiny_emitter_default()));\n\n/* harmony default export */ var clipboard = (Clipboard);\n\n/***/ }),\n\n/***/ 828:\n/***/ (function(module) {\n\nvar DOCUMENT_NODE_TYPE = 9;\n\n/**\n * A polyfill for Element.matches()\n */\nif (typeof Element !== 'undefined' && !Element.prototype.matches) {\n    var proto = Element.prototype;\n\n    proto.matches = proto.matchesSelector ||\n                    proto.mozMatchesSelector ||\n                    proto.msMatchesSelector ||\n                    proto.oMatchesSelector ||\n                    proto.webkitMatchesSelector;\n}\n\n/**\n * Finds the closest parent that matches a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @return {Function}\n */\nfunction closest (element, selector) {\n    while (element && element.nodeType !== DOCUMENT_NODE_TYPE) {\n        if (typeof element.matches === 'function' &&\n            element.matches(selector)) {\n          return element;\n        }\n        element = element.parentNode;\n    }\n}\n\nmodule.exports = closest;\n\n\n/***/ }),\n\n/***/ 438:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar closest = __webpack_require__(828);\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction _delegate(element, selector, type, callback, useCapture) {\n    var listenerFn = listener.apply(this, arguments);\n\n    element.addEventListener(type, listenerFn, useCapture);\n\n    return {\n        destroy: function() {\n            element.removeEventListener(type, listenerFn, useCapture);\n        }\n    }\n}\n\n/**\n * Delegates event to a selector.\n *\n * @param {Element|String|Array} [elements]\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @param {Boolean} useCapture\n * @return {Object}\n */\nfunction delegate(elements, selector, type, callback, useCapture) {\n    // Handle the regular Element usage\n    if (typeof elements.addEventListener === 'function') {\n        return _delegate.apply(null, arguments);\n    }\n\n    // Handle Element-less usage, it defaults to global delegation\n    if (typeof type === 'function') {\n        // Use `document` as the first parameter, then apply arguments\n        // This is a short way to .unshift `arguments` without running into deoptimizations\n        return _delegate.bind(null, document).apply(null, arguments);\n    }\n\n    // Handle Selector-based usage\n    if (typeof elements === 'string') {\n        elements = document.querySelectorAll(elements);\n    }\n\n    // Handle Array-like based usage\n    return Array.prototype.map.call(elements, function (element) {\n        return _delegate(element, selector, type, callback, useCapture);\n    });\n}\n\n/**\n * Finds closest match and invokes callback.\n *\n * @param {Element} element\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Function}\n */\nfunction listener(element, selector, type, callback) {\n    return function(e) {\n        e.delegateTarget = closest(e.target, selector);\n\n        if (e.delegateTarget) {\n            callback.call(element, e);\n        }\n    }\n}\n\nmodule.exports = delegate;\n\n\n/***/ }),\n\n/***/ 879:\n/***/ (function(__unused_webpack_module, exports) {\n\n/**\n * Check if argument is a HTML element.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.node = function(value) {\n    return value !== undefined\n        && value instanceof HTMLElement\n        && value.nodeType === 1;\n};\n\n/**\n * Check if argument is a list of HTML elements.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.nodeList = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return value !== undefined\n        && (type === '[object NodeList]' || type === '[object HTMLCollection]')\n        && ('length' in value)\n        && (value.length === 0 || exports.node(value[0]));\n};\n\n/**\n * Check if argument is a string.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.string = function(value) {\n    return typeof value === 'string'\n        || value instanceof String;\n};\n\n/**\n * Check if argument is a function.\n *\n * @param {Object} value\n * @return {Boolean}\n */\nexports.fn = function(value) {\n    var type = Object.prototype.toString.call(value);\n\n    return type === '[object Function]';\n};\n\n\n/***/ }),\n\n/***/ 370:\n/***/ (function(module, __unused_webpack_exports, __webpack_require__) {\n\nvar is = __webpack_require__(879);\nvar delegate = __webpack_require__(438);\n\n/**\n * Validates all params and calls the right\n * listener function based on its target type.\n *\n * @param {String|HTMLElement|HTMLCollection|NodeList} target\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listen(target, type, callback) {\n    if (!target && !type && !callback) {\n        throw new Error('Missing required arguments');\n    }\n\n    if (!is.string(type)) {\n        throw new TypeError('Second argument must be a String');\n    }\n\n    if (!is.fn(callback)) {\n        throw new TypeError('Third argument must be a Function');\n    }\n\n    if (is.node(target)) {\n        return listenNode(target, type, callback);\n    }\n    else if (is.nodeList(target)) {\n        return listenNodeList(target, type, callback);\n    }\n    else if (is.string(target)) {\n        return listenSelector(target, type, callback);\n    }\n    else {\n        throw new TypeError('First argument must be a String, HTMLElement, HTMLCollection, or NodeList');\n    }\n}\n\n/**\n * Adds an event listener to a HTML element\n * and returns a remove listener function.\n *\n * @param {HTMLElement} node\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNode(node, type, callback) {\n    node.addEventListener(type, callback);\n\n    return {\n        destroy: function() {\n            node.removeEventListener(type, callback);\n        }\n    }\n}\n\n/**\n * Add an event listener to a list of HTML elements\n * and returns a remove listener function.\n *\n * @param {NodeList|HTMLCollection} nodeList\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenNodeList(nodeList, type, callback) {\n    Array.prototype.forEach.call(nodeList, function(node) {\n        node.addEventListener(type, callback);\n    });\n\n    return {\n        destroy: function() {\n            Array.prototype.forEach.call(nodeList, function(node) {\n                node.removeEventListener(type, callback);\n            });\n        }\n    }\n}\n\n/**\n * Add an event listener to a selector\n * and returns a remove listener function.\n *\n * @param {String} selector\n * @param {String} type\n * @param {Function} callback\n * @return {Object}\n */\nfunction listenSelector(selector, type, callback) {\n    return delegate(document.body, selector, type, callback);\n}\n\nmodule.exports = listen;\n\n\n/***/ }),\n\n/***/ 817:\n/***/ (function(module) {\n\nfunction select(element) {\n    var selectedText;\n\n    if (element.nodeName === 'SELECT') {\n        element.focus();\n\n        selectedText = element.value;\n    }\n    else if (element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n        var isReadOnly = element.hasAttribute('readonly');\n\n        if (!isReadOnly) {\n            element.setAttribute('readonly', '');\n        }\n\n        element.select();\n        element.setSelectionRange(0, element.value.length);\n\n        if (!isReadOnly) {\n            element.removeAttribute('readonly');\n        }\n\n        selectedText = element.value;\n    }\n    else {\n        if (element.hasAttribute('contenteditable')) {\n            element.focus();\n        }\n\n        var selection = window.getSelection();\n        var range = document.createRange();\n\n        range.selectNodeContents(element);\n        selection.removeAllRanges();\n        selection.addRange(range);\n\n        selectedText = selection.toString();\n    }\n\n    return selectedText;\n}\n\nmodule.exports = select;\n\n\n/***/ }),\n\n/***/ 279:\n/***/ (function(module) {\n\nfunction E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(__webpack_module_cache__[moduleId]) {\n/******/ \t\t\treturn __webpack_module_cache__[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t!function() {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__webpack_require__.n = function(module) {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\tfunction() { return module['default']; } :\n/******/ \t\t\t\tfunction() { return module; };\n/******/ \t\t\t__webpack_require__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t!function() {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__webpack_require__.d = function(exports, definition) {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t}();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t!function() {\n/******/ \t\t__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }\n/******/ \t}();\n/******/ \t\n/************************************************************************/\n/******/ \t// module exports must be returned from runtime so entry inlining is disabled\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(686);\n/******/ })()\n.default;\n});", "export * from \"./enums.js\";\nexport * from \"./modifiers/index.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport { popperGenerator, detectOverflow, createPopper as createPopperBase } from \"./createPopper.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper } from \"./popper.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\";", "export var top = 'top';\nexport var bottom = 'bottom';\nexport var right = 'right';\nexport var left = 'left';\nexport var auto = 'auto';\nexport var basePlacements = [top, bottom, right, left];\nexport var start = 'start';\nexport var end = 'end';\nexport var clippingParents = 'clippingParents';\nexport var viewport = 'viewport';\nexport var popper = 'popper';\nexport var reference = 'reference';\nexport var variationPlacements = /*#__PURE__*/basePlacements.reduce(function (acc, placement) {\n  return acc.concat([placement + \"-\" + start, placement + \"-\" + end]);\n}, []);\nexport var placements = /*#__PURE__*/[].concat(basePlacements, [auto]).reduce(function (acc, placement) {\n  return acc.concat([placement, placement + \"-\" + start, placement + \"-\" + end]);\n}, []); // modifiers that need to read the DOM\n\nexport var beforeRead = 'beforeRead';\nexport var read = 'read';\nexport var afterRead = 'afterRead'; // pure-logic modifiers\n\nexport var beforeMain = 'beforeMain';\nexport var main = 'main';\nexport var afterMain = 'afterMain'; // modifier with the purpose to write to the DOM (or write into a framework state)\n\nexport var beforeWrite = 'beforeWrite';\nexport var write = 'write';\nexport var afterWrite = 'afterWrite';\nexport var modifierPhases = [beforeRead, read, afterRead, beforeMain, main, afterMain, beforeWrite, write, afterWrite];", "export default function getNodeName(element) {\n  return element ? (element.nodeName || '').toLowerCase() : null;\n}", "export default function getWindow(node) {\n  if (node == null) {\n    return window;\n  }\n\n  if (node.toString() !== '[object Window]') {\n    var ownerDocument = node.ownerDocument;\n    return ownerDocument ? ownerDocument.defaultView || window : window;\n  }\n\n  return node;\n}", "import getWindow from \"./getWindow.js\";\n\nfunction isElement(node) {\n  var OwnElement = getWindow(node).Element;\n  return node instanceof OwnElement || node instanceof Element;\n}\n\nfunction isHTMLElement(node) {\n  var OwnElement = getWindow(node).HTMLElement;\n  return node instanceof OwnElement || node instanceof HTMLElement;\n}\n\nfunction isShadowRoot(node) {\n  // IE 11 has no ShadowRoot\n  if (typeof ShadowRoot === 'undefined') {\n    return false;\n  }\n\n  var OwnElement = getWindow(node).ShadowRoot;\n  return node instanceof OwnElement || node instanceof ShadowRoot;\n}\n\nexport { isElement, isHTMLElement, isShadowRoot };", "import getNodeName from \"../dom-utils/getNodeName.js\";\nimport { isHTMLElement } from \"../dom-utils/instanceOf.js\"; // This modifier takes the styles prepared by the `computeStyles` modifier\n// and applies them to the HTMLElements such as popper and arrow\n\nfunction applyStyles(_ref) {\n  var state = _ref.state;\n  Object.keys(state.elements).forEach(function (name) {\n    var style = state.styles[name] || {};\n    var attributes = state.attributes[name] || {};\n    var element = state.elements[name]; // arrow is optional + virtual elements\n\n    if (!isHTMLElement(element) || !getNodeName(element)) {\n      return;\n    } // Flow doesn't support to extend this property, but it's the most\n    // effective way to apply styles to an HTMLElement\n    // $FlowFixMe[cannot-write]\n\n\n    Object.assign(element.style, style);\n    Object.keys(attributes).forEach(function (name) {\n      var value = attributes[name];\n\n      if (value === false) {\n        element.removeAttribute(name);\n      } else {\n        element.setAttribute(name, value === true ? '' : value);\n      }\n    });\n  });\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state;\n  var initialStyles = {\n    popper: {\n      position: state.options.strategy,\n      left: '0',\n      top: '0',\n      margin: '0'\n    },\n    arrow: {\n      position: 'absolute'\n    },\n    reference: {}\n  };\n  Object.assign(state.elements.popper.style, initialStyles.popper);\n  state.styles = initialStyles;\n\n  if (state.elements.arrow) {\n    Object.assign(state.elements.arrow.style, initialStyles.arrow);\n  }\n\n  return function () {\n    Object.keys(state.elements).forEach(function (name) {\n      var element = state.elements[name];\n      var attributes = state.attributes[name] || {};\n      var styleProperties = Object.keys(state.styles.hasOwnProperty(name) ? state.styles[name] : initialStyles[name]); // Set all values to an empty string to unset them\n\n      var style = styleProperties.reduce(function (style, property) {\n        style[property] = '';\n        return style;\n      }, {}); // arrow is optional + virtual elements\n\n      if (!isHTMLElement(element) || !getNodeName(element)) {\n        return;\n      }\n\n      Object.assign(element.style, style);\n      Object.keys(attributes).forEach(function (attribute) {\n        element.removeAttribute(attribute);\n      });\n    });\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'applyStyles',\n  enabled: true,\n  phase: 'write',\n  fn: applyStyles,\n  effect: effect,\n  requires: ['computeStyles']\n};", "import { auto } from \"../enums.js\";\nexport default function getBasePlacement(placement) {\n  return placement.split('-')[0];\n}", "export var max = Math.max;\nexport var min = Math.min;\nexport var round = Math.round;", "export default function getUAString() {\n  var uaData = navigator.userAgentData;\n\n  if (uaData != null && uaData.brands && Array.isArray(uaData.brands)) {\n    return uaData.brands.map(function (item) {\n      return item.brand + \"/\" + item.version;\n    }).join(' ');\n  }\n\n  return navigator.userAgent;\n}", "import getUAString from \"../utils/userAgent.js\";\nexport default function isLayoutViewport() {\n  return !/^((?!chrome|android).)*safari/i.test(getUAString());\n}", "import { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport { round } from \"../utils/math.js\";\nimport getWindow from \"./getWindow.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getBoundingClientRect(element, includeScale, isFixedStrategy) {\n  if (includeScale === void 0) {\n    includeScale = false;\n  }\n\n  if (isFixedStrategy === void 0) {\n    isFixedStrategy = false;\n  }\n\n  var clientRect = element.getBoundingClientRect();\n  var scaleX = 1;\n  var scaleY = 1;\n\n  if (includeScale && isHTMLElement(element)) {\n    scaleX = element.offsetWidth > 0 ? round(clientRect.width) / element.offsetWidth || 1 : 1;\n    scaleY = element.offsetHeight > 0 ? round(clientRect.height) / element.offsetHeight || 1 : 1;\n  }\n\n  var _ref = isElement(element) ? getWindow(element) : window,\n      visualViewport = _ref.visualViewport;\n\n  var addVisualOffsets = !isLayoutViewport() && isFixedStrategy;\n  var x = (clientRect.left + (addVisualOffsets && visualViewport ? visualViewport.offsetLeft : 0)) / scaleX;\n  var y = (clientRect.top + (addVisualOffsets && visualViewport ? visualViewport.offsetTop : 0)) / scaleY;\n  var width = clientRect.width / scaleX;\n  var height = clientRect.height / scaleY;\n  return {\n    width: width,\n    height: height,\n    top: y,\n    right: x + width,\n    bottom: y + height,\n    left: x,\n    x: x,\n    y: y\n  };\n}", "import getBoundingClientRect from \"./getBoundingClientRect.js\"; // Returns the layout rect of an element relative to its offsetParent. Layout\n// means it doesn't take into account transforms.\n\nexport default function getLayoutRect(element) {\n  var clientRect = getBoundingClientRect(element); // Use the clientRect sizes if it's not been transformed.\n  // Fixes https://github.com/popperjs/popper-core/issues/1223\n\n  var width = element.offsetWidth;\n  var height = element.offsetHeight;\n\n  if (Math.abs(clientRect.width - width) <= 1) {\n    width = clientRect.width;\n  }\n\n  if (Math.abs(clientRect.height - height) <= 1) {\n    height = clientRect.height;\n  }\n\n  return {\n    x: element.offsetLeft,\n    y: element.offsetTop,\n    width: width,\n    height: height\n  };\n}", "import { isShadowRoot } from \"./instanceOf.js\";\nexport default function contains(parent, child) {\n  var rootNode = child.getRootNode && child.getRootNode(); // First, attempt with faster native method\n\n  if (parent.contains(child)) {\n    return true;\n  } // then fallback to custom implementation with Shadow DOM support\n  else if (rootNode && isShadowRoot(rootNode)) {\n      var next = child;\n\n      do {\n        if (next && parent.isSameNode(next)) {\n          return true;\n        } // $FlowFixMe[prop-missing]: need a better way to handle this...\n\n\n        next = next.parentNode || next.host;\n      } while (next);\n    } // Give up, the result is false\n\n\n  return false;\n}", "import getWindow from \"./getWindow.js\";\nexport default function getComputedStyle(element) {\n  return getWindow(element).getComputedStyle(element);\n}", "import getNodeName from \"./getNodeName.js\";\nexport default function isTableElement(element) {\n  return ['table', 'td', 'th'].indexOf(getNodeName(element)) >= 0;\n}", "import { isElement } from \"./instanceOf.js\";\nexport default function getDocumentElement(element) {\n  // $FlowFixMe[incompatible-return]: assume body is always available\n  return ((isElement(element) ? element.ownerDocument : // $FlowFixMe[prop-missing]\n  element.document) || window.document).documentElement;\n}", "import getNodeName from \"./getNodeName.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport { isShadowRoot } from \"./instanceOf.js\";\nexport default function getParentNode(element) {\n  if (getNodeName(element) === 'html') {\n    return element;\n  }\n\n  return (// this is a quicker (but less type safe) way to save quite some bytes from the bundle\n    // $FlowFixMe[incompatible-return]\n    // $FlowFixMe[prop-missing]\n    element.assignedSlot || // step into the shadow DOM of the parent of a slotted node\n    element.parentNode || ( // DOM Element detected\n    isShadowRoot(element) ? element.host : null) || // ShadowRoot detected\n    // $FlowFixMe[incompatible-call]: HTMLElement is a Node\n    getDocumentElement(element) // fallback\n\n  );\n}", "import getWindow from \"./getWindow.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isHTMLElement, isShadowRoot } from \"./instanceOf.js\";\nimport isTableElement from \"./isTableElement.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getUAString from \"../utils/userAgent.js\";\n\nfunction getTrueOffsetParent(element) {\n  if (!isHTMLElement(element) || // https://github.com/popperjs/popper-core/issues/837\n  getComputedStyle(element).position === 'fixed') {\n    return null;\n  }\n\n  return element.offsetParent;\n} // `.offsetParent` reports `null` for fixed elements, while absolute elements\n// return the containing block\n\n\nfunction getContainingBlock(element) {\n  var isFirefox = /firefox/i.test(getUAString());\n  var isIE = /Trident/i.test(getUAString());\n\n  if (isIE && isHTMLElement(element)) {\n    // In IE 9, 10 and 11 fixed elements containing block is always established by the viewport\n    var elementCss = getComputedStyle(element);\n\n    if (elementCss.position === 'fixed') {\n      return null;\n    }\n  }\n\n  var currentNode = getParentNode(element);\n\n  if (isShadowRoot(currentNode)) {\n    currentNode = currentNode.host;\n  }\n\n  while (isHTMLElement(currentNode) && ['html', 'body'].indexOf(getNodeName(currentNode)) < 0) {\n    var css = getComputedStyle(currentNode); // This is non-exhaustive but covers the most common CSS properties that\n    // create a containing block.\n    // https://developer.mozilla.org/en-US/docs/Web/CSS/Containing_block#identifying_the_containing_block\n\n    if (css.transform !== 'none' || css.perspective !== 'none' || css.contain === 'paint' || ['transform', 'perspective'].indexOf(css.willChange) !== -1 || isFirefox && css.willChange === 'filter' || isFirefox && css.filter && css.filter !== 'none') {\n      return currentNode;\n    } else {\n      currentNode = currentNode.parentNode;\n    }\n  }\n\n  return null;\n} // Gets the closest ancestor positioned element. Handles some edge cases,\n// such as table ancestors and cross browser bugs.\n\n\nexport default function getOffsetParent(element) {\n  var window = getWindow(element);\n  var offsetParent = getTrueOffsetParent(element);\n\n  while (offsetParent && isTableElement(offsetParent) && getComputedStyle(offsetParent).position === 'static') {\n    offsetParent = getTrueOffsetParent(offsetParent);\n  }\n\n  if (offsetParent && (getNodeName(offsetParent) === 'html' || getNodeName(offsetParent) === 'body' && getComputedStyle(offsetParent).position === 'static')) {\n    return window;\n  }\n\n  return offsetParent || getContainingBlock(element) || window;\n}", "export default function getMainAxisFromPlacement(placement) {\n  return ['top', 'bottom'].indexOf(placement) >= 0 ? 'x' : 'y';\n}", "import { max as mathMax, min as mathMin } from \"./math.js\";\nexport function within(min, value, max) {\n  return mathMax(min, mathMin(value, max));\n}\nexport function withinMaxClamp(min, value, max) {\n  var v = within(min, value, max);\n  return v > max ? max : v;\n}", "export default function getFreshSideObject() {\n  return {\n    top: 0,\n    right: 0,\n    bottom: 0,\n    left: 0\n  };\n}", "import getFreshSideObject from \"./getFreshSideObject.js\";\nexport default function mergePaddingObject(paddingObject) {\n  return Object.assign({}, getFreshSideObject(), paddingObject);\n}", "export default function expandToHashMap(value, keys) {\n  return keys.reduce(function (hashMap, key) {\n    hashMap[key] = value;\n    return hashMap;\n  }, {});\n}", "import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport contains from \"../dom-utils/contains.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport { within } from \"../utils/within.js\";\nimport mergePaddingObject from \"../utils/mergePaddingObject.js\";\nimport expandToHashMap from \"../utils/expandToHashMap.js\";\nimport { left, right, basePlacements, top, bottom } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar toPaddingObject = function toPaddingObject(padding, state) {\n  padding = typeof padding === 'function' ? padding(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : padding;\n  return mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n};\n\nfunction arrow(_ref) {\n  var _state$modifiersData$;\n\n  var state = _ref.state,\n      name = _ref.name,\n      options = _ref.options;\n  var arrowElement = state.elements.arrow;\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var basePlacement = getBasePlacement(state.placement);\n  var axis = getMainAxisFromPlacement(basePlacement);\n  var isVertical = [left, right].indexOf(basePlacement) >= 0;\n  var len = isVertical ? 'height' : 'width';\n\n  if (!arrowElement || !popperOffsets) {\n    return;\n  }\n\n  var paddingObject = toPaddingObject(options.padding, state);\n  var arrowRect = getLayoutRect(arrowElement);\n  var minProp = axis === 'y' ? top : left;\n  var maxProp = axis === 'y' ? bottom : right;\n  var endDiff = state.rects.reference[len] + state.rects.reference[axis] - popperOffsets[axis] - state.rects.popper[len];\n  var startDiff = popperOffsets[axis] - state.rects.reference[axis];\n  var arrowOffsetParent = getOffsetParent(arrowElement);\n  var clientSize = arrowOffsetParent ? axis === 'y' ? arrowOffsetParent.clientHeight || 0 : arrowOffsetParent.clientWidth || 0 : 0;\n  var centerToReference = endDiff / 2 - startDiff / 2; // Make sure the arrow doesn't overflow the popper if the center point is\n  // outside of the popper bounds\n\n  var min = paddingObject[minProp];\n  var max = clientSize - arrowRect[len] - paddingObject[maxProp];\n  var center = clientSize / 2 - arrowRect[len] / 2 + centerToReference;\n  var offset = within(min, center, max); // Prevents breaking syntax highlighting...\n\n  var axisProp = axis;\n  state.modifiersData[name] = (_state$modifiersData$ = {}, _state$modifiersData$[axisProp] = offset, _state$modifiersData$.centerOffset = offset - center, _state$modifiersData$);\n}\n\nfunction effect(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options;\n  var _options$element = options.element,\n      arrowElement = _options$element === void 0 ? '[data-popper-arrow]' : _options$element;\n\n  if (arrowElement == null) {\n    return;\n  } // CSS selector\n\n\n  if (typeof arrowElement === 'string') {\n    arrowElement = state.elements.popper.querySelector(arrowElement);\n\n    if (!arrowElement) {\n      return;\n    }\n  }\n\n  if (!contains(state.elements.popper, arrowElement)) {\n    return;\n  }\n\n  state.elements.arrow = arrowElement;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'arrow',\n  enabled: true,\n  phase: 'main',\n  fn: arrow,\n  effect: effect,\n  requires: ['popperOffsets'],\n  requiresIfExists: ['preventOverflow']\n};", "export default function getVariation(placement) {\n  return placement.split('-')[1];\n}", "import { top, left, right, bottom, end } from \"../enums.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport getWindow from \"../dom-utils/getWindow.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getComputedStyle from \"../dom-utils/getComputedStyle.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport { round } from \"../utils/math.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar unsetSides = {\n  top: 'auto',\n  right: 'auto',\n  bottom: 'auto',\n  left: 'auto'\n}; // Round the offsets to the nearest suitable subpixel based on the DPR.\n// Zooming can change the DPR, but it seems to report a value that will\n// cleanly divide the values into the appropriate subpixels.\n\nfunction roundOffsetsByDPR(_ref, win) {\n  var x = _ref.x,\n      y = _ref.y;\n  var dpr = win.devicePixelRatio || 1;\n  return {\n    x: round(x * dpr) / dpr || 0,\n    y: round(y * dpr) / dpr || 0\n  };\n}\n\nexport function mapToStyles(_ref2) {\n  var _Object$assign2;\n\n  var popper = _ref2.popper,\n      popperRect = _ref2.popperRect,\n      placement = _ref2.placement,\n      variation = _ref2.variation,\n      offsets = _ref2.offsets,\n      position = _ref2.position,\n      gpuAcceleration = _ref2.gpuAcceleration,\n      adaptive = _ref2.adaptive,\n      roundOffsets = _ref2.roundOffsets,\n      isFixed = _ref2.isFixed;\n  var _offsets$x = offsets.x,\n      x = _offsets$x === void 0 ? 0 : _offsets$x,\n      _offsets$y = offsets.y,\n      y = _offsets$y === void 0 ? 0 : _offsets$y;\n\n  var _ref3 = typeof roundOffsets === 'function' ? roundOffsets({\n    x: x,\n    y: y\n  }) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref3.x;\n  y = _ref3.y;\n  var hasX = offsets.hasOwnProperty('x');\n  var hasY = offsets.hasOwnProperty('y');\n  var sideX = left;\n  var sideY = top;\n  var win = window;\n\n  if (adaptive) {\n    var offsetParent = getOffsetParent(popper);\n    var heightProp = 'clientHeight';\n    var widthProp = 'clientWidth';\n\n    if (offsetParent === getWindow(popper)) {\n      offsetParent = getDocumentElement(popper);\n\n      if (getComputedStyle(offsetParent).position !== 'static' && position === 'absolute') {\n        heightProp = 'scrollHeight';\n        widthProp = 'scrollWidth';\n      }\n    } // $FlowFixMe[incompatible-cast]: force type refinement, we compare offsetParent with window above, but Flow doesn't detect it\n\n\n    offsetParent = offsetParent;\n\n    if (placement === top || (placement === left || placement === right) && variation === end) {\n      sideY = bottom;\n      var offsetY = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.height : // $FlowFixMe[prop-missing]\n      offsetParent[heightProp];\n      y -= offsetY - popperRect.height;\n      y *= gpuAcceleration ? 1 : -1;\n    }\n\n    if (placement === left || (placement === top || placement === bottom) && variation === end) {\n      sideX = right;\n      var offsetX = isFixed && offsetParent === win && win.visualViewport ? win.visualViewport.width : // $FlowFixMe[prop-missing]\n      offsetParent[widthProp];\n      x -= offsetX - popperRect.width;\n      x *= gpuAcceleration ? 1 : -1;\n    }\n  }\n\n  var commonStyles = Object.assign({\n    position: position\n  }, adaptive && unsetSides);\n\n  var _ref4 = roundOffsets === true ? roundOffsetsByDPR({\n    x: x,\n    y: y\n  }, getWindow(popper)) : {\n    x: x,\n    y: y\n  };\n\n  x = _ref4.x;\n  y = _ref4.y;\n\n  if (gpuAcceleration) {\n    var _Object$assign;\n\n    return Object.assign({}, commonStyles, (_Object$assign = {}, _Object$assign[sideY] = hasY ? '0' : '', _Object$assign[sideX] = hasX ? '0' : '', _Object$assign.transform = (win.devicePixelRatio || 1) <= 1 ? \"translate(\" + x + \"px, \" + y + \"px)\" : \"translate3d(\" + x + \"px, \" + y + \"px, 0)\", _Object$assign));\n  }\n\n  return Object.assign({}, commonStyles, (_Object$assign2 = {}, _Object$assign2[sideY] = hasY ? y + \"px\" : '', _Object$assign2[sideX] = hasX ? x + \"px\" : '', _Object$assign2.transform = '', _Object$assign2));\n}\n\nfunction computeStyles(_ref5) {\n  var state = _ref5.state,\n      options = _ref5.options;\n  var _options$gpuAccelerat = options.gpuAcceleration,\n      gpuAcceleration = _options$gpuAccelerat === void 0 ? true : _options$gpuAccelerat,\n      _options$adaptive = options.adaptive,\n      adaptive = _options$adaptive === void 0 ? true : _options$adaptive,\n      _options$roundOffsets = options.roundOffsets,\n      roundOffsets = _options$roundOffsets === void 0 ? true : _options$roundOffsets;\n  var commonStyles = {\n    placement: getBasePlacement(state.placement),\n    variation: getVariation(state.placement),\n    popper: state.elements.popper,\n    popperRect: state.rects.popper,\n    gpuAcceleration: gpuAcceleration,\n    isFixed: state.options.strategy === 'fixed'\n  };\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.styles.popper = Object.assign({}, state.styles.popper, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.popperOffsets,\n      position: state.options.strategy,\n      adaptive: adaptive,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  if (state.modifiersData.arrow != null) {\n    state.styles.arrow = Object.assign({}, state.styles.arrow, mapToStyles(Object.assign({}, commonStyles, {\n      offsets: state.modifiersData.arrow,\n      position: 'absolute',\n      adaptive: false,\n      roundOffsets: roundOffsets\n    })));\n  }\n\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-placement': state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'computeStyles',\n  enabled: true,\n  phase: 'beforeWrite',\n  fn: computeStyles,\n  data: {}\n};", "import getWindow from \"../dom-utils/getWindow.js\"; // eslint-disable-next-line import/no-unused-modules\n\nvar passive = {\n  passive: true\n};\n\nfunction effect(_ref) {\n  var state = _ref.state,\n      instance = _ref.instance,\n      options = _ref.options;\n  var _options$scroll = options.scroll,\n      scroll = _options$scroll === void 0 ? true : _options$scroll,\n      _options$resize = options.resize,\n      resize = _options$resize === void 0 ? true : _options$resize;\n  var window = getWindow(state.elements.popper);\n  var scrollParents = [].concat(state.scrollParents.reference, state.scrollParents.popper);\n\n  if (scroll) {\n    scrollParents.forEach(function (scrollParent) {\n      scrollParent.addEventListener('scroll', instance.update, passive);\n    });\n  }\n\n  if (resize) {\n    window.addEventListener('resize', instance.update, passive);\n  }\n\n  return function () {\n    if (scroll) {\n      scrollParents.forEach(function (scrollParent) {\n        scrollParent.removeEventListener('scroll', instance.update, passive);\n      });\n    }\n\n    if (resize) {\n      window.removeEventListener('resize', instance.update, passive);\n    }\n  };\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'eventListeners',\n  enabled: true,\n  phase: 'write',\n  fn: function fn() {},\n  effect: effect,\n  data: {}\n};", "var hash = {\n  left: 'right',\n  right: 'left',\n  bottom: 'top',\n  top: 'bottom'\n};\nexport default function getOppositePlacement(placement) {\n  return placement.replace(/left|right|bottom|top/g, function (matched) {\n    return hash[matched];\n  });\n}", "var hash = {\n  start: 'end',\n  end: 'start'\n};\nexport default function getOppositeVariationPlacement(placement) {\n  return placement.replace(/start|end/g, function (matched) {\n    return hash[matched];\n  });\n}", "import getWindow from \"./getWindow.js\";\nexport default function getWindowScroll(node) {\n  var win = getWindow(node);\n  var scrollLeft = win.pageXOffset;\n  var scrollTop = win.pageYOffset;\n  return {\n    scrollLeft: scrollLeft,\n    scrollTop: scrollTop\n  };\n}", "import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nexport default function getWindowScrollBarX(element) {\n  // If <html> has a CSS width greater than the viewport, then this will be\n  // incorrect for RTL.\n  // Popper 1 is broken in this case and never had a bug report so let's assume\n  // it's not an issue. I don't think anyone ever specifies width on <html>\n  // anyway.\n  // Browsers where the left scrollbar doesn't cause an issue report `0` for\n  // this (e.g. Edge 2019, IE11, Safari)\n  return getBoundingClientRect(getDocumentElement(element)).left + getWindowScroll(element).scrollLeft;\n}", "import getWindow from \"./getWindow.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport isLayoutViewport from \"./isLayoutViewport.js\";\nexport default function getViewportRect(element, strategy) {\n  var win = getWindow(element);\n  var html = getDocumentElement(element);\n  var visualViewport = win.visualViewport;\n  var width = html.clientWidth;\n  var height = html.clientHeight;\n  var x = 0;\n  var y = 0;\n\n  if (visualViewport) {\n    width = visualViewport.width;\n    height = visualViewport.height;\n    var layoutViewport = isLayoutViewport();\n\n    if (layoutViewport || !layoutViewport && strategy === 'fixed') {\n      x = visualViewport.offsetLeft;\n      y = visualViewport.offsetTop;\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x + getWindowScrollBarX(element),\n    y: y\n  };\n}", "import getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getWindowScroll from \"./getWindowScroll.js\";\nimport { max } from \"../utils/math.js\"; // Gets the entire size of the scrollable document area, even extending outside\n// of the `<html>` and `<body>` rect bounds if horizontally scrollable\n\nexport default function getDocumentRect(element) {\n  var _element$ownerDocumen;\n\n  var html = getDocumentElement(element);\n  var winScroll = getWindowScroll(element);\n  var body = (_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body;\n  var width = max(html.scrollWidth, html.clientWidth, body ? body.scrollWidth : 0, body ? body.clientWidth : 0);\n  var height = max(html.scrollHeight, html.clientHeight, body ? body.scrollHeight : 0, body ? body.clientHeight : 0);\n  var x = -winScroll.scrollLeft + getWindowScrollBarX(element);\n  var y = -winScroll.scrollTop;\n\n  if (getComputedStyle(body || html).direction === 'rtl') {\n    x += max(html.clientWidth, body ? body.clientWidth : 0) - width;\n  }\n\n  return {\n    width: width,\n    height: height,\n    x: x,\n    y: y\n  };\n}", "import getComputedStyle from \"./getComputedStyle.js\";\nexport default function isScrollParent(element) {\n  // Firefox wants us to check `-x` and `-y` variations as well\n  var _getComputedStyle = getComputedStyle(element),\n      overflow = _getComputedStyle.overflow,\n      overflowX = _getComputedStyle.overflowX,\n      overflowY = _getComputedStyle.overflowY;\n\n  return /auto|scroll|overlay|hidden/.test(overflow + overflowY + overflowX);\n}", "import getParentNode from \"./getParentNode.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nexport default function getScrollParent(node) {\n  if (['html', 'body', '#document'].indexOf(getNodeName(node)) >= 0) {\n    // $FlowFixMe[incompatible-return]: assume body is always available\n    return node.ownerDocument.body;\n  }\n\n  if (isHTMLElement(node) && isScrollParent(node)) {\n    return node;\n  }\n\n  return getScrollParent(getParentNode(node));\n}", "import getScrollParent from \"./getScrollParent.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport getWindow from \"./getWindow.js\";\nimport isScrollParent from \"./isScrollParent.js\";\n/*\ngiven a DOM element, return the list of all scroll parents, up the list of ancesors\nuntil we get to the top window object. This list is what we attach scroll listeners\nto, because if any of these parent elements scroll, we'll need to re-calculate the\nreference element's position.\n*/\n\nexport default function listScrollParents(element, list) {\n  var _element$ownerDocumen;\n\n  if (list === void 0) {\n    list = [];\n  }\n\n  var scrollParent = getScrollParent(element);\n  var isBody = scrollParent === ((_element$ownerDocumen = element.ownerDocument) == null ? void 0 : _element$ownerDocumen.body);\n  var win = getWindow(scrollParent);\n  var target = isBody ? [win].concat(win.visualViewport || [], isScrollParent(scrollParent) ? scrollParent : []) : scrollParent;\n  var updatedList = list.concat(target);\n  return isBody ? updatedList : // $FlowFixMe[incompatible-call]: isBody tells us target will be an HTMLElement here\n  updatedList.concat(listScrollParents(getParentNode(target)));\n}", "export default function rectToClientRect(rect) {\n  return Object.assign({}, rect, {\n    left: rect.x,\n    top: rect.y,\n    right: rect.x + rect.width,\n    bottom: rect.y + rect.height\n  });\n}", "import { viewport } from \"../enums.js\";\nimport getViewportRect from \"./getViewportRect.js\";\nimport getDocumentRect from \"./getDocumentRect.js\";\nimport listScrollParents from \"./listScrollParents.js\";\nimport getOffsetParent from \"./getOffsetParent.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport getComputedStyle from \"./getComputedStyle.js\";\nimport { isElement, isHTMLElement } from \"./instanceOf.js\";\nimport getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getParentNode from \"./getParentNode.js\";\nimport contains from \"./contains.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport rectToClientRect from \"../utils/rectToClientRect.js\";\nimport { max, min } from \"../utils/math.js\";\n\nfunction getInnerBoundingClientRect(element, strategy) {\n  var rect = getBoundingClientRect(element, false, strategy === 'fixed');\n  rect.top = rect.top + element.clientTop;\n  rect.left = rect.left + element.clientLeft;\n  rect.bottom = rect.top + element.clientHeight;\n  rect.right = rect.left + element.clientWidth;\n  rect.width = element.clientWidth;\n  rect.height = element.clientHeight;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\n\nfunction getClientRectFromMixedType(element, clippingParent, strategy) {\n  return clippingParent === viewport ? rectToClientRect(getViewportRect(element, strategy)) : isElement(clippingParent) ? getInnerBoundingClientRect(clippingParent, strategy) : rectToClientRect(getDocumentRect(getDocumentElement(element)));\n} // A \"clipping parent\" is an overflowable container with the characteristic of\n// clipping (or hiding) overflowing elements with a position different from\n// `initial`\n\n\nfunction getClippingParents(element) {\n  var clippingParents = listScrollParents(getParentNode(element));\n  var canEscapeClipping = ['absolute', 'fixed'].indexOf(getComputedStyle(element).position) >= 0;\n  var clipperElement = canEscapeClipping && isHTMLElement(element) ? getOffsetParent(element) : element;\n\n  if (!isElement(clipperElement)) {\n    return [];\n  } // $FlowFixMe[incompatible-return]: https://github.com/facebook/flow/issues/1414\n\n\n  return clippingParents.filter(function (clippingParent) {\n    return isElement(clippingParent) && contains(clippingParent, clipperElement) && getNodeName(clippingParent) !== 'body';\n  });\n} // Gets the maximum area that the element is visible in due to any number of\n// clipping parents\n\n\nexport default function getClippingRect(element, boundary, rootBoundary, strategy) {\n  var mainClippingParents = boundary === 'clippingParents' ? getClippingParents(element) : [].concat(boundary);\n  var clippingParents = [].concat(mainClippingParents, [rootBoundary]);\n  var firstClippingParent = clippingParents[0];\n  var clippingRect = clippingParents.reduce(function (accRect, clippingParent) {\n    var rect = getClientRectFromMixedType(element, clippingParent, strategy);\n    accRect.top = max(rect.top, accRect.top);\n    accRect.right = min(rect.right, accRect.right);\n    accRect.bottom = min(rect.bottom, accRect.bottom);\n    accRect.left = max(rect.left, accRect.left);\n    return accRect;\n  }, getClientRectFromMixedType(element, firstClippingParent, strategy));\n  clippingRect.width = clippingRect.right - clippingRect.left;\n  clippingRect.height = clippingRect.bottom - clippingRect.top;\n  clippingRect.x = clippingRect.left;\n  clippingRect.y = clippingRect.top;\n  return clippingRect;\n}", "import getBasePlacement from \"./getBasePlacement.js\";\nimport getVariation from \"./getVariation.js\";\nimport getMainAxisFromPlacement from \"./getMainAxisFromPlacement.js\";\nimport { top, right, bottom, left, start, end } from \"../enums.js\";\nexport default function computeOffsets(_ref) {\n  var reference = _ref.reference,\n      element = _ref.element,\n      placement = _ref.placement;\n  var basePlacement = placement ? getBasePlacement(placement) : null;\n  var variation = placement ? getVariation(placement) : null;\n  var commonX = reference.x + reference.width / 2 - element.width / 2;\n  var commonY = reference.y + reference.height / 2 - element.height / 2;\n  var offsets;\n\n  switch (basePlacement) {\n    case top:\n      offsets = {\n        x: commonX,\n        y: reference.y - element.height\n      };\n      break;\n\n    case bottom:\n      offsets = {\n        x: commonX,\n        y: reference.y + reference.height\n      };\n      break;\n\n    case right:\n      offsets = {\n        x: reference.x + reference.width,\n        y: commonY\n      };\n      break;\n\n    case left:\n      offsets = {\n        x: reference.x - element.width,\n        y: commonY\n      };\n      break;\n\n    default:\n      offsets = {\n        x: reference.x,\n        y: reference.y\n      };\n  }\n\n  var mainAxis = basePlacement ? getMainAxisFromPlacement(basePlacement) : null;\n\n  if (mainAxis != null) {\n    var len = mainAxis === 'y' ? 'height' : 'width';\n\n    switch (variation) {\n      case start:\n        offsets[mainAxis] = offsets[mainAxis] - (reference[len] / 2 - element[len] / 2);\n        break;\n\n      case end:\n        offsets[mainAxis] = offsets[mainAxis] + (reference[len] / 2 - element[len] / 2);\n        break;\n\n      default:\n    }\n  }\n\n  return offsets;\n}", "import getClippingRect from \"../dom-utils/getClippingRect.js\";\nimport getDocumentElement from \"../dom-utils/getDocumentElement.js\";\nimport getBoundingClientRect from \"../dom-utils/getBoundingClientRect.js\";\nimport computeOffsets from \"./computeOffsets.js\";\nimport rectToClientRect from \"./rectToClientRect.js\";\nimport { clippingParents, reference, popper, bottom, top, right, basePlacements, viewport } from \"../enums.js\";\nimport { isElement } from \"../dom-utils/instanceOf.js\";\nimport mergePaddingObject from \"./mergePaddingObject.js\";\nimport expandToHashMap from \"./expandToHashMap.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport default function detectOverflow(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      _options$placement = _options.placement,\n      placement = _options$placement === void 0 ? state.placement : _options$placement,\n      _options$strategy = _options.strategy,\n      strategy = _options$strategy === void 0 ? state.strategy : _options$strategy,\n      _options$boundary = _options.boundary,\n      boundary = _options$boundary === void 0 ? clippingParents : _options$boundary,\n      _options$rootBoundary = _options.rootBoundary,\n      rootBoundary = _options$rootBoundary === void 0 ? viewport : _options$rootBoundary,\n      _options$elementConte = _options.elementContext,\n      elementContext = _options$elementConte === void 0 ? popper : _options$elementConte,\n      _options$altBoundary = _options.altBoundary,\n      altBoundary = _options$altBoundary === void 0 ? false : _options$altBoundary,\n      _options$padding = _options.padding,\n      padding = _options$padding === void 0 ? 0 : _options$padding;\n  var paddingObject = mergePaddingObject(typeof padding !== 'number' ? padding : expandToHashMap(padding, basePlacements));\n  var altContext = elementContext === popper ? reference : popper;\n  var popperRect = state.rects.popper;\n  var element = state.elements[altBoundary ? altContext : elementContext];\n  var clippingClientRect = getClippingRect(isElement(element) ? element : element.contextElement || getDocumentElement(state.elements.popper), boundary, rootBoundary, strategy);\n  var referenceClientRect = getBoundingClientRect(state.elements.reference);\n  var popperOffsets = computeOffsets({\n    reference: referenceClientRect,\n    element: popperRect,\n    strategy: 'absolute',\n    placement: placement\n  });\n  var popperClientRect = rectToClientRect(Object.assign({}, popperRect, popperOffsets));\n  var elementClientRect = elementContext === popper ? popperClientRect : referenceClientRect; // positive = overflowing the clipping rect\n  // 0 or negative = within the clipping rect\n\n  var overflowOffsets = {\n    top: clippingClientRect.top - elementClientRect.top + paddingObject.top,\n    bottom: elementClientRect.bottom - clippingClientRect.bottom + paddingObject.bottom,\n    left: clippingClientRect.left - elementClientRect.left + paddingObject.left,\n    right: elementClientRect.right - clippingClientRect.right + paddingObject.right\n  };\n  var offsetData = state.modifiersData.offset; // Offsets can be applied only to the popper element\n\n  if (elementContext === popper && offsetData) {\n    var offset = offsetData[placement];\n    Object.keys(overflowOffsets).forEach(function (key) {\n      var multiply = [right, bottom].indexOf(key) >= 0 ? 1 : -1;\n      var axis = [top, bottom].indexOf(key) >= 0 ? 'y' : 'x';\n      overflowOffsets[key] += offset[axis] * multiply;\n    });\n  }\n\n  return overflowOffsets;\n}", "import getVariation from \"./getVariation.js\";\nimport { variationPlacements, basePlacements, placements as allPlacements } from \"../enums.js\";\nimport detectOverflow from \"./detectOverflow.js\";\nimport getBasePlacement from \"./getBasePlacement.js\";\nexport default function computeAutoPlacement(state, options) {\n  if (options === void 0) {\n    options = {};\n  }\n\n  var _options = options,\n      placement = _options.placement,\n      boundary = _options.boundary,\n      rootBoundary = _options.rootBoundary,\n      padding = _options.padding,\n      flipVariations = _options.flipVariations,\n      _options$allowedAutoP = _options.allowedAutoPlacements,\n      allowedAutoPlacements = _options$allowedAutoP === void 0 ? allPlacements : _options$allowedAutoP;\n  var variation = getVariation(placement);\n  var placements = variation ? flipVariations ? variationPlacements : variationPlacements.filter(function (placement) {\n    return getVariation(placement) === variation;\n  }) : basePlacements;\n  var allowedPlacements = placements.filter(function (placement) {\n    return allowedAutoPlacements.indexOf(placement) >= 0;\n  });\n\n  if (allowedPlacements.length === 0) {\n    allowedPlacements = placements;\n  } // $FlowFixMe[incompatible-type]: Flow seems to have problems with two array unions...\n\n\n  var overflows = allowedPlacements.reduce(function (acc, placement) {\n    acc[placement] = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding\n    })[getBasePlacement(placement)];\n    return acc;\n  }, {});\n  return Object.keys(overflows).sort(function (a, b) {\n    return overflows[a] - overflows[b];\n  });\n}", "import getOppositePlacement from \"../utils/getOppositePlacement.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getOppositeVariationPlacement from \"../utils/getOppositeVariationPlacement.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport computeAutoPlacement from \"../utils/computeAutoPlacement.js\";\nimport { bottom, top, start, right, left, auto } from \"../enums.js\";\nimport getVariation from \"../utils/getVariation.js\"; // eslint-disable-next-line import/no-unused-modules\n\nfunction getExpandedFallbackPlacements(placement) {\n  if (getBasePlacement(placement) === auto) {\n    return [];\n  }\n\n  var oppositePlacement = getOppositePlacement(placement);\n  return [getOppositeVariationPlacement(placement), oppositePlacement, getOppositeVariationPlacement(oppositePlacement)];\n}\n\nfunction flip(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n\n  if (state.modifiersData[name]._skip) {\n    return;\n  }\n\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? true : _options$altAxis,\n      specifiedFallbackPlacements = options.fallbackPlacements,\n      padding = options.padding,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      _options$flipVariatio = options.flipVariations,\n      flipVariations = _options$flipVariatio === void 0 ? true : _options$flipVariatio,\n      allowedAutoPlacements = options.allowedAutoPlacements;\n  var preferredPlacement = state.options.placement;\n  var basePlacement = getBasePlacement(preferredPlacement);\n  var isBasePlacement = basePlacement === preferredPlacement;\n  var fallbackPlacements = specifiedFallbackPlacements || (isBasePlacement || !flipVariations ? [getOppositePlacement(preferredPlacement)] : getExpandedFallbackPlacements(preferredPlacement));\n  var placements = [preferredPlacement].concat(fallbackPlacements).reduce(function (acc, placement) {\n    return acc.concat(getBasePlacement(placement) === auto ? computeAutoPlacement(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      padding: padding,\n      flipVariations: flipVariations,\n      allowedAutoPlacements: allowedAutoPlacements\n    }) : placement);\n  }, []);\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var checksMap = new Map();\n  var makeFallbackChecks = true;\n  var firstFittingPlacement = placements[0];\n\n  for (var i = 0; i < placements.length; i++) {\n    var placement = placements[i];\n\n    var _basePlacement = getBasePlacement(placement);\n\n    var isStartVariation = getVariation(placement) === start;\n    var isVertical = [top, bottom].indexOf(_basePlacement) >= 0;\n    var len = isVertical ? 'width' : 'height';\n    var overflow = detectOverflow(state, {\n      placement: placement,\n      boundary: boundary,\n      rootBoundary: rootBoundary,\n      altBoundary: altBoundary,\n      padding: padding\n    });\n    var mainVariationSide = isVertical ? isStartVariation ? right : left : isStartVariation ? bottom : top;\n\n    if (referenceRect[len] > popperRect[len]) {\n      mainVariationSide = getOppositePlacement(mainVariationSide);\n    }\n\n    var altVariationSide = getOppositePlacement(mainVariationSide);\n    var checks = [];\n\n    if (checkMainAxis) {\n      checks.push(overflow[_basePlacement] <= 0);\n    }\n\n    if (checkAltAxis) {\n      checks.push(overflow[mainVariationSide] <= 0, overflow[altVariationSide] <= 0);\n    }\n\n    if (checks.every(function (check) {\n      return check;\n    })) {\n      firstFittingPlacement = placement;\n      makeFallbackChecks = false;\n      break;\n    }\n\n    checksMap.set(placement, checks);\n  }\n\n  if (makeFallbackChecks) {\n    // `2` may be desired in some cases \u2013 research later\n    var numberOfChecks = flipVariations ? 3 : 1;\n\n    var _loop = function _loop(_i) {\n      var fittingPlacement = placements.find(function (placement) {\n        var checks = checksMap.get(placement);\n\n        if (checks) {\n          return checks.slice(0, _i).every(function (check) {\n            return check;\n          });\n        }\n      });\n\n      if (fittingPlacement) {\n        firstFittingPlacement = fittingPlacement;\n        return \"break\";\n      }\n    };\n\n    for (var _i = numberOfChecks; _i > 0; _i--) {\n      var _ret = _loop(_i);\n\n      if (_ret === \"break\") break;\n    }\n  }\n\n  if (state.placement !== firstFittingPlacement) {\n    state.modifiersData[name]._skip = true;\n    state.placement = firstFittingPlacement;\n    state.reset = true;\n  }\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'flip',\n  enabled: true,\n  phase: 'main',\n  fn: flip,\n  requiresIfExists: ['offset'],\n  data: {\n    _skip: false\n  }\n};", "import { top, bottom, left, right } from \"../enums.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\n\nfunction getSideOffsets(overflow, rect, preventedOffsets) {\n  if (preventedOffsets === void 0) {\n    preventedOffsets = {\n      x: 0,\n      y: 0\n    };\n  }\n\n  return {\n    top: overflow.top - rect.height - preventedOffsets.y,\n    right: overflow.right - rect.width + preventedOffsets.x,\n    bottom: overflow.bottom - rect.height + preventedOffsets.y,\n    left: overflow.left - rect.width - preventedOffsets.x\n  };\n}\n\nfunction isAnySideFullyClipped(overflow) {\n  return [top, right, bottom, left].some(function (side) {\n    return overflow[side] >= 0;\n  });\n}\n\nfunction hide(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var preventedOffsets = state.modifiersData.preventOverflow;\n  var referenceOverflow = detectOverflow(state, {\n    elementContext: 'reference'\n  });\n  var popperAltOverflow = detectOverflow(state, {\n    altBoundary: true\n  });\n  var referenceClippingOffsets = getSideOffsets(referenceOverflow, referenceRect);\n  var popperEscapeOffsets = getSideOffsets(popperAltOverflow, popperRect, preventedOffsets);\n  var isReferenceHidden = isAnySideFullyClipped(referenceClippingOffsets);\n  var hasPopperEscaped = isAnySideFullyClipped(popperEscapeOffsets);\n  state.modifiersData[name] = {\n    referenceClippingOffsets: referenceClippingOffsets,\n    popperEscapeOffsets: popperEscapeOffsets,\n    isReferenceHidden: isReferenceHidden,\n    hasPopperEscaped: hasPopperEscaped\n  };\n  state.attributes.popper = Object.assign({}, state.attributes.popper, {\n    'data-popper-reference-hidden': isReferenceHidden,\n    'data-popper-escaped': hasPopperEscaped\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'hide',\n  enabled: true,\n  phase: 'main',\n  requiresIfExists: ['preventOverflow'],\n  fn: hide\n};", "import getBasePlacement from \"../utils/getBasePlacement.js\";\nimport { top, left, right, placements } from \"../enums.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport function distanceAndSkiddingToXY(placement, rects, offset) {\n  var basePlacement = getBasePlacement(placement);\n  var invertDistance = [left, top].indexOf(basePlacement) >= 0 ? -1 : 1;\n\n  var _ref = typeof offset === 'function' ? offset(Object.assign({}, rects, {\n    placement: placement\n  })) : offset,\n      skidding = _ref[0],\n      distance = _ref[1];\n\n  skidding = skidding || 0;\n  distance = (distance || 0) * invertDistance;\n  return [left, right].indexOf(basePlacement) >= 0 ? {\n    x: distance,\n    y: skidding\n  } : {\n    x: skidding,\n    y: distance\n  };\n}\n\nfunction offset(_ref2) {\n  var state = _ref2.state,\n      options = _ref2.options,\n      name = _ref2.name;\n  var _options$offset = options.offset,\n      offset = _options$offset === void 0 ? [0, 0] : _options$offset;\n  var data = placements.reduce(function (acc, placement) {\n    acc[placement] = distanceAndSkiddingToXY(placement, state.rects, offset);\n    return acc;\n  }, {});\n  var _data$state$placement = data[state.placement],\n      x = _data$state$placement.x,\n      y = _data$state$placement.y;\n\n  if (state.modifiersData.popperOffsets != null) {\n    state.modifiersData.popperOffsets.x += x;\n    state.modifiersData.popperOffsets.y += y;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'offset',\n  enabled: true,\n  phase: 'main',\n  requires: ['popperOffsets'],\n  fn: offset\n};", "import computeOffsets from \"../utils/computeOffsets.js\";\n\nfunction popperOffsets(_ref) {\n  var state = _ref.state,\n      name = _ref.name;\n  // Offsets are the actual position the popper needs to have to be\n  // properly positioned near its reference element\n  // This is the most basic placement, and will be adjusted by\n  // the modifiers in the next step\n  state.modifiersData[name] = computeOffsets({\n    reference: state.rects.reference,\n    element: state.rects.popper,\n    strategy: 'absolute',\n    placement: state.placement\n  });\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'popperOffsets',\n  enabled: true,\n  phase: 'read',\n  fn: popperOffsets,\n  data: {}\n};", "export default function getAltAxis(axis) {\n  return axis === 'x' ? 'y' : 'x';\n}", "import { top, left, right, bottom, start } from \"../enums.js\";\nimport getBasePlacement from \"../utils/getBasePlacement.js\";\nimport getMainAxisFromPlacement from \"../utils/getMainAxisFromPlacement.js\";\nimport getAltAxis from \"../utils/getAltAxis.js\";\nimport { within, withinMaxClamp } from \"../utils/within.js\";\nimport getLayoutRect from \"../dom-utils/getLayoutRect.js\";\nimport getOffsetParent from \"../dom-utils/getOffsetParent.js\";\nimport detectOverflow from \"../utils/detectOverflow.js\";\nimport getVariation from \"../utils/getVariation.js\";\nimport getFreshSideObject from \"../utils/getFreshSideObject.js\";\nimport { min as mathMin, max as mathMax } from \"../utils/math.js\";\n\nfunction preventOverflow(_ref) {\n  var state = _ref.state,\n      options = _ref.options,\n      name = _ref.name;\n  var _options$mainAxis = options.mainAxis,\n      checkMainAxis = _options$mainAxis === void 0 ? true : _options$mainAxis,\n      _options$altAxis = options.altAxis,\n      checkAltAxis = _options$altAxis === void 0 ? false : _options$altAxis,\n      boundary = options.boundary,\n      rootBoundary = options.rootBoundary,\n      altBoundary = options.altBoundary,\n      padding = options.padding,\n      _options$tether = options.tether,\n      tether = _options$tether === void 0 ? true : _options$tether,\n      _options$tetherOffset = options.tetherOffset,\n      tetherOffset = _options$tetherOffset === void 0 ? 0 : _options$tetherOffset;\n  var overflow = detectOverflow(state, {\n    boundary: boundary,\n    rootBoundary: rootBoundary,\n    padding: padding,\n    altBoundary: altBoundary\n  });\n  var basePlacement = getBasePlacement(state.placement);\n  var variation = getVariation(state.placement);\n  var isBasePlacement = !variation;\n  var mainAxis = getMainAxisFromPlacement(basePlacement);\n  var altAxis = getAltAxis(mainAxis);\n  var popperOffsets = state.modifiersData.popperOffsets;\n  var referenceRect = state.rects.reference;\n  var popperRect = state.rects.popper;\n  var tetherOffsetValue = typeof tetherOffset === 'function' ? tetherOffset(Object.assign({}, state.rects, {\n    placement: state.placement\n  })) : tetherOffset;\n  var normalizedTetherOffsetValue = typeof tetherOffsetValue === 'number' ? {\n    mainAxis: tetherOffsetValue,\n    altAxis: tetherOffsetValue\n  } : Object.assign({\n    mainAxis: 0,\n    altAxis: 0\n  }, tetherOffsetValue);\n  var offsetModifierState = state.modifiersData.offset ? state.modifiersData.offset[state.placement] : null;\n  var data = {\n    x: 0,\n    y: 0\n  };\n\n  if (!popperOffsets) {\n    return;\n  }\n\n  if (checkMainAxis) {\n    var _offsetModifierState$;\n\n    var mainSide = mainAxis === 'y' ? top : left;\n    var altSide = mainAxis === 'y' ? bottom : right;\n    var len = mainAxis === 'y' ? 'height' : 'width';\n    var offset = popperOffsets[mainAxis];\n    var min = offset + overflow[mainSide];\n    var max = offset - overflow[altSide];\n    var additive = tether ? -popperRect[len] / 2 : 0;\n    var minLen = variation === start ? referenceRect[len] : popperRect[len];\n    var maxLen = variation === start ? -popperRect[len] : -referenceRect[len]; // We need to include the arrow in the calculation so the arrow doesn't go\n    // outside the reference bounds\n\n    var arrowElement = state.elements.arrow;\n    var arrowRect = tether && arrowElement ? getLayoutRect(arrowElement) : {\n      width: 0,\n      height: 0\n    };\n    var arrowPaddingObject = state.modifiersData['arrow#persistent'] ? state.modifiersData['arrow#persistent'].padding : getFreshSideObject();\n    var arrowPaddingMin = arrowPaddingObject[mainSide];\n    var arrowPaddingMax = arrowPaddingObject[altSide]; // If the reference length is smaller than the arrow length, we don't want\n    // to include its full size in the calculation. If the reference is small\n    // and near the edge of a boundary, the popper can overflow even if the\n    // reference is not overflowing as well (e.g. virtual elements with no\n    // width or height)\n\n    var arrowLen = within(0, referenceRect[len], arrowRect[len]);\n    var minOffset = isBasePlacement ? referenceRect[len] / 2 - additive - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis : minLen - arrowLen - arrowPaddingMin - normalizedTetherOffsetValue.mainAxis;\n    var maxOffset = isBasePlacement ? -referenceRect[len] / 2 + additive + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis : maxLen + arrowLen + arrowPaddingMax + normalizedTetherOffsetValue.mainAxis;\n    var arrowOffsetParent = state.elements.arrow && getOffsetParent(state.elements.arrow);\n    var clientOffset = arrowOffsetParent ? mainAxis === 'y' ? arrowOffsetParent.clientTop || 0 : arrowOffsetParent.clientLeft || 0 : 0;\n    var offsetModifierValue = (_offsetModifierState$ = offsetModifierState == null ? void 0 : offsetModifierState[mainAxis]) != null ? _offsetModifierState$ : 0;\n    var tetherMin = offset + minOffset - offsetModifierValue - clientOffset;\n    var tetherMax = offset + maxOffset - offsetModifierValue;\n    var preventedOffset = within(tether ? mathMin(min, tetherMin) : min, offset, tether ? mathMax(max, tetherMax) : max);\n    popperOffsets[mainAxis] = preventedOffset;\n    data[mainAxis] = preventedOffset - offset;\n  }\n\n  if (checkAltAxis) {\n    var _offsetModifierState$2;\n\n    var _mainSide = mainAxis === 'x' ? top : left;\n\n    var _altSide = mainAxis === 'x' ? bottom : right;\n\n    var _offset = popperOffsets[altAxis];\n\n    var _len = altAxis === 'y' ? 'height' : 'width';\n\n    var _min = _offset + overflow[_mainSide];\n\n    var _max = _offset - overflow[_altSide];\n\n    var isOriginSide = [top, left].indexOf(basePlacement) !== -1;\n\n    var _offsetModifierValue = (_offsetModifierState$2 = offsetModifierState == null ? void 0 : offsetModifierState[altAxis]) != null ? _offsetModifierState$2 : 0;\n\n    var _tetherMin = isOriginSide ? _min : _offset - referenceRect[_len] - popperRect[_len] - _offsetModifierValue + normalizedTetherOffsetValue.altAxis;\n\n    var _tetherMax = isOriginSide ? _offset + referenceRect[_len] + popperRect[_len] - _offsetModifierValue - normalizedTetherOffsetValue.altAxis : _max;\n\n    var _preventedOffset = tether && isOriginSide ? withinMaxClamp(_tetherMin, _offset, _tetherMax) : within(tether ? _tetherMin : _min, _offset, tether ? _tetherMax : _max);\n\n    popperOffsets[altAxis] = _preventedOffset;\n    data[altAxis] = _preventedOffset - _offset;\n  }\n\n  state.modifiersData[name] = data;\n} // eslint-disable-next-line import/no-unused-modules\n\n\nexport default {\n  name: 'preventOverflow',\n  enabled: true,\n  phase: 'main',\n  fn: preventOverflow,\n  requiresIfExists: ['offset']\n};", "export default function getHTMLElementScroll(element) {\n  return {\n    scrollLeft: element.scrollLeft,\n    scrollTop: element.scrollTop\n  };\n}", "import getWindowScroll from \"./getWindowScroll.js\";\nimport getWindow from \"./getWindow.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getHTMLElementScroll from \"./getHTMLElementScroll.js\";\nexport default function getNodeScroll(node) {\n  if (node === getWindow(node) || !isHTMLElement(node)) {\n    return getWindowScroll(node);\n  } else {\n    return getHTMLElementScroll(node);\n  }\n}", "import getBoundingClientRect from \"./getBoundingClientRect.js\";\nimport getNodeScroll from \"./getNodeScroll.js\";\nimport getNodeName from \"./getNodeName.js\";\nimport { isHTMLElement } from \"./instanceOf.js\";\nimport getWindowScrollBarX from \"./getWindowScrollBarX.js\";\nimport getDocumentElement from \"./getDocumentElement.js\";\nimport isScrollParent from \"./isScrollParent.js\";\nimport { round } from \"../utils/math.js\";\n\nfunction isElementScaled(element) {\n  var rect = element.getBoundingClientRect();\n  var scaleX = round(rect.width) / element.offsetWidth || 1;\n  var scaleY = round(rect.height) / element.offsetHeight || 1;\n  return scaleX !== 1 || scaleY !== 1;\n} // Returns the composite rect of an element relative to its offsetParent.\n// Composite means it takes into account transforms as well as layout.\n\n\nexport default function getCompositeRect(elementOrVirtualElement, offsetParent, isFixed) {\n  if (isFixed === void 0) {\n    isFixed = false;\n  }\n\n  var isOffsetParentAnElement = isHTMLElement(offsetParent);\n  var offsetParentIsScaled = isHTMLElement(offsetParent) && isElementScaled(offsetParent);\n  var documentElement = getDocumentElement(offsetParent);\n  var rect = getBoundingClientRect(elementOrVirtualElement, offsetParentIsScaled, isFixed);\n  var scroll = {\n    scrollLeft: 0,\n    scrollTop: 0\n  };\n  var offsets = {\n    x: 0,\n    y: 0\n  };\n\n  if (isOffsetParentAnElement || !isOffsetParentAnElement && !isFixed) {\n    if (getNodeName(offsetParent) !== 'body' || // https://github.com/popperjs/popper-core/issues/1078\n    isScrollParent(documentElement)) {\n      scroll = getNodeScroll(offsetParent);\n    }\n\n    if (isHTMLElement(offsetParent)) {\n      offsets = getBoundingClientRect(offsetParent, true);\n      offsets.x += offsetParent.clientLeft;\n      offsets.y += offsetParent.clientTop;\n    } else if (documentElement) {\n      offsets.x = getWindowScrollBarX(documentElement);\n    }\n  }\n\n  return {\n    x: rect.left + scroll.scrollLeft - offsets.x,\n    y: rect.top + scroll.scrollTop - offsets.y,\n    width: rect.width,\n    height: rect.height\n  };\n}", "import { modifierPhases } from \"../enums.js\"; // source: https://stackoverflow.com/questions/49875255\n\nfunction order(modifiers) {\n  var map = new Map();\n  var visited = new Set();\n  var result = [];\n  modifiers.forEach(function (modifier) {\n    map.set(modifier.name, modifier);\n  }); // On visiting object, check for its dependencies and visit them recursively\n\n  function sort(modifier) {\n    visited.add(modifier.name);\n    var requires = [].concat(modifier.requires || [], modifier.requiresIfExists || []);\n    requires.forEach(function (dep) {\n      if (!visited.has(dep)) {\n        var depModifier = map.get(dep);\n\n        if (depModifier) {\n          sort(depModifier);\n        }\n      }\n    });\n    result.push(modifier);\n  }\n\n  modifiers.forEach(function (modifier) {\n    if (!visited.has(modifier.name)) {\n      // check for visited object\n      sort(modifier);\n    }\n  });\n  return result;\n}\n\nexport default function orderModifiers(modifiers) {\n  // order based on dependencies\n  var orderedModifiers = order(modifiers); // order based on phase\n\n  return modifierPhases.reduce(function (acc, phase) {\n    return acc.concat(orderedModifiers.filter(function (modifier) {\n      return modifier.phase === phase;\n    }));\n  }, []);\n}", "export default function debounce(fn) {\n  var pending;\n  return function () {\n    if (!pending) {\n      pending = new Promise(function (resolve) {\n        Promise.resolve().then(function () {\n          pending = undefined;\n          resolve(fn());\n        });\n      });\n    }\n\n    return pending;\n  };\n}", "export default function mergeByName(modifiers) {\n  var merged = modifiers.reduce(function (merged, current) {\n    var existing = merged[current.name];\n    merged[current.name] = existing ? Object.assign({}, existing, current, {\n      options: Object.assign({}, existing.options, current.options),\n      data: Object.assign({}, existing.data, current.data)\n    }) : current;\n    return merged;\n  }, {}); // IE11 does not support Object.values\n\n  return Object.keys(merged).map(function (key) {\n    return merged[key];\n  });\n}", "import getCompositeRect from \"./dom-utils/getCompositeRect.js\";\nimport getLayoutRect from \"./dom-utils/getLayoutRect.js\";\nimport listScrollParents from \"./dom-utils/listScrollParents.js\";\nimport getOffsetParent from \"./dom-utils/getOffsetParent.js\";\nimport orderModifiers from \"./utils/orderModifiers.js\";\nimport debounce from \"./utils/debounce.js\";\nimport mergeByName from \"./utils/mergeByName.js\";\nimport detectOverflow from \"./utils/detectOverflow.js\";\nimport { isElement } from \"./dom-utils/instanceOf.js\";\nvar DEFAULT_OPTIONS = {\n  placement: 'bottom',\n  modifiers: [],\n  strategy: 'absolute'\n};\n\nfunction areValidElements() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  return !args.some(function (element) {\n    return !(element && typeof element.getBoundingClientRect === 'function');\n  });\n}\n\nexport function popperGenerator(generatorOptions) {\n  if (generatorOptions === void 0) {\n    generatorOptions = {};\n  }\n\n  var _generatorOptions = generatorOptions,\n      _generatorOptions$def = _generatorOptions.defaultModifiers,\n      defaultModifiers = _generatorOptions$def === void 0 ? [] : _generatorOptions$def,\n      _generatorOptions$def2 = _generatorOptions.defaultOptions,\n      defaultOptions = _generatorOptions$def2 === void 0 ? DEFAULT_OPTIONS : _generatorOptions$def2;\n  return function createPopper(reference, popper, options) {\n    if (options === void 0) {\n      options = defaultOptions;\n    }\n\n    var state = {\n      placement: 'bottom',\n      orderedModifiers: [],\n      options: Object.assign({}, DEFAULT_OPTIONS, defaultOptions),\n      modifiersData: {},\n      elements: {\n        reference: reference,\n        popper: popper\n      },\n      attributes: {},\n      styles: {}\n    };\n    var effectCleanupFns = [];\n    var isDestroyed = false;\n    var instance = {\n      state: state,\n      setOptions: function setOptions(setOptionsAction) {\n        var options = typeof setOptionsAction === 'function' ? setOptionsAction(state.options) : setOptionsAction;\n        cleanupModifierEffects();\n        state.options = Object.assign({}, defaultOptions, state.options, options);\n        state.scrollParents = {\n          reference: isElement(reference) ? listScrollParents(reference) : reference.contextElement ? listScrollParents(reference.contextElement) : [],\n          popper: listScrollParents(popper)\n        }; // Orders the modifiers based on their dependencies and `phase`\n        // properties\n\n        var orderedModifiers = orderModifiers(mergeByName([].concat(defaultModifiers, state.options.modifiers))); // Strip out disabled modifiers\n\n        state.orderedModifiers = orderedModifiers.filter(function (m) {\n          return m.enabled;\n        });\n        runModifierEffects();\n        return instance.update();\n      },\n      // Sync update \u2013 it will always be executed, even if not necessary. This\n      // is useful for low frequency updates where sync behavior simplifies the\n      // logic.\n      // For high frequency updates (e.g. `resize` and `scroll` events), always\n      // prefer the async Popper#update method\n      forceUpdate: function forceUpdate() {\n        if (isDestroyed) {\n          return;\n        }\n\n        var _state$elements = state.elements,\n            reference = _state$elements.reference,\n            popper = _state$elements.popper; // Don't proceed if `reference` or `popper` are not valid elements\n        // anymore\n\n        if (!areValidElements(reference, popper)) {\n          return;\n        } // Store the reference and popper rects to be read by modifiers\n\n\n        state.rects = {\n          reference: getCompositeRect(reference, getOffsetParent(popper), state.options.strategy === 'fixed'),\n          popper: getLayoutRect(popper)\n        }; // Modifiers have the ability to reset the current update cycle. The\n        // most common use case for this is the `flip` modifier changing the\n        // placement, which then needs to re-run all the modifiers, because the\n        // logic was previously ran for the previous placement and is therefore\n        // stale/incorrect\n\n        state.reset = false;\n        state.placement = state.options.placement; // On each update cycle, the `modifiersData` property for each modifier\n        // is filled with the initial data specified by the modifier. This means\n        // it doesn't persist and is fresh on each update.\n        // To ensure persistent data, use `${name}#persistent`\n\n        state.orderedModifiers.forEach(function (modifier) {\n          return state.modifiersData[modifier.name] = Object.assign({}, modifier.data);\n        });\n\n        for (var index = 0; index < state.orderedModifiers.length; index++) {\n          if (state.reset === true) {\n            state.reset = false;\n            index = -1;\n            continue;\n          }\n\n          var _state$orderedModifie = state.orderedModifiers[index],\n              fn = _state$orderedModifie.fn,\n              _state$orderedModifie2 = _state$orderedModifie.options,\n              _options = _state$orderedModifie2 === void 0 ? {} : _state$orderedModifie2,\n              name = _state$orderedModifie.name;\n\n          if (typeof fn === 'function') {\n            state = fn({\n              state: state,\n              options: _options,\n              name: name,\n              instance: instance\n            }) || state;\n          }\n        }\n      },\n      // Async and optimistically optimized update \u2013 it will not be executed if\n      // not necessary (debounced to run at most once-per-tick)\n      update: debounce(function () {\n        return new Promise(function (resolve) {\n          instance.forceUpdate();\n          resolve(state);\n        });\n      }),\n      destroy: function destroy() {\n        cleanupModifierEffects();\n        isDestroyed = true;\n      }\n    };\n\n    if (!areValidElements(reference, popper)) {\n      return instance;\n    }\n\n    instance.setOptions(options).then(function (state) {\n      if (!isDestroyed && options.onFirstUpdate) {\n        options.onFirstUpdate(state);\n      }\n    }); // Modifiers have the ability to execute arbitrary code before the first\n    // update cycle runs. They will be executed in the same order as the update\n    // cycle. This is useful when a modifier adds some persistent data that\n    // other modifiers need to use, but the modifier is run after the dependent\n    // one.\n\n    function runModifierEffects() {\n      state.orderedModifiers.forEach(function (_ref) {\n        var name = _ref.name,\n            _ref$options = _ref.options,\n            options = _ref$options === void 0 ? {} : _ref$options,\n            effect = _ref.effect;\n\n        if (typeof effect === 'function') {\n          var cleanupFn = effect({\n            state: state,\n            name: name,\n            instance: instance,\n            options: options\n          });\n\n          var noopFn = function noopFn() {};\n\n          effectCleanupFns.push(cleanupFn || noopFn);\n        }\n      });\n    }\n\n    function cleanupModifierEffects() {\n      effectCleanupFns.forEach(function (fn) {\n        return fn();\n      });\n      effectCleanupFns = [];\n    }\n\n    return instance;\n  };\n}\nexport var createPopper = /*#__PURE__*/popperGenerator(); // eslint-disable-next-line import/no-unused-modules\n\nexport { detectOverflow };", "import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow };", "import { popperGenerator, detectOverflow } from \"./createPopper.js\";\nimport eventListeners from \"./modifiers/eventListeners.js\";\nimport popperOffsets from \"./modifiers/popperOffsets.js\";\nimport computeStyles from \"./modifiers/computeStyles.js\";\nimport applyStyles from \"./modifiers/applyStyles.js\";\nimport offset from \"./modifiers/offset.js\";\nimport flip from \"./modifiers/flip.js\";\nimport preventOverflow from \"./modifiers/preventOverflow.js\";\nimport arrow from \"./modifiers/arrow.js\";\nimport hide from \"./modifiers/hide.js\";\nvar defaultModifiers = [eventListeners, popperOffsets, computeStyles, applyStyles, offset, flip, preventOverflow, arrow, hide];\nvar createPopper = /*#__PURE__*/popperGenerator({\n  defaultModifiers: defaultModifiers\n}); // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper, popperGenerator, defaultModifiers, detectOverflow }; // eslint-disable-next-line import/no-unused-modules\n\nexport { createPopper as createPopperLite } from \"./popper-lite.js\"; // eslint-disable-next-line import/no-unused-modules\n\nexport * from \"./modifiers/index.js\";", "/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/data.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * Constants\n */\n\nconst elementMap = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!elementMap.has(element)) {\n      elementMap.set(element, new Map())\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    // make it clear we only want one instance per element\n    // can be removed later when multiple key/instances are fine to be used\n    if (!instanceMap.has(key) && instanceMap.size !== 0) {\n      // eslint-disable-next-line no-console\n      console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`)\n      return\n    }\n\n    instanceMap.set(key, instance)\n  },\n\n  get(element, key) {\n    if (elementMap.has(element)) {\n      return elementMap.get(element).get(key) || null\n    }\n\n    return null\n  },\n\n  remove(element, key) {\n    if (!elementMap.has(element)) {\n      return\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    instanceMap.delete(key)\n\n    // free up element references if there are no instances left for an element\n    if (instanceMap.size === 0) {\n      elementMap.delete(element)\n    }\n  }\n}\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MAX_UID = 1_000_000\nconst MILLISECONDS_MULTIPLIER = 1000\nconst TRANSITION_END = 'transitionend'\n\n/**\n * Properly escape IDs selectors to handle weird IDs\n * @param {string} selector\n * @returns {string}\n */\nconst parseSelector = selector => {\n  if (selector && window.CSS && window.CSS.escape) {\n    // document.querySelector needs escaping to handle IDs (html5+) containing for instance /\n    selector = selector.replace(/#([^\\s\"#']+)/g, (match, id) => `#${CSS.escape(id)}`)\n  }\n\n  return selector\n}\n\n// Shout-out Angus Croll (https://goo.gl/pxwQGp)\nconst toType = object => {\n  if (object === null || object === undefined) {\n    return `${object}`\n  }\n\n  return Object.prototype.toString.call(object).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\n/**\n * Public Util API\n */\n\nconst getUID = prefix => {\n  do {\n    prefix += Math.floor(Math.random() * MAX_UID)\n  } while (document.getElementById(prefix))\n\n  return prefix\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let { transitionDuration, transitionDelay } = window.getComputedStyle(element)\n\n  const floatTransitionDuration = Number.parseFloat(transitionDuration)\n  const floatTransitionDelay = Number.parseFloat(transitionDelay)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n  transitionDelay = transitionDelay.split(',')[0]\n\n  return (Number.parseFloat(transitionDuration) + Number.parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n}\n\nconst triggerTransitionEnd = element => {\n  element.dispatchEvent(new Event(TRANSITION_END))\n}\n\nconst isElement = object => {\n  if (!object || typeof object !== 'object') {\n    return false\n  }\n\n  if (typeof object.jquery !== 'undefined') {\n    object = object[0]\n  }\n\n  return typeof object.nodeType !== 'undefined'\n}\n\nconst getElement = object => {\n  // it's a jQuery object or a node element\n  if (isElement(object)) {\n    return object.jquery ? object[0] : object\n  }\n\n  if (typeof object === 'string' && object.length > 0) {\n    return document.querySelector(parseSelector(object))\n  }\n\n  return null\n}\n\nconst isVisible = element => {\n  if (!isElement(element) || element.getClientRects().length === 0) {\n    return false\n  }\n\n  const elementIsVisible = getComputedStyle(element).getPropertyValue('visibility') === 'visible'\n  // Handle `details` element as its content may falsie appear visible when it is closed\n  const closedDetails = element.closest('details:not([open])')\n\n  if (!closedDetails) {\n    return elementIsVisible\n  }\n\n  if (closedDetails !== element) {\n    const summary = element.closest('summary')\n    if (summary && summary.parentNode !== closedDetails) {\n      return false\n    }\n\n    if (summary === null) {\n      return false\n    }\n  }\n\n  return elementIsVisible\n}\n\nconst isDisabled = element => {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n    return true\n  }\n\n  if (element.classList.contains('disabled')) {\n    return true\n  }\n\n  if (typeof element.disabled !== 'undefined') {\n    return element.disabled\n  }\n\n  return element.hasAttribute('disabled') && element.getAttribute('disabled') !== 'false'\n}\n\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null\n  }\n\n  // Can find the shadow root otherwise it'll return the document\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode()\n    return root instanceof ShadowRoot ? root : null\n  }\n\n  if (element instanceof ShadowRoot) {\n    return element\n  }\n\n  // when we don't find a shadow root\n  if (!element.parentNode) {\n    return null\n  }\n\n  return findShadowRoot(element.parentNode)\n}\n\nconst noop = () => {}\n\n/**\n * Trick to restart an element's animation\n *\n * @param {HTMLElement} element\n * @return void\n *\n * @see https://www.harrytheo.com/blog/2021/02/restart-a-css-animation-with-javascript/#restarting-a-css-animation\n */\nconst reflow = element => {\n  element.offsetHeight // eslint-disable-line no-unused-expressions\n}\n\nconst getjQuery = () => {\n  if (window.jQuery && !document.body.hasAttribute('data-bs-no-jquery')) {\n    return window.jQuery\n  }\n\n  return null\n}\n\nconst DOMContentLoadedCallbacks = []\n\nconst onDOMContentLoaded = callback => {\n  if (document.readyState === 'loading') {\n    // add listener on the first call when the document is in loading state\n    if (!DOMContentLoadedCallbacks.length) {\n      document.addEventListener('DOMContentLoaded', () => {\n        for (const callback of DOMContentLoadedCallbacks) {\n          callback()\n        }\n      })\n    }\n\n    DOMContentLoadedCallbacks.push(callback)\n  } else {\n    callback()\n  }\n}\n\nconst isRTL = () => document.documentElement.dir === 'rtl'\n\nconst defineJQueryPlugin = plugin => {\n  onDOMContentLoaded(() => {\n    const $ = getjQuery()\n    /* istanbul ignore if */\n    if ($) {\n      const name = plugin.NAME\n      const JQUERY_NO_CONFLICT = $.fn[name]\n      $.fn[name] = plugin.jQueryInterface\n      $.fn[name].Constructor = plugin\n      $.fn[name].noConflict = () => {\n        $.fn[name] = JQUERY_NO_CONFLICT\n        return plugin.jQueryInterface\n      }\n    }\n  })\n}\n\nconst execute = (possibleCallback, args = [], defaultValue = possibleCallback) => {\n  return typeof possibleCallback === 'function' ? possibleCallback.call(...args) : defaultValue\n}\n\nconst executeAfterTransition = (callback, transitionElement, waitForTransition = true) => {\n  if (!waitForTransition) {\n    execute(callback)\n    return\n  }\n\n  const durationPadding = 5\n  const emulatedDuration = getTransitionDurationFromElement(transitionElement) + durationPadding\n\n  let called = false\n\n  const handler = ({ target }) => {\n    if (target !== transitionElement) {\n      return\n    }\n\n    called = true\n    transitionElement.removeEventListener(TRANSITION_END, handler)\n    execute(callback)\n  }\n\n  transitionElement.addEventListener(TRANSITION_END, handler)\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(transitionElement)\n    }\n  }, emulatedDuration)\n}\n\n/**\n * Return the previous/next element of a list.\n *\n * @param {array} list    The list of elements\n * @param activeElement   The active element\n * @param shouldGetNext   Choose to get next or previous element\n * @param isCycleAllowed\n * @return {Element|elem} The proper element\n */\nconst getNextActiveElement = (list, activeElement, shouldGetNext, isCycleAllowed) => {\n  const listLength = list.length\n  let index = list.indexOf(activeElement)\n\n  // if the element does not exist in the list return an element\n  // depending on the direction and if cycle is allowed\n  if (index === -1) {\n    return !shouldGetNext && isCycleAllowed ? list[listLength - 1] : list[0]\n  }\n\n  index += shouldGetNext ? 1 : -1\n\n  if (isCycleAllowed) {\n    index = (index + listLength) % listLength\n  }\n\n  return list[Math.max(0, Math.min(index, listLength - 1))]\n}\n\nexport {\n  defineJQueryPlugin,\n  execute,\n  executeAfterTransition,\n  findShadowRoot,\n  getElement,\n  getjQuery,\n  getNextActiveElement,\n  getTransitionDurationFromElement,\n  getUID,\n  isDisabled,\n  isElement,\n  isRTL,\n  isVisible,\n  noop,\n  onDOMContentLoaded,\n  parseSelector,\n  reflow,\n  triggerTransitionEnd,\n  toType\n}\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/event-handler.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { getjQuery } from '../util/index.js'\n\n/**\n * Constants\n */\n\nconst namespaceRegex = /[^.]*(?=\\..*)\\.|.*/\nconst stripNameRegex = /\\..*/\nconst stripUidRegex = /::\\d+$/\nconst eventRegistry = {} // Events storage\nlet uidEvent = 1\nconst customEvents = {\n  mouseenter: 'mouseover',\n  mouseleave: 'mouseout'\n}\n\nconst nativeEvents = new Set([\n  'click',\n  'dblclick',\n  'mouseup',\n  'mousedown',\n  'contextmenu',\n  'mousewheel',\n  'DOMMouseScroll',\n  'mouseover',\n  'mouseout',\n  'mousemove',\n  'selectstart',\n  'selectend',\n  'keydown',\n  'keypress',\n  'keyup',\n  'orientationchange',\n  'touchstart',\n  'touchmove',\n  'touchend',\n  'touchcancel',\n  'pointerdown',\n  'pointermove',\n  'pointerup',\n  'pointerleave',\n  'pointercancel',\n  'gesturestart',\n  'gesturechange',\n  'gestureend',\n  'focus',\n  'blur',\n  'change',\n  'reset',\n  'select',\n  'submit',\n  'focusin',\n  'focusout',\n  'load',\n  'unload',\n  'beforeunload',\n  'resize',\n  'move',\n  'DOMContentLoaded',\n  'readystatechange',\n  'error',\n  'abort',\n  'scroll'\n])\n\n/**\n * Private methods\n */\n\nfunction makeEventUid(element, uid) {\n  return (uid && `${uid}::${uidEvent++}`) || element.uidEvent || uidEvent++\n}\n\nfunction getElementEvents(element) {\n  const uid = makeEventUid(element)\n\n  element.uidEvent = uid\n  eventRegistry[uid] = eventRegistry[uid] || {}\n\n  return eventRegistry[uid]\n}\n\nfunction bootstrapHandler(element, fn) {\n  return function handler(event) {\n    hydrateObj(event, { delegateTarget: element })\n\n    if (handler.oneOff) {\n      EventHandler.off(element, event.type, fn)\n    }\n\n    return fn.apply(element, [event])\n  }\n}\n\nfunction bootstrapDelegationHandler(element, selector, fn) {\n  return function handler(event) {\n    const domElements = element.querySelectorAll(selector)\n\n    for (let { target } = event; target && target !== this; target = target.parentNode) {\n      for (const domElement of domElements) {\n        if (domElement !== target) {\n          continue\n        }\n\n        hydrateObj(event, { delegateTarget: target })\n\n        if (handler.oneOff) {\n          EventHandler.off(element, event.type, selector, fn)\n        }\n\n        return fn.apply(target, [event])\n      }\n    }\n  }\n}\n\nfunction findHandler(events, callable, delegationSelector = null) {\n  return Object.values(events)\n    .find(event => event.callable === callable && event.delegationSelector === delegationSelector)\n}\n\nfunction normalizeParameters(originalTypeEvent, handler, delegationFunction) {\n  const isDelegated = typeof handler === 'string'\n  // TODO: tooltip passes `false` instead of selector, so we need to check\n  const callable = isDelegated ? delegationFunction : (handler || delegationFunction)\n  let typeEvent = getTypeEvent(originalTypeEvent)\n\n  if (!nativeEvents.has(typeEvent)) {\n    typeEvent = originalTypeEvent\n  }\n\n  return [isDelegated, callable, typeEvent]\n}\n\nfunction addHandler(element, originalTypeEvent, handler, delegationFunction, oneOff) {\n  if (typeof originalTypeEvent !== 'string' || !element) {\n    return\n  }\n\n  let [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction)\n\n  // in case of mouseenter or mouseleave wrap the handler within a function that checks for its DOM position\n  // this prevents the handler from being dispatched the same way as mouseover or mouseout does\n  if (originalTypeEvent in customEvents) {\n    const wrapFunction = fn => {\n      return function (event) {\n        if (!event.relatedTarget || (event.relatedTarget !== event.delegateTarget && !event.delegateTarget.contains(event.relatedTarget))) {\n          return fn.call(this, event)\n        }\n      }\n    }\n\n    callable = wrapFunction(callable)\n  }\n\n  const events = getElementEvents(element)\n  const handlers = events[typeEvent] || (events[typeEvent] = {})\n  const previousFunction = findHandler(handlers, callable, isDelegated ? handler : null)\n\n  if (previousFunction) {\n    previousFunction.oneOff = previousFunction.oneOff && oneOff\n\n    return\n  }\n\n  const uid = makeEventUid(callable, originalTypeEvent.replace(namespaceRegex, ''))\n  const fn = isDelegated ?\n    bootstrapDelegationHandler(element, handler, callable) :\n    bootstrapHandler(element, callable)\n\n  fn.delegationSelector = isDelegated ? handler : null\n  fn.callable = callable\n  fn.oneOff = oneOff\n  fn.uidEvent = uid\n  handlers[uid] = fn\n\n  element.addEventListener(typeEvent, fn, isDelegated)\n}\n\nfunction removeHandler(element, events, typeEvent, handler, delegationSelector) {\n  const fn = findHandler(events[typeEvent], handler, delegationSelector)\n\n  if (!fn) {\n    return\n  }\n\n  element.removeEventListener(typeEvent, fn, Boolean(delegationSelector))\n  delete events[typeEvent][fn.uidEvent]\n}\n\nfunction removeNamespacedHandlers(element, events, typeEvent, namespace) {\n  const storeElementEvent = events[typeEvent] || {}\n\n  for (const [handlerKey, event] of Object.entries(storeElementEvent)) {\n    if (handlerKey.includes(namespace)) {\n      removeHandler(element, events, typeEvent, event.callable, event.delegationSelector)\n    }\n  }\n}\n\nfunction getTypeEvent(event) {\n  // allow to get the native events from namespaced events ('click.bs.button' --> 'click')\n  event = event.replace(stripNameRegex, '')\n  return customEvents[event] || event\n}\n\nconst EventHandler = {\n  on(element, event, handler, delegationFunction) {\n    addHandler(element, event, handler, delegationFunction, false)\n  },\n\n  one(element, event, handler, delegationFunction) {\n    addHandler(element, event, handler, delegationFunction, true)\n  },\n\n  off(element, originalTypeEvent, handler, delegationFunction) {\n    if (typeof originalTypeEvent !== 'string' || !element) {\n      return\n    }\n\n    const [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction)\n    const inNamespace = typeEvent !== originalTypeEvent\n    const events = getElementEvents(element)\n    const storeElementEvent = events[typeEvent] || {}\n    const isNamespace = originalTypeEvent.startsWith('.')\n\n    if (typeof callable !== 'undefined') {\n      // Simplest case: handler is passed, remove that listener ONLY.\n      if (!Object.keys(storeElementEvent).length) {\n        return\n      }\n\n      removeHandler(element, events, typeEvent, callable, isDelegated ? handler : null)\n      return\n    }\n\n    if (isNamespace) {\n      for (const elementEvent of Object.keys(events)) {\n        removeNamespacedHandlers(element, events, elementEvent, originalTypeEvent.slice(1))\n      }\n    }\n\n    for (const [keyHandlers, event] of Object.entries(storeElementEvent)) {\n      const handlerKey = keyHandlers.replace(stripUidRegex, '')\n\n      if (!inNamespace || originalTypeEvent.includes(handlerKey)) {\n        removeHandler(element, events, typeEvent, event.callable, event.delegationSelector)\n      }\n    }\n  },\n\n  trigger(element, event, args) {\n    if (typeof event !== 'string' || !element) {\n      return null\n    }\n\n    const $ = getjQuery()\n    const typeEvent = getTypeEvent(event)\n    const inNamespace = event !== typeEvent\n\n    let jQueryEvent = null\n    let bubbles = true\n    let nativeDispatch = true\n    let defaultPrevented = false\n\n    if (inNamespace && $) {\n      jQueryEvent = $.Event(event, args)\n\n      $(element).trigger(jQueryEvent)\n      bubbles = !jQueryEvent.isPropagationStopped()\n      nativeDispatch = !jQueryEvent.isImmediatePropagationStopped()\n      defaultPrevented = jQueryEvent.isDefaultPrevented()\n    }\n\n    const evt = hydrateObj(new Event(event, { bubbles, cancelable: true }), args)\n\n    if (defaultPrevented) {\n      evt.preventDefault()\n    }\n\n    if (nativeDispatch) {\n      element.dispatchEvent(evt)\n    }\n\n    if (evt.defaultPrevented && jQueryEvent) {\n      jQueryEvent.preventDefault()\n    }\n\n    return evt\n  }\n}\n\nfunction hydrateObj(obj, meta = {}) {\n  for (const [key, value] of Object.entries(meta)) {\n    try {\n      obj[key] = value\n    } catch {\n      Object.defineProperty(obj, key, {\n        configurable: true,\n        get() {\n          return value\n        }\n      })\n    }\n  }\n\n  return obj\n}\n\nexport default EventHandler\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/manipulator.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nfunction normalizeData(value) {\n  if (value === 'true') {\n    return true\n  }\n\n  if (value === 'false') {\n    return false\n  }\n\n  if (value === Number(value).toString()) {\n    return Number(value)\n  }\n\n  if (value === '' || value === 'null') {\n    return null\n  }\n\n  if (typeof value !== 'string') {\n    return value\n  }\n\n  try {\n    return JSON.parse(decodeURIComponent(value))\n  } catch {\n    return value\n  }\n}\n\nfunction normalizeDataKey(key) {\n  return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`)\n}\n\nconst Manipulator = {\n  setDataAttribute(element, key, value) {\n    element.setAttribute(`data-bs-${normalizeDataKey(key)}`, value)\n  },\n\n  removeDataAttribute(element, key) {\n    element.removeAttribute(`data-bs-${normalizeDataKey(key)}`)\n  },\n\n  getDataAttributes(element) {\n    if (!element) {\n      return {}\n    }\n\n    const attributes = {}\n    const bsKeys = Object.keys(element.dataset).filter(key => key.startsWith('bs') && !key.startsWith('bsConfig'))\n\n    for (const key of bsKeys) {\n      let pureKey = key.replace(/^bs/, '')\n      pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1)\n      attributes[pureKey] = normalizeData(element.dataset[key])\n    }\n\n    return attributes\n  },\n\n  getDataAttribute(element, key) {\n    return normalizeData(element.getAttribute(`data-bs-${normalizeDataKey(key)}`))\n  }\n}\n\nexport default Manipulator\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap util/config.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Manipulator from '../dom/manipulator.js'\nimport { isElement, toType } from './index.js'\n\n/**\n * Class definition\n */\n\nclass Config {\n  // Getters\n  static get Default() {\n    return {}\n  }\n\n  static get DefaultType() {\n    return {}\n  }\n\n  static get NAME() {\n    throw new Error('You have to implement the static method \"NAME\", for each component!')\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  _configAfterMerge(config) {\n    return config\n  }\n\n  _mergeConfigObj(config, element) {\n    const jsonConfig = isElement(element) ? Manipulator.getDataAttribute(element, 'config') : {} // try to parse\n\n    return {\n      ...this.constructor.Default,\n      ...(typeof jsonConfig === 'object' ? jsonConfig : {}),\n      ...(isElement(element) ? Manipulator.getDataAttributes(element) : {}),\n      ...(typeof config === 'object' ? config : {})\n    }\n  }\n\n  _typeCheckConfig(config, configTypes = this.constructor.DefaultType) {\n    for (const [property, expectedTypes] of Object.entries(configTypes)) {\n      const value = config[property]\n      const valueType = isElement(value) ? 'element' : toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new TypeError(\n          `${this.constructor.NAME.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`\n        )\n      }\n    }\n  }\n}\n\nexport default Config\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap base-component.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Data from './dom/data.js'\nimport EventHandler from './dom/event-handler.js'\nimport Config from './util/config.js'\nimport { executeAfterTransition, getElement } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst VERSION = '5.3.5'\n\n/**\n * Class definition\n */\n\nclass BaseComponent extends Config {\n  constructor(element, config) {\n    super()\n\n    element = getElement(element)\n    if (!element) {\n      return\n    }\n\n    this._element = element\n    this._config = this._getConfig(config)\n\n    Data.set(this._element, this.constructor.DATA_KEY, this)\n  }\n\n  // Public\n  dispose() {\n    Data.remove(this._element, this.constructor.DATA_KEY)\n    EventHandler.off(this._element, this.constructor.EVENT_KEY)\n\n    for (const propertyName of Object.getOwnPropertyNames(this)) {\n      this[propertyName] = null\n    }\n  }\n\n  _queueCallback(callback, element, isAnimated = true) {\n    executeAfterTransition(callback, element, isAnimated)\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config, this._element)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  // Static\n  static getInstance(element) {\n    return Data.get(getElement(element), this.DATA_KEY)\n  }\n\n  static getOrCreateInstance(element, config = {}) {\n    return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null)\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get DATA_KEY() {\n    return `bs.${this.NAME}`\n  }\n\n  static get EVENT_KEY() {\n    return `.${this.DATA_KEY}`\n  }\n\n  static eventName(name) {\n    return `${name}${this.EVENT_KEY}`\n  }\n}\n\nexport default BaseComponent\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/selector-engine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isDisabled, isVisible, parseSelector } from '../util/index.js'\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-bs-target')\n\n  if (!selector || selector === '#') {\n    let hrefAttribute = element.getAttribute('href')\n\n    // The only valid content that could double as a selector are IDs or classes,\n    // so everything starting with `#` or `.`. If a \"real\" URL is used as the selector,\n    // `document.querySelector` will rightfully complain it is invalid.\n    // See https://github.com/twbs/bootstrap/issues/32273\n    if (!hrefAttribute || (!hrefAttribute.includes('#') && !hrefAttribute.startsWith('.'))) {\n      return null\n    }\n\n    // Just in case some CMS puts out a full URL with the anchor appended\n    if (hrefAttribute.includes('#') && !hrefAttribute.startsWith('#')) {\n      hrefAttribute = `#${hrefAttribute.split('#')[1]}`\n    }\n\n    selector = hrefAttribute && hrefAttribute !== '#' ? hrefAttribute.trim() : null\n  }\n\n  return selector ? selector.split(',').map(sel => parseSelector(sel)).join(',') : null\n}\n\nconst SelectorEngine = {\n  find(selector, element = document.documentElement) {\n    return [].concat(...Element.prototype.querySelectorAll.call(element, selector))\n  },\n\n  findOne(selector, element = document.documentElement) {\n    return Element.prototype.querySelector.call(element, selector)\n  },\n\n  children(element, selector) {\n    return [].concat(...element.children).filter(child => child.matches(selector))\n  },\n\n  parents(element, selector) {\n    const parents = []\n    let ancestor = element.parentNode.closest(selector)\n\n    while (ancestor) {\n      parents.push(ancestor)\n      ancestor = ancestor.parentNode.closest(selector)\n    }\n\n    return parents\n  },\n\n  prev(element, selector) {\n    let previous = element.previousElementSibling\n\n    while (previous) {\n      if (previous.matches(selector)) {\n        return [previous]\n      }\n\n      previous = previous.previousElementSibling\n    }\n\n    return []\n  },\n  // TODO: this is now unused; remove later along with prev()\n  next(element, selector) {\n    let next = element.nextElementSibling\n\n    while (next) {\n      if (next.matches(selector)) {\n        return [next]\n      }\n\n      next = next.nextElementSibling\n    }\n\n    return []\n  },\n\n  focusableChildren(element) {\n    const focusables = [\n      'a',\n      'button',\n      'input',\n      'textarea',\n      'select',\n      'details',\n      '[tabindex]',\n      '[contenteditable=\"true\"]'\n    ].map(selector => `${selector}:not([tabindex^=\"-\"])`).join(',')\n\n    return this.find(focusables, element).filter(el => !isDisabled(el) && isVisible(el))\n  },\n\n  getSelectorFromElement(element) {\n    const selector = getSelector(element)\n\n    if (selector) {\n      return SelectorEngine.findOne(selector) ? selector : null\n    }\n\n    return null\n  },\n\n  getElementFromSelector(element) {\n    const selector = getSelector(element)\n\n    return selector ? SelectorEngine.findOne(selector) : null\n  },\n\n  getMultipleElementsFromSelector(element) {\n    const selector = getSelector(element)\n\n    return selector ? SelectorEngine.find(selector) : []\n  }\n}\n\nexport default SelectorEngine\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap util/component-functions.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler.js'\nimport SelectorEngine from '../dom/selector-engine.js'\nimport { isDisabled } from './index.js'\n\nconst enableDismissTrigger = (component, method = 'hide') => {\n  const clickEvent = `click.dismiss${component.EVENT_KEY}`\n  const name = component.NAME\n\n  EventHandler.on(document, clickEvent, `[data-bs-dismiss=\"${name}\"]`, function (event) {\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault()\n    }\n\n    if (isDisabled(this)) {\n      return\n    }\n\n    const target = SelectorEngine.getElementFromSelector(this) || this.closest(`.${name}`)\n    const instance = component.getOrCreateInstance(target)\n\n    // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method\n    instance[method]()\n  })\n}\n\nexport {\n  enableDismissTrigger\n}\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport { enableDismissTrigger } from './util/component-functions.js'\nimport { defineJQueryPlugin } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'alert'\nconst DATA_KEY = 'bs.alert'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_CLOSE = `close${EVENT_KEY}`\nconst EVENT_CLOSED = `closed${EVENT_KEY}`\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\n\n/**\n * Class definition\n */\n\nclass Alert extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  close() {\n    const closeEvent = EventHandler.trigger(this._element, EVENT_CLOSE)\n\n    if (closeEvent.defaultPrevented) {\n      return\n    }\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    const isAnimated = this._element.classList.contains(CLASS_NAME_FADE)\n    this._queueCallback(() => this._destroyElement(), this._element, isAnimated)\n  }\n\n  // Private\n  _destroyElement() {\n    this._element.remove()\n    EventHandler.trigger(this._element, EVENT_CLOSED)\n    this.dispose()\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Alert.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](this)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nenableDismissTrigger(Alert, 'close')\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Alert)\n\nexport default Alert\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap button.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport { defineJQueryPlugin } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'button'\nconst DATA_KEY = 'bs.button'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst CLASS_NAME_ACTIVE = 'active'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"button\"]'\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\n/**\n * Class definition\n */\n\nclass Button extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle() {\n    // Toggle class and sync the `aria-pressed` attribute with the return value of the `.toggle()` method\n    this._element.setAttribute('aria-pressed', this._element.classList.toggle(CLASS_NAME_ACTIVE))\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Button.getOrCreateInstance(this)\n\n      if (config === 'toggle') {\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, event => {\n  event.preventDefault()\n\n  const button = event.target.closest(SELECTOR_DATA_TOGGLE)\n  const data = Button.getOrCreateInstance(button)\n\n  data.toggle()\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Button)\n\nexport default Button\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap util/swipe.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler.js'\nimport Config from './config.js'\nimport { execute } from './index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'swipe'\nconst EVENT_KEY = '.bs.swipe'\nconst EVENT_TOUCHSTART = `touchstart${EVENT_KEY}`\nconst EVENT_TOUCHMOVE = `touchmove${EVENT_KEY}`\nconst EVENT_TOUCHEND = `touchend${EVENT_KEY}`\nconst EVENT_POINTERDOWN = `pointerdown${EVENT_KEY}`\nconst EVENT_POINTERUP = `pointerup${EVENT_KEY}`\nconst POINTER_TYPE_TOUCH = 'touch'\nconst POINTER_TYPE_PEN = 'pen'\nconst CLASS_NAME_POINTER_EVENT = 'pointer-event'\nconst SWIPE_THRESHOLD = 40\n\nconst Default = {\n  endCallback: null,\n  leftCallback: null,\n  rightCallback: null\n}\n\nconst DefaultType = {\n  endCallback: '(function|null)',\n  leftCallback: '(function|null)',\n  rightCallback: '(function|null)'\n}\n\n/**\n * Class definition\n */\n\nclass Swipe extends Config {\n  constructor(element, config) {\n    super()\n    this._element = element\n\n    if (!element || !Swipe.isSupported()) {\n      return\n    }\n\n    this._config = this._getConfig(config)\n    this._deltaX = 0\n    this._supportPointerEvents = Boolean(window.PointerEvent)\n    this._initEvents()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  dispose() {\n    EventHandler.off(this._element, EVENT_KEY)\n  }\n\n  // Private\n  _start(event) {\n    if (!this._supportPointerEvents) {\n      this._deltaX = event.touches[0].clientX\n\n      return\n    }\n\n    if (this._eventIsPointerPenTouch(event)) {\n      this._deltaX = event.clientX\n    }\n  }\n\n  _end(event) {\n    if (this._eventIsPointerPenTouch(event)) {\n      this._deltaX = event.clientX - this._deltaX\n    }\n\n    this._handleSwipe()\n    execute(this._config.endCallback)\n  }\n\n  _move(event) {\n    this._deltaX = event.touches && event.touches.length > 1 ?\n      0 :\n      event.touches[0].clientX - this._deltaX\n  }\n\n  _handleSwipe() {\n    const absDeltaX = Math.abs(this._deltaX)\n\n    if (absDeltaX <= SWIPE_THRESHOLD) {\n      return\n    }\n\n    const direction = absDeltaX / this._deltaX\n\n    this._deltaX = 0\n\n    if (!direction) {\n      return\n    }\n\n    execute(direction > 0 ? this._config.rightCallback : this._config.leftCallback)\n  }\n\n  _initEvents() {\n    if (this._supportPointerEvents) {\n      EventHandler.on(this._element, EVENT_POINTERDOWN, event => this._start(event))\n      EventHandler.on(this._element, EVENT_POINTERUP, event => this._end(event))\n\n      this._element.classList.add(CLASS_NAME_POINTER_EVENT)\n    } else {\n      EventHandler.on(this._element, EVENT_TOUCHSTART, event => this._start(event))\n      EventHandler.on(this._element, EVENT_TOUCHMOVE, event => this._move(event))\n      EventHandler.on(this._element, EVENT_TOUCHEND, event => this._end(event))\n    }\n  }\n\n  _eventIsPointerPenTouch(event) {\n    return this._supportPointerEvents && (event.pointerType === POINTER_TYPE_PEN || event.pointerType === POINTER_TYPE_TOUCH)\n  }\n\n  // Static\n  static isSupported() {\n    return 'ontouchstart' in document.documentElement || navigator.maxTouchPoints > 0\n  }\n}\n\nexport default Swipe\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap carousel.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport Manipulator from './dom/manipulator.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport {\n  defineJQueryPlugin,\n  getNextActiveElement,\n  isRTL,\n  isVisible,\n  reflow,\n  triggerTransitionEnd\n} from './util/index.js'\nimport Swipe from './util/swipe.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'carousel'\nconst DATA_KEY = 'bs.carousel'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst ARROW_LEFT_KEY = 'ArrowLeft'\nconst ARROW_RIGHT_KEY = 'ArrowRight'\nconst TOUCHEVENT_COMPAT_WAIT = 500 // Time for mouse compat events to fire after touch\n\nconst ORDER_NEXT = 'next'\nconst ORDER_PREV = 'prev'\nconst DIRECTION_LEFT = 'left'\nconst DIRECTION_RIGHT = 'right'\n\nconst EVENT_SLIDE = `slide${EVENT_KEY}`\nconst EVENT_SLID = `slid${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_MOUSEENTER = `mouseenter${EVENT_KEY}`\nconst EVENT_MOUSELEAVE = `mouseleave${EVENT_KEY}`\nconst EVENT_DRAG_START = `dragstart${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_CAROUSEL = 'carousel'\nconst CLASS_NAME_ACTIVE = 'active'\nconst CLASS_NAME_SLIDE = 'slide'\nconst CLASS_NAME_END = 'carousel-item-end'\nconst CLASS_NAME_START = 'carousel-item-start'\nconst CLASS_NAME_NEXT = 'carousel-item-next'\nconst CLASS_NAME_PREV = 'carousel-item-prev'\n\nconst SELECTOR_ACTIVE = '.active'\nconst SELECTOR_ITEM = '.carousel-item'\nconst SELECTOR_ACTIVE_ITEM = SELECTOR_ACTIVE + SELECTOR_ITEM\nconst SELECTOR_ITEM_IMG = '.carousel-item img'\nconst SELECTOR_INDICATORS = '.carousel-indicators'\nconst SELECTOR_DATA_SLIDE = '[data-bs-slide], [data-bs-slide-to]'\nconst SELECTOR_DATA_RIDE = '[data-bs-ride=\"carousel\"]'\n\nconst KEY_TO_DIRECTION = {\n  [ARROW_LEFT_KEY]: DIRECTION_RIGHT,\n  [ARROW_RIGHT_KEY]: DIRECTION_LEFT\n}\n\nconst Default = {\n  interval: 5000,\n  keyboard: true,\n  pause: 'hover',\n  ride: false,\n  touch: true,\n  wrap: true\n}\n\nconst DefaultType = {\n  interval: '(number|boolean)', // TODO:v6 remove boolean support\n  keyboard: 'boolean',\n  pause: '(string|boolean)',\n  ride: '(boolean|string)',\n  touch: 'boolean',\n  wrap: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Carousel extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._interval = null\n    this._activeElement = null\n    this._isSliding = false\n    this.touchTimeout = null\n    this._swipeHelper = null\n\n    this._indicatorsElement = SelectorEngine.findOne(SELECTOR_INDICATORS, this._element)\n    this._addEventListeners()\n\n    if (this._config.ride === CLASS_NAME_CAROUSEL) {\n      this.cycle()\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  next() {\n    this._slide(ORDER_NEXT)\n  }\n\n  nextWhenVisible() {\n    // FIXME TODO use `document.visibilityState`\n    // Don't call next when the page isn't visible\n    // or the carousel or its parent isn't visible\n    if (!document.hidden && isVisible(this._element)) {\n      this.next()\n    }\n  }\n\n  prev() {\n    this._slide(ORDER_PREV)\n  }\n\n  pause() {\n    if (this._isSliding) {\n      triggerTransitionEnd(this._element)\n    }\n\n    this._clearInterval()\n  }\n\n  cycle() {\n    this._clearInterval()\n    this._updateInterval()\n\n    this._interval = setInterval(() => this.nextWhenVisible(), this._config.interval)\n  }\n\n  _maybeEnableCycle() {\n    if (!this._config.ride) {\n      return\n    }\n\n    if (this._isSliding) {\n      EventHandler.one(this._element, EVENT_SLID, () => this.cycle())\n      return\n    }\n\n    this.cycle()\n  }\n\n  to(index) {\n    const items = this._getItems()\n    if (index > items.length - 1 || index < 0) {\n      return\n    }\n\n    if (this._isSliding) {\n      EventHandler.one(this._element, EVENT_SLID, () => this.to(index))\n      return\n    }\n\n    const activeIndex = this._getItemIndex(this._getActive())\n    if (activeIndex === index) {\n      return\n    }\n\n    const order = index > activeIndex ? ORDER_NEXT : ORDER_PREV\n\n    this._slide(order, items[index])\n  }\n\n  dispose() {\n    if (this._swipeHelper) {\n      this._swipeHelper.dispose()\n    }\n\n    super.dispose()\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    config.defaultInterval = config.interval\n    return config\n  }\n\n  _addEventListeners() {\n    if (this._config.keyboard) {\n      EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event))\n    }\n\n    if (this._config.pause === 'hover') {\n      EventHandler.on(this._element, EVENT_MOUSEENTER, () => this.pause())\n      EventHandler.on(this._element, EVENT_MOUSELEAVE, () => this._maybeEnableCycle())\n    }\n\n    if (this._config.touch && Swipe.isSupported()) {\n      this._addTouchEventListeners()\n    }\n  }\n\n  _addTouchEventListeners() {\n    for (const img of SelectorEngine.find(SELECTOR_ITEM_IMG, this._element)) {\n      EventHandler.on(img, EVENT_DRAG_START, event => event.preventDefault())\n    }\n\n    const endCallBack = () => {\n      if (this._config.pause !== 'hover') {\n        return\n      }\n\n      // If it's a touch-enabled device, mouseenter/leave are fired as\n      // part of the mouse compatibility events on first tap - the carousel\n      // would stop cycling until user tapped out of it;\n      // here, we listen for touchend, explicitly pause the carousel\n      // (as if it's the second time we tap on it, mouseenter compat event\n      // is NOT fired) and after a timeout (to allow for mouse compatibility\n      // events to fire) we explicitly restart cycling\n\n      this.pause()\n      if (this.touchTimeout) {\n        clearTimeout(this.touchTimeout)\n      }\n\n      this.touchTimeout = setTimeout(() => this._maybeEnableCycle(), TOUCHEVENT_COMPAT_WAIT + this._config.interval)\n    }\n\n    const swipeConfig = {\n      leftCallback: () => this._slide(this._directionToOrder(DIRECTION_LEFT)),\n      rightCallback: () => this._slide(this._directionToOrder(DIRECTION_RIGHT)),\n      endCallback: endCallBack\n    }\n\n    this._swipeHelper = new Swipe(this._element, swipeConfig)\n  }\n\n  _keydown(event) {\n    if (/input|textarea/i.test(event.target.tagName)) {\n      return\n    }\n\n    const direction = KEY_TO_DIRECTION[event.key]\n    if (direction) {\n      event.preventDefault()\n      this._slide(this._directionToOrder(direction))\n    }\n  }\n\n  _getItemIndex(element) {\n    return this._getItems().indexOf(element)\n  }\n\n  _setActiveIndicatorElement(index) {\n    if (!this._indicatorsElement) {\n      return\n    }\n\n    const activeIndicator = SelectorEngine.findOne(SELECTOR_ACTIVE, this._indicatorsElement)\n\n    activeIndicator.classList.remove(CLASS_NAME_ACTIVE)\n    activeIndicator.removeAttribute('aria-current')\n\n    const newActiveIndicator = SelectorEngine.findOne(`[data-bs-slide-to=\"${index}\"]`, this._indicatorsElement)\n\n    if (newActiveIndicator) {\n      newActiveIndicator.classList.add(CLASS_NAME_ACTIVE)\n      newActiveIndicator.setAttribute('aria-current', 'true')\n    }\n  }\n\n  _updateInterval() {\n    const element = this._activeElement || this._getActive()\n\n    if (!element) {\n      return\n    }\n\n    const elementInterval = Number.parseInt(element.getAttribute('data-bs-interval'), 10)\n\n    this._config.interval = elementInterval || this._config.defaultInterval\n  }\n\n  _slide(order, element = null) {\n    if (this._isSliding) {\n      return\n    }\n\n    const activeElement = this._getActive()\n    const isNext = order === ORDER_NEXT\n    const nextElement = element || getNextActiveElement(this._getItems(), activeElement, isNext, this._config.wrap)\n\n    if (nextElement === activeElement) {\n      return\n    }\n\n    const nextElementIndex = this._getItemIndex(nextElement)\n\n    const triggerEvent = eventName => {\n      return EventHandler.trigger(this._element, eventName, {\n        relatedTarget: nextElement,\n        direction: this._orderToDirection(order),\n        from: this._getItemIndex(activeElement),\n        to: nextElementIndex\n      })\n    }\n\n    const slideEvent = triggerEvent(EVENT_SLIDE)\n\n    if (slideEvent.defaultPrevented) {\n      return\n    }\n\n    if (!activeElement || !nextElement) {\n      // Some weirdness is happening, so we bail\n      // TODO: change tests that use empty divs to avoid this check\n      return\n    }\n\n    const isCycling = Boolean(this._interval)\n    this.pause()\n\n    this._isSliding = true\n\n    this._setActiveIndicatorElement(nextElementIndex)\n    this._activeElement = nextElement\n\n    const directionalClassName = isNext ? CLASS_NAME_START : CLASS_NAME_END\n    const orderClassName = isNext ? CLASS_NAME_NEXT : CLASS_NAME_PREV\n\n    nextElement.classList.add(orderClassName)\n\n    reflow(nextElement)\n\n    activeElement.classList.add(directionalClassName)\n    nextElement.classList.add(directionalClassName)\n\n    const completeCallBack = () => {\n      nextElement.classList.remove(directionalClassName, orderClassName)\n      nextElement.classList.add(CLASS_NAME_ACTIVE)\n\n      activeElement.classList.remove(CLASS_NAME_ACTIVE, orderClassName, directionalClassName)\n\n      this._isSliding = false\n\n      triggerEvent(EVENT_SLID)\n    }\n\n    this._queueCallback(completeCallBack, activeElement, this._isAnimated())\n\n    if (isCycling) {\n      this.cycle()\n    }\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_SLIDE)\n  }\n\n  _getActive() {\n    return SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM, this._element)\n  }\n\n  _getItems() {\n    return SelectorEngine.find(SELECTOR_ITEM, this._element)\n  }\n\n  _clearInterval() {\n    if (this._interval) {\n      clearInterval(this._interval)\n      this._interval = null\n    }\n  }\n\n  _directionToOrder(direction) {\n    if (isRTL()) {\n      return direction === DIRECTION_LEFT ? ORDER_PREV : ORDER_NEXT\n    }\n\n    return direction === DIRECTION_LEFT ? ORDER_NEXT : ORDER_PREV\n  }\n\n  _orderToDirection(order) {\n    if (isRTL()) {\n      return order === ORDER_PREV ? DIRECTION_LEFT : DIRECTION_RIGHT\n    }\n\n    return order === ORDER_PREV ? DIRECTION_RIGHT : DIRECTION_LEFT\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Carousel.getOrCreateInstance(this, config)\n\n      if (typeof config === 'number') {\n        data.to(config)\n        return\n      }\n\n      if (typeof config === 'string') {\n        if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_SLIDE, function (event) {\n  const target = SelectorEngine.getElementFromSelector(this)\n\n  if (!target || !target.classList.contains(CLASS_NAME_CAROUSEL)) {\n    return\n  }\n\n  event.preventDefault()\n\n  const carousel = Carousel.getOrCreateInstance(target)\n  const slideIndex = this.getAttribute('data-bs-slide-to')\n\n  if (slideIndex) {\n    carousel.to(slideIndex)\n    carousel._maybeEnableCycle()\n    return\n  }\n\n  if (Manipulator.getDataAttribute(this, 'slide') === 'next') {\n    carousel.next()\n    carousel._maybeEnableCycle()\n    return\n  }\n\n  carousel.prev()\n  carousel._maybeEnableCycle()\n})\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  const carousels = SelectorEngine.find(SELECTOR_DATA_RIDE)\n\n  for (const carousel of carousels) {\n    Carousel.getOrCreateInstance(carousel)\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Carousel)\n\nexport default Carousel\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap collapse.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport {\n  defineJQueryPlugin,\n  getElement,\n  reflow\n} from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'collapse'\nconst DATA_KEY = 'bs.collapse'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_COLLAPSE = 'collapse'\nconst CLASS_NAME_COLLAPSING = 'collapsing'\nconst CLASS_NAME_COLLAPSED = 'collapsed'\nconst CLASS_NAME_DEEPER_CHILDREN = `:scope .${CLASS_NAME_COLLAPSE} .${CLASS_NAME_COLLAPSE}`\nconst CLASS_NAME_HORIZONTAL = 'collapse-horizontal'\n\nconst WIDTH = 'width'\nconst HEIGHT = 'height'\n\nconst SELECTOR_ACTIVES = '.collapse.show, .collapse.collapsing'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"collapse\"]'\n\nconst Default = {\n  parent: null,\n  toggle: true\n}\n\nconst DefaultType = {\n  parent: '(null|element)',\n  toggle: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Collapse extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._isTransitioning = false\n    this._triggerArray = []\n\n    const toggleList = SelectorEngine.find(SELECTOR_DATA_TOGGLE)\n\n    for (const elem of toggleList) {\n      const selector = SelectorEngine.getSelectorFromElement(elem)\n      const filterElement = SelectorEngine.find(selector)\n        .filter(foundElement => foundElement === this._element)\n\n      if (selector !== null && filterElement.length) {\n        this._triggerArray.push(elem)\n      }\n    }\n\n    this._initializeChildren()\n\n    if (!this._config.parent) {\n      this._addAriaAndCollapsedClass(this._triggerArray, this._isShown())\n    }\n\n    if (this._config.toggle) {\n      this.toggle()\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle() {\n    if (this._isShown()) {\n      this.hide()\n    } else {\n      this.show()\n    }\n  }\n\n  show() {\n    if (this._isTransitioning || this._isShown()) {\n      return\n    }\n\n    let activeChildren = []\n\n    // find active children\n    if (this._config.parent) {\n      activeChildren = this._getFirstLevelChildren(SELECTOR_ACTIVES)\n        .filter(element => element !== this._element)\n        .map(element => Collapse.getOrCreateInstance(element, { toggle: false }))\n    }\n\n    if (activeChildren.length && activeChildren[0]._isTransitioning) {\n      return\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_SHOW)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    for (const activeInstance of activeChildren) {\n      activeInstance.hide()\n    }\n\n    const dimension = this._getDimension()\n\n    this._element.classList.remove(CLASS_NAME_COLLAPSE)\n    this._element.classList.add(CLASS_NAME_COLLAPSING)\n\n    this._element.style[dimension] = 0\n\n    this._addAriaAndCollapsedClass(this._triggerArray, true)\n    this._isTransitioning = true\n\n    const complete = () => {\n      this._isTransitioning = false\n\n      this._element.classList.remove(CLASS_NAME_COLLAPSING)\n      this._element.classList.add(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW)\n\n      this._element.style[dimension] = ''\n\n      EventHandler.trigger(this._element, EVENT_SHOWN)\n    }\n\n    const capitalizedDimension = dimension[0].toUpperCase() + dimension.slice(1)\n    const scrollSize = `scroll${capitalizedDimension}`\n\n    this._queueCallback(complete, this._element, true)\n    this._element.style[dimension] = `${this._element[scrollSize]}px`\n  }\n\n  hide() {\n    if (this._isTransitioning || !this._isShown()) {\n      return\n    }\n\n    const startEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n    if (startEvent.defaultPrevented) {\n      return\n    }\n\n    const dimension = this._getDimension()\n\n    this._element.style[dimension] = `${this._element.getBoundingClientRect()[dimension]}px`\n\n    reflow(this._element)\n\n    this._element.classList.add(CLASS_NAME_COLLAPSING)\n    this._element.classList.remove(CLASS_NAME_COLLAPSE, CLASS_NAME_SHOW)\n\n    for (const trigger of this._triggerArray) {\n      const element = SelectorEngine.getElementFromSelector(trigger)\n\n      if (element && !this._isShown(element)) {\n        this._addAriaAndCollapsedClass([trigger], false)\n      }\n    }\n\n    this._isTransitioning = true\n\n    const complete = () => {\n      this._isTransitioning = false\n      this._element.classList.remove(CLASS_NAME_COLLAPSING)\n      this._element.classList.add(CLASS_NAME_COLLAPSE)\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    }\n\n    this._element.style[dimension] = ''\n\n    this._queueCallback(complete, this._element, true)\n  }\n\n  _isShown(element = this._element) {\n    return element.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    config.toggle = Boolean(config.toggle) // Coerce string values\n    config.parent = getElement(config.parent)\n    return config\n  }\n\n  _getDimension() {\n    return this._element.classList.contains(CLASS_NAME_HORIZONTAL) ? WIDTH : HEIGHT\n  }\n\n  _initializeChildren() {\n    if (!this._config.parent) {\n      return\n    }\n\n    const children = this._getFirstLevelChildren(SELECTOR_DATA_TOGGLE)\n\n    for (const element of children) {\n      const selected = SelectorEngine.getElementFromSelector(element)\n\n      if (selected) {\n        this._addAriaAndCollapsedClass([element], this._isShown(selected))\n      }\n    }\n  }\n\n  _getFirstLevelChildren(selector) {\n    const children = SelectorEngine.find(CLASS_NAME_DEEPER_CHILDREN, this._config.parent)\n    // remove children if greater depth\n    return SelectorEngine.find(selector, this._config.parent).filter(element => !children.includes(element))\n  }\n\n  _addAriaAndCollapsedClass(triggerArray, isOpen) {\n    if (!triggerArray.length) {\n      return\n    }\n\n    for (const element of triggerArray) {\n      element.classList.toggle(CLASS_NAME_COLLAPSED, !isOpen)\n      element.setAttribute('aria-expanded', isOpen)\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    const _config = {}\n    if (typeof config === 'string' && /show|hide/.test(config)) {\n      _config.toggle = false\n    }\n\n    return this.each(function () {\n      const data = Collapse.getOrCreateInstance(this, _config)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config]()\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  // preventDefault only for <a> elements (which change the URL) not inside the collapsible element\n  if (event.target.tagName === 'A' || (event.delegateTarget && event.delegateTarget.tagName === 'A')) {\n    event.preventDefault()\n  }\n\n  for (const element of SelectorEngine.getMultipleElementsFromSelector(this)) {\n    Collapse.getOrCreateInstance(element, { toggle: false }).toggle()\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Collapse)\n\nexport default Collapse\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap dropdown.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport * as Popper from '@popperjs/core'\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport Manipulator from './dom/manipulator.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport {\n  defineJQueryPlugin,\n  execute,\n  getElement,\n  getNextActiveElement,\n  isDisabled,\n  isElement,\n  isRTL,\n  isVisible,\n  noop\n} from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'dropdown'\nconst DATA_KEY = 'bs.dropdown'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst ESCAPE_KEY = 'Escape'\nconst TAB_KEY = 'Tab'\nconst ARROW_UP_KEY = 'ArrowUp'\nconst ARROW_DOWN_KEY = 'ArrowDown'\nconst RIGHT_MOUSE_BUTTON = 2 // MouseEvent.button value for the secondary button, usually the right button\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYDOWN_DATA_API = `keydown${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYUP_DATA_API = `keyup${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_DROPUP = 'dropup'\nconst CLASS_NAME_DROPEND = 'dropend'\nconst CLASS_NAME_DROPSTART = 'dropstart'\nconst CLASS_NAME_DROPUP_CENTER = 'dropup-center'\nconst CLASS_NAME_DROPDOWN_CENTER = 'dropdown-center'\n\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"dropdown\"]:not(.disabled):not(:disabled)'\nconst SELECTOR_DATA_TOGGLE_SHOWN = `${SELECTOR_DATA_TOGGLE}.${CLASS_NAME_SHOW}`\nconst SELECTOR_MENU = '.dropdown-menu'\nconst SELECTOR_NAVBAR = '.navbar'\nconst SELECTOR_NAVBAR_NAV = '.navbar-nav'\nconst SELECTOR_VISIBLE_ITEMS = '.dropdown-menu .dropdown-item:not(.disabled):not(:disabled)'\n\nconst PLACEMENT_TOP = isRTL() ? 'top-end' : 'top-start'\nconst PLACEMENT_TOPEND = isRTL() ? 'top-start' : 'top-end'\nconst PLACEMENT_BOTTOM = isRTL() ? 'bottom-end' : 'bottom-start'\nconst PLACEMENT_BOTTOMEND = isRTL() ? 'bottom-start' : 'bottom-end'\nconst PLACEMENT_RIGHT = isRTL() ? 'left-start' : 'right-start'\nconst PLACEMENT_LEFT = isRTL() ? 'right-start' : 'left-start'\nconst PLACEMENT_TOPCENTER = 'top'\nconst PLACEMENT_BOTTOMCENTER = 'bottom'\n\nconst Default = {\n  autoClose: true,\n  boundary: 'clippingParents',\n  display: 'dynamic',\n  offset: [0, 2],\n  popperConfig: null,\n  reference: 'toggle'\n}\n\nconst DefaultType = {\n  autoClose: '(boolean|string)',\n  boundary: '(string|element)',\n  display: 'string',\n  offset: '(array|string|function)',\n  popperConfig: '(null|object|function)',\n  reference: '(string|element|object)'\n}\n\n/**\n * Class definition\n */\n\nclass Dropdown extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._popper = null\n    this._parent = this._element.parentNode // dropdown wrapper\n    // TODO: v6 revert #37011 & change markup https://getbootstrap.com/docs/5.3/forms/input-group/\n    this._menu = SelectorEngine.next(this._element, SELECTOR_MENU)[0] ||\n      SelectorEngine.prev(this._element, SELECTOR_MENU)[0] ||\n      SelectorEngine.findOne(SELECTOR_MENU, this._parent)\n    this._inNavbar = this._detectNavbar()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle() {\n    return this._isShown() ? this.hide() : this.show()\n  }\n\n  show() {\n    if (isDisabled(this._element) || this._isShown()) {\n      return\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, relatedTarget)\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._createPopper()\n\n    // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n    if ('ontouchstart' in document.documentElement && !this._parent.closest(SELECTOR_NAVBAR_NAV)) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.on(element, 'mouseover', noop)\n      }\n    }\n\n    this._element.focus()\n    this._element.setAttribute('aria-expanded', true)\n\n    this._menu.classList.add(CLASS_NAME_SHOW)\n    this._element.classList.add(CLASS_NAME_SHOW)\n    EventHandler.trigger(this._element, EVENT_SHOWN, relatedTarget)\n  }\n\n  hide() {\n    if (isDisabled(this._element) || !this._isShown()) {\n      return\n    }\n\n    const relatedTarget = {\n      relatedTarget: this._element\n    }\n\n    this._completeHide(relatedTarget)\n  }\n\n  dispose() {\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    super.dispose()\n  }\n\n  update() {\n    this._inNavbar = this._detectNavbar()\n    if (this._popper) {\n      this._popper.update()\n    }\n  }\n\n  // Private\n  _completeHide(relatedTarget) {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE, relatedTarget)\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.off(element, 'mouseover', noop)\n      }\n    }\n\n    if (this._popper) {\n      this._popper.destroy()\n    }\n\n    this._menu.classList.remove(CLASS_NAME_SHOW)\n    this._element.classList.remove(CLASS_NAME_SHOW)\n    this._element.setAttribute('aria-expanded', 'false')\n    Manipulator.removeDataAttribute(this._menu, 'popper')\n    EventHandler.trigger(this._element, EVENT_HIDDEN, relatedTarget)\n  }\n\n  _getConfig(config) {\n    config = super._getConfig(config)\n\n    if (typeof config.reference === 'object' && !isElement(config.reference) &&\n      typeof config.reference.getBoundingClientRect !== 'function'\n    ) {\n      // Popper virtual elements require a getBoundingClientRect method\n      throw new TypeError(`${NAME.toUpperCase()}: Option \"reference\" provided type \"object\" without a required \"getBoundingClientRect\" method.`)\n    }\n\n    return config\n  }\n\n  _createPopper() {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s dropdowns require Popper (https://popper.js.org/docs/v2/)')\n    }\n\n    let referenceElement = this._element\n\n    if (this._config.reference === 'parent') {\n      referenceElement = this._parent\n    } else if (isElement(this._config.reference)) {\n      referenceElement = getElement(this._config.reference)\n    } else if (typeof this._config.reference === 'object') {\n      referenceElement = this._config.reference\n    }\n\n    const popperConfig = this._getPopperConfig()\n    this._popper = Popper.createPopper(referenceElement, this._menu, popperConfig)\n  }\n\n  _isShown() {\n    return this._menu.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  _getPlacement() {\n    const parentDropdown = this._parent\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPEND)) {\n      return PLACEMENT_RIGHT\n    }\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPSTART)) {\n      return PLACEMENT_LEFT\n    }\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPUP_CENTER)) {\n      return PLACEMENT_TOPCENTER\n    }\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPDOWN_CENTER)) {\n      return PLACEMENT_BOTTOMCENTER\n    }\n\n    // We need to trim the value because custom properties can also include spaces\n    const isEnd = getComputedStyle(this._menu).getPropertyValue('--bs-position').trim() === 'end'\n\n    if (parentDropdown.classList.contains(CLASS_NAME_DROPUP)) {\n      return isEnd ? PLACEMENT_TOPEND : PLACEMENT_TOP\n    }\n\n    return isEnd ? PLACEMENT_BOTTOMEND : PLACEMENT_BOTTOM\n  }\n\n  _detectNavbar() {\n    return this._element.closest(SELECTOR_NAVBAR) !== null\n  }\n\n  _getOffset() {\n    const { offset } = this._config\n\n    if (typeof offset === 'string') {\n      return offset.split(',').map(value => Number.parseInt(value, 10))\n    }\n\n    if (typeof offset === 'function') {\n      return popperData => offset(popperData, this._element)\n    }\n\n    return offset\n  }\n\n  _getPopperConfig() {\n    const defaultBsPopperConfig = {\n      placement: this._getPlacement(),\n      modifiers: [{\n        name: 'preventOverflow',\n        options: {\n          boundary: this._config.boundary\n        }\n      },\n      {\n        name: 'offset',\n        options: {\n          offset: this._getOffset()\n        }\n      }]\n    }\n\n    // Disable Popper if we have a static display or Dropdown is in Navbar\n    if (this._inNavbar || this._config.display === 'static') {\n      Manipulator.setDataAttribute(this._menu, 'popper', 'static') // TODO: v6 remove\n      defaultBsPopperConfig.modifiers = [{\n        name: 'applyStyles',\n        enabled: false\n      }]\n    }\n\n    return {\n      ...defaultBsPopperConfig,\n      ...execute(this._config.popperConfig, [undefined, defaultBsPopperConfig])\n    }\n  }\n\n  _selectMenuItem({ key, target }) {\n    const items = SelectorEngine.find(SELECTOR_VISIBLE_ITEMS, this._menu).filter(element => isVisible(element))\n\n    if (!items.length) {\n      return\n    }\n\n    // if target isn't included in items (e.g. when expanding the dropdown)\n    // allow cycling to get the last item in case key equals ARROW_UP_KEY\n    getNextActiveElement(items, target, key === ARROW_DOWN_KEY, !items.includes(target)).focus()\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Dropdown.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n\n  static clearMenus(event) {\n    if (event.button === RIGHT_MOUSE_BUTTON || (event.type === 'keyup' && event.key !== TAB_KEY)) {\n      return\n    }\n\n    const openToggles = SelectorEngine.find(SELECTOR_DATA_TOGGLE_SHOWN)\n\n    for (const toggle of openToggles) {\n      const context = Dropdown.getInstance(toggle)\n      if (!context || context._config.autoClose === false) {\n        continue\n      }\n\n      const composedPath = event.composedPath()\n      const isMenuTarget = composedPath.includes(context._menu)\n      if (\n        composedPath.includes(context._element) ||\n        (context._config.autoClose === 'inside' && !isMenuTarget) ||\n        (context._config.autoClose === 'outside' && isMenuTarget)\n      ) {\n        continue\n      }\n\n      // Tab navigation through the dropdown menu or events from contained inputs shouldn't close the menu\n      if (context._menu.contains(event.target) && ((event.type === 'keyup' && event.key === TAB_KEY) || /input|select|option|textarea|form/i.test(event.target.tagName))) {\n        continue\n      }\n\n      const relatedTarget = { relatedTarget: context._element }\n\n      if (event.type === 'click') {\n        relatedTarget.clickEvent = event\n      }\n\n      context._completeHide(relatedTarget)\n    }\n  }\n\n  static dataApiKeydownHandler(event) {\n    // If not an UP | DOWN | ESCAPE key => not a dropdown command\n    // If input/textarea && if key is other than ESCAPE => not a dropdown command\n\n    const isInput = /input|textarea/i.test(event.target.tagName)\n    const isEscapeEvent = event.key === ESCAPE_KEY\n    const isUpOrDownEvent = [ARROW_UP_KEY, ARROW_DOWN_KEY].includes(event.key)\n\n    if (!isUpOrDownEvent && !isEscapeEvent) {\n      return\n    }\n\n    if (isInput && !isEscapeEvent) {\n      return\n    }\n\n    event.preventDefault()\n\n    // TODO: v6 revert #37011 & change markup https://getbootstrap.com/docs/5.3/forms/input-group/\n    const getToggleButton = this.matches(SELECTOR_DATA_TOGGLE) ?\n      this :\n      (SelectorEngine.prev(this, SELECTOR_DATA_TOGGLE)[0] ||\n        SelectorEngine.next(this, SELECTOR_DATA_TOGGLE)[0] ||\n        SelectorEngine.findOne(SELECTOR_DATA_TOGGLE, event.delegateTarget.parentNode))\n\n    const instance = Dropdown.getOrCreateInstance(getToggleButton)\n\n    if (isUpOrDownEvent) {\n      event.stopPropagation()\n      instance.show()\n      instance._selectMenuItem(event)\n      return\n    }\n\n    if (instance._isShown()) { // else is escape and we check if it is shown\n      event.stopPropagation()\n      instance.hide()\n      getToggleButton.focus()\n    }\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_DATA_TOGGLE, Dropdown.dataApiKeydownHandler)\nEventHandler.on(document, EVENT_KEYDOWN_DATA_API, SELECTOR_MENU, Dropdown.dataApiKeydownHandler)\nEventHandler.on(document, EVENT_CLICK_DATA_API, Dropdown.clearMenus)\nEventHandler.on(document, EVENT_KEYUP_DATA_API, Dropdown.clearMenus)\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  event.preventDefault()\n  Dropdown.getOrCreateInstance(this).toggle()\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Dropdown)\n\nexport default Dropdown\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap util/backdrop.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler.js'\nimport Config from './config.js'\nimport {\n  execute, executeAfterTransition, getElement, reflow\n} from './index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'backdrop'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst EVENT_MOUSEDOWN = `mousedown.bs.${NAME}`\n\nconst Default = {\n  className: 'modal-backdrop',\n  clickCallback: null,\n  isAnimated: false,\n  isVisible: true, // if false, we use the backdrop helper without adding any element to the dom\n  rootElement: 'body' // give the choice to place backdrop under different elements\n}\n\nconst DefaultType = {\n  className: 'string',\n  clickCallback: '(function|null)',\n  isAnimated: 'boolean',\n  isVisible: 'boolean',\n  rootElement: '(element|string)'\n}\n\n/**\n * Class definition\n */\n\nclass Backdrop extends Config {\n  constructor(config) {\n    super()\n    this._config = this._getConfig(config)\n    this._isAppended = false\n    this._element = null\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  show(callback) {\n    if (!this._config.isVisible) {\n      execute(callback)\n      return\n    }\n\n    this._append()\n\n    const element = this._getElement()\n    if (this._config.isAnimated) {\n      reflow(element)\n    }\n\n    element.classList.add(CLASS_NAME_SHOW)\n\n    this._emulateAnimation(() => {\n      execute(callback)\n    })\n  }\n\n  hide(callback) {\n    if (!this._config.isVisible) {\n      execute(callback)\n      return\n    }\n\n    this._getElement().classList.remove(CLASS_NAME_SHOW)\n\n    this._emulateAnimation(() => {\n      this.dispose()\n      execute(callback)\n    })\n  }\n\n  dispose() {\n    if (!this._isAppended) {\n      return\n    }\n\n    EventHandler.off(this._element, EVENT_MOUSEDOWN)\n\n    this._element.remove()\n    this._isAppended = false\n  }\n\n  // Private\n  _getElement() {\n    if (!this._element) {\n      const backdrop = document.createElement('div')\n      backdrop.className = this._config.className\n      if (this._config.isAnimated) {\n        backdrop.classList.add(CLASS_NAME_FADE)\n      }\n\n      this._element = backdrop\n    }\n\n    return this._element\n  }\n\n  _configAfterMerge(config) {\n    // use getElement() with the default \"body\" to get a fresh Element on each instantiation\n    config.rootElement = getElement(config.rootElement)\n    return config\n  }\n\n  _append() {\n    if (this._isAppended) {\n      return\n    }\n\n    const element = this._getElement()\n    this._config.rootElement.append(element)\n\n    EventHandler.on(element, EVENT_MOUSEDOWN, () => {\n      execute(this._config.clickCallback)\n    })\n\n    this._isAppended = true\n  }\n\n  _emulateAnimation(callback) {\n    executeAfterTransition(callback, this._getElement(), this._config.isAnimated)\n  }\n}\n\nexport default Backdrop\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap util/focustrap.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler.js'\nimport SelectorEngine from '../dom/selector-engine.js'\nimport Config from './config.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'focustrap'\nconst DATA_KEY = 'bs.focustrap'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`\nconst EVENT_KEYDOWN_TAB = `keydown.tab${EVENT_KEY}`\n\nconst TAB_KEY = 'Tab'\nconst TAB_NAV_FORWARD = 'forward'\nconst TAB_NAV_BACKWARD = 'backward'\n\nconst Default = {\n  autofocus: true,\n  trapElement: null // The element to trap focus inside of\n}\n\nconst DefaultType = {\n  autofocus: 'boolean',\n  trapElement: 'element'\n}\n\n/**\n * Class definition\n */\n\nclass FocusTrap extends Config {\n  constructor(config) {\n    super()\n    this._config = this._getConfig(config)\n    this._isActive = false\n    this._lastTabNavDirection = null\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  activate() {\n    if (this._isActive) {\n      return\n    }\n\n    if (this._config.autofocus) {\n      this._config.trapElement.focus()\n    }\n\n    EventHandler.off(document, EVENT_KEY) // guard against infinite focus loop\n    EventHandler.on(document, EVENT_FOCUSIN, event => this._handleFocusin(event))\n    EventHandler.on(document, EVENT_KEYDOWN_TAB, event => this._handleKeydown(event))\n\n    this._isActive = true\n  }\n\n  deactivate() {\n    if (!this._isActive) {\n      return\n    }\n\n    this._isActive = false\n    EventHandler.off(document, EVENT_KEY)\n  }\n\n  // Private\n  _handleFocusin(event) {\n    const { trapElement } = this._config\n\n    if (event.target === document || event.target === trapElement || trapElement.contains(event.target)) {\n      return\n    }\n\n    const elements = SelectorEngine.focusableChildren(trapElement)\n\n    if (elements.length === 0) {\n      trapElement.focus()\n    } else if (this._lastTabNavDirection === TAB_NAV_BACKWARD) {\n      elements[elements.length - 1].focus()\n    } else {\n      elements[0].focus()\n    }\n  }\n\n  _handleKeydown(event) {\n    if (event.key !== TAB_KEY) {\n      return\n    }\n\n    this._lastTabNavDirection = event.shiftKey ? TAB_NAV_BACKWARD : TAB_NAV_FORWARD\n  }\n}\n\nexport default FocusTrap\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap util/scrollBar.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Manipulator from '../dom/manipulator.js'\nimport SelectorEngine from '../dom/selector-engine.js'\nimport { isElement } from './index.js'\n\n/**\n * Constants\n */\n\nconst SELECTOR_FIXED_CONTENT = '.fixed-top, .fixed-bottom, .is-fixed, .sticky-top'\nconst SELECTOR_STICKY_CONTENT = '.sticky-top'\nconst PROPERTY_PADDING = 'padding-right'\nconst PROPERTY_MARGIN = 'margin-right'\n\n/**\n * Class definition\n */\n\nclass ScrollBarHelper {\n  constructor() {\n    this._element = document.body\n  }\n\n  // Public\n  getWidth() {\n    // https://developer.mozilla.org/en-US/docs/Web/API/Window/innerWidth#usage_notes\n    const documentWidth = document.documentElement.clientWidth\n    return Math.abs(window.innerWidth - documentWidth)\n  }\n\n  hide() {\n    const width = this.getWidth()\n    this._disableOverFlow()\n    // give padding to element to balance the hidden scrollbar width\n    this._setElementAttributes(this._element, PROPERTY_PADDING, calculatedValue => calculatedValue + width)\n    // trick: We adjust positive paddingRight and negative marginRight to sticky-top elements to keep showing fullwidth\n    this._setElementAttributes(SELECTOR_FIXED_CONTENT, PROPERTY_PADDING, calculatedValue => calculatedValue + width)\n    this._setElementAttributes(SELECTOR_STICKY_CONTENT, PROPERTY_MARGIN, calculatedValue => calculatedValue - width)\n  }\n\n  reset() {\n    this._resetElementAttributes(this._element, 'overflow')\n    this._resetElementAttributes(this._element, PROPERTY_PADDING)\n    this._resetElementAttributes(SELECTOR_FIXED_CONTENT, PROPERTY_PADDING)\n    this._resetElementAttributes(SELECTOR_STICKY_CONTENT, PROPERTY_MARGIN)\n  }\n\n  isOverflowing() {\n    return this.getWidth() > 0\n  }\n\n  // Private\n  _disableOverFlow() {\n    this._saveInitialAttribute(this._element, 'overflow')\n    this._element.style.overflow = 'hidden'\n  }\n\n  _setElementAttributes(selector, styleProperty, callback) {\n    const scrollbarWidth = this.getWidth()\n    const manipulationCallBack = element => {\n      if (element !== this._element && window.innerWidth > element.clientWidth + scrollbarWidth) {\n        return\n      }\n\n      this._saveInitialAttribute(element, styleProperty)\n      const calculatedValue = window.getComputedStyle(element).getPropertyValue(styleProperty)\n      element.style.setProperty(styleProperty, `${callback(Number.parseFloat(calculatedValue))}px`)\n    }\n\n    this._applyManipulationCallback(selector, manipulationCallBack)\n  }\n\n  _saveInitialAttribute(element, styleProperty) {\n    const actualValue = element.style.getPropertyValue(styleProperty)\n    if (actualValue) {\n      Manipulator.setDataAttribute(element, styleProperty, actualValue)\n    }\n  }\n\n  _resetElementAttributes(selector, styleProperty) {\n    const manipulationCallBack = element => {\n      const value = Manipulator.getDataAttribute(element, styleProperty)\n      // We only want to remove the property if the value is `null`; the value can also be zero\n      if (value === null) {\n        element.style.removeProperty(styleProperty)\n        return\n      }\n\n      Manipulator.removeDataAttribute(element, styleProperty)\n      element.style.setProperty(styleProperty, value)\n    }\n\n    this._applyManipulationCallback(selector, manipulationCallBack)\n  }\n\n  _applyManipulationCallback(selector, callBack) {\n    if (isElement(selector)) {\n      callBack(selector)\n      return\n    }\n\n    for (const sel of SelectorEngine.find(selector, this._element)) {\n      callBack(sel)\n    }\n  }\n}\n\nexport default ScrollBarHelper\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap modal.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport Backdrop from './util/backdrop.js'\nimport { enableDismissTrigger } from './util/component-functions.js'\nimport FocusTrap from './util/focustrap.js'\nimport {\n  defineJQueryPlugin, isRTL, isVisible, reflow\n} from './util/index.js'\nimport ScrollBarHelper from './util/scrollbar.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'modal'\nconst DATA_KEY = 'bs.modal'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst ESCAPE_KEY = 'Escape'\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_OPEN = 'modal-open'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_STATIC = 'modal-static'\n\nconst OPEN_SELECTOR = '.modal.show'\nconst SELECTOR_DIALOG = '.modal-dialog'\nconst SELECTOR_MODAL_BODY = '.modal-body'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"modal\"]'\n\nconst Default = {\n  backdrop: true,\n  focus: true,\n  keyboard: true\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  focus: 'boolean',\n  keyboard: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Modal extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._dialog = SelectorEngine.findOne(SELECTOR_DIALOG, this._element)\n    this._backdrop = this._initializeBackDrop()\n    this._focustrap = this._initializeFocusTrap()\n    this._isShown = false\n    this._isTransitioning = false\n    this._scrollBar = new ScrollBarHelper()\n\n    this._addEventListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, {\n      relatedTarget\n    })\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = true\n    this._isTransitioning = true\n\n    this._scrollBar.hide()\n\n    document.body.classList.add(CLASS_NAME_OPEN)\n\n    this._adjustDialog()\n\n    this._backdrop.show(() => this._showElement(relatedTarget))\n  }\n\n  hide() {\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = false\n    this._isTransitioning = true\n    this._focustrap.deactivate()\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    this._queueCallback(() => this._hideModal(), this._element, this._isAnimated())\n  }\n\n  dispose() {\n    EventHandler.off(window, EVENT_KEY)\n    EventHandler.off(this._dialog, EVENT_KEY)\n\n    this._backdrop.dispose()\n    this._focustrap.deactivate()\n\n    super.dispose()\n  }\n\n  handleUpdate() {\n    this._adjustDialog()\n  }\n\n  // Private\n  _initializeBackDrop() {\n    return new Backdrop({\n      isVisible: Boolean(this._config.backdrop), // 'static' option will be translated to true, and booleans will keep their value,\n      isAnimated: this._isAnimated()\n    })\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    })\n  }\n\n  _showElement(relatedTarget) {\n    // try to append dynamic modal\n    if (!document.body.contains(this._element)) {\n      document.body.append(this._element)\n    }\n\n    this._element.style.display = 'block'\n    this._element.removeAttribute('aria-hidden')\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n    this._element.scrollTop = 0\n\n    const modalBody = SelectorEngine.findOne(SELECTOR_MODAL_BODY, this._dialog)\n    if (modalBody) {\n      modalBody.scrollTop = 0\n    }\n\n    reflow(this._element)\n\n    this._element.classList.add(CLASS_NAME_SHOW)\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._focustrap.activate()\n      }\n\n      this._isTransitioning = false\n      EventHandler.trigger(this._element, EVENT_SHOWN, {\n        relatedTarget\n      })\n    }\n\n    this._queueCallback(transitionComplete, this._dialog, this._isAnimated())\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n      if (event.key !== ESCAPE_KEY) {\n        return\n      }\n\n      if (this._config.keyboard) {\n        this.hide()\n        return\n      }\n\n      this._triggerBackdropTransition()\n    })\n\n    EventHandler.on(window, EVENT_RESIZE, () => {\n      if (this._isShown && !this._isTransitioning) {\n        this._adjustDialog()\n      }\n    })\n\n    EventHandler.on(this._element, EVENT_MOUSEDOWN_DISMISS, event => {\n      // a bad trick to segregate clicks that may start inside dialog but end outside, and avoid listen to scrollbar clicks\n      EventHandler.one(this._element, EVENT_CLICK_DISMISS, event2 => {\n        if (this._element !== event.target || this._element !== event2.target) {\n          return\n        }\n\n        if (this._config.backdrop === 'static') {\n          this._triggerBackdropTransition()\n          return\n        }\n\n        if (this._config.backdrop) {\n          this.hide()\n        }\n      })\n    })\n  }\n\n  _hideModal() {\n    this._element.style.display = 'none'\n    this._element.setAttribute('aria-hidden', true)\n    this._element.removeAttribute('aria-modal')\n    this._element.removeAttribute('role')\n    this._isTransitioning = false\n\n    this._backdrop.hide(() => {\n      document.body.classList.remove(CLASS_NAME_OPEN)\n      this._resetAdjustments()\n      this._scrollBar.reset()\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    })\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_FADE)\n  }\n\n  _triggerBackdropTransition() {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const initialOverflowY = this._element.style.overflowY\n    // return if the following background transition hasn't yet completed\n    if (initialOverflowY === 'hidden' || this._element.classList.contains(CLASS_NAME_STATIC)) {\n      return\n    }\n\n    if (!isModalOverflowing) {\n      this._element.style.overflowY = 'hidden'\n    }\n\n    this._element.classList.add(CLASS_NAME_STATIC)\n    this._queueCallback(() => {\n      this._element.classList.remove(CLASS_NAME_STATIC)\n      this._queueCallback(() => {\n        this._element.style.overflowY = initialOverflowY\n      }, this._dialog)\n    }, this._dialog)\n\n    this._element.focus()\n  }\n\n  /**\n   * The following methods are used to handle overflowing modals\n   */\n\n  _adjustDialog() {\n    const isModalOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const scrollbarWidth = this._scrollBar.getWidth()\n    const isBodyOverflowing = scrollbarWidth > 0\n\n    if (isBodyOverflowing && !isModalOverflowing) {\n      const property = isRTL() ? 'paddingLeft' : 'paddingRight'\n      this._element.style[property] = `${scrollbarWidth}px`\n    }\n\n    if (!isBodyOverflowing && isModalOverflowing) {\n      const property = isRTL() ? 'paddingRight' : 'paddingLeft'\n      this._element.style[property] = `${scrollbarWidth}px`\n    }\n  }\n\n  _resetAdjustments() {\n    this._element.style.paddingLeft = ''\n    this._element.style.paddingRight = ''\n  }\n\n  // Static\n  static jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      const data = Modal.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](relatedTarget)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  const target = SelectorEngine.getElementFromSelector(this)\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  EventHandler.one(target, EVENT_SHOW, showEvent => {\n    if (showEvent.defaultPrevented) {\n      // only register focus restorer if modal will actually get shown\n      return\n    }\n\n    EventHandler.one(target, EVENT_HIDDEN, () => {\n      if (isVisible(this)) {\n        this.focus()\n      }\n    })\n  })\n\n  // avoid conflict when clicking modal toggler while another one is open\n  const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR)\n  if (alreadyOpen) {\n    Modal.getInstance(alreadyOpen).hide()\n  }\n\n  const data = Modal.getOrCreateInstance(target)\n\n  data.toggle(this)\n})\n\nenableDismissTrigger(Modal)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Modal)\n\nexport default Modal\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap offcanvas.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport Backdrop from './util/backdrop.js'\nimport { enableDismissTrigger } from './util/component-functions.js'\nimport FocusTrap from './util/focustrap.js'\nimport {\n  defineJQueryPlugin,\n  isDisabled,\n  isVisible\n} from './util/index.js'\nimport ScrollBarHelper from './util/scrollbar.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'offcanvas'\nconst DATA_KEY = 'bs.offcanvas'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\nconst ESCAPE_KEY = 'Escape'\n\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_SHOWING = 'showing'\nconst CLASS_NAME_HIDING = 'hiding'\nconst CLASS_NAME_BACKDROP = 'offcanvas-backdrop'\nconst OPEN_SELECTOR = '.offcanvas.show'\n\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\n\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"offcanvas\"]'\n\nconst Default = {\n  backdrop: true,\n  keyboard: true,\n  scroll: false\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  keyboard: 'boolean',\n  scroll: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Offcanvas extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._isShown = false\n    this._backdrop = this._initializeBackDrop()\n    this._focustrap = this._initializeFocusTrap()\n    this._addEventListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, { relatedTarget })\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = true\n    this._backdrop.show()\n\n    if (!this._config.scroll) {\n      new ScrollBarHelper().hide()\n    }\n\n    this._element.setAttribute('aria-modal', true)\n    this._element.setAttribute('role', 'dialog')\n    this._element.classList.add(CLASS_NAME_SHOWING)\n\n    const completeCallBack = () => {\n      if (!this._config.scroll || this._config.backdrop) {\n        this._focustrap.activate()\n      }\n\n      this._element.classList.add(CLASS_NAME_SHOW)\n      this._element.classList.remove(CLASS_NAME_SHOWING)\n      EventHandler.trigger(this._element, EVENT_SHOWN, { relatedTarget })\n    }\n\n    this._queueCallback(completeCallBack, this._element, true)\n  }\n\n  hide() {\n    if (!this._isShown) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    this._focustrap.deactivate()\n    this._element.blur()\n    this._isShown = false\n    this._element.classList.add(CLASS_NAME_HIDING)\n    this._backdrop.hide()\n\n    const completeCallback = () => {\n      this._element.classList.remove(CLASS_NAME_SHOW, CLASS_NAME_HIDING)\n      this._element.removeAttribute('aria-modal')\n      this._element.removeAttribute('role')\n\n      if (!this._config.scroll) {\n        new ScrollBarHelper().reset()\n      }\n\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    }\n\n    this._queueCallback(completeCallback, this._element, true)\n  }\n\n  dispose() {\n    this._backdrop.dispose()\n    this._focustrap.deactivate()\n    super.dispose()\n  }\n\n  // Private\n  _initializeBackDrop() {\n    const clickCallback = () => {\n      if (this._config.backdrop === 'static') {\n        EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n        return\n      }\n\n      this.hide()\n    }\n\n    // 'static' option will be translated to true, and booleans will keep their value\n    const isVisible = Boolean(this._config.backdrop)\n\n    return new Backdrop({\n      className: CLASS_NAME_BACKDROP,\n      isVisible,\n      isAnimated: true,\n      rootElement: this._element.parentNode,\n      clickCallback: isVisible ? clickCallback : null\n    })\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    })\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n      if (event.key !== ESCAPE_KEY) {\n        return\n      }\n\n      if (this._config.keyboard) {\n        this.hide()\n        return\n      }\n\n      EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n    })\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Offcanvas.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](this)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  const target = SelectorEngine.getElementFromSelector(this)\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  if (isDisabled(this)) {\n    return\n  }\n\n  EventHandler.one(target, EVENT_HIDDEN, () => {\n    // focus on trigger when it is closed\n    if (isVisible(this)) {\n      this.focus()\n    }\n  })\n\n  // avoid conflict when clicking a toggler of an offcanvas, while another is open\n  const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR)\n  if (alreadyOpen && alreadyOpen !== target) {\n    Offcanvas.getInstance(alreadyOpen).hide()\n  }\n\n  const data = Offcanvas.getOrCreateInstance(target)\n  data.toggle(this)\n})\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const selector of SelectorEngine.find(OPEN_SELECTOR)) {\n    Offcanvas.getOrCreateInstance(selector).show()\n  }\n})\n\nEventHandler.on(window, EVENT_RESIZE, () => {\n  for (const element of SelectorEngine.find('[aria-modal][class*=show][class*=offcanvas-]')) {\n    if (getComputedStyle(element).position !== 'fixed') {\n      Offcanvas.getOrCreateInstance(element).hide()\n    }\n  }\n})\n\nenableDismissTrigger(Offcanvas)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Offcanvas)\n\nexport default Offcanvas\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap util/sanitizer.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n// js-docs-start allow-list\nconst ARIA_ATTRIBUTE_PATTERN = /^aria-[\\w-]*$/i\n\nexport const DefaultAllowlist = {\n  // Global attributes allowed on any supplied element below.\n  '*': ['class', 'dir', 'id', 'lang', 'role', ARIA_ATTRIBUTE_PATTERN],\n  a: ['target', 'href', 'title', 'rel'],\n  area: [],\n  b: [],\n  br: [],\n  col: [],\n  code: [],\n  dd: [],\n  div: [],\n  dl: [],\n  dt: [],\n  em: [],\n  hr: [],\n  h1: [],\n  h2: [],\n  h3: [],\n  h4: [],\n  h5: [],\n  h6: [],\n  i: [],\n  img: ['src', 'srcset', 'alt', 'title', 'width', 'height'],\n  li: [],\n  ol: [],\n  p: [],\n  pre: [],\n  s: [],\n  small: [],\n  span: [],\n  sub: [],\n  sup: [],\n  strong: [],\n  u: [],\n  ul: []\n}\n// js-docs-end allow-list\n\nconst uriAttributes = new Set([\n  'background',\n  'cite',\n  'href',\n  'itemtype',\n  'longdesc',\n  'poster',\n  'src',\n  'xlink:href'\n])\n\n/**\n * A pattern that recognizes URLs that are safe wrt. XSS in URL navigation\n * contexts.\n *\n * Shout-out to Angular https://github.com/angular/angular/blob/15.2.8/packages/core/src/sanitization/url_sanitizer.ts#L38\n */\n// eslint-disable-next-line unicorn/better-regex\nconst SAFE_URL_PATTERN = /^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i\n\nconst allowedAttribute = (attribute, allowedAttributeList) => {\n  const attributeName = attribute.nodeName.toLowerCase()\n\n  if (allowedAttributeList.includes(attributeName)) {\n    if (uriAttributes.has(attributeName)) {\n      return Boolean(SAFE_URL_PATTERN.test(attribute.nodeValue))\n    }\n\n    return true\n  }\n\n  // Check if a regular expression validates the attribute.\n  return allowedAttributeList.filter(attributeRegex => attributeRegex instanceof RegExp)\n    .some(regex => regex.test(attributeName))\n}\n\nexport function sanitizeHtml(unsafeHtml, allowList, sanitizeFunction) {\n  if (!unsafeHtml.length) {\n    return unsafeHtml\n  }\n\n  if (sanitizeFunction && typeof sanitizeFunction === 'function') {\n    return sanitizeFunction(unsafeHtml)\n  }\n\n  const domParser = new window.DOMParser()\n  const createdDocument = domParser.parseFromString(unsafeHtml, 'text/html')\n  const elements = [].concat(...createdDocument.body.querySelectorAll('*'))\n\n  for (const element of elements) {\n    const elementName = element.nodeName.toLowerCase()\n\n    if (!Object.keys(allowList).includes(elementName)) {\n      element.remove()\n      continue\n    }\n\n    const attributeList = [].concat(...element.attributes)\n    const allowedAttributes = [].concat(allowList['*'] || [], allowList[elementName] || [])\n\n    for (const attribute of attributeList) {\n      if (!allowedAttribute(attribute, allowedAttributes)) {\n        element.removeAttribute(attribute.nodeName)\n      }\n    }\n  }\n\n  return createdDocument.body.innerHTML\n}\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap util/template-factory.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport SelectorEngine from '../dom/selector-engine.js'\nimport Config from './config.js'\nimport { DefaultAllowlist, sanitizeHtml } from './sanitizer.js'\nimport { execute, getElement, isElement } from './index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'TemplateFactory'\n\nconst Default = {\n  allowList: DefaultAllowlist,\n  content: {}, // { selector : text ,  selector2 : text2 , }\n  extraClass: '',\n  html: false,\n  sanitize: true,\n  sanitizeFn: null,\n  template: '<div></div>'\n}\n\nconst DefaultType = {\n  allowList: 'object',\n  content: 'object',\n  extraClass: '(string|function)',\n  html: 'boolean',\n  sanitize: 'boolean',\n  sanitizeFn: '(null|function)',\n  template: 'string'\n}\n\nconst DefaultContentType = {\n  entry: '(string|element|function|null)',\n  selector: '(string|element)'\n}\n\n/**\n * Class definition\n */\n\nclass TemplateFactory extends Config {\n  constructor(config) {\n    super()\n    this._config = this._getConfig(config)\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  getContent() {\n    return Object.values(this._config.content)\n      .map(config => this._resolvePossibleFunction(config))\n      .filter(Boolean)\n  }\n\n  hasContent() {\n    return this.getContent().length > 0\n  }\n\n  changeContent(content) {\n    this._checkContent(content)\n    this._config.content = { ...this._config.content, ...content }\n    return this\n  }\n\n  toHtml() {\n    const templateWrapper = document.createElement('div')\n    templateWrapper.innerHTML = this._maybeSanitize(this._config.template)\n\n    for (const [selector, text] of Object.entries(this._config.content)) {\n      this._setContent(templateWrapper, text, selector)\n    }\n\n    const template = templateWrapper.children[0]\n    const extraClass = this._resolvePossibleFunction(this._config.extraClass)\n\n    if (extraClass) {\n      template.classList.add(...extraClass.split(' '))\n    }\n\n    return template\n  }\n\n  // Private\n  _typeCheckConfig(config) {\n    super._typeCheckConfig(config)\n    this._checkContent(config.content)\n  }\n\n  _checkContent(arg) {\n    for (const [selector, content] of Object.entries(arg)) {\n      super._typeCheckConfig({ selector, entry: content }, DefaultContentType)\n    }\n  }\n\n  _setContent(template, content, selector) {\n    const templateElement = SelectorEngine.findOne(selector, template)\n\n    if (!templateElement) {\n      return\n    }\n\n    content = this._resolvePossibleFunction(content)\n\n    if (!content) {\n      templateElement.remove()\n      return\n    }\n\n    if (isElement(content)) {\n      this._putElementInTemplate(getElement(content), templateElement)\n      return\n    }\n\n    if (this._config.html) {\n      templateElement.innerHTML = this._maybeSanitize(content)\n      return\n    }\n\n    templateElement.textContent = content\n  }\n\n  _maybeSanitize(arg) {\n    return this._config.sanitize ? sanitizeHtml(arg, this._config.allowList, this._config.sanitizeFn) : arg\n  }\n\n  _resolvePossibleFunction(arg) {\n    return execute(arg, [undefined, this])\n  }\n\n  _putElementInTemplate(element, templateElement) {\n    if (this._config.html) {\n      templateElement.innerHTML = ''\n      templateElement.append(element)\n      return\n    }\n\n    templateElement.textContent = element.textContent\n  }\n}\n\nexport default TemplateFactory\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap tooltip.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport * as Popper from '@popperjs/core'\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport Manipulator from './dom/manipulator.js'\nimport {\n  defineJQueryPlugin, execute, findShadowRoot, getElement, getUID, isRTL, noop\n} from './util/index.js'\nimport { DefaultAllowlist } from './util/sanitizer.js'\nimport TemplateFactory from './util/template-factory.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'tooltip'\nconst DISALLOWED_ATTRIBUTES = new Set(['sanitize', 'allowList', 'sanitizeFn'])\n\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_MODAL = 'modal'\nconst CLASS_NAME_SHOW = 'show'\n\nconst SELECTOR_TOOLTIP_INNER = '.tooltip-inner'\nconst SELECTOR_MODAL = `.${CLASS_NAME_MODAL}`\n\nconst EVENT_MODAL_HIDE = 'hide.bs.modal'\n\nconst TRIGGER_HOVER = 'hover'\nconst TRIGGER_FOCUS = 'focus'\nconst TRIGGER_CLICK = 'click'\nconst TRIGGER_MANUAL = 'manual'\n\nconst EVENT_HIDE = 'hide'\nconst EVENT_HIDDEN = 'hidden'\nconst EVENT_SHOW = 'show'\nconst EVENT_SHOWN = 'shown'\nconst EVENT_INSERTED = 'inserted'\nconst EVENT_CLICK = 'click'\nconst EVENT_FOCUSIN = 'focusin'\nconst EVENT_FOCUSOUT = 'focusout'\nconst EVENT_MOUSEENTER = 'mouseenter'\nconst EVENT_MOUSELEAVE = 'mouseleave'\n\nconst AttachmentMap = {\n  AUTO: 'auto',\n  TOP: 'top',\n  RIGHT: isRTL() ? 'left' : 'right',\n  BOTTOM: 'bottom',\n  LEFT: isRTL() ? 'right' : 'left'\n}\n\nconst Default = {\n  allowList: DefaultAllowlist,\n  animation: true,\n  boundary: 'clippingParents',\n  container: false,\n  customClass: '',\n  delay: 0,\n  fallbackPlacements: ['top', 'right', 'bottom', 'left'],\n  html: false,\n  offset: [0, 6],\n  placement: 'top',\n  popperConfig: null,\n  sanitize: true,\n  sanitizeFn: null,\n  selector: false,\n  template: '<div class=\"tooltip\" role=\"tooltip\">' +\n            '<div class=\"tooltip-arrow\"></div>' +\n            '<div class=\"tooltip-inner\"></div>' +\n            '</div>',\n  title: '',\n  trigger: 'hover focus'\n}\n\nconst DefaultType = {\n  allowList: 'object',\n  animation: 'boolean',\n  boundary: '(string|element)',\n  container: '(string|element|boolean)',\n  customClass: '(string|function)',\n  delay: '(number|object)',\n  fallbackPlacements: 'array',\n  html: 'boolean',\n  offset: '(array|string|function)',\n  placement: '(string|function)',\n  popperConfig: '(null|object|function)',\n  sanitize: 'boolean',\n  sanitizeFn: '(null|function)',\n  selector: '(string|boolean)',\n  template: 'string',\n  title: '(string|element|function)',\n  trigger: 'string'\n}\n\n/**\n * Class definition\n */\n\nclass Tooltip extends BaseComponent {\n  constructor(element, config) {\n    if (typeof Popper === 'undefined') {\n      throw new TypeError('Bootstrap\\'s tooltips require Popper (https://popper.js.org/docs/v2/)')\n    }\n\n    super(element, config)\n\n    // Private\n    this._isEnabled = true\n    this._timeout = 0\n    this._isHovered = null\n    this._activeTrigger = {}\n    this._popper = null\n    this._templateFactory = null\n    this._newContent = null\n\n    // Protected\n    this.tip = null\n\n    this._setListeners()\n\n    if (!this._config.selector) {\n      this._fixTitle()\n    }\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  enable() {\n    this._isEnabled = true\n  }\n\n  disable() {\n    this._isEnabled = false\n  }\n\n  toggleEnabled() {\n    this._isEnabled = !this._isEnabled\n  }\n\n  toggle() {\n    if (!this._isEnabled) {\n      return\n    }\n\n    if (this._isShown()) {\n      this._leave()\n      return\n    }\n\n    this._enter()\n  }\n\n  dispose() {\n    clearTimeout(this._timeout)\n\n    EventHandler.off(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler)\n\n    if (this._element.getAttribute('data-bs-original-title')) {\n      this._element.setAttribute('title', this._element.getAttribute('data-bs-original-title'))\n    }\n\n    this._disposePopper()\n    super.dispose()\n  }\n\n  show() {\n    if (this._element.style.display === 'none') {\n      throw new Error('Please use show on visible elements')\n    }\n\n    if (!(this._isWithContent() && this._isEnabled)) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOW))\n    const shadowRoot = findShadowRoot(this._element)\n    const isInTheDom = (shadowRoot || this._element.ownerDocument.documentElement).contains(this._element)\n\n    if (showEvent.defaultPrevented || !isInTheDom) {\n      return\n    }\n\n    // TODO: v6 remove this or make it optional\n    this._disposePopper()\n\n    const tip = this._getTipElement()\n\n    this._element.setAttribute('aria-describedby', tip.getAttribute('id'))\n\n    const { container } = this._config\n\n    if (!this._element.ownerDocument.documentElement.contains(this.tip)) {\n      container.append(tip)\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_INSERTED))\n    }\n\n    this._popper = this._createPopper(tip)\n\n    tip.classList.add(CLASS_NAME_SHOW)\n\n    // If this is a touch-enabled device we add extra\n    // empty mouseover listeners to the body's immediate children;\n    // only needed because of broken event delegation on iOS\n    // https://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.on(element, 'mouseover', noop)\n      }\n    }\n\n    const complete = () => {\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_SHOWN))\n\n      if (this._isHovered === false) {\n        this._leave()\n      }\n\n      this._isHovered = false\n    }\n\n    this._queueCallback(complete, this.tip, this._isAnimated())\n  }\n\n  hide() {\n    if (!this._isShown()) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDE))\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const tip = this._getTipElement()\n    tip.classList.remove(CLASS_NAME_SHOW)\n\n    // If this is a touch-enabled device we remove the extra\n    // empty mouseover listeners we added for iOS support\n    if ('ontouchstart' in document.documentElement) {\n      for (const element of [].concat(...document.body.children)) {\n        EventHandler.off(element, 'mouseover', noop)\n      }\n    }\n\n    this._activeTrigger[TRIGGER_CLICK] = false\n    this._activeTrigger[TRIGGER_FOCUS] = false\n    this._activeTrigger[TRIGGER_HOVER] = false\n    this._isHovered = null // it is a trick to support manual triggering\n\n    const complete = () => {\n      if (this._isWithActiveTrigger()) {\n        return\n      }\n\n      if (!this._isHovered) {\n        this._disposePopper()\n      }\n\n      this._element.removeAttribute('aria-describedby')\n      EventHandler.trigger(this._element, this.constructor.eventName(EVENT_HIDDEN))\n    }\n\n    this._queueCallback(complete, this.tip, this._isAnimated())\n  }\n\n  update() {\n    if (this._popper) {\n      this._popper.update()\n    }\n  }\n\n  // Protected\n  _isWithContent() {\n    return Boolean(this._getTitle())\n  }\n\n  _getTipElement() {\n    if (!this.tip) {\n      this.tip = this._createTipElement(this._newContent || this._getContentForTemplate())\n    }\n\n    return this.tip\n  }\n\n  _createTipElement(content) {\n    const tip = this._getTemplateFactory(content).toHtml()\n\n    // TODO: remove this check in v6\n    if (!tip) {\n      return null\n    }\n\n    tip.classList.remove(CLASS_NAME_FADE, CLASS_NAME_SHOW)\n    // TODO: v6 the following can be achieved with CSS only\n    tip.classList.add(`bs-${this.constructor.NAME}-auto`)\n\n    const tipId = getUID(this.constructor.NAME).toString()\n\n    tip.setAttribute('id', tipId)\n\n    if (this._isAnimated()) {\n      tip.classList.add(CLASS_NAME_FADE)\n    }\n\n    return tip\n  }\n\n  setContent(content) {\n    this._newContent = content\n    if (this._isShown()) {\n      this._disposePopper()\n      this.show()\n    }\n  }\n\n  _getTemplateFactory(content) {\n    if (this._templateFactory) {\n      this._templateFactory.changeContent(content)\n    } else {\n      this._templateFactory = new TemplateFactory({\n        ...this._config,\n        // the `content` var has to be after `this._config`\n        // to override config.content in case of popover\n        content,\n        extraClass: this._resolvePossibleFunction(this._config.customClass)\n      })\n    }\n\n    return this._templateFactory\n  }\n\n  _getContentForTemplate() {\n    return {\n      [SELECTOR_TOOLTIP_INNER]: this._getTitle()\n    }\n  }\n\n  _getTitle() {\n    return this._resolvePossibleFunction(this._config.title) || this._element.getAttribute('data-bs-original-title')\n  }\n\n  // Private\n  _initializeOnDelegatedTarget(event) {\n    return this.constructor.getOrCreateInstance(event.delegateTarget, this._getDelegateConfig())\n  }\n\n  _isAnimated() {\n    return this._config.animation || (this.tip && this.tip.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _isShown() {\n    return this.tip && this.tip.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  _createPopper(tip) {\n    const placement = execute(this._config.placement, [this, tip, this._element])\n    const attachment = AttachmentMap[placement.toUpperCase()]\n    return Popper.createPopper(this._element, tip, this._getPopperConfig(attachment))\n  }\n\n  _getOffset() {\n    const { offset } = this._config\n\n    if (typeof offset === 'string') {\n      return offset.split(',').map(value => Number.parseInt(value, 10))\n    }\n\n    if (typeof offset === 'function') {\n      return popperData => offset(popperData, this._element)\n    }\n\n    return offset\n  }\n\n  _resolvePossibleFunction(arg) {\n    return execute(arg, [this._element, this._element])\n  }\n\n  _getPopperConfig(attachment) {\n    const defaultBsPopperConfig = {\n      placement: attachment,\n      modifiers: [\n        {\n          name: 'flip',\n          options: {\n            fallbackPlacements: this._config.fallbackPlacements\n          }\n        },\n        {\n          name: 'offset',\n          options: {\n            offset: this._getOffset()\n          }\n        },\n        {\n          name: 'preventOverflow',\n          options: {\n            boundary: this._config.boundary\n          }\n        },\n        {\n          name: 'arrow',\n          options: {\n            element: `.${this.constructor.NAME}-arrow`\n          }\n        },\n        {\n          name: 'preSetPlacement',\n          enabled: true,\n          phase: 'beforeMain',\n          fn: data => {\n            // Pre-set Popper's placement attribute in order to read the arrow sizes properly.\n            // Otherwise, Popper mixes up the width and height dimensions since the initial arrow style is for top placement\n            this._getTipElement().setAttribute('data-popper-placement', data.state.placement)\n          }\n        }\n      ]\n    }\n\n    return {\n      ...defaultBsPopperConfig,\n      ...execute(this._config.popperConfig, [undefined, defaultBsPopperConfig])\n    }\n  }\n\n  _setListeners() {\n    const triggers = this._config.trigger.split(' ')\n\n    for (const trigger of triggers) {\n      if (trigger === 'click') {\n        EventHandler.on(this._element, this.constructor.eventName(EVENT_CLICK), this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event)\n          context.toggle()\n        })\n      } else if (trigger !== TRIGGER_MANUAL) {\n        const eventIn = trigger === TRIGGER_HOVER ?\n          this.constructor.eventName(EVENT_MOUSEENTER) :\n          this.constructor.eventName(EVENT_FOCUSIN)\n        const eventOut = trigger === TRIGGER_HOVER ?\n          this.constructor.eventName(EVENT_MOUSELEAVE) :\n          this.constructor.eventName(EVENT_FOCUSOUT)\n\n        EventHandler.on(this._element, eventIn, this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event)\n          context._activeTrigger[event.type === 'focusin' ? TRIGGER_FOCUS : TRIGGER_HOVER] = true\n          context._enter()\n        })\n        EventHandler.on(this._element, eventOut, this._config.selector, event => {\n          const context = this._initializeOnDelegatedTarget(event)\n          context._activeTrigger[event.type === 'focusout' ? TRIGGER_FOCUS : TRIGGER_HOVER] =\n            context._element.contains(event.relatedTarget)\n\n          context._leave()\n        })\n      }\n    }\n\n    this._hideModalHandler = () => {\n      if (this._element) {\n        this.hide()\n      }\n    }\n\n    EventHandler.on(this._element.closest(SELECTOR_MODAL), EVENT_MODAL_HIDE, this._hideModalHandler)\n  }\n\n  _fixTitle() {\n    const title = this._element.getAttribute('title')\n\n    if (!title) {\n      return\n    }\n\n    if (!this._element.getAttribute('aria-label') && !this._element.textContent.trim()) {\n      this._element.setAttribute('aria-label', title)\n    }\n\n    this._element.setAttribute('data-bs-original-title', title) // DO NOT USE IT. Is only for backwards compatibility\n    this._element.removeAttribute('title')\n  }\n\n  _enter() {\n    if (this._isShown() || this._isHovered) {\n      this._isHovered = true\n      return\n    }\n\n    this._isHovered = true\n\n    this._setTimeout(() => {\n      if (this._isHovered) {\n        this.show()\n      }\n    }, this._config.delay.show)\n  }\n\n  _leave() {\n    if (this._isWithActiveTrigger()) {\n      return\n    }\n\n    this._isHovered = false\n\n    this._setTimeout(() => {\n      if (!this._isHovered) {\n        this.hide()\n      }\n    }, this._config.delay.hide)\n  }\n\n  _setTimeout(handler, timeout) {\n    clearTimeout(this._timeout)\n    this._timeout = setTimeout(handler, timeout)\n  }\n\n  _isWithActiveTrigger() {\n    return Object.values(this._activeTrigger).includes(true)\n  }\n\n  _getConfig(config) {\n    const dataAttributes = Manipulator.getDataAttributes(this._element)\n\n    for (const dataAttribute of Object.keys(dataAttributes)) {\n      if (DISALLOWED_ATTRIBUTES.has(dataAttribute)) {\n        delete dataAttributes[dataAttribute]\n      }\n    }\n\n    config = {\n      ...dataAttributes,\n      ...(typeof config === 'object' && config ? config : {})\n    }\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  _configAfterMerge(config) {\n    config.container = config.container === false ? document.body : getElement(config.container)\n\n    if (typeof config.delay === 'number') {\n      config.delay = {\n        show: config.delay,\n        hide: config.delay\n      }\n    }\n\n    if (typeof config.title === 'number') {\n      config.title = config.title.toString()\n    }\n\n    if (typeof config.content === 'number') {\n      config.content = config.content.toString()\n    }\n\n    return config\n  }\n\n  _getDelegateConfig() {\n    const config = {}\n\n    for (const [key, value] of Object.entries(this._config)) {\n      if (this.constructor.Default[key] !== value) {\n        config[key] = value\n      }\n    }\n\n    config.selector = false\n    config.trigger = 'manual'\n\n    // In the future can be replaced with:\n    // const keysWithDifferentValues = Object.entries(this._config).filter(entry => this.constructor.Default[entry[0]] !== this._config[entry[0]])\n    // `Object.fromEntries(keysWithDifferentValues)`\n    return config\n  }\n\n  _disposePopper() {\n    if (this._popper) {\n      this._popper.destroy()\n      this._popper = null\n    }\n\n    if (this.tip) {\n      this.tip.remove()\n      this.tip = null\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tooltip.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Tooltip)\n\nexport default Tooltip\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap popover.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Tooltip from './tooltip.js'\nimport { defineJQueryPlugin } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'popover'\n\nconst SELECTOR_TITLE = '.popover-header'\nconst SELECTOR_CONTENT = '.popover-body'\n\nconst Default = {\n  ...Tooltip.Default,\n  content: '',\n  offset: [0, 8],\n  placement: 'right',\n  template: '<div class=\"popover\" role=\"tooltip\">' +\n    '<div class=\"popover-arrow\"></div>' +\n    '<h3 class=\"popover-header\"></h3>' +\n    '<div class=\"popover-body\"></div>' +\n    '</div>',\n  trigger: 'click'\n}\n\nconst DefaultType = {\n  ...Tooltip.DefaultType,\n  content: '(null|string|element|function)'\n}\n\n/**\n * Class definition\n */\n\nclass Popover extends Tooltip {\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Overrides\n  _isWithContent() {\n    return this._getTitle() || this._getContent()\n  }\n\n  // Private\n  _getContentForTemplate() {\n    return {\n      [SELECTOR_TITLE]: this._getTitle(),\n      [SELECTOR_CONTENT]: this._getContent()\n    }\n  }\n\n  _getContent() {\n    return this._resolvePossibleFunction(this._config.content)\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Popover.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Popover)\n\nexport default Popover\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap scrollspy.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport {\n  defineJQueryPlugin, getElement, isDisabled, isVisible\n} from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'scrollspy'\nconst DATA_KEY = 'bs.scrollspy'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\n\nconst EVENT_ACTIVATE = `activate${EVENT_KEY}`\nconst EVENT_CLICK = `click${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_DROPDOWN_ITEM = 'dropdown-item'\nconst CLASS_NAME_ACTIVE = 'active'\n\nconst SELECTOR_DATA_SPY = '[data-bs-spy=\"scroll\"]'\nconst SELECTOR_TARGET_LINKS = '[href]'\nconst SELECTOR_NAV_LIST_GROUP = '.nav, .list-group'\nconst SELECTOR_NAV_LINKS = '.nav-link'\nconst SELECTOR_NAV_ITEMS = '.nav-item'\nconst SELECTOR_LIST_ITEMS = '.list-group-item'\nconst SELECTOR_LINK_ITEMS = `${SELECTOR_NAV_LINKS}, ${SELECTOR_NAV_ITEMS} > ${SELECTOR_NAV_LINKS}, ${SELECTOR_LIST_ITEMS}`\nconst SELECTOR_DROPDOWN = '.dropdown'\nconst SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle'\n\nconst Default = {\n  offset: null, // TODO: v6 @deprecated, keep it for backwards compatibility reasons\n  rootMargin: '0px 0px -25%',\n  smoothScroll: false,\n  target: null,\n  threshold: [0.1, 0.5, 1]\n}\n\nconst DefaultType = {\n  offset: '(number|null)', // TODO v6 @deprecated, keep it for backwards compatibility reasons\n  rootMargin: 'string',\n  smoothScroll: 'boolean',\n  target: 'element',\n  threshold: 'array'\n}\n\n/**\n * Class definition\n */\n\nclass ScrollSpy extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    // this._element is the observablesContainer and config.target the menu links wrapper\n    this._targetLinks = new Map()\n    this._observableSections = new Map()\n    this._rootElement = getComputedStyle(this._element).overflowY === 'visible' ? null : this._element\n    this._activeTarget = null\n    this._observer = null\n    this._previousScrollData = {\n      visibleEntryTop: 0,\n      parentScrollTop: 0\n    }\n    this.refresh() // initialize\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  refresh() {\n    this._initializeTargetsAndObservables()\n    this._maybeEnableSmoothScroll()\n\n    if (this._observer) {\n      this._observer.disconnect()\n    } else {\n      this._observer = this._getNewObserver()\n    }\n\n    for (const section of this._observableSections.values()) {\n      this._observer.observe(section)\n    }\n  }\n\n  dispose() {\n    this._observer.disconnect()\n    super.dispose()\n  }\n\n  // Private\n  _configAfterMerge(config) {\n    // TODO: on v6 target should be given explicitly & remove the {target: 'ss-target'} case\n    config.target = getElement(config.target) || document.body\n\n    // TODO: v6 Only for backwards compatibility reasons. Use rootMargin only\n    config.rootMargin = config.offset ? `${config.offset}px 0px -30%` : config.rootMargin\n\n    if (typeof config.threshold === 'string') {\n      config.threshold = config.threshold.split(',').map(value => Number.parseFloat(value))\n    }\n\n    return config\n  }\n\n  _maybeEnableSmoothScroll() {\n    if (!this._config.smoothScroll) {\n      return\n    }\n\n    // unregister any previous listeners\n    EventHandler.off(this._config.target, EVENT_CLICK)\n\n    EventHandler.on(this._config.target, EVENT_CLICK, SELECTOR_TARGET_LINKS, event => {\n      const observableSection = this._observableSections.get(event.target.hash)\n      if (observableSection) {\n        event.preventDefault()\n        const root = this._rootElement || window\n        const height = observableSection.offsetTop - this._element.offsetTop\n        if (root.scrollTo) {\n          root.scrollTo({ top: height, behavior: 'smooth' })\n          return\n        }\n\n        // Chrome 60 doesn't support `scrollTo`\n        root.scrollTop = height\n      }\n    })\n  }\n\n  _getNewObserver() {\n    const options = {\n      root: this._rootElement,\n      threshold: this._config.threshold,\n      rootMargin: this._config.rootMargin\n    }\n\n    return new IntersectionObserver(entries => this._observerCallback(entries), options)\n  }\n\n  // The logic of selection\n  _observerCallback(entries) {\n    const targetElement = entry => this._targetLinks.get(`#${entry.target.id}`)\n    const activate = entry => {\n      this._previousScrollData.visibleEntryTop = entry.target.offsetTop\n      this._process(targetElement(entry))\n    }\n\n    const parentScrollTop = (this._rootElement || document.documentElement).scrollTop\n    const userScrollsDown = parentScrollTop >= this._previousScrollData.parentScrollTop\n    this._previousScrollData.parentScrollTop = parentScrollTop\n\n    for (const entry of entries) {\n      if (!entry.isIntersecting) {\n        this._activeTarget = null\n        this._clearActiveClass(targetElement(entry))\n\n        continue\n      }\n\n      const entryIsLowerThanPrevious = entry.target.offsetTop >= this._previousScrollData.visibleEntryTop\n      // if we are scrolling down, pick the bigger offsetTop\n      if (userScrollsDown && entryIsLowerThanPrevious) {\n        activate(entry)\n        // if parent isn't scrolled, let's keep the first visible item, breaking the iteration\n        if (!parentScrollTop) {\n          return\n        }\n\n        continue\n      }\n\n      // if we are scrolling up, pick the smallest offsetTop\n      if (!userScrollsDown && !entryIsLowerThanPrevious) {\n        activate(entry)\n      }\n    }\n  }\n\n  _initializeTargetsAndObservables() {\n    this._targetLinks = new Map()\n    this._observableSections = new Map()\n\n    const targetLinks = SelectorEngine.find(SELECTOR_TARGET_LINKS, this._config.target)\n\n    for (const anchor of targetLinks) {\n      // ensure that the anchor has an id and is not disabled\n      if (!anchor.hash || isDisabled(anchor)) {\n        continue\n      }\n\n      const observableSection = SelectorEngine.findOne(decodeURI(anchor.hash), this._element)\n\n      // ensure that the observableSection exists & is visible\n      if (isVisible(observableSection)) {\n        this._targetLinks.set(decodeURI(anchor.hash), anchor)\n        this._observableSections.set(anchor.hash, observableSection)\n      }\n    }\n  }\n\n  _process(target) {\n    if (this._activeTarget === target) {\n      return\n    }\n\n    this._clearActiveClass(this._config.target)\n    this._activeTarget = target\n    target.classList.add(CLASS_NAME_ACTIVE)\n    this._activateParents(target)\n\n    EventHandler.trigger(this._element, EVENT_ACTIVATE, { relatedTarget: target })\n  }\n\n  _activateParents(target) {\n    // Activate dropdown parents\n    if (target.classList.contains(CLASS_NAME_DROPDOWN_ITEM)) {\n      SelectorEngine.findOne(SELECTOR_DROPDOWN_TOGGLE, target.closest(SELECTOR_DROPDOWN))\n        .classList.add(CLASS_NAME_ACTIVE)\n      return\n    }\n\n    for (const listGroup of SelectorEngine.parents(target, SELECTOR_NAV_LIST_GROUP)) {\n      // Set triggered links parents as active\n      // With both <ul> and <nav> markup a parent is the previous sibling of any nav ancestor\n      for (const item of SelectorEngine.prev(listGroup, SELECTOR_LINK_ITEMS)) {\n        item.classList.add(CLASS_NAME_ACTIVE)\n      }\n    }\n  }\n\n  _clearActiveClass(parent) {\n    parent.classList.remove(CLASS_NAME_ACTIVE)\n\n    const activeNodes = SelectorEngine.find(`${SELECTOR_TARGET_LINKS}.${CLASS_NAME_ACTIVE}`, parent)\n    for (const node of activeNodes) {\n      node.classList.remove(CLASS_NAME_ACTIVE)\n    }\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = ScrollSpy.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const spy of SelectorEngine.find(SELECTOR_DATA_SPY)) {\n    ScrollSpy.getOrCreateInstance(spy)\n  }\n})\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(ScrollSpy)\n\nexport default ScrollSpy\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap tab.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport { defineJQueryPlugin, getNextActiveElement, isDisabled } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'tab'\nconst DATA_KEY = 'bs.tab'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}`\nconst EVENT_KEYDOWN = `keydown${EVENT_KEY}`\nconst EVENT_LOAD_DATA_API = `load${EVENT_KEY}`\n\nconst ARROW_LEFT_KEY = 'ArrowLeft'\nconst ARROW_RIGHT_KEY = 'ArrowRight'\nconst ARROW_UP_KEY = 'ArrowUp'\nconst ARROW_DOWN_KEY = 'ArrowDown'\nconst HOME_KEY = 'Home'\nconst END_KEY = 'End'\n\nconst CLASS_NAME_ACTIVE = 'active'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_DROPDOWN = 'dropdown'\n\nconst SELECTOR_DROPDOWN_TOGGLE = '.dropdown-toggle'\nconst SELECTOR_DROPDOWN_MENU = '.dropdown-menu'\nconst NOT_SELECTOR_DROPDOWN_TOGGLE = `:not(${SELECTOR_DROPDOWN_TOGGLE})`\n\nconst SELECTOR_TAB_PANEL = '.list-group, .nav, [role=\"tablist\"]'\nconst SELECTOR_OUTER = '.nav-item, .list-group-item'\nconst SELECTOR_INNER = `.nav-link${NOT_SELECTOR_DROPDOWN_TOGGLE}, .list-group-item${NOT_SELECTOR_DROPDOWN_TOGGLE}, [role=\"tab\"]${NOT_SELECTOR_DROPDOWN_TOGGLE}`\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"tab\"], [data-bs-toggle=\"pill\"], [data-bs-toggle=\"list\"]' // TODO: could only be `tab` in v6\nconst SELECTOR_INNER_ELEM = `${SELECTOR_INNER}, ${SELECTOR_DATA_TOGGLE}`\n\nconst SELECTOR_DATA_TOGGLE_ACTIVE = `.${CLASS_NAME_ACTIVE}[data-bs-toggle=\"tab\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"pill\"], .${CLASS_NAME_ACTIVE}[data-bs-toggle=\"list\"]`\n\n/**\n * Class definition\n */\n\nclass Tab extends BaseComponent {\n  constructor(element) {\n    super(element)\n    this._parent = this._element.closest(SELECTOR_TAB_PANEL)\n\n    if (!this._parent) {\n      return\n      // TODO: should throw exception in v6\n      // throw new TypeError(`${element.outerHTML} has not a valid parent ${SELECTOR_INNER_ELEM}`)\n    }\n\n    // Set up initial aria attributes\n    this._setInitialAttributes(this._parent, this._getChildren())\n\n    EventHandler.on(this._element, EVENT_KEYDOWN, event => this._keydown(event))\n  }\n\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  show() { // Shows this elem and deactivate the active sibling if exists\n    const innerElem = this._element\n    if (this._elemIsActive(innerElem)) {\n      return\n    }\n\n    // Search for active tab on same parent to deactivate it\n    const active = this._getActiveElem()\n\n    const hideEvent = active ?\n      EventHandler.trigger(active, EVENT_HIDE, { relatedTarget: innerElem }) :\n      null\n\n    const showEvent = EventHandler.trigger(innerElem, EVENT_SHOW, { relatedTarget: active })\n\n    if (showEvent.defaultPrevented || (hideEvent && hideEvent.defaultPrevented)) {\n      return\n    }\n\n    this._deactivate(active, innerElem)\n    this._activate(innerElem, active)\n  }\n\n  // Private\n  _activate(element, relatedElem) {\n    if (!element) {\n      return\n    }\n\n    element.classList.add(CLASS_NAME_ACTIVE)\n\n    this._activate(SelectorEngine.getElementFromSelector(element)) // Search and activate/show the proper section\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.add(CLASS_NAME_SHOW)\n        return\n      }\n\n      element.removeAttribute('tabindex')\n      element.setAttribute('aria-selected', true)\n      this._toggleDropDown(element, true)\n      EventHandler.trigger(element, EVENT_SHOWN, {\n        relatedTarget: relatedElem\n      })\n    }\n\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _deactivate(element, relatedElem) {\n    if (!element) {\n      return\n    }\n\n    element.classList.remove(CLASS_NAME_ACTIVE)\n    element.blur()\n\n    this._deactivate(SelectorEngine.getElementFromSelector(element)) // Search and deactivate the shown section too\n\n    const complete = () => {\n      if (element.getAttribute('role') !== 'tab') {\n        element.classList.remove(CLASS_NAME_SHOW)\n        return\n      }\n\n      element.setAttribute('aria-selected', false)\n      element.setAttribute('tabindex', '-1')\n      this._toggleDropDown(element, false)\n      EventHandler.trigger(element, EVENT_HIDDEN, { relatedTarget: relatedElem })\n    }\n\n    this._queueCallback(complete, element, element.classList.contains(CLASS_NAME_FADE))\n  }\n\n  _keydown(event) {\n    if (!([ARROW_LEFT_KEY, ARROW_RIGHT_KEY, ARROW_UP_KEY, ARROW_DOWN_KEY, HOME_KEY, END_KEY].includes(event.key))) {\n      return\n    }\n\n    event.stopPropagation()// stopPropagation/preventDefault both added to support up/down keys without scrolling the page\n    event.preventDefault()\n\n    const children = this._getChildren().filter(element => !isDisabled(element))\n    let nextActiveElement\n\n    if ([HOME_KEY, END_KEY].includes(event.key)) {\n      nextActiveElement = children[event.key === HOME_KEY ? 0 : children.length - 1]\n    } else {\n      const isNext = [ARROW_RIGHT_KEY, ARROW_DOWN_KEY].includes(event.key)\n      nextActiveElement = getNextActiveElement(children, event.target, isNext, true)\n    }\n\n    if (nextActiveElement) {\n      nextActiveElement.focus({ preventScroll: true })\n      Tab.getOrCreateInstance(nextActiveElement).show()\n    }\n  }\n\n  _getChildren() { // collection of inner elements\n    return SelectorEngine.find(SELECTOR_INNER_ELEM, this._parent)\n  }\n\n  _getActiveElem() {\n    return this._getChildren().find(child => this._elemIsActive(child)) || null\n  }\n\n  _setInitialAttributes(parent, children) {\n    this._setAttributeIfNotExists(parent, 'role', 'tablist')\n\n    for (const child of children) {\n      this._setInitialAttributesOnChild(child)\n    }\n  }\n\n  _setInitialAttributesOnChild(child) {\n    child = this._getInnerElement(child)\n    const isActive = this._elemIsActive(child)\n    const outerElem = this._getOuterElement(child)\n    child.setAttribute('aria-selected', isActive)\n\n    if (outerElem !== child) {\n      this._setAttributeIfNotExists(outerElem, 'role', 'presentation')\n    }\n\n    if (!isActive) {\n      child.setAttribute('tabindex', '-1')\n    }\n\n    this._setAttributeIfNotExists(child, 'role', 'tab')\n\n    // set attributes to the related panel too\n    this._setInitialAttributesOnTargetPanel(child)\n  }\n\n  _setInitialAttributesOnTargetPanel(child) {\n    const target = SelectorEngine.getElementFromSelector(child)\n\n    if (!target) {\n      return\n    }\n\n    this._setAttributeIfNotExists(target, 'role', 'tabpanel')\n\n    if (child.id) {\n      this._setAttributeIfNotExists(target, 'aria-labelledby', `${child.id}`)\n    }\n  }\n\n  _toggleDropDown(element, open) {\n    const outerElem = this._getOuterElement(element)\n    if (!outerElem.classList.contains(CLASS_DROPDOWN)) {\n      return\n    }\n\n    const toggle = (selector, className) => {\n      const element = SelectorEngine.findOne(selector, outerElem)\n      if (element) {\n        element.classList.toggle(className, open)\n      }\n    }\n\n    toggle(SELECTOR_DROPDOWN_TOGGLE, CLASS_NAME_ACTIVE)\n    toggle(SELECTOR_DROPDOWN_MENU, CLASS_NAME_SHOW)\n    outerElem.setAttribute('aria-expanded', open)\n  }\n\n  _setAttributeIfNotExists(element, attribute, value) {\n    if (!element.hasAttribute(attribute)) {\n      element.setAttribute(attribute, value)\n    }\n  }\n\n  _elemIsActive(elem) {\n    return elem.classList.contains(CLASS_NAME_ACTIVE)\n  }\n\n  // Try to get the inner element (usually the .nav-link)\n  _getInnerElement(elem) {\n    return elem.matches(SELECTOR_INNER_ELEM) ? elem : SelectorEngine.findOne(SELECTOR_INNER_ELEM, elem)\n  }\n\n  // Try to get the outer element (usually the .nav-item)\n  _getOuterElement(elem) {\n    return elem.closest(SELECTOR_OUTER) || elem\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Tab.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config]()\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  if (isDisabled(this)) {\n    return\n  }\n\n  Tab.getOrCreateInstance(this).show()\n})\n\n/**\n * Initialize on focus\n */\nEventHandler.on(window, EVENT_LOAD_DATA_API, () => {\n  for (const element of SelectorEngine.find(SELECTOR_DATA_TOGGLE_ACTIVE)) {\n    Tab.getOrCreateInstance(element)\n  }\n})\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Tab)\n\nexport default Tab\n", "/**\n * --------------------------------------------------------------------------\n * Bootstrap toast.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport { enableDismissTrigger } from './util/component-functions.js'\nimport { defineJQueryPlugin, reflow } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'toast'\nconst DATA_KEY = 'bs.toast'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_MOUSEOVER = `mouseover${EVENT_KEY}`\nconst EVENT_MOUSEOUT = `mouseout${EVENT_KEY}`\nconst EVENT_FOCUSIN = `focusin${EVENT_KEY}`\nconst EVENT_FOCUSOUT = `focusout${EVENT_KEY}`\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\n\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_HIDE = 'hide' // @deprecated - kept here only for backwards compatibility\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_SHOWING = 'showing'\n\nconst DefaultType = {\n  animation: 'boolean',\n  autohide: 'boolean',\n  delay: 'number'\n}\n\nconst Default = {\n  animation: true,\n  autohide: true,\n  delay: 5000\n}\n\n/**\n * Class definition\n */\n\nclass Toast extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._timeout = null\n    this._hasMouseInteraction = false\n    this._hasKeyboardInteraction = false\n    this._setListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  show() {\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW)\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._clearTimeout()\n\n    if (this._config.animation) {\n      this._element.classList.add(CLASS_NAME_FADE)\n    }\n\n    const complete = () => {\n      this._element.classList.remove(CLASS_NAME_SHOWING)\n      EventHandler.trigger(this._element, EVENT_SHOWN)\n\n      this._maybeScheduleHide()\n    }\n\n    this._element.classList.remove(CLASS_NAME_HIDE) // @deprecated\n    reflow(this._element)\n    this._element.classList.add(CLASS_NAME_SHOW, CLASS_NAME_SHOWING)\n\n    this._queueCallback(complete, this._element, this._config.animation)\n  }\n\n  hide() {\n    if (!this.isShown()) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const complete = () => {\n      this._element.classList.add(CLASS_NAME_HIDE) // @deprecated\n      this._element.classList.remove(CLASS_NAME_SHOWING, CLASS_NAME_SHOW)\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    }\n\n    this._element.classList.add(CLASS_NAME_SHOWING)\n    this._queueCallback(complete, this._element, this._config.animation)\n  }\n\n  dispose() {\n    this._clearTimeout()\n\n    if (this.isShown()) {\n      this._element.classList.remove(CLASS_NAME_SHOW)\n    }\n\n    super.dispose()\n  }\n\n  isShown() {\n    return this._element.classList.contains(CLASS_NAME_SHOW)\n  }\n\n  // Private\n\n  _maybeScheduleHide() {\n    if (!this._config.autohide) {\n      return\n    }\n\n    if (this._hasMouseInteraction || this._hasKeyboardInteraction) {\n      return\n    }\n\n    this._timeout = setTimeout(() => {\n      this.hide()\n    }, this._config.delay)\n  }\n\n  _onInteraction(event, isInteracting) {\n    switch (event.type) {\n      case 'mouseover':\n      case 'mouseout': {\n        this._hasMouseInteraction = isInteracting\n        break\n      }\n\n      case 'focusin':\n      case 'focusout': {\n        this._hasKeyboardInteraction = isInteracting\n        break\n      }\n\n      default: {\n        break\n      }\n    }\n\n    if (isInteracting) {\n      this._clearTimeout()\n      return\n    }\n\n    const nextElement = event.relatedTarget\n    if (this._element === nextElement || this._element.contains(nextElement)) {\n      return\n    }\n\n    this._maybeScheduleHide()\n  }\n\n  _setListeners() {\n    EventHandler.on(this._element, EVENT_MOUSEOVER, event => this._onInteraction(event, true))\n    EventHandler.on(this._element, EVENT_MOUSEOUT, event => this._onInteraction(event, false))\n    EventHandler.on(this._element, EVENT_FOCUSIN, event => this._onInteraction(event, true))\n    EventHandler.on(this._element, EVENT_FOCUSOUT, event => this._onInteraction(event, false))\n  }\n\n  _clearTimeout() {\n    clearTimeout(this._timeout)\n    this._timeout = null\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Toast.getOrCreateInstance(this, config)\n\n      if (typeof config === 'string') {\n        if (typeof data[config] === 'undefined') {\n          throw new TypeError(`No method named \"${config}\"`)\n        }\n\n        data[config](this)\n      }\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nenableDismissTrigger(Toast)\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Toast)\n\nexport default Toast\n", "var htmx = (function() {\n  'use strict'\n\n  // Public API\n  const htmx = {\n    // Tsc madness here, assigning the functions directly results in an invalid TypeScript output, but reassigning is fine\n    /* Event processing */\n    /** @type {typeof onLoadHelper} */\n    onLoad: null,\n    /** @type {typeof processNode} */\n    process: null,\n    /** @type {typeof addEventListenerImpl} */\n    on: null,\n    /** @type {typeof removeEventListenerImpl} */\n    off: null,\n    /** @type {typeof triggerEvent} */\n    trigger: null,\n    /** @type {typeof ajaxHelper} */\n    ajax: null,\n    /* DOM querying helpers */\n    /** @type {typeof find} */\n    find: null,\n    /** @type {typeof findAll} */\n    findAll: null,\n    /** @type {typeof closest} */\n    closest: null,\n    /**\n     * Returns the input values that would resolve for a given element via the htmx value resolution mechanism\n     *\n     * @see https://htmx.org/api/#values\n     *\n     * @param {Element} elt the element to resolve values on\n     * @param {HttpVerb} type the request type (e.g. **get** or **post**) non-GET's will include the enclosing form of the element. Defaults to **post**\n     * @returns {Object}\n     */\n    values: function(elt, type) {\n      const inputValues = getInputValues(elt, type || 'post')\n      return inputValues.values\n    },\n    /* DOM manipulation helpers */\n    /** @type {typeof removeElement} */\n    remove: null,\n    /** @type {typeof addClassToElement} */\n    addClass: null,\n    /** @type {typeof removeClassFromElement} */\n    removeClass: null,\n    /** @type {typeof toggleClassOnElement} */\n    toggleClass: null,\n    /** @type {typeof takeClassForElement} */\n    takeClass: null,\n    /** @type {typeof swap} */\n    swap: null,\n    /* Extension entrypoints */\n    /** @type {typeof defineExtension} */\n    defineExtension: null,\n    /** @type {typeof removeExtension} */\n    removeExtension: null,\n    /* Debugging */\n    /** @type {typeof logAll} */\n    logAll: null,\n    /** @type {typeof logNone} */\n    logNone: null,\n    /* Debugging */\n    /**\n     * The logger htmx uses to log with\n     *\n     * @see https://htmx.org/api/#logger\n     */\n    logger: null,\n    /**\n     * A property holding the configuration htmx uses at runtime.\n     *\n     * Note that using a [meta tag](https://htmx.org/docs/#config) is the preferred mechanism for setting these properties.\n     *\n     * @see https://htmx.org/api/#config\n     */\n    config: {\n      /**\n       * Whether to use history.\n       * @type boolean\n       * @default true\n       */\n      historyEnabled: true,\n      /**\n       * The number of pages to keep in **localStorage** for history support.\n       * @type number\n       * @default 10\n       */\n      historyCacheSize: 10,\n      /**\n       * @type boolean\n       * @default false\n       */\n      refreshOnHistoryMiss: false,\n      /**\n       * The default swap style to use if **[hx-swap](https://htmx.org/attributes/hx-swap)** is omitted.\n       * @type HtmxSwapStyle\n       * @default 'innerHTML'\n       */\n      defaultSwapStyle: 'innerHTML',\n      /**\n       * The default delay between receiving a response from the server and doing the swap.\n       * @type number\n       * @default 0\n       */\n      defaultSwapDelay: 0,\n      /**\n       * The default delay between completing the content swap and settling attributes.\n       * @type number\n       * @default 20\n       */\n      defaultSettleDelay: 20,\n      /**\n       * If true, htmx will inject a small amount of CSS into the page to make indicators invisible unless the **htmx-indicator** class is present.\n       * @type boolean\n       * @default true\n       */\n      includeIndicatorStyles: true,\n      /**\n       * The class to place on indicators when a request is in flight.\n       * @type string\n       * @default 'htmx-indicator'\n       */\n      indicatorClass: 'htmx-indicator',\n      /**\n       * The class to place on triggering elements when a request is in flight.\n       * @type string\n       * @default 'htmx-request'\n       */\n      requestClass: 'htmx-request',\n      /**\n       * The class to temporarily place on elements that htmx has added to the DOM.\n       * @type string\n       * @default 'htmx-added'\n       */\n      addedClass: 'htmx-added',\n      /**\n       * The class to place on target elements when htmx is in the settling phase.\n       * @type string\n       * @default 'htmx-settling'\n       */\n      settlingClass: 'htmx-settling',\n      /**\n       * The class to place on target elements when htmx is in the swapping phase.\n       * @type string\n       * @default 'htmx-swapping'\n       */\n      swappingClass: 'htmx-swapping',\n      /**\n       * Allows the use of eval-like functionality in htmx, to enable **hx-vars**, trigger conditions & script tag evaluation. Can be set to **false** for CSP compatibility.\n       * @type boolean\n       * @default true\n       */\n      allowEval: true,\n      /**\n       * If set to false, disables the interpretation of script tags.\n       * @type boolean\n       * @default true\n       */\n      allowScriptTags: true,\n      /**\n       * If set, the nonce will be added to inline scripts.\n       * @type string\n       * @default ''\n       */\n      inlineScriptNonce: '',\n      /**\n       * If set, the nonce will be added to inline styles.\n       * @type string\n       * @default ''\n       */\n      inlineStyleNonce: '',\n      /**\n       * The attributes to settle during the settling phase.\n       * @type string[]\n       * @default ['class', 'style', 'width', 'height']\n       */\n      attributesToSettle: ['class', 'style', 'width', 'height'],\n      /**\n       * Allow cross-site Access-Control requests using credentials such as cookies, authorization headers or TLS client certificates.\n       * @type boolean\n       * @default false\n       */\n      withCredentials: false,\n      /**\n       * @type number\n       * @default 0\n       */\n      timeout: 0,\n      /**\n       * The default implementation of **getWebSocketReconnectDelay** for reconnecting after unexpected connection loss by the event code **Abnormal Closure**, **Service Restart** or **Try Again Later**.\n       * @type {'full-jitter' | ((retryCount:number) => number)}\n       * @default \"full-jitter\"\n       */\n      wsReconnectDelay: 'full-jitter',\n      /**\n       * The type of binary data being received over the WebSocket connection\n       * @type BinaryType\n       * @default 'blob'\n       */\n      wsBinaryType: 'blob',\n      /**\n       * @type string\n       * @default '[hx-disable], [data-hx-disable]'\n       */\n      disableSelector: '[hx-disable], [data-hx-disable]',\n      /**\n       * @type {'auto' | 'instant' | 'smooth'}\n       * @default 'instant'\n       */\n      scrollBehavior: 'instant',\n      /**\n       * If the focused element should be scrolled into view.\n       * @type boolean\n       * @default false\n       */\n      defaultFocusScroll: false,\n      /**\n       * If set to true htmx will include a cache-busting parameter in GET requests to avoid caching partial responses by the browser\n       * @type boolean\n       * @default false\n       */\n      getCacheBusterParam: false,\n      /**\n       * If set to true, htmx will use the View Transition API when swapping in new content.\n       * @type boolean\n       * @default false\n       */\n      globalViewTransitions: false,\n      /**\n       * htmx will format requests with these methods by encoding their parameters in the URL, not the request body\n       * @type {(HttpVerb)[]}\n       * @default ['get', 'delete']\n       */\n      methodsThatUseUrlParams: ['get', 'delete'],\n      /**\n       * If set to true, disables htmx-based requests to non-origin hosts.\n       * @type boolean\n       * @default false\n       */\n      selfRequestsOnly: true,\n      /**\n       * If set to true htmx will not update the title of the document when a title tag is found in new content\n       * @type boolean\n       * @default false\n       */\n      ignoreTitle: false,\n      /**\n       * Whether the target of a boosted element is scrolled into the viewport.\n       * @type boolean\n       * @default true\n       */\n      scrollIntoViewOnBoost: true,\n      /**\n       * The cache to store evaluated trigger specifications into.\n       * You may define a simple object to use a never-clearing cache, or implement your own system using a [proxy object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Proxy)\n       * @type {Object|null}\n       * @default null\n       */\n      triggerSpecsCache: null,\n      /** @type boolean */\n      disableInheritance: false,\n      /** @type HtmxResponseHandlingConfig[] */\n      responseHandling: [\n        { code: '204', swap: false },\n        { code: '[23]..', swap: true },\n        { code: '[45]..', swap: false, error: true }\n      ],\n      /**\n       * Whether to process OOB swaps on elements that are nested within the main response element.\n       * @type boolean\n       * @default true\n       */\n      allowNestedOobSwaps: true\n    },\n    /** @type {typeof parseInterval} */\n    parseInterval: null,\n    /** @type {typeof internalEval} */\n    _: null,\n    version: '2.0.4'\n  }\n  // Tsc madness part 2\n  htmx.onLoad = onLoadHelper\n  htmx.process = processNode\n  htmx.on = addEventListenerImpl\n  htmx.off = removeEventListenerImpl\n  htmx.trigger = triggerEvent\n  htmx.ajax = ajaxHelper\n  htmx.find = find\n  htmx.findAll = findAll\n  htmx.closest = closest\n  htmx.remove = removeElement\n  htmx.addClass = addClassToElement\n  htmx.removeClass = removeClassFromElement\n  htmx.toggleClass = toggleClassOnElement\n  htmx.takeClass = takeClassForElement\n  htmx.swap = swap\n  htmx.defineExtension = defineExtension\n  htmx.removeExtension = removeExtension\n  htmx.logAll = logAll\n  htmx.logNone = logNone\n  htmx.parseInterval = parseInterval\n  htmx._ = internalEval\n\n  const internalAPI = {\n    addTriggerHandler,\n    bodyContains,\n    canAccessLocalStorage,\n    findThisElement,\n    filterValues,\n    swap,\n    hasAttribute,\n    getAttributeValue,\n    getClosestAttributeValue,\n    getClosestMatch,\n    getExpressionVars,\n    getHeaders,\n    getInputValues,\n    getInternalData,\n    getSwapSpecification,\n    getTriggerSpecs,\n    getTarget,\n    makeFragment,\n    mergeObjects,\n    makeSettleInfo,\n    oobSwap,\n    querySelectorExt,\n    settleImmediately,\n    shouldCancel,\n    triggerEvent,\n    triggerErrorEvent,\n    withExtensions\n  }\n\n  const VERBS = ['get', 'post', 'put', 'delete', 'patch']\n  const VERB_SELECTOR = VERBS.map(function(verb) {\n    return '[hx-' + verb + '], [data-hx-' + verb + ']'\n  }).join(', ')\n\n  //= ===================================================================\n  // Utilities\n  //= ===================================================================\n\n  /**\n   * Parses an interval string consistent with the way htmx does. Useful for plugins that have timing-related attributes.\n   *\n   * Caution: Accepts an int followed by either **s** or **ms**. All other values use **parseFloat**\n   *\n   * @see https://htmx.org/api/#parseInterval\n   *\n   * @param {string} str timing string\n   * @returns {number|undefined}\n   */\n  function parseInterval(str) {\n    if (str == undefined) {\n      return undefined\n    }\n\n    let interval = NaN\n    if (str.slice(-2) == 'ms') {\n      interval = parseFloat(str.slice(0, -2))\n    } else if (str.slice(-1) == 's') {\n      interval = parseFloat(str.slice(0, -1)) * 1000\n    } else if (str.slice(-1) == 'm') {\n      interval = parseFloat(str.slice(0, -1)) * 1000 * 60\n    } else {\n      interval = parseFloat(str)\n    }\n    return isNaN(interval) ? undefined : interval\n  }\n\n  /**\n   * @param {Node} elt\n   * @param {string} name\n   * @returns {(string | null)}\n   */\n  function getRawAttribute(elt, name) {\n    return elt instanceof Element && elt.getAttribute(name)\n  }\n\n  /**\n   * @param {Element} elt\n   * @param {string} qualifiedName\n   * @returns {boolean}\n   */\n  // resolve with both hx and data-hx prefixes\n  function hasAttribute(elt, qualifiedName) {\n    return !!elt.hasAttribute && (elt.hasAttribute(qualifiedName) ||\n      elt.hasAttribute('data-' + qualifiedName))\n  }\n\n  /**\n   *\n   * @param {Node} elt\n   * @param {string} qualifiedName\n   * @returns {(string | null)}\n   */\n  function getAttributeValue(elt, qualifiedName) {\n    return getRawAttribute(elt, qualifiedName) || getRawAttribute(elt, 'data-' + qualifiedName)\n  }\n\n  /**\n   * @param {Node} elt\n   * @returns {Node | null}\n   */\n  function parentElt(elt) {\n    const parent = elt.parentElement\n    if (!parent && elt.parentNode instanceof ShadowRoot) return elt.parentNode\n    return parent\n  }\n\n  /**\n   * @returns {Document}\n   */\n  function getDocument() {\n    return document\n  }\n\n  /**\n   * @param {Node} elt\n   * @param {boolean} global\n   * @returns {Node|Document}\n   */\n  function getRootNode(elt, global) {\n    return elt.getRootNode ? elt.getRootNode({ composed: global }) : getDocument()\n  }\n\n  /**\n   * @param {Node} elt\n   * @param {(e:Node) => boolean} condition\n   * @returns {Node | null}\n   */\n  function getClosestMatch(elt, condition) {\n    while (elt && !condition(elt)) {\n      elt = parentElt(elt)\n    }\n\n    return elt || null\n  }\n\n  /**\n   * @param {Element} initialElement\n   * @param {Element} ancestor\n   * @param {string} attributeName\n   * @returns {string|null}\n   */\n  function getAttributeValueWithDisinheritance(initialElement, ancestor, attributeName) {\n    const attributeValue = getAttributeValue(ancestor, attributeName)\n    const disinherit = getAttributeValue(ancestor, 'hx-disinherit')\n    var inherit = getAttributeValue(ancestor, 'hx-inherit')\n    if (initialElement !== ancestor) {\n      if (htmx.config.disableInheritance) {\n        if (inherit && (inherit === '*' || inherit.split(' ').indexOf(attributeName) >= 0)) {\n          return attributeValue\n        } else {\n          return null\n        }\n      }\n      if (disinherit && (disinherit === '*' || disinherit.split(' ').indexOf(attributeName) >= 0)) {\n        return 'unset'\n      }\n    }\n    return attributeValue\n  }\n\n  /**\n   * @param {Element} elt\n   * @param {string} attributeName\n   * @returns {string | null}\n   */\n  function getClosestAttributeValue(elt, attributeName) {\n    let closestAttr = null\n    getClosestMatch(elt, function(e) {\n      return !!(closestAttr = getAttributeValueWithDisinheritance(elt, asElement(e), attributeName))\n    })\n    if (closestAttr !== 'unset') {\n      return closestAttr\n    }\n  }\n\n  /**\n   * @param {Node} elt\n   * @param {string} selector\n   * @returns {boolean}\n   */\n  function matches(elt, selector) {\n    // @ts-ignore: non-standard properties for browser compatibility\n    // noinspection JSUnresolvedVariable\n    const matchesFunction = elt instanceof Element && (elt.matches || elt.matchesSelector || elt.msMatchesSelector || elt.mozMatchesSelector || elt.webkitMatchesSelector || elt.oMatchesSelector)\n    return !!matchesFunction && matchesFunction.call(elt, selector)\n  }\n\n  /**\n   * @param {string} str\n   * @returns {string}\n   */\n  function getStartTag(str) {\n    const tagMatcher = /<([a-z][^\\/\\0>\\x20\\t\\r\\n\\f]*)/i\n    const match = tagMatcher.exec(str)\n    if (match) {\n      return match[1].toLowerCase()\n    } else {\n      return ''\n    }\n  }\n\n  /**\n   * @param {string} resp\n   * @returns {Document}\n   */\n  function parseHTML(resp) {\n    const parser = new DOMParser()\n    return parser.parseFromString(resp, 'text/html')\n  }\n\n  /**\n   * @param {DocumentFragment} fragment\n   * @param {Node} elt\n   */\n  function takeChildrenFor(fragment, elt) {\n    while (elt.childNodes.length > 0) {\n      fragment.append(elt.childNodes[0])\n    }\n  }\n\n  /**\n   * @param {HTMLScriptElement} script\n   * @returns {HTMLScriptElement}\n   */\n  function duplicateScript(script) {\n    const newScript = getDocument().createElement('script')\n    forEach(script.attributes, function(attr) {\n      newScript.setAttribute(attr.name, attr.value)\n    })\n    newScript.textContent = script.textContent\n    newScript.async = false\n    if (htmx.config.inlineScriptNonce) {\n      newScript.nonce = htmx.config.inlineScriptNonce\n    }\n    return newScript\n  }\n\n  /**\n   * @param {HTMLScriptElement} script\n   * @returns {boolean}\n   */\n  function isJavaScriptScriptNode(script) {\n    return script.matches('script') && (script.type === 'text/javascript' || script.type === 'module' || script.type === '')\n  }\n\n  /**\n   * we have to make new copies of script tags that we are going to insert because\n   * SOME browsers (not saying who, but it involves an element and an animal) don't\n   * execute scripts created in <template> tags when they are inserted into the DOM\n   * and all the others do lmao\n   * @param {DocumentFragment} fragment\n   */\n  function normalizeScriptTags(fragment) {\n    Array.from(fragment.querySelectorAll('script')).forEach(/** @param {HTMLScriptElement} script */ (script) => {\n      if (isJavaScriptScriptNode(script)) {\n        const newScript = duplicateScript(script)\n        const parent = script.parentNode\n        try {\n          parent.insertBefore(newScript, script)\n        } catch (e) {\n          logError(e)\n        } finally {\n          script.remove()\n        }\n      }\n    })\n  }\n\n  /**\n   * @typedef {DocumentFragment & {title?: string}} DocumentFragmentWithTitle\n   * @description  a document fragment representing the response HTML, including\n   * a `title` property for any title information found\n   */\n\n  /**\n   * @param {string} response HTML\n   * @returns {DocumentFragmentWithTitle}\n   */\n  function makeFragment(response) {\n    // strip head tag to determine shape of response we are dealing with\n    const responseWithNoHead = response.replace(/<head(\\s[^>]*)?>[\\s\\S]*?<\\/head>/i, '')\n    const startTag = getStartTag(responseWithNoHead)\n    /** @type DocumentFragmentWithTitle */\n    let fragment\n    if (startTag === 'html') {\n      // if it is a full document, parse it and return the body\n      fragment = /** @type DocumentFragmentWithTitle */ (new DocumentFragment())\n      const doc = parseHTML(response)\n      takeChildrenFor(fragment, doc.body)\n      fragment.title = doc.title\n    } else if (startTag === 'body') {\n      // parse body w/o wrapping in template\n      fragment = /** @type DocumentFragmentWithTitle */ (new DocumentFragment())\n      const doc = parseHTML(responseWithNoHead)\n      takeChildrenFor(fragment, doc.body)\n      fragment.title = doc.title\n    } else {\n      // otherwise we have non-body partial HTML content, so wrap it in a template to maximize parsing flexibility\n      const doc = parseHTML('<body><template class=\"internal-htmx-wrapper\">' + responseWithNoHead + '</template></body>')\n      fragment = /** @type DocumentFragmentWithTitle */ (doc.querySelector('template').content)\n      // extract title into fragment for later processing\n      fragment.title = doc.title\n\n      // for legacy reasons we support a title tag at the root level of non-body responses, so we need to handle it\n      var titleElement = fragment.querySelector('title')\n      if (titleElement && titleElement.parentNode === fragment) {\n        titleElement.remove()\n        fragment.title = titleElement.innerText\n      }\n    }\n    if (fragment) {\n      if (htmx.config.allowScriptTags) {\n        normalizeScriptTags(fragment)\n      } else {\n        // remove all script tags if scripts are disabled\n        fragment.querySelectorAll('script').forEach((script) => script.remove())\n      }\n    }\n    return fragment\n  }\n\n  /**\n   * @param {Function} func\n   */\n  function maybeCall(func) {\n    if (func) {\n      func()\n    }\n  }\n\n  /**\n   * @param {any} o\n   * @param {string} type\n   * @returns\n   */\n  function isType(o, type) {\n    return Object.prototype.toString.call(o) === '[object ' + type + ']'\n  }\n\n  /**\n   * @param {*} o\n   * @returns {o is Function}\n   */\n  function isFunction(o) {\n    return typeof o === 'function'\n  }\n\n  /**\n   * @param {*} o\n   * @returns {o is Object}\n   */\n  function isRawObject(o) {\n    return isType(o, 'Object')\n  }\n\n  /**\n   * @typedef {Object} OnHandler\n   * @property {(keyof HTMLElementEventMap)|string} event\n   * @property {EventListener} listener\n   */\n\n  /**\n   * @typedef {Object} ListenerInfo\n   * @property {string} trigger\n   * @property {EventListener} listener\n   * @property {EventTarget} on\n   */\n\n  /**\n   * @typedef {Object} HtmxNodeInternalData\n   * Element data\n   * @property {number} [initHash]\n   * @property {boolean} [boosted]\n   * @property {OnHandler[]} [onHandlers]\n   * @property {number} [timeout]\n   * @property {ListenerInfo[]} [listenerInfos]\n   * @property {boolean} [cancelled]\n   * @property {boolean} [triggeredOnce]\n   * @property {number} [delayed]\n   * @property {number|null} [throttle]\n   * @property {WeakMap<HtmxTriggerSpecification,WeakMap<EventTarget,string>>} [lastValue]\n   * @property {boolean} [loaded]\n   * @property {string} [path]\n   * @property {string} [verb]\n   * @property {boolean} [polling]\n   * @property {HTMLButtonElement|HTMLInputElement|null} [lastButtonClicked]\n   * @property {number} [requestCount]\n   * @property {XMLHttpRequest} [xhr]\n   * @property {(() => void)[]} [queuedRequests]\n   * @property {boolean} [abortable]\n   * @property {boolean} [firstInitCompleted]\n   *\n   * Event data\n   * @property {HtmxTriggerSpecification} [triggerSpec]\n   * @property {EventTarget[]} [handledFor]\n   */\n\n  /**\n   * getInternalData retrieves \"private\" data stored by htmx within an element\n   * @param {EventTarget|Event} elt\n   * @returns {HtmxNodeInternalData}\n   */\n  function getInternalData(elt) {\n    const dataProp = 'htmx-internal-data'\n    let data = elt[dataProp]\n    if (!data) {\n      data = elt[dataProp] = {}\n    }\n    return data\n  }\n\n  /**\n   * toArray converts an ArrayLike object into a real array.\n   * @template T\n   * @param {ArrayLike<T>} arr\n   * @returns {T[]}\n   */\n  function toArray(arr) {\n    const returnArr = []\n    if (arr) {\n      for (let i = 0; i < arr.length; i++) {\n        returnArr.push(arr[i])\n      }\n    }\n    return returnArr\n  }\n\n  /**\n   * @template T\n   * @param {T[]|NamedNodeMap|HTMLCollection|HTMLFormControlsCollection|ArrayLike<T>} arr\n   * @param {(T) => void} func\n   */\n  function forEach(arr, func) {\n    if (arr) {\n      for (let i = 0; i < arr.length; i++) {\n        func(arr[i])\n      }\n    }\n  }\n\n  /**\n   * @param {Element} el\n   * @returns {boolean}\n   */\n  function isScrolledIntoView(el) {\n    const rect = el.getBoundingClientRect()\n    const elemTop = rect.top\n    const elemBottom = rect.bottom\n    return elemTop < window.innerHeight && elemBottom >= 0\n  }\n\n  /**\n   * Checks whether the element is in the document (includes shadow roots).\n   * This function this is a slight misnomer; it will return true even for elements in the head.\n   *\n   * @param {Node} elt\n   * @returns {boolean}\n   */\n  function bodyContains(elt) {\n    return elt.getRootNode({ composed: true }) === document\n  }\n\n  /**\n   * @param {string} trigger\n   * @returns {string[]}\n   */\n  function splitOnWhitespace(trigger) {\n    return trigger.trim().split(/\\s+/)\n  }\n\n  /**\n   * mergeObjects takes all the keys from\n   * obj2 and duplicates them into obj1\n   * @template T1\n   * @template T2\n   * @param {T1} obj1\n   * @param {T2} obj2\n   * @returns {T1 & T2}\n   */\n  function mergeObjects(obj1, obj2) {\n    for (const key in obj2) {\n      if (obj2.hasOwnProperty(key)) {\n        // @ts-ignore tsc doesn't seem to properly handle types merging\n        obj1[key] = obj2[key]\n      }\n    }\n    // @ts-ignore tsc doesn't seem to properly handle types merging\n    return obj1\n  }\n\n  /**\n   * @param {string} jString\n   * @returns {any|null}\n   */\n  function parseJSON(jString) {\n    try {\n      return JSON.parse(jString)\n    } catch (error) {\n      logError(error)\n      return null\n    }\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  function canAccessLocalStorage() {\n    const test = 'htmx:localStorageTest'\n    try {\n      localStorage.setItem(test, test)\n      localStorage.removeItem(test)\n      return true\n    } catch (e) {\n      return false\n    }\n  }\n\n  /**\n   * @param {string} path\n   * @returns {string}\n   */\n  function normalizePath(path) {\n    try {\n      const url = new URL(path)\n      if (url) {\n        path = url.pathname + url.search\n      }\n      // remove trailing slash, unless index page\n      if (!(/^\\/$/.test(path))) {\n        path = path.replace(/\\/+$/, '')\n      }\n      return path\n    } catch (e) {\n      // be kind to IE11, which doesn't support URL()\n      return path\n    }\n  }\n\n  //= =========================================================================================\n  // public API\n  //= =========================================================================================\n\n  /**\n   * @param {string} str\n   * @returns {any}\n   */\n  function internalEval(str) {\n    return maybeEval(getDocument().body, function() {\n      return eval(str)\n    })\n  }\n\n  /**\n   * Adds a callback for the **htmx:load** event. This can be used to process new content, for example initializing the content with a javascript library\n   *\n   * @see https://htmx.org/api/#onLoad\n   *\n   * @param {(elt: Node) => void} callback the callback to call on newly loaded content\n   * @returns {EventListener}\n   */\n  function onLoadHelper(callback) {\n    const value = htmx.on('htmx:load', /** @param {CustomEvent} evt */ function(evt) {\n      callback(evt.detail.elt)\n    })\n    return value\n  }\n\n  /**\n   * Log all htmx events, useful for debugging.\n   *\n   * @see https://htmx.org/api/#logAll\n   */\n  function logAll() {\n    htmx.logger = function(elt, event, data) {\n      if (console) {\n        console.log(event, elt, data)\n      }\n    }\n  }\n\n  function logNone() {\n    htmx.logger = null\n  }\n\n  /**\n   * Finds an element matching the selector\n   *\n   * @see https://htmx.org/api/#find\n   *\n   * @param {ParentNode|string} eltOrSelector  the root element to find the matching element in, inclusive | the selector to match\n   * @param {string} [selector] the selector to match\n   * @returns {Element|null}\n   */\n  function find(eltOrSelector, selector) {\n    if (typeof eltOrSelector !== 'string') {\n      return eltOrSelector.querySelector(selector)\n    } else {\n      return find(getDocument(), eltOrSelector)\n    }\n  }\n\n  /**\n   * Finds all elements matching the selector\n   *\n   * @see https://htmx.org/api/#findAll\n   *\n   * @param {ParentNode|string} eltOrSelector the root element to find the matching elements in, inclusive | the selector to match\n   * @param {string} [selector] the selector to match\n   * @returns {NodeListOf<Element>}\n   */\n  function findAll(eltOrSelector, selector) {\n    if (typeof eltOrSelector !== 'string') {\n      return eltOrSelector.querySelectorAll(selector)\n    } else {\n      return findAll(getDocument(), eltOrSelector)\n    }\n  }\n\n  /**\n   * @returns Window\n   */\n  function getWindow() {\n    return window\n  }\n\n  /**\n   * Removes an element from the DOM\n   *\n   * @see https://htmx.org/api/#remove\n   *\n   * @param {Node} elt\n   * @param {number} [delay]\n   */\n  function removeElement(elt, delay) {\n    elt = resolveTarget(elt)\n    if (delay) {\n      getWindow().setTimeout(function() {\n        removeElement(elt)\n        elt = null\n      }, delay)\n    } else {\n      parentElt(elt).removeChild(elt)\n    }\n  }\n\n  /**\n   * @param {any} elt\n   * @return {Element|null}\n   */\n  function asElement(elt) {\n    return elt instanceof Element ? elt : null\n  }\n\n  /**\n   * @param {any} elt\n   * @return {HTMLElement|null}\n   */\n  function asHtmlElement(elt) {\n    return elt instanceof HTMLElement ? elt : null\n  }\n\n  /**\n   * @param {any} value\n   * @return {string|null}\n   */\n  function asString(value) {\n    return typeof value === 'string' ? value : null\n  }\n\n  /**\n   * @param {EventTarget} elt\n   * @return {ParentNode|null}\n   */\n  function asParentNode(elt) {\n    return elt instanceof Element || elt instanceof Document || elt instanceof DocumentFragment ? elt : null\n  }\n\n  /**\n   * This method adds a class to the given element.\n   *\n   * @see https://htmx.org/api/#addClass\n   *\n   * @param {Element|string} elt the element to add the class to\n   * @param {string} clazz the class to add\n   * @param {number} [delay] the delay (in milliseconds) before class is added\n   */\n  function addClassToElement(elt, clazz, delay) {\n    elt = asElement(resolveTarget(elt))\n    if (!elt) {\n      return\n    }\n    if (delay) {\n      getWindow().setTimeout(function() {\n        addClassToElement(elt, clazz)\n        elt = null\n      }, delay)\n    } else {\n      elt.classList && elt.classList.add(clazz)\n    }\n  }\n\n  /**\n   * Removes a class from the given element\n   *\n   * @see https://htmx.org/api/#removeClass\n   *\n   * @param {Node|string} node element to remove the class from\n   * @param {string} clazz the class to remove\n   * @param {number} [delay] the delay (in milliseconds before class is removed)\n   */\n  function removeClassFromElement(node, clazz, delay) {\n    let elt = asElement(resolveTarget(node))\n    if (!elt) {\n      return\n    }\n    if (delay) {\n      getWindow().setTimeout(function() {\n        removeClassFromElement(elt, clazz)\n        elt = null\n      }, delay)\n    } else {\n      if (elt.classList) {\n        elt.classList.remove(clazz)\n        // if there are no classes left, remove the class attribute\n        if (elt.classList.length === 0) {\n          elt.removeAttribute('class')\n        }\n      }\n    }\n  }\n\n  /**\n   * Toggles the given class on an element\n   *\n   * @see https://htmx.org/api/#toggleClass\n   *\n   * @param {Element|string} elt the element to toggle the class on\n   * @param {string} clazz the class to toggle\n   */\n  function toggleClassOnElement(elt, clazz) {\n    elt = resolveTarget(elt)\n    elt.classList.toggle(clazz)\n  }\n\n  /**\n   * Takes the given class from its siblings, so that among its siblings, only the given element will have the class.\n   *\n   * @see https://htmx.org/api/#takeClass\n   *\n   * @param {Node|string} elt the element that will take the class\n   * @param {string} clazz the class to take\n   */\n  function takeClassForElement(elt, clazz) {\n    elt = resolveTarget(elt)\n    forEach(elt.parentElement.children, function(child) {\n      removeClassFromElement(child, clazz)\n    })\n    addClassToElement(asElement(elt), clazz)\n  }\n\n  /**\n   * Finds the closest matching element in the given elements parentage, inclusive of the element\n   *\n   * @see https://htmx.org/api/#closest\n   *\n   * @param {Element|string} elt the element to find the selector from\n   * @param {string} selector the selector to find\n   * @returns {Element|null}\n   */\n  function closest(elt, selector) {\n    elt = asElement(resolveTarget(elt))\n    if (elt && elt.closest) {\n      return elt.closest(selector)\n    } else {\n      // TODO remove when IE goes away\n      do {\n        if (elt == null || matches(elt, selector)) {\n          return elt\n        }\n      }\n      while (elt = elt && asElement(parentElt(elt)))\n      return null\n    }\n  }\n\n  /**\n   * @param {string} str\n   * @param {string} prefix\n   * @returns {boolean}\n   */\n  function startsWith(str, prefix) {\n    return str.substring(0, prefix.length) === prefix\n  }\n\n  /**\n   * @param {string} str\n   * @param {string} suffix\n   * @returns {boolean}\n   */\n  function endsWith(str, suffix) {\n    return str.substring(str.length - suffix.length) === suffix\n  }\n\n  /**\n   * @param {string} selector\n   * @returns {string}\n   */\n  function normalizeSelector(selector) {\n    const trimmedSelector = selector.trim()\n    if (startsWith(trimmedSelector, '<') && endsWith(trimmedSelector, '/>')) {\n      return trimmedSelector.substring(1, trimmedSelector.length - 2)\n    } else {\n      return trimmedSelector\n    }\n  }\n\n  /**\n   * @param {Node|Element|Document|string} elt\n   * @param {string} selector\n   * @param {boolean=} global\n   * @returns {(Node|Window)[]}\n   */\n  function querySelectorAllExt(elt, selector, global) {\n    if (selector.indexOf('global ') === 0) {\n      return querySelectorAllExt(elt, selector.slice(7), true)\n    }\n\n    elt = resolveTarget(elt)\n\n    const parts = []\n    {\n      let chevronsCount = 0\n      let offset = 0\n      for (let i = 0; i < selector.length; i++) {\n        const char = selector[i]\n        if (char === ',' && chevronsCount === 0) {\n          parts.push(selector.substring(offset, i))\n          offset = i + 1\n          continue\n        }\n        if (char === '<') {\n          chevronsCount++\n        } else if (char === '/' && i < selector.length - 1 && selector[i + 1] === '>') {\n          chevronsCount--\n        }\n      }\n      if (offset < selector.length) {\n        parts.push(selector.substring(offset))\n      }\n    }\n\n    const result = []\n    const unprocessedParts = []\n    while (parts.length > 0) {\n      const selector = normalizeSelector(parts.shift())\n      let item\n      if (selector.indexOf('closest ') === 0) {\n        item = closest(asElement(elt), normalizeSelector(selector.substr(8)))\n      } else if (selector.indexOf('find ') === 0) {\n        item = find(asParentNode(elt), normalizeSelector(selector.substr(5)))\n      } else if (selector === 'next' || selector === 'nextElementSibling') {\n        item = asElement(elt).nextElementSibling\n      } else if (selector.indexOf('next ') === 0) {\n        item = scanForwardQuery(elt, normalizeSelector(selector.substr(5)), !!global)\n      } else if (selector === 'previous' || selector === 'previousElementSibling') {\n        item = asElement(elt).previousElementSibling\n      } else if (selector.indexOf('previous ') === 0) {\n        item = scanBackwardsQuery(elt, normalizeSelector(selector.substr(9)), !!global)\n      } else if (selector === 'document') {\n        item = document\n      } else if (selector === 'window') {\n        item = window\n      } else if (selector === 'body') {\n        item = document.body\n      } else if (selector === 'root') {\n        item = getRootNode(elt, !!global)\n      } else if (selector === 'host') {\n        item = (/** @type ShadowRoot */(elt.getRootNode())).host\n      } else {\n        unprocessedParts.push(selector)\n      }\n\n      if (item) {\n        result.push(item)\n      }\n    }\n\n    if (unprocessedParts.length > 0) {\n      const standardSelector = unprocessedParts.join(',')\n      const rootNode = asParentNode(getRootNode(elt, !!global))\n      result.push(...toArray(rootNode.querySelectorAll(standardSelector)))\n    }\n\n    return result\n  }\n\n  /**\n   * @param {Node} start\n   * @param {string} match\n   * @param {boolean} global\n   * @returns {Element}\n   */\n  var scanForwardQuery = function(start, match, global) {\n    const results = asParentNode(getRootNode(start, global)).querySelectorAll(match)\n    for (let i = 0; i < results.length; i++) {\n      const elt = results[i]\n      if (elt.compareDocumentPosition(start) === Node.DOCUMENT_POSITION_PRECEDING) {\n        return elt\n      }\n    }\n  }\n\n  /**\n   * @param {Node} start\n   * @param {string} match\n   * @param {boolean} global\n   * @returns {Element}\n   */\n  var scanBackwardsQuery = function(start, match, global) {\n    const results = asParentNode(getRootNode(start, global)).querySelectorAll(match)\n    for (let i = results.length - 1; i >= 0; i--) {\n      const elt = results[i]\n      if (elt.compareDocumentPosition(start) === Node.DOCUMENT_POSITION_FOLLOWING) {\n        return elt\n      }\n    }\n  }\n\n  /**\n   * @param {Node|string} eltOrSelector\n   * @param {string=} selector\n   * @returns {Node|Window}\n   */\n  function querySelectorExt(eltOrSelector, selector) {\n    if (typeof eltOrSelector !== 'string') {\n      return querySelectorAllExt(eltOrSelector, selector)[0]\n    } else {\n      return querySelectorAllExt(getDocument().body, eltOrSelector)[0]\n    }\n  }\n\n  /**\n   * @template {EventTarget} T\n   * @param {T|string} eltOrSelector\n   * @param {T} [context]\n   * @returns {Element|T|null}\n   */\n  function resolveTarget(eltOrSelector, context) {\n    if (typeof eltOrSelector === 'string') {\n      return find(asParentNode(context) || document, eltOrSelector)\n    } else {\n      return eltOrSelector\n    }\n  }\n\n  /**\n   * @typedef {keyof HTMLElementEventMap|string} AnyEventName\n   */\n\n  /**\n   * @typedef {Object} EventArgs\n   * @property {EventTarget} target\n   * @property {AnyEventName} event\n   * @property {EventListener} listener\n   * @property {Object|boolean} options\n   */\n\n  /**\n   * @param {EventTarget|AnyEventName} arg1\n   * @param {AnyEventName|EventListener} arg2\n   * @param {EventListener|Object|boolean} [arg3]\n   * @param {Object|boolean} [arg4]\n   * @returns {EventArgs}\n   */\n  function processEventArgs(arg1, arg2, arg3, arg4) {\n    if (isFunction(arg2)) {\n      return {\n        target: getDocument().body,\n        event: asString(arg1),\n        listener: arg2,\n        options: arg3\n      }\n    } else {\n      return {\n        target: resolveTarget(arg1),\n        event: asString(arg2),\n        listener: arg3,\n        options: arg4\n      }\n    }\n  }\n\n  /**\n   * Adds an event listener to an element\n   *\n   * @see https://htmx.org/api/#on\n   *\n   * @param {EventTarget|string} arg1 the element to add the listener to | the event name to add the listener for\n   * @param {string|EventListener} arg2 the event name to add the listener for | the listener to add\n   * @param {EventListener|Object|boolean} [arg3] the listener to add | options to add\n   * @param {Object|boolean} [arg4] options to add\n   * @returns {EventListener}\n   */\n  function addEventListenerImpl(arg1, arg2, arg3, arg4) {\n    ready(function() {\n      const eventArgs = processEventArgs(arg1, arg2, arg3, arg4)\n      eventArgs.target.addEventListener(eventArgs.event, eventArgs.listener, eventArgs.options)\n    })\n    const b = isFunction(arg2)\n    return b ? arg2 : arg3\n  }\n\n  /**\n   * Removes an event listener from an element\n   *\n   * @see https://htmx.org/api/#off\n   *\n   * @param {EventTarget|string} arg1 the element to remove the listener from | the event name to remove the listener from\n   * @param {string|EventListener} arg2 the event name to remove the listener from | the listener to remove\n   * @param {EventListener} [arg3] the listener to remove\n   * @returns {EventListener}\n   */\n  function removeEventListenerImpl(arg1, arg2, arg3) {\n    ready(function() {\n      const eventArgs = processEventArgs(arg1, arg2, arg3)\n      eventArgs.target.removeEventListener(eventArgs.event, eventArgs.listener)\n    })\n    return isFunction(arg2) ? arg2 : arg3\n  }\n\n  //= ===================================================================\n  // Node processing\n  //= ===================================================================\n\n  const DUMMY_ELT = getDocument().createElement('output') // dummy element for bad selectors\n  /**\n   * @param {Element} elt\n   * @param {string} attrName\n   * @returns {(Node|Window)[]}\n   */\n  function findAttributeTargets(elt, attrName) {\n    const attrTarget = getClosestAttributeValue(elt, attrName)\n    if (attrTarget) {\n      if (attrTarget === 'this') {\n        return [findThisElement(elt, attrName)]\n      } else {\n        const result = querySelectorAllExt(elt, attrTarget)\n        if (result.length === 0) {\n          logError('The selector \"' + attrTarget + '\" on ' + attrName + ' returned no matches!')\n          return [DUMMY_ELT]\n        } else {\n          return result\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Element} elt\n   * @param {string} attribute\n   * @returns {Element|null}\n   */\n  function findThisElement(elt, attribute) {\n    return asElement(getClosestMatch(elt, function(elt) {\n      return getAttributeValue(asElement(elt), attribute) != null\n    }))\n  }\n\n  /**\n   * @param {Element} elt\n   * @returns {Node|Window|null}\n   */\n  function getTarget(elt) {\n    const targetStr = getClosestAttributeValue(elt, 'hx-target')\n    if (targetStr) {\n      if (targetStr === 'this') {\n        return findThisElement(elt, 'hx-target')\n      } else {\n        return querySelectorExt(elt, targetStr)\n      }\n    } else {\n      const data = getInternalData(elt)\n      if (data.boosted) {\n        return getDocument().body\n      } else {\n        return elt\n      }\n    }\n  }\n\n  /**\n   * @param {string} name\n   * @returns {boolean}\n   */\n  function shouldSettleAttribute(name) {\n    const attributesToSettle = htmx.config.attributesToSettle\n    for (let i = 0; i < attributesToSettle.length; i++) {\n      if (name === attributesToSettle[i]) {\n        return true\n      }\n    }\n    return false\n  }\n\n  /**\n   * @param {Element} mergeTo\n   * @param {Element} mergeFrom\n   */\n  function cloneAttributes(mergeTo, mergeFrom) {\n    forEach(mergeTo.attributes, function(attr) {\n      if (!mergeFrom.hasAttribute(attr.name) && shouldSettleAttribute(attr.name)) {\n        mergeTo.removeAttribute(attr.name)\n      }\n    })\n    forEach(mergeFrom.attributes, function(attr) {\n      if (shouldSettleAttribute(attr.name)) {\n        mergeTo.setAttribute(attr.name, attr.value)\n      }\n    })\n  }\n\n  /**\n   * @param {HtmxSwapStyle} swapStyle\n   * @param {Element} target\n   * @returns {boolean}\n   */\n  function isInlineSwap(swapStyle, target) {\n    const extensions = getExtensions(target)\n    for (let i = 0; i < extensions.length; i++) {\n      const extension = extensions[i]\n      try {\n        if (extension.isInlineSwap(swapStyle)) {\n          return true\n        }\n      } catch (e) {\n        logError(e)\n      }\n    }\n    return swapStyle === 'outerHTML'\n  }\n\n  /**\n   * @param {string} oobValue\n   * @param {Element} oobElement\n   * @param {HtmxSettleInfo} settleInfo\n   * @param {Node|Document} [rootNode]\n   * @returns\n   */\n  function oobSwap(oobValue, oobElement, settleInfo, rootNode) {\n    rootNode = rootNode || getDocument()\n    let selector = '#' + getRawAttribute(oobElement, 'id')\n    /** @type HtmxSwapStyle */\n    let swapStyle = 'outerHTML'\n    if (oobValue === 'true') {\n      // do nothing\n    } else if (oobValue.indexOf(':') > 0) {\n      swapStyle = oobValue.substring(0, oobValue.indexOf(':'))\n      selector = oobValue.substring(oobValue.indexOf(':') + 1)\n    } else {\n      swapStyle = oobValue\n    }\n    oobElement.removeAttribute('hx-swap-oob')\n    oobElement.removeAttribute('data-hx-swap-oob')\n\n    const targets = querySelectorAllExt(rootNode, selector, false)\n    if (targets) {\n      forEach(\n        targets,\n        function(target) {\n          let fragment\n          const oobElementClone = oobElement.cloneNode(true)\n          fragment = getDocument().createDocumentFragment()\n          fragment.appendChild(oobElementClone)\n          if (!isInlineSwap(swapStyle, target)) {\n            fragment = asParentNode(oobElementClone) // if this is not an inline swap, we use the content of the node, not the node itself\n          }\n\n          const beforeSwapDetails = { shouldSwap: true, target, fragment }\n          if (!triggerEvent(target, 'htmx:oobBeforeSwap', beforeSwapDetails)) return\n\n          target = beforeSwapDetails.target // allow re-targeting\n          if (beforeSwapDetails.shouldSwap) {\n            handlePreservedElements(fragment)\n            swapWithStyle(swapStyle, target, target, fragment, settleInfo)\n            restorePreservedElements()\n          }\n          forEach(settleInfo.elts, function(elt) {\n            triggerEvent(elt, 'htmx:oobAfterSwap', beforeSwapDetails)\n          })\n        }\n      )\n      oobElement.parentNode.removeChild(oobElement)\n    } else {\n      oobElement.parentNode.removeChild(oobElement)\n      triggerErrorEvent(getDocument().body, 'htmx:oobErrorNoTarget', { content: oobElement })\n    }\n    return oobValue\n  }\n\n  function restorePreservedElements() {\n    const pantry = find('#--htmx-preserve-pantry--')\n    if (pantry) {\n      for (const preservedElt of [...pantry.children]) {\n        const existingElement = find('#' + preservedElt.id)\n        // @ts-ignore - use proposed moveBefore feature\n        existingElement.parentNode.moveBefore(preservedElt, existingElement)\n        existingElement.remove()\n      }\n      pantry.remove()\n    }\n  }\n\n  /**\n   * @param {DocumentFragment|ParentNode} fragment\n   */\n  function handlePreservedElements(fragment) {\n    forEach(findAll(fragment, '[hx-preserve], [data-hx-preserve]'), function(preservedElt) {\n      const id = getAttributeValue(preservedElt, 'id')\n      const existingElement = getDocument().getElementById(id)\n      if (existingElement != null) {\n        if (preservedElt.moveBefore) { // if the moveBefore API exists, use it\n          // get or create a storage spot for stuff\n          let pantry = find('#--htmx-preserve-pantry--')\n          if (pantry == null) {\n            getDocument().body.insertAdjacentHTML('afterend', \"<div id='--htmx-preserve-pantry--'></div>\")\n            pantry = find('#--htmx-preserve-pantry--')\n          }\n          // @ts-ignore - use proposed moveBefore feature\n          pantry.moveBefore(existingElement, null)\n        } else {\n          preservedElt.parentNode.replaceChild(existingElement, preservedElt)\n        }\n      }\n    })\n  }\n\n  /**\n   * @param {Node} parentNode\n   * @param {ParentNode} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   */\n  function handleAttributes(parentNode, fragment, settleInfo) {\n    forEach(fragment.querySelectorAll('[id]'), function(newNode) {\n      const id = getRawAttribute(newNode, 'id')\n      if (id && id.length > 0) {\n        const normalizedId = id.replace(\"'\", \"\\\\'\")\n        const normalizedTag = newNode.tagName.replace(':', '\\\\:')\n        const parentElt = asParentNode(parentNode)\n        const oldNode = parentElt && parentElt.querySelector(normalizedTag + \"[id='\" + normalizedId + \"']\")\n        if (oldNode && oldNode !== parentElt) {\n          const newAttributes = newNode.cloneNode()\n          cloneAttributes(newNode, oldNode)\n          settleInfo.tasks.push(function() {\n            cloneAttributes(newNode, newAttributes)\n          })\n        }\n      }\n    })\n  }\n\n  /**\n   * @param {Node} child\n   * @returns {HtmxSettleTask}\n   */\n  function makeAjaxLoadTask(child) {\n    return function() {\n      removeClassFromElement(child, htmx.config.addedClass)\n      processNode(asElement(child))\n      processFocus(asParentNode(child))\n      triggerEvent(child, 'htmx:load')\n    }\n  }\n\n  /**\n   * @param {ParentNode} child\n   */\n  function processFocus(child) {\n    const autofocus = '[autofocus]'\n    const autoFocusedElt = asHtmlElement(matches(child, autofocus) ? child : child.querySelector(autofocus))\n    if (autoFocusedElt != null) {\n      autoFocusedElt.focus()\n    }\n  }\n\n  /**\n   * @param {Node} parentNode\n   * @param {Node} insertBefore\n   * @param {ParentNode} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   */\n  function insertNodesBefore(parentNode, insertBefore, fragment, settleInfo) {\n    handleAttributes(parentNode, fragment, settleInfo)\n    while (fragment.childNodes.length > 0) {\n      const child = fragment.firstChild\n      addClassToElement(asElement(child), htmx.config.addedClass)\n      parentNode.insertBefore(child, insertBefore)\n      if (child.nodeType !== Node.TEXT_NODE && child.nodeType !== Node.COMMENT_NODE) {\n        settleInfo.tasks.push(makeAjaxLoadTask(child))\n      }\n    }\n  }\n\n  /**\n   * based on https://gist.github.com/hyamamoto/fd435505d29ebfa3d9716fd2be8d42f0,\n   * derived from Java's string hashcode implementation\n   * @param {string} string\n   * @param {number} hash\n   * @returns {number}\n   */\n  function stringHash(string, hash) {\n    let char = 0\n    while (char < string.length) {\n      hash = (hash << 5) - hash + string.charCodeAt(char++) | 0 // bitwise or ensures we have a 32-bit int\n    }\n    return hash\n  }\n\n  /**\n   * @param {Element} elt\n   * @returns {number}\n   */\n  function attributeHash(elt) {\n    let hash = 0\n    // IE fix\n    if (elt.attributes) {\n      for (let i = 0; i < elt.attributes.length; i++) {\n        const attribute = elt.attributes[i]\n        if (attribute.value) { // only include attributes w/ actual values (empty is same as non-existent)\n          hash = stringHash(attribute.name, hash)\n          hash = stringHash(attribute.value, hash)\n        }\n      }\n    }\n    return hash\n  }\n\n  /**\n   * @param {EventTarget} elt\n   */\n  function deInitOnHandlers(elt) {\n    const internalData = getInternalData(elt)\n    if (internalData.onHandlers) {\n      for (let i = 0; i < internalData.onHandlers.length; i++) {\n        const handlerInfo = internalData.onHandlers[i]\n        removeEventListenerImpl(elt, handlerInfo.event, handlerInfo.listener)\n      }\n      delete internalData.onHandlers\n    }\n  }\n\n  /**\n   * @param {Node} element\n   */\n  function deInitNode(element) {\n    const internalData = getInternalData(element)\n    if (internalData.timeout) {\n      clearTimeout(internalData.timeout)\n    }\n    if (internalData.listenerInfos) {\n      forEach(internalData.listenerInfos, function(info) {\n        if (info.on) {\n          removeEventListenerImpl(info.on, info.trigger, info.listener)\n        }\n      })\n    }\n    deInitOnHandlers(element)\n    forEach(Object.keys(internalData), function(key) { if (key !== 'firstInitCompleted') delete internalData[key] })\n  }\n\n  /**\n   * @param {Node} element\n   */\n  function cleanUpElement(element) {\n    triggerEvent(element, 'htmx:beforeCleanupElement')\n    deInitNode(element)\n    // @ts-ignore IE11 code\n    // noinspection JSUnresolvedReference\n    if (element.children) { // IE\n      // @ts-ignore\n      forEach(element.children, function(child) { cleanUpElement(child) })\n    }\n  }\n\n  /**\n   * @param {Node} target\n   * @param {ParentNode} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   */\n  function swapOuterHTML(target, fragment, settleInfo) {\n    if (target instanceof Element && target.tagName === 'BODY') { // special case the body to innerHTML because DocumentFragments can't contain a body elt unfortunately\n      return swapInnerHTML(target, fragment, settleInfo)\n    }\n    /** @type {Node} */\n    let newElt\n    const eltBeforeNewContent = target.previousSibling\n    const parentNode = parentElt(target)\n    if (!parentNode) { // when parent node disappears, we can't do anything\n      return\n    }\n    insertNodesBefore(parentNode, target, fragment, settleInfo)\n    if (eltBeforeNewContent == null) {\n      newElt = parentNode.firstChild\n    } else {\n      newElt = eltBeforeNewContent.nextSibling\n    }\n    settleInfo.elts = settleInfo.elts.filter(function(e) { return e !== target })\n    // scan through all newly added content and add all elements to the settle info so we trigger\n    // events properly on them\n    while (newElt && newElt !== target) {\n      if (newElt instanceof Element) {\n        settleInfo.elts.push(newElt)\n      }\n      newElt = newElt.nextSibling\n    }\n    cleanUpElement(target)\n    if (target instanceof Element) {\n      target.remove()\n    } else {\n      target.parentNode.removeChild(target)\n    }\n  }\n\n  /**\n   * @param {Node} target\n   * @param {ParentNode} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   */\n  function swapAfterBegin(target, fragment, settleInfo) {\n    return insertNodesBefore(target, target.firstChild, fragment, settleInfo)\n  }\n\n  /**\n   * @param {Node} target\n   * @param {ParentNode} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   */\n  function swapBeforeBegin(target, fragment, settleInfo) {\n    return insertNodesBefore(parentElt(target), target, fragment, settleInfo)\n  }\n\n  /**\n   * @param {Node} target\n   * @param {ParentNode} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   */\n  function swapBeforeEnd(target, fragment, settleInfo) {\n    return insertNodesBefore(target, null, fragment, settleInfo)\n  }\n\n  /**\n   * @param {Node} target\n   * @param {ParentNode} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   */\n  function swapAfterEnd(target, fragment, settleInfo) {\n    return insertNodesBefore(parentElt(target), target.nextSibling, fragment, settleInfo)\n  }\n\n  /**\n   * @param {Node} target\n   */\n  function swapDelete(target) {\n    cleanUpElement(target)\n    const parent = parentElt(target)\n    if (parent) {\n      return parent.removeChild(target)\n    }\n  }\n\n  /**\n   * @param {Node} target\n   * @param {ParentNode} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   */\n  function swapInnerHTML(target, fragment, settleInfo) {\n    const firstChild = target.firstChild\n    insertNodesBefore(target, firstChild, fragment, settleInfo)\n    if (firstChild) {\n      while (firstChild.nextSibling) {\n        cleanUpElement(firstChild.nextSibling)\n        target.removeChild(firstChild.nextSibling)\n      }\n      cleanUpElement(firstChild)\n      target.removeChild(firstChild)\n    }\n  }\n\n  /**\n   * @param {HtmxSwapStyle} swapStyle\n   * @param {Element} elt\n   * @param {Node} target\n   * @param {ParentNode} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   */\n  function swapWithStyle(swapStyle, elt, target, fragment, settleInfo) {\n    switch (swapStyle) {\n      case 'none':\n        return\n      case 'outerHTML':\n        swapOuterHTML(target, fragment, settleInfo)\n        return\n      case 'afterbegin':\n        swapAfterBegin(target, fragment, settleInfo)\n        return\n      case 'beforebegin':\n        swapBeforeBegin(target, fragment, settleInfo)\n        return\n      case 'beforeend':\n        swapBeforeEnd(target, fragment, settleInfo)\n        return\n      case 'afterend':\n        swapAfterEnd(target, fragment, settleInfo)\n        return\n      case 'delete':\n        swapDelete(target)\n        return\n      default:\n        var extensions = getExtensions(elt)\n        for (let i = 0; i < extensions.length; i++) {\n          const ext = extensions[i]\n          try {\n            const newElements = ext.handleSwap(swapStyle, target, fragment, settleInfo)\n            if (newElements) {\n              if (Array.isArray(newElements)) {\n                // if handleSwap returns an array (like) of elements, we handle them\n                for (let j = 0; j < newElements.length; j++) {\n                  const child = newElements[j]\n                  if (child.nodeType !== Node.TEXT_NODE && child.nodeType !== Node.COMMENT_NODE) {\n                    settleInfo.tasks.push(makeAjaxLoadTask(child))\n                  }\n                }\n              }\n              return\n            }\n          } catch (e) {\n            logError(e)\n          }\n        }\n        if (swapStyle === 'innerHTML') {\n          swapInnerHTML(target, fragment, settleInfo)\n        } else {\n          swapWithStyle(htmx.config.defaultSwapStyle, elt, target, fragment, settleInfo)\n        }\n    }\n  }\n\n  /**\n   * @param {DocumentFragment} fragment\n   * @param {HtmxSettleInfo} settleInfo\n   * @param {Node|Document} [rootNode]\n   */\n  function findAndSwapOobElements(fragment, settleInfo, rootNode) {\n    var oobElts = findAll(fragment, '[hx-swap-oob], [data-hx-swap-oob]')\n    forEach(oobElts, function(oobElement) {\n      if (htmx.config.allowNestedOobSwaps || oobElement.parentElement === null) {\n        const oobValue = getAttributeValue(oobElement, 'hx-swap-oob')\n        if (oobValue != null) {\n          oobSwap(oobValue, oobElement, settleInfo, rootNode)\n        }\n      } else {\n        oobElement.removeAttribute('hx-swap-oob')\n        oobElement.removeAttribute('data-hx-swap-oob')\n      }\n    })\n    return oobElts.length > 0\n  }\n\n  /**\n   * Implements complete swapping pipeline, including: focus and selection preservation,\n   * title updates, scroll, OOB swapping, normal swapping and settling\n   * @param {string|Element} target\n   * @param {string} content\n   * @param {HtmxSwapSpecification} swapSpec\n   * @param {SwapOptions} [swapOptions]\n   */\n  function swap(target, content, swapSpec, swapOptions) {\n    if (!swapOptions) {\n      swapOptions = {}\n    }\n\n    target = resolveTarget(target)\n    const rootNode = swapOptions.contextElement ? getRootNode(swapOptions.contextElement, false) : getDocument()\n\n    // preserve focus and selection\n    const activeElt = document.activeElement\n    let selectionInfo = {}\n    try {\n      selectionInfo = {\n        elt: activeElt,\n        // @ts-ignore\n        start: activeElt ? activeElt.selectionStart : null,\n        // @ts-ignore\n        end: activeElt ? activeElt.selectionEnd : null\n      }\n    } catch (e) {\n      // safari issue - see https://github.com/microsoft/playwright/issues/5894\n    }\n    const settleInfo = makeSettleInfo(target)\n\n    // For text content swaps, don't parse the response as HTML, just insert it\n    if (swapSpec.swapStyle === 'textContent') {\n      target.textContent = content\n    // Otherwise, make the fragment and process it\n    } else {\n      let fragment = makeFragment(content)\n\n      settleInfo.title = fragment.title\n\n      // select-oob swaps\n      if (swapOptions.selectOOB) {\n        const oobSelectValues = swapOptions.selectOOB.split(',')\n        for (let i = 0; i < oobSelectValues.length; i++) {\n          const oobSelectValue = oobSelectValues[i].split(':', 2)\n          let id = oobSelectValue[0].trim()\n          if (id.indexOf('#') === 0) {\n            id = id.substring(1)\n          }\n          const oobValue = oobSelectValue[1] || 'true'\n          const oobElement = fragment.querySelector('#' + id)\n          if (oobElement) {\n            oobSwap(oobValue, oobElement, settleInfo, rootNode)\n          }\n        }\n      }\n      // oob swaps\n      findAndSwapOobElements(fragment, settleInfo, rootNode)\n      forEach(findAll(fragment, 'template'), /** @param {HTMLTemplateElement} template */function(template) {\n        if (template.content && findAndSwapOobElements(template.content, settleInfo, rootNode)) {\n          // Avoid polluting the DOM with empty templates that were only used to encapsulate oob swap\n          template.remove()\n        }\n      })\n\n      // normal swap\n      if (swapOptions.select) {\n        const newFragment = getDocument().createDocumentFragment()\n        forEach(fragment.querySelectorAll(swapOptions.select), function(node) {\n          newFragment.appendChild(node)\n        })\n        fragment = newFragment\n      }\n      handlePreservedElements(fragment)\n      swapWithStyle(swapSpec.swapStyle, swapOptions.contextElement, target, fragment, settleInfo)\n      restorePreservedElements()\n    }\n\n    // apply saved focus and selection information to swapped content\n    if (selectionInfo.elt &&\n      !bodyContains(selectionInfo.elt) &&\n      getRawAttribute(selectionInfo.elt, 'id')) {\n      const newActiveElt = document.getElementById(getRawAttribute(selectionInfo.elt, 'id'))\n      const focusOptions = { preventScroll: swapSpec.focusScroll !== undefined ? !swapSpec.focusScroll : !htmx.config.defaultFocusScroll }\n      if (newActiveElt) {\n        // @ts-ignore\n        if (selectionInfo.start && newActiveElt.setSelectionRange) {\n          try {\n            // @ts-ignore\n            newActiveElt.setSelectionRange(selectionInfo.start, selectionInfo.end)\n          } catch (e) {\n            // the setSelectionRange method is present on fields that don't support it, so just let this fail\n          }\n        }\n        newActiveElt.focus(focusOptions)\n      }\n    }\n\n    target.classList.remove(htmx.config.swappingClass)\n    forEach(settleInfo.elts, function(elt) {\n      if (elt.classList) {\n        elt.classList.add(htmx.config.settlingClass)\n      }\n      triggerEvent(elt, 'htmx:afterSwap', swapOptions.eventInfo)\n    })\n    if (swapOptions.afterSwapCallback) {\n      swapOptions.afterSwapCallback()\n    }\n\n    // merge in new title after swap but before settle\n    if (!swapSpec.ignoreTitle) {\n      handleTitle(settleInfo.title)\n    }\n\n    // settle\n    const doSettle = function() {\n      forEach(settleInfo.tasks, function(task) {\n        task.call()\n      })\n      forEach(settleInfo.elts, function(elt) {\n        if (elt.classList) {\n          elt.classList.remove(htmx.config.settlingClass)\n        }\n        triggerEvent(elt, 'htmx:afterSettle', swapOptions.eventInfo)\n      })\n\n      if (swapOptions.anchor) {\n        const anchorTarget = asElement(resolveTarget('#' + swapOptions.anchor))\n        if (anchorTarget) {\n          anchorTarget.scrollIntoView({ block: 'start', behavior: 'auto' })\n        }\n      }\n\n      updateScrollState(settleInfo.elts, swapSpec)\n      if (swapOptions.afterSettleCallback) {\n        swapOptions.afterSettleCallback()\n      }\n    }\n\n    if (swapSpec.settleDelay > 0) {\n      getWindow().setTimeout(doSettle, swapSpec.settleDelay)\n    } else {\n      doSettle()\n    }\n  }\n\n  /**\n   * @param {XMLHttpRequest} xhr\n   * @param {string} header\n   * @param {EventTarget} elt\n   */\n  function handleTriggerHeader(xhr, header, elt) {\n    const triggerBody = xhr.getResponseHeader(header)\n    if (triggerBody.indexOf('{') === 0) {\n      const triggers = parseJSON(triggerBody)\n      for (const eventName in triggers) {\n        if (triggers.hasOwnProperty(eventName)) {\n          let detail = triggers[eventName]\n          if (isRawObject(detail)) {\n            // @ts-ignore\n            elt = detail.target !== undefined ? detail.target : elt\n          } else {\n            detail = { value: detail }\n          }\n          triggerEvent(elt, eventName, detail)\n        }\n      }\n    } else {\n      const eventNames = triggerBody.split(',')\n      for (let i = 0; i < eventNames.length; i++) {\n        triggerEvent(elt, eventNames[i].trim(), [])\n      }\n    }\n  }\n\n  const WHITESPACE = /\\s/\n  const WHITESPACE_OR_COMMA = /[\\s,]/\n  const SYMBOL_START = /[_$a-zA-Z]/\n  const SYMBOL_CONT = /[_$a-zA-Z0-9]/\n  const STRINGISH_START = ['\"', \"'\", '/']\n  const NOT_WHITESPACE = /[^\\s]/\n  const COMBINED_SELECTOR_START = /[{(]/\n  const COMBINED_SELECTOR_END = /[})]/\n\n  /**\n   * @param {string} str\n   * @returns {string[]}\n   */\n  function tokenizeString(str) {\n    /** @type string[] */\n    const tokens = []\n    let position = 0\n    while (position < str.length) {\n      if (SYMBOL_START.exec(str.charAt(position))) {\n        var startPosition = position\n        while (SYMBOL_CONT.exec(str.charAt(position + 1))) {\n          position++\n        }\n        tokens.push(str.substring(startPosition, position + 1))\n      } else if (STRINGISH_START.indexOf(str.charAt(position)) !== -1) {\n        const startChar = str.charAt(position)\n        var startPosition = position\n        position++\n        while (position < str.length && str.charAt(position) !== startChar) {\n          if (str.charAt(position) === '\\\\') {\n            position++\n          }\n          position++\n        }\n        tokens.push(str.substring(startPosition, position + 1))\n      } else {\n        const symbol = str.charAt(position)\n        tokens.push(symbol)\n      }\n      position++\n    }\n    return tokens\n  }\n\n  /**\n   * @param {string} token\n   * @param {string|null} last\n   * @param {string} paramName\n   * @returns {boolean}\n   */\n  function isPossibleRelativeReference(token, last, paramName) {\n    return SYMBOL_START.exec(token.charAt(0)) &&\n      token !== 'true' &&\n      token !== 'false' &&\n      token !== 'this' &&\n      token !== paramName &&\n      last !== '.'\n  }\n\n  /**\n   * @param {EventTarget|string} elt\n   * @param {string[]} tokens\n   * @param {string} paramName\n   * @returns {ConditionalFunction|null}\n   */\n  function maybeGenerateConditional(elt, tokens, paramName) {\n    if (tokens[0] === '[') {\n      tokens.shift()\n      let bracketCount = 1\n      let conditionalSource = ' return (function(' + paramName + '){ return ('\n      let last = null\n      while (tokens.length > 0) {\n        const token = tokens[0]\n        // @ts-ignore For some reason tsc doesn't understand the shift call, and thinks we're comparing the same value here, i.e. '[' vs ']'\n        if (token === ']') {\n          bracketCount--\n          if (bracketCount === 0) {\n            if (last === null) {\n              conditionalSource = conditionalSource + 'true'\n            }\n            tokens.shift()\n            conditionalSource += ')})'\n            try {\n              const conditionFunction = maybeEval(elt, function() {\n                return Function(conditionalSource)()\n              },\n              function() { return true })\n              conditionFunction.source = conditionalSource\n              return conditionFunction\n            } catch (e) {\n              triggerErrorEvent(getDocument().body, 'htmx:syntax:error', { error: e, source: conditionalSource })\n              return null\n            }\n          }\n        } else if (token === '[') {\n          bracketCount++\n        }\n        if (isPossibleRelativeReference(token, last, paramName)) {\n          conditionalSource += '((' + paramName + '.' + token + ') ? (' + paramName + '.' + token + ') : (window.' + token + '))'\n        } else {\n          conditionalSource = conditionalSource + token\n        }\n        last = tokens.shift()\n      }\n    }\n  }\n\n  /**\n   * @param {string[]} tokens\n   * @param {RegExp} match\n   * @returns {string}\n   */\n  function consumeUntil(tokens, match) {\n    let result = ''\n    while (tokens.length > 0 && !match.test(tokens[0])) {\n      result += tokens.shift()\n    }\n    return result\n  }\n\n  /**\n   * @param {string[]} tokens\n   * @returns {string}\n   */\n  function consumeCSSSelector(tokens) {\n    let result\n    if (tokens.length > 0 && COMBINED_SELECTOR_START.test(tokens[0])) {\n      tokens.shift()\n      result = consumeUntil(tokens, COMBINED_SELECTOR_END).trim()\n      tokens.shift()\n    } else {\n      result = consumeUntil(tokens, WHITESPACE_OR_COMMA)\n    }\n    return result\n  }\n\n  const INPUT_SELECTOR = 'input, textarea, select'\n\n  /**\n   * @param {Element} elt\n   * @param {string} explicitTrigger\n   * @param {Object} cache for trigger specs\n   * @returns {HtmxTriggerSpecification[]}\n   */\n  function parseAndCacheTrigger(elt, explicitTrigger, cache) {\n    /** @type HtmxTriggerSpecification[] */\n    const triggerSpecs = []\n    const tokens = tokenizeString(explicitTrigger)\n    do {\n      consumeUntil(tokens, NOT_WHITESPACE)\n      const initialLength = tokens.length\n      const trigger = consumeUntil(tokens, /[,\\[\\s]/)\n      if (trigger !== '') {\n        if (trigger === 'every') {\n          /** @type HtmxTriggerSpecification */\n          const every = { trigger: 'every' }\n          consumeUntil(tokens, NOT_WHITESPACE)\n          every.pollInterval = parseInterval(consumeUntil(tokens, /[,\\[\\s]/))\n          consumeUntil(tokens, NOT_WHITESPACE)\n          var eventFilter = maybeGenerateConditional(elt, tokens, 'event')\n          if (eventFilter) {\n            every.eventFilter = eventFilter\n          }\n          triggerSpecs.push(every)\n        } else {\n          /** @type HtmxTriggerSpecification */\n          const triggerSpec = { trigger }\n          var eventFilter = maybeGenerateConditional(elt, tokens, 'event')\n          if (eventFilter) {\n            triggerSpec.eventFilter = eventFilter\n          }\n          consumeUntil(tokens, NOT_WHITESPACE)\n          while (tokens.length > 0 && tokens[0] !== ',') {\n            const token = tokens.shift()\n            if (token === 'changed') {\n              triggerSpec.changed = true\n            } else if (token === 'once') {\n              triggerSpec.once = true\n            } else if (token === 'consume') {\n              triggerSpec.consume = true\n            } else if (token === 'delay' && tokens[0] === ':') {\n              tokens.shift()\n              triggerSpec.delay = parseInterval(consumeUntil(tokens, WHITESPACE_OR_COMMA))\n            } else if (token === 'from' && tokens[0] === ':') {\n              tokens.shift()\n              if (COMBINED_SELECTOR_START.test(tokens[0])) {\n                var from_arg = consumeCSSSelector(tokens)\n              } else {\n                var from_arg = consumeUntil(tokens, WHITESPACE_OR_COMMA)\n                if (from_arg === 'closest' || from_arg === 'find' || from_arg === 'next' || from_arg === 'previous') {\n                  tokens.shift()\n                  const selector = consumeCSSSelector(tokens)\n                  // `next` and `previous` allow a selector-less syntax\n                  if (selector.length > 0) {\n                    from_arg += ' ' + selector\n                  }\n                }\n              }\n              triggerSpec.from = from_arg\n            } else if (token === 'target' && tokens[0] === ':') {\n              tokens.shift()\n              triggerSpec.target = consumeCSSSelector(tokens)\n            } else if (token === 'throttle' && tokens[0] === ':') {\n              tokens.shift()\n              triggerSpec.throttle = parseInterval(consumeUntil(tokens, WHITESPACE_OR_COMMA))\n            } else if (token === 'queue' && tokens[0] === ':') {\n              tokens.shift()\n              triggerSpec.queue = consumeUntil(tokens, WHITESPACE_OR_COMMA)\n            } else if (token === 'root' && tokens[0] === ':') {\n              tokens.shift()\n              triggerSpec[token] = consumeCSSSelector(tokens)\n            } else if (token === 'threshold' && tokens[0] === ':') {\n              tokens.shift()\n              triggerSpec[token] = consumeUntil(tokens, WHITESPACE_OR_COMMA)\n            } else {\n              triggerErrorEvent(elt, 'htmx:syntax:error', { token: tokens.shift() })\n            }\n            consumeUntil(tokens, NOT_WHITESPACE)\n          }\n          triggerSpecs.push(triggerSpec)\n        }\n      }\n      if (tokens.length === initialLength) {\n        triggerErrorEvent(elt, 'htmx:syntax:error', { token: tokens.shift() })\n      }\n      consumeUntil(tokens, NOT_WHITESPACE)\n    } while (tokens[0] === ',' && tokens.shift())\n    if (cache) {\n      cache[explicitTrigger] = triggerSpecs\n    }\n    return triggerSpecs\n  }\n\n  /**\n   * @param {Element} elt\n   * @returns {HtmxTriggerSpecification[]}\n   */\n  function getTriggerSpecs(elt) {\n    const explicitTrigger = getAttributeValue(elt, 'hx-trigger')\n    let triggerSpecs = []\n    if (explicitTrigger) {\n      const cache = htmx.config.triggerSpecsCache\n      triggerSpecs = (cache && cache[explicitTrigger]) || parseAndCacheTrigger(elt, explicitTrigger, cache)\n    }\n\n    if (triggerSpecs.length > 0) {\n      return triggerSpecs\n    } else if (matches(elt, 'form')) {\n      return [{ trigger: 'submit' }]\n    } else if (matches(elt, 'input[type=\"button\"], input[type=\"submit\"]')) {\n      return [{ trigger: 'click' }]\n    } else if (matches(elt, INPUT_SELECTOR)) {\n      return [{ trigger: 'change' }]\n    } else {\n      return [{ trigger: 'click' }]\n    }\n  }\n\n  /**\n   * @param {Element} elt\n   */\n  function cancelPolling(elt) {\n    getInternalData(elt).cancelled = true\n  }\n\n  /**\n   * @param {Element} elt\n   * @param {TriggerHandler} handler\n   * @param {HtmxTriggerSpecification} spec\n   */\n  function processPolling(elt, handler, spec) {\n    const nodeData = getInternalData(elt)\n    nodeData.timeout = getWindow().setTimeout(function() {\n      if (bodyContains(elt) && nodeData.cancelled !== true) {\n        if (!maybeFilterEvent(spec, elt, makeEvent('hx:poll:trigger', {\n          triggerSpec: spec,\n          target: elt\n        }))) {\n          handler(elt)\n        }\n        processPolling(elt, handler, spec)\n      }\n    }, spec.pollInterval)\n  }\n\n  /**\n   * @param {HTMLAnchorElement} elt\n   * @returns {boolean}\n   */\n  function isLocalLink(elt) {\n    return location.hostname === elt.hostname &&\n      getRawAttribute(elt, 'href') &&\n      getRawAttribute(elt, 'href').indexOf('#') !== 0\n  }\n\n  /**\n   * @param {Element} elt\n   */\n  function eltIsDisabled(elt) {\n    return closest(elt, htmx.config.disableSelector)\n  }\n\n  /**\n   * @param {Element} elt\n   * @param {HtmxNodeInternalData} nodeData\n   * @param {HtmxTriggerSpecification[]} triggerSpecs\n   */\n  function boostElement(elt, nodeData, triggerSpecs) {\n    if ((elt instanceof HTMLAnchorElement && isLocalLink(elt) && (elt.target === '' || elt.target === '_self')) || (elt.tagName === 'FORM' && String(getRawAttribute(elt, 'method')).toLowerCase() !== 'dialog')) {\n      nodeData.boosted = true\n      let verb, path\n      if (elt.tagName === 'A') {\n        verb = (/** @type HttpVerb */('get'))\n        path = getRawAttribute(elt, 'href')\n      } else {\n        const rawAttribute = getRawAttribute(elt, 'method')\n        verb = (/** @type HttpVerb */(rawAttribute ? rawAttribute.toLowerCase() : 'get'))\n        path = getRawAttribute(elt, 'action')\n        if (path == null || path === '') {\n          // if there is no action attribute on the form set path to current href before the\n          // following logic to properly clear parameters on a GET (not on a POST!)\n          path = getDocument().location.href\n        }\n        if (verb === 'get' && path.includes('?')) {\n          path = path.replace(/\\?[^#]+/, '')\n        }\n      }\n      triggerSpecs.forEach(function(triggerSpec) {\n        addEventListener(elt, function(node, evt) {\n          const elt = asElement(node)\n          if (eltIsDisabled(elt)) {\n            cleanUpElement(elt)\n            return\n          }\n          issueAjaxRequest(verb, path, elt, evt)\n        }, nodeData, triggerSpec, true)\n      })\n    }\n  }\n\n  /**\n   * @param {Event} evt\n   * @param {Node} node\n   * @returns {boolean}\n   */\n  function shouldCancel(evt, node) {\n    const elt = asElement(node)\n    if (!elt) {\n      return false\n    }\n    if (evt.type === 'submit' || evt.type === 'click') {\n      if (elt.tagName === 'FORM') {\n        return true\n      }\n      if (matches(elt, 'input[type=\"submit\"], button') &&\n        (matches(elt, '[form]') || closest(elt, 'form') !== null)) {\n        return true\n      }\n      if (elt instanceof HTMLAnchorElement && elt.href &&\n        (elt.getAttribute('href') === '#' || elt.getAttribute('href').indexOf('#') !== 0)) {\n        return true\n      }\n    }\n    return false\n  }\n\n  /**\n   * @param {Node} elt\n   * @param {Event|MouseEvent|KeyboardEvent|TouchEvent} evt\n   * @returns {boolean}\n   */\n  function ignoreBoostedAnchorCtrlClick(elt, evt) {\n    return getInternalData(elt).boosted && elt instanceof HTMLAnchorElement && evt.type === 'click' &&\n      // @ts-ignore this will resolve to undefined for events that don't define those properties, which is fine\n      (evt.ctrlKey || evt.metaKey)\n  }\n\n  /**\n   * @param {HtmxTriggerSpecification} triggerSpec\n   * @param {Node} elt\n   * @param {Event} evt\n   * @returns {boolean}\n   */\n  function maybeFilterEvent(triggerSpec, elt, evt) {\n    const eventFilter = triggerSpec.eventFilter\n    if (eventFilter) {\n      try {\n        return eventFilter.call(elt, evt) !== true\n      } catch (e) {\n        const source = eventFilter.source\n        triggerErrorEvent(getDocument().body, 'htmx:eventFilter:error', { error: e, source })\n        return true\n      }\n    }\n    return false\n  }\n\n  /**\n   * @param {Node} elt\n   * @param {TriggerHandler} handler\n   * @param {HtmxNodeInternalData} nodeData\n   * @param {HtmxTriggerSpecification} triggerSpec\n   * @param {boolean} [explicitCancel]\n   */\n  function addEventListener(elt, handler, nodeData, triggerSpec, explicitCancel) {\n    const elementData = getInternalData(elt)\n    /** @type {(Node|Window)[]} */\n    let eltsToListenOn\n    if (triggerSpec.from) {\n      eltsToListenOn = querySelectorAllExt(elt, triggerSpec.from)\n    } else {\n      eltsToListenOn = [elt]\n    }\n    // store the initial values of the elements, so we can tell if they change\n    if (triggerSpec.changed) {\n      if (!('lastValue' in elementData)) {\n        elementData.lastValue = new WeakMap()\n      }\n      eltsToListenOn.forEach(function(eltToListenOn) {\n        if (!elementData.lastValue.has(triggerSpec)) {\n          elementData.lastValue.set(triggerSpec, new WeakMap())\n        }\n        // @ts-ignore value will be undefined for non-input elements, which is fine\n        elementData.lastValue.get(triggerSpec).set(eltToListenOn, eltToListenOn.value)\n      })\n    }\n    forEach(eltsToListenOn, function(eltToListenOn) {\n      /** @type EventListener */\n      const eventListener = function(evt) {\n        if (!bodyContains(elt)) {\n          eltToListenOn.removeEventListener(triggerSpec.trigger, eventListener)\n          return\n        }\n        if (ignoreBoostedAnchorCtrlClick(elt, evt)) {\n          return\n        }\n        if (explicitCancel || shouldCancel(evt, elt)) {\n          evt.preventDefault()\n        }\n        if (maybeFilterEvent(triggerSpec, elt, evt)) {\n          return\n        }\n        const eventData = getInternalData(evt)\n        eventData.triggerSpec = triggerSpec\n        if (eventData.handledFor == null) {\n          eventData.handledFor = []\n        }\n        if (eventData.handledFor.indexOf(elt) < 0) {\n          eventData.handledFor.push(elt)\n          if (triggerSpec.consume) {\n            evt.stopPropagation()\n          }\n          if (triggerSpec.target && evt.target) {\n            if (!matches(asElement(evt.target), triggerSpec.target)) {\n              return\n            }\n          }\n          if (triggerSpec.once) {\n            if (elementData.triggeredOnce) {\n              return\n            } else {\n              elementData.triggeredOnce = true\n            }\n          }\n          if (triggerSpec.changed) {\n            const node = event.target\n            // @ts-ignore value will be undefined for non-input elements, which is fine\n            const value = node.value\n            const lastValue = elementData.lastValue.get(triggerSpec)\n            if (lastValue.has(node) && lastValue.get(node) === value) {\n              return\n            }\n            lastValue.set(node, value)\n          }\n          if (elementData.delayed) {\n            clearTimeout(elementData.delayed)\n          }\n          if (elementData.throttle) {\n            return\n          }\n\n          if (triggerSpec.throttle > 0) {\n            if (!elementData.throttle) {\n              triggerEvent(elt, 'htmx:trigger')\n              handler(elt, evt)\n              elementData.throttle = getWindow().setTimeout(function() {\n                elementData.throttle = null\n              }, triggerSpec.throttle)\n            }\n          } else if (triggerSpec.delay > 0) {\n            elementData.delayed = getWindow().setTimeout(function() {\n              triggerEvent(elt, 'htmx:trigger')\n              handler(elt, evt)\n            }, triggerSpec.delay)\n          } else {\n            triggerEvent(elt, 'htmx:trigger')\n            handler(elt, evt)\n          }\n        }\n      }\n      if (nodeData.listenerInfos == null) {\n        nodeData.listenerInfos = []\n      }\n      nodeData.listenerInfos.push({\n        trigger: triggerSpec.trigger,\n        listener: eventListener,\n        on: eltToListenOn\n      })\n      eltToListenOn.addEventListener(triggerSpec.trigger, eventListener)\n    })\n  }\n\n  let windowIsScrolling = false // used by initScrollHandler\n  let scrollHandler = null\n  function initScrollHandler() {\n    if (!scrollHandler) {\n      scrollHandler = function() {\n        windowIsScrolling = true\n      }\n      window.addEventListener('scroll', scrollHandler)\n      window.addEventListener('resize', scrollHandler)\n      setInterval(function() {\n        if (windowIsScrolling) {\n          windowIsScrolling = false\n          forEach(getDocument().querySelectorAll(\"[hx-trigger*='revealed'],[data-hx-trigger*='revealed']\"), function(elt) {\n            maybeReveal(elt)\n          })\n        }\n      }, 200)\n    }\n  }\n\n  /**\n   * @param {Element} elt\n   */\n  function maybeReveal(elt) {\n    if (!hasAttribute(elt, 'data-hx-revealed') && isScrolledIntoView(elt)) {\n      elt.setAttribute('data-hx-revealed', 'true')\n      const nodeData = getInternalData(elt)\n      if (nodeData.initHash) {\n        triggerEvent(elt, 'revealed')\n      } else {\n        // if the node isn't initialized, wait for it before triggering the request\n        elt.addEventListener('htmx:afterProcessNode', function() { triggerEvent(elt, 'revealed') }, { once: true })\n      }\n    }\n  }\n\n  //= ===================================================================\n\n  /**\n   * @param {Element} elt\n   * @param {TriggerHandler} handler\n   * @param {HtmxNodeInternalData} nodeData\n   * @param {number} delay\n   */\n  function loadImmediately(elt, handler, nodeData, delay) {\n    const load = function() {\n      if (!nodeData.loaded) {\n        nodeData.loaded = true\n        triggerEvent(elt, 'htmx:trigger')\n        handler(elt)\n      }\n    }\n    if (delay > 0) {\n      getWindow().setTimeout(load, delay)\n    } else {\n      load()\n    }\n  }\n\n  /**\n   * @param {Element} elt\n   * @param {HtmxNodeInternalData} nodeData\n   * @param {HtmxTriggerSpecification[]} triggerSpecs\n   * @returns {boolean}\n   */\n  function processVerbs(elt, nodeData, triggerSpecs) {\n    let explicitAction = false\n    forEach(VERBS, function(verb) {\n      if (hasAttribute(elt, 'hx-' + verb)) {\n        const path = getAttributeValue(elt, 'hx-' + verb)\n        explicitAction = true\n        nodeData.path = path\n        nodeData.verb = verb\n        triggerSpecs.forEach(function(triggerSpec) {\n          addTriggerHandler(elt, triggerSpec, nodeData, function(node, evt) {\n            const elt = asElement(node)\n            if (closest(elt, htmx.config.disableSelector)) {\n              cleanUpElement(elt)\n              return\n            }\n            issueAjaxRequest(verb, path, elt, evt)\n          })\n        })\n      }\n    })\n    return explicitAction\n  }\n\n  /**\n   * @callback TriggerHandler\n   * @param {Node} elt\n   * @param {Event} [evt]\n   */\n\n  /**\n   * @param {Node} elt\n   * @param {HtmxTriggerSpecification} triggerSpec\n   * @param {HtmxNodeInternalData} nodeData\n   * @param {TriggerHandler} handler\n   */\n  function addTriggerHandler(elt, triggerSpec, nodeData, handler) {\n    if (triggerSpec.trigger === 'revealed') {\n      initScrollHandler()\n      addEventListener(elt, handler, nodeData, triggerSpec)\n      maybeReveal(asElement(elt))\n    } else if (triggerSpec.trigger === 'intersect') {\n      const observerOptions = {}\n      if (triggerSpec.root) {\n        observerOptions.root = querySelectorExt(elt, triggerSpec.root)\n      }\n      if (triggerSpec.threshold) {\n        observerOptions.threshold = parseFloat(triggerSpec.threshold)\n      }\n      const observer = new IntersectionObserver(function(entries) {\n        for (let i = 0; i < entries.length; i++) {\n          const entry = entries[i]\n          if (entry.isIntersecting) {\n            triggerEvent(elt, 'intersect')\n            break\n          }\n        }\n      }, observerOptions)\n      observer.observe(asElement(elt))\n      addEventListener(asElement(elt), handler, nodeData, triggerSpec)\n    } else if (!nodeData.firstInitCompleted && triggerSpec.trigger === 'load') {\n      if (!maybeFilterEvent(triggerSpec, elt, makeEvent('load', { elt }))) {\n        loadImmediately(asElement(elt), handler, nodeData, triggerSpec.delay)\n      }\n    } else if (triggerSpec.pollInterval > 0) {\n      nodeData.polling = true\n      processPolling(asElement(elt), handler, triggerSpec)\n    } else {\n      addEventListener(elt, handler, nodeData, triggerSpec)\n    }\n  }\n\n  /**\n   * @param {Node} node\n   * @returns {boolean}\n   */\n  function shouldProcessHxOn(node) {\n    const elt = asElement(node)\n    if (!elt) {\n      return false\n    }\n    const attributes = elt.attributes\n    for (let j = 0; j < attributes.length; j++) {\n      const attrName = attributes[j].name\n      if (startsWith(attrName, 'hx-on:') || startsWith(attrName, 'data-hx-on:') ||\n        startsWith(attrName, 'hx-on-') || startsWith(attrName, 'data-hx-on-')) {\n        return true\n      }\n    }\n    return false\n  }\n\n  /**\n   * @param {Node} elt\n   * @returns {Element[]}\n   */\n  const HX_ON_QUERY = new XPathEvaluator()\n    .createExpression('.//*[@*[ starts-with(name(), \"hx-on:\") or starts-with(name(), \"data-hx-on:\") or' +\n      ' starts-with(name(), \"hx-on-\") or starts-with(name(), \"data-hx-on-\") ]]')\n\n  function processHXOnRoot(elt, elements) {\n    if (shouldProcessHxOn(elt)) {\n      elements.push(asElement(elt))\n    }\n    const iter = HX_ON_QUERY.evaluate(elt)\n    let node = null\n    while (node = iter.iterateNext()) elements.push(asElement(node))\n  }\n\n  function findHxOnWildcardElements(elt) {\n    /** @type {Element[]} */\n    const elements = []\n    if (elt instanceof DocumentFragment) {\n      for (const child of elt.childNodes) {\n        processHXOnRoot(child, elements)\n      }\n    } else {\n      processHXOnRoot(elt, elements)\n    }\n    return elements\n  }\n\n  /**\n   * @param {Element} elt\n   * @returns {NodeListOf<Element>|[]}\n   */\n  function findElementsToProcess(elt) {\n    if (elt.querySelectorAll) {\n      const boostedSelector = ', [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost]'\n\n      const extensionSelectors = []\n      for (const e in extensions) {\n        const extension = extensions[e]\n        if (extension.getSelectors) {\n          var selectors = extension.getSelectors()\n          if (selectors) {\n            extensionSelectors.push(selectors)\n          }\n        }\n      }\n\n      const results = elt.querySelectorAll(VERB_SELECTOR + boostedSelector + \", form, [type='submit'],\" +\n        ' [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger]' + extensionSelectors.flat().map(s => ', ' + s).join(''))\n\n      return results\n    } else {\n      return []\n    }\n  }\n\n  /**\n   * Handle submit buttons/inputs that have the form attribute set\n   * see https://developer.mozilla.org/docs/Web/HTML/Element/button\n   * @param {Event} evt\n   */\n  function maybeSetLastButtonClicked(evt) {\n    const elt = /** @type {HTMLButtonElement|HTMLInputElement} */ (closest(asElement(evt.target), \"button, input[type='submit']\"))\n    const internalData = getRelatedFormData(evt)\n    if (internalData) {\n      internalData.lastButtonClicked = elt\n    }\n  }\n\n  /**\n   * @param {Event} evt\n   */\n  function maybeUnsetLastButtonClicked(evt) {\n    const internalData = getRelatedFormData(evt)\n    if (internalData) {\n      internalData.lastButtonClicked = null\n    }\n  }\n\n  /**\n   * @param {Event} evt\n   * @returns {HtmxNodeInternalData|undefined}\n   */\n  function getRelatedFormData(evt) {\n    const elt = closest(asElement(evt.target), \"button, input[type='submit']\")\n    if (!elt) {\n      return\n    }\n    const form = resolveTarget('#' + getRawAttribute(elt, 'form'), elt.getRootNode()) || closest(elt, 'form')\n    if (!form) {\n      return\n    }\n    return getInternalData(form)\n  }\n\n  /**\n   * @param {EventTarget} elt\n   */\n  function initButtonTracking(elt) {\n    // need to handle both click and focus in:\n    //   focusin - in case someone tabs in to a button and hits the space bar\n    //   click - on OSX buttons do not focus on click see https://bugs.webkit.org/show_bug.cgi?id=13724\n    elt.addEventListener('click', maybeSetLastButtonClicked)\n    elt.addEventListener('focusin', maybeSetLastButtonClicked)\n    elt.addEventListener('focusout', maybeUnsetLastButtonClicked)\n  }\n\n  /**\n   * @param {Element} elt\n   * @param {string} eventName\n   * @param {string} code\n   */\n  function addHxOnEventHandler(elt, eventName, code) {\n    const nodeData = getInternalData(elt)\n    if (!Array.isArray(nodeData.onHandlers)) {\n      nodeData.onHandlers = []\n    }\n    let func\n    /** @type EventListener */\n    const listener = function(e) {\n      maybeEval(elt, function() {\n        if (eltIsDisabled(elt)) {\n          return\n        }\n        if (!func) {\n          func = new Function('event', code)\n        }\n        func.call(elt, e)\n      })\n    }\n    elt.addEventListener(eventName, listener)\n    nodeData.onHandlers.push({ event: eventName, listener })\n  }\n\n  /**\n   * @param {Element} elt\n   */\n  function processHxOnWildcard(elt) {\n    // wipe any previous on handlers so that this function takes precedence\n    deInitOnHandlers(elt)\n\n    for (let i = 0; i < elt.attributes.length; i++) {\n      const name = elt.attributes[i].name\n      const value = elt.attributes[i].value\n      if (startsWith(name, 'hx-on') || startsWith(name, 'data-hx-on')) {\n        const afterOnPosition = name.indexOf('-on') + 3\n        const nextChar = name.slice(afterOnPosition, afterOnPosition + 1)\n        if (nextChar === '-' || nextChar === ':') {\n          let eventName = name.slice(afterOnPosition + 1)\n          // if the eventName starts with a colon or dash, prepend \"htmx\" for shorthand support\n          if (startsWith(eventName, ':')) {\n            eventName = 'htmx' + eventName\n          } else if (startsWith(eventName, '-')) {\n            eventName = 'htmx:' + eventName.slice(1)\n          } else if (startsWith(eventName, 'htmx-')) {\n            eventName = 'htmx:' + eventName.slice(5)\n          }\n\n          addHxOnEventHandler(elt, eventName, value)\n        }\n      }\n    }\n  }\n\n  /**\n   * @param {Element|HTMLInputElement} elt\n   */\n  function initNode(elt) {\n    if (closest(elt, htmx.config.disableSelector)) {\n      cleanUpElement(elt)\n      return\n    }\n    const nodeData = getInternalData(elt)\n    const attrHash = attributeHash(elt)\n    if (nodeData.initHash !== attrHash) {\n      // clean up any previously processed info\n      deInitNode(elt)\n\n      nodeData.initHash = attrHash\n\n      triggerEvent(elt, 'htmx:beforeProcessNode')\n\n      const triggerSpecs = getTriggerSpecs(elt)\n      const hasExplicitHttpAction = processVerbs(elt, nodeData, triggerSpecs)\n\n      if (!hasExplicitHttpAction) {\n        if (getClosestAttributeValue(elt, 'hx-boost') === 'true') {\n          boostElement(elt, nodeData, triggerSpecs)\n        } else if (hasAttribute(elt, 'hx-trigger')) {\n          triggerSpecs.forEach(function(triggerSpec) {\n            // For \"naked\" triggers, don't do anything at all\n            addTriggerHandler(elt, triggerSpec, nodeData, function() {\n            })\n          })\n        }\n      }\n\n      // Handle submit buttons/inputs that have the form attribute set\n      // see https://developer.mozilla.org/docs/Web/HTML/Element/button\n      if (elt.tagName === 'FORM' || (getRawAttribute(elt, 'type') === 'submit' && hasAttribute(elt, 'form'))) {\n        initButtonTracking(elt)\n      }\n\n      nodeData.firstInitCompleted = true\n      triggerEvent(elt, 'htmx:afterProcessNode')\n    }\n  }\n\n  /**\n   * Processes new content, enabling htmx behavior. This can be useful if you have content that is added to the DOM outside of the normal htmx request cycle but still want htmx attributes to work.\n   *\n   * @see https://htmx.org/api/#process\n   *\n   * @param {Element|string} elt element to process\n   */\n  function processNode(elt) {\n    elt = resolveTarget(elt)\n    if (closest(elt, htmx.config.disableSelector)) {\n      cleanUpElement(elt)\n      return\n    }\n    initNode(elt)\n    forEach(findElementsToProcess(elt), function(child) { initNode(child) })\n    forEach(findHxOnWildcardElements(elt), processHxOnWildcard)\n  }\n\n  //= ===================================================================\n  // Event/Log Support\n  //= ===================================================================\n\n  /**\n   * @param {string} str\n   * @returns {string}\n   */\n  function kebabEventName(str) {\n    return str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase()\n  }\n\n  /**\n   * @param {string} eventName\n   * @param {any} detail\n   * @returns {CustomEvent}\n   */\n  function makeEvent(eventName, detail) {\n    let evt\n    if (window.CustomEvent && typeof window.CustomEvent === 'function') {\n      // TODO: `composed: true` here is a hack to make global event handlers work with events in shadow DOM\n      // This breaks expected encapsulation but needs to be here until decided otherwise by core devs\n      evt = new CustomEvent(eventName, { bubbles: true, cancelable: true, composed: true, detail })\n    } else {\n      evt = getDocument().createEvent('CustomEvent')\n      evt.initCustomEvent(eventName, true, true, detail)\n    }\n    return evt\n  }\n\n  /**\n   * @param {EventTarget|string} elt\n   * @param {string} eventName\n   * @param {any=} detail\n   */\n  function triggerErrorEvent(elt, eventName, detail) {\n    triggerEvent(elt, eventName, mergeObjects({ error: eventName }, detail))\n  }\n\n  /**\n   * @param {string} eventName\n   * @returns {boolean}\n   */\n  function ignoreEventForLogging(eventName) {\n    return eventName === 'htmx:afterProcessNode'\n  }\n\n  /**\n   * `withExtensions` locates all active extensions for a provided element, then\n   * executes the provided function using each of the active extensions.  It should\n   * be called internally at every extendable execution point in htmx.\n   *\n   * @param {Element} elt\n   * @param {(extension:HtmxExtension) => void} toDo\n   * @returns void\n   */\n  function withExtensions(elt, toDo) {\n    forEach(getExtensions(elt), function(extension) {\n      try {\n        toDo(extension)\n      } catch (e) {\n        logError(e)\n      }\n    })\n  }\n\n  function logError(msg) {\n    if (console.error) {\n      console.error(msg)\n    } else if (console.log) {\n      console.log('ERROR: ', msg)\n    }\n  }\n\n  /**\n   * Triggers a given event on an element\n   *\n   * @see https://htmx.org/api/#trigger\n   *\n   * @param {EventTarget|string} elt the element to trigger the event on\n   * @param {string} eventName the name of the event to trigger\n   * @param {any=} detail details for the event\n   * @returns {boolean}\n   */\n  function triggerEvent(elt, eventName, detail) {\n    elt = resolveTarget(elt)\n    if (detail == null) {\n      detail = {}\n    }\n    detail.elt = elt\n    const event = makeEvent(eventName, detail)\n    if (htmx.logger && !ignoreEventForLogging(eventName)) {\n      htmx.logger(elt, eventName, detail)\n    }\n    if (detail.error) {\n      logError(detail.error)\n      triggerEvent(elt, 'htmx:error', { errorInfo: detail })\n    }\n    let eventResult = elt.dispatchEvent(event)\n    const kebabName = kebabEventName(eventName)\n    if (eventResult && kebabName !== eventName) {\n      const kebabedEvent = makeEvent(kebabName, event.detail)\n      eventResult = eventResult && elt.dispatchEvent(kebabedEvent)\n    }\n    withExtensions(asElement(elt), function(extension) {\n      eventResult = eventResult && (extension.onEvent(eventName, event) !== false && !event.defaultPrevented)\n    })\n    return eventResult\n  }\n\n  //= ===================================================================\n  // History Support\n  //= ===================================================================\n  let currentPathForHistory = location.pathname + location.search\n\n  /**\n   * @returns {Element}\n   */\n  function getHistoryElement() {\n    const historyElt = getDocument().querySelector('[hx-history-elt],[data-hx-history-elt]')\n    return historyElt || getDocument().body\n  }\n\n  /**\n   * @param {string} url\n   * @param {Element} rootElt\n   */\n  function saveToHistoryCache(url, rootElt) {\n    if (!canAccessLocalStorage()) {\n      return\n    }\n\n    // get state to save\n    const innerHTML = cleanInnerHtmlForHistory(rootElt)\n    const title = getDocument().title\n    const scroll = window.scrollY\n\n    if (htmx.config.historyCacheSize <= 0) {\n      // make sure that an eventually already existing cache is purged\n      localStorage.removeItem('htmx-history-cache')\n      return\n    }\n\n    url = normalizePath(url)\n\n    const historyCache = parseJSON(localStorage.getItem('htmx-history-cache')) || []\n    for (let i = 0; i < historyCache.length; i++) {\n      if (historyCache[i].url === url) {\n        historyCache.splice(i, 1)\n        break\n      }\n    }\n\n    /** @type HtmxHistoryItem */\n    const newHistoryItem = { url, content: innerHTML, title, scroll }\n\n    triggerEvent(getDocument().body, 'htmx:historyItemCreated', { item: newHistoryItem, cache: historyCache })\n\n    historyCache.push(newHistoryItem)\n    while (historyCache.length > htmx.config.historyCacheSize) {\n      historyCache.shift()\n    }\n\n    // keep trying to save the cache until it succeeds or is empty\n    while (historyCache.length > 0) {\n      try {\n        localStorage.setItem('htmx-history-cache', JSON.stringify(historyCache))\n        break\n      } catch (e) {\n        triggerErrorEvent(getDocument().body, 'htmx:historyCacheError', { cause: e, cache: historyCache })\n        historyCache.shift() // shrink the cache and retry\n      }\n    }\n  }\n\n  /**\n   * @typedef {Object} HtmxHistoryItem\n   * @property {string} url\n   * @property {string} content\n   * @property {string} title\n   * @property {number} scroll\n   */\n\n  /**\n   * @param {string} url\n   * @returns {HtmxHistoryItem|null}\n   */\n  function getCachedHistory(url) {\n    if (!canAccessLocalStorage()) {\n      return null\n    }\n\n    url = normalizePath(url)\n\n    const historyCache = parseJSON(localStorage.getItem('htmx-history-cache')) || []\n    for (let i = 0; i < historyCache.length; i++) {\n      if (historyCache[i].url === url) {\n        return historyCache[i]\n      }\n    }\n    return null\n  }\n\n  /**\n   * @param {Element} elt\n   * @returns {string}\n   */\n  function cleanInnerHtmlForHistory(elt) {\n    const className = htmx.config.requestClass\n    const clone = /** @type Element */ (elt.cloneNode(true))\n    forEach(findAll(clone, '.' + className), function(child) {\n      removeClassFromElement(child, className)\n    })\n    // remove the disabled attribute for any element disabled due to an htmx request\n    forEach(findAll(clone, '[data-disabled-by-htmx]'), function(child) {\n      child.removeAttribute('disabled')\n    })\n    return clone.innerHTML\n  }\n\n  function saveCurrentPageToHistory() {\n    const elt = getHistoryElement()\n    const path = currentPathForHistory || location.pathname + location.search\n\n    // Allow history snapshot feature to be disabled where hx-history=\"false\"\n    // is present *anywhere* in the current document we're about to save,\n    // so we can prevent privileged data entering the cache.\n    // The page will still be reachable as a history entry, but htmx will fetch it\n    // live from the server onpopstate rather than look in the localStorage cache\n    let disableHistoryCache\n    try {\n      disableHistoryCache = getDocument().querySelector('[hx-history=\"false\" i],[data-hx-history=\"false\" i]')\n    } catch (e) {\n    // IE11: insensitive modifier not supported so fallback to case sensitive selector\n      disableHistoryCache = getDocument().querySelector('[hx-history=\"false\"],[data-hx-history=\"false\"]')\n    }\n    if (!disableHistoryCache) {\n      triggerEvent(getDocument().body, 'htmx:beforeHistorySave', { path, historyElt: elt })\n      saveToHistoryCache(path, elt)\n    }\n\n    if (htmx.config.historyEnabled) history.replaceState({ htmx: true }, getDocument().title, window.location.href)\n  }\n\n  /**\n   * @param {string} path\n   */\n  function pushUrlIntoHistory(path) {\n  // remove the cache buster parameter, if any\n    if (htmx.config.getCacheBusterParam) {\n      path = path.replace(/org\\.htmx\\.cache-buster=[^&]*&?/, '')\n      if (endsWith(path, '&') || endsWith(path, '?')) {\n        path = path.slice(0, -1)\n      }\n    }\n    if (htmx.config.historyEnabled) {\n      history.pushState({ htmx: true }, '', path)\n    }\n    currentPathForHistory = path\n  }\n\n  /**\n   * @param {string} path\n   */\n  function replaceUrlInHistory(path) {\n    if (htmx.config.historyEnabled) history.replaceState({ htmx: true }, '', path)\n    currentPathForHistory = path\n  }\n\n  /**\n   * @param {HtmxSettleTask[]} tasks\n   */\n  function settleImmediately(tasks) {\n    forEach(tasks, function(task) {\n      task.call(undefined)\n    })\n  }\n\n  /**\n   * @param {string} path\n   */\n  function loadHistoryFromServer(path) {\n    const request = new XMLHttpRequest()\n    const details = { path, xhr: request }\n    triggerEvent(getDocument().body, 'htmx:historyCacheMiss', details)\n    request.open('GET', path, true)\n    request.setRequestHeader('HX-Request', 'true')\n    request.setRequestHeader('HX-History-Restore-Request', 'true')\n    request.setRequestHeader('HX-Current-URL', getDocument().location.href)\n    request.onload = function() {\n      if (this.status >= 200 && this.status < 400) {\n        triggerEvent(getDocument().body, 'htmx:historyCacheMissLoad', details)\n        const fragment = makeFragment(this.response)\n        /** @type ParentNode */\n        const content = fragment.querySelector('[hx-history-elt],[data-hx-history-elt]') || fragment\n        const historyElement = getHistoryElement()\n        const settleInfo = makeSettleInfo(historyElement)\n        handleTitle(fragment.title)\n\n        handlePreservedElements(fragment)\n        swapInnerHTML(historyElement, content, settleInfo)\n        restorePreservedElements()\n        settleImmediately(settleInfo.tasks)\n        currentPathForHistory = path\n        triggerEvent(getDocument().body, 'htmx:historyRestore', { path, cacheMiss: true, serverResponse: this.response })\n      } else {\n        triggerErrorEvent(getDocument().body, 'htmx:historyCacheMissLoadError', details)\n      }\n    }\n    request.send()\n  }\n\n  /**\n   * @param {string} [path]\n   */\n  function restoreHistory(path) {\n    saveCurrentPageToHistory()\n    path = path || location.pathname + location.search\n    const cached = getCachedHistory(path)\n    if (cached) {\n      const fragment = makeFragment(cached.content)\n      const historyElement = getHistoryElement()\n      const settleInfo = makeSettleInfo(historyElement)\n      handleTitle(cached.title)\n      handlePreservedElements(fragment)\n      swapInnerHTML(historyElement, fragment, settleInfo)\n      restorePreservedElements()\n      settleImmediately(settleInfo.tasks)\n      getWindow().setTimeout(function() {\n        window.scrollTo(0, cached.scroll)\n      }, 0) // next 'tick', so browser has time to render layout\n      currentPathForHistory = path\n      triggerEvent(getDocument().body, 'htmx:historyRestore', { path, item: cached })\n    } else {\n      if (htmx.config.refreshOnHistoryMiss) {\n        // @ts-ignore: optional parameter in reload() function throws error\n        // noinspection JSUnresolvedReference\n        window.location.reload(true)\n      } else {\n        loadHistoryFromServer(path)\n      }\n    }\n  }\n\n  /**\n   * @param {Element} elt\n   * @returns {Element[]}\n   */\n  function addRequestIndicatorClasses(elt) {\n    let indicators = /** @type Element[] */ (findAttributeTargets(elt, 'hx-indicator'))\n    if (indicators == null) {\n      indicators = [elt]\n    }\n    forEach(indicators, function(ic) {\n      const internalData = getInternalData(ic)\n      internalData.requestCount = (internalData.requestCount || 0) + 1\n      ic.classList.add.call(ic.classList, htmx.config.requestClass)\n    })\n    return indicators\n  }\n\n  /**\n   * @param {Element} elt\n   * @returns {Element[]}\n   */\n  function disableElements(elt) {\n    let disabledElts = /** @type Element[] */ (findAttributeTargets(elt, 'hx-disabled-elt'))\n    if (disabledElts == null) {\n      disabledElts = []\n    }\n    forEach(disabledElts, function(disabledElement) {\n      const internalData = getInternalData(disabledElement)\n      internalData.requestCount = (internalData.requestCount || 0) + 1\n      disabledElement.setAttribute('disabled', '')\n      disabledElement.setAttribute('data-disabled-by-htmx', '')\n    })\n    return disabledElts\n  }\n\n  /**\n   * @param {Element[]} indicators\n   * @param {Element[]} disabled\n   */\n  function removeRequestIndicators(indicators, disabled) {\n    forEach(indicators.concat(disabled), function(ele) {\n      const internalData = getInternalData(ele)\n      internalData.requestCount = (internalData.requestCount || 1) - 1\n    })\n    forEach(indicators, function(ic) {\n      const internalData = getInternalData(ic)\n      if (internalData.requestCount === 0) {\n        ic.classList.remove.call(ic.classList, htmx.config.requestClass)\n      }\n    })\n    forEach(disabled, function(disabledElement) {\n      const internalData = getInternalData(disabledElement)\n      if (internalData.requestCount === 0) {\n        disabledElement.removeAttribute('disabled')\n        disabledElement.removeAttribute('data-disabled-by-htmx')\n      }\n    })\n  }\n\n  //= ===================================================================\n  // Input Value Processing\n  //= ===================================================================\n\n  /**\n   * @param {Element[]} processed\n   * @param {Element} elt\n   * @returns {boolean}\n   */\n  function haveSeenNode(processed, elt) {\n    for (let i = 0; i < processed.length; i++) {\n      const node = processed[i]\n      if (node.isSameNode(elt)) {\n        return true\n      }\n    }\n    return false\n  }\n\n  /**\n   * @param {Element} element\n   * @return {boolean}\n   */\n  function shouldInclude(element) {\n    // Cast to trick tsc, undefined values will work fine here\n    const elt = /** @type {HTMLInputElement} */ (element)\n    if (elt.name === '' || elt.name == null || elt.disabled || closest(elt, 'fieldset[disabled]')) {\n      return false\n    }\n    // ignore \"submitter\" types (see jQuery src/serialize.js)\n    if (elt.type === 'button' || elt.type === 'submit' || elt.tagName === 'image' || elt.tagName === 'reset' || elt.tagName === 'file') {\n      return false\n    }\n    if (elt.type === 'checkbox' || elt.type === 'radio') {\n      return elt.checked\n    }\n    return true\n  }\n\n  /** @param {string} name\n   * @param {string|Array|FormDataEntryValue} value\n   * @param {FormData} formData */\n  function addValueToFormData(name, value, formData) {\n    if (name != null && value != null) {\n      if (Array.isArray(value)) {\n        value.forEach(function(v) { formData.append(name, v) })\n      } else {\n        formData.append(name, value)\n      }\n    }\n  }\n\n  /** @param {string} name\n   * @param {string|Array} value\n   * @param {FormData} formData */\n  function removeValueFromFormData(name, value, formData) {\n    if (name != null && value != null) {\n      let values = formData.getAll(name)\n      if (Array.isArray(value)) {\n        values = values.filter(v => value.indexOf(v) < 0)\n      } else {\n        values = values.filter(v => v !== value)\n      }\n      formData.delete(name)\n      forEach(values, v => formData.append(name, v))\n    }\n  }\n\n  /**\n   * @param {Element[]} processed\n   * @param {FormData} formData\n   * @param {HtmxElementValidationError[]} errors\n   * @param {Element|HTMLInputElement|HTMLSelectElement|HTMLFormElement} elt\n   * @param {boolean} validate\n   */\n  function processInputValue(processed, formData, errors, elt, validate) {\n    if (elt == null || haveSeenNode(processed, elt)) {\n      return\n    } else {\n      processed.push(elt)\n    }\n    if (shouldInclude(elt)) {\n      const name = getRawAttribute(elt, 'name')\n      // @ts-ignore value will be undefined for non-input elements, which is fine\n      let value = elt.value\n      if (elt instanceof HTMLSelectElement && elt.multiple) {\n        value = toArray(elt.querySelectorAll('option:checked')).map(function(e) { return (/** @type HTMLOptionElement */(e)).value })\n      }\n      // include file inputs\n      if (elt instanceof HTMLInputElement && elt.files) {\n        value = toArray(elt.files)\n      }\n      addValueToFormData(name, value, formData)\n      if (validate) {\n        validateElement(elt, errors)\n      }\n    }\n    if (elt instanceof HTMLFormElement) {\n      forEach(elt.elements, function(input) {\n        if (processed.indexOf(input) >= 0) {\n          // The input has already been processed and added to the values, but the FormData that will be\n          //  constructed right after on the form, will include it once again. So remove that input's value\n          //  now to avoid duplicates\n          removeValueFromFormData(input.name, input.value, formData)\n        } else {\n          processed.push(input)\n        }\n        if (validate) {\n          validateElement(input, errors)\n        }\n      })\n      new FormData(elt).forEach(function(value, name) {\n        if (value instanceof File && value.name === '') {\n          return // ignore no-name files\n        }\n        addValueToFormData(name, value, formData)\n      })\n    }\n  }\n\n  /**\n   *\n   * @param {Element} elt\n   * @param {HtmxElementValidationError[]} errors\n   */\n  function validateElement(elt, errors) {\n    const element = /** @type {HTMLElement & ElementInternals} */ (elt)\n    if (element.willValidate) {\n      triggerEvent(element, 'htmx:validation:validate')\n      if (!element.checkValidity()) {\n        errors.push({ elt: element, message: element.validationMessage, validity: element.validity })\n        triggerEvent(element, 'htmx:validation:failed', { message: element.validationMessage, validity: element.validity })\n      }\n    }\n  }\n\n  /**\n   * Override values in the one FormData with those from another.\n   * @param {FormData} receiver the formdata that will be mutated\n   * @param {FormData} donor the formdata that will provide the overriding values\n   * @returns {FormData} the {@linkcode receiver}\n   */\n  function overrideFormData(receiver, donor) {\n    for (const key of donor.keys()) {\n      receiver.delete(key)\n    }\n    donor.forEach(function(value, key) {\n      receiver.append(key, value)\n    })\n    return receiver\n  }\n\n  /**\n * @param {Element|HTMLFormElement} elt\n * @param {HttpVerb} verb\n * @returns {{errors: HtmxElementValidationError[], formData: FormData, values: Object}}\n */\n  function getInputValues(elt, verb) {\n    /** @type Element[] */\n    const processed = []\n    const formData = new FormData()\n    const priorityFormData = new FormData()\n    /** @type HtmxElementValidationError[] */\n    const errors = []\n    const internalData = getInternalData(elt)\n    if (internalData.lastButtonClicked && !bodyContains(internalData.lastButtonClicked)) {\n      internalData.lastButtonClicked = null\n    }\n\n    // only validate when form is directly submitted and novalidate or formnovalidate are not set\n    // or if the element has an explicit hx-validate=\"true\" on it\n    let validate = (elt instanceof HTMLFormElement && elt.noValidate !== true) || getAttributeValue(elt, 'hx-validate') === 'true'\n    if (internalData.lastButtonClicked) {\n      validate = validate && internalData.lastButtonClicked.formNoValidate !== true\n    }\n\n    // for a non-GET include the closest form\n    if (verb !== 'get') {\n      processInputValue(processed, priorityFormData, errors, closest(elt, 'form'), validate)\n    }\n\n    // include the element itself\n    processInputValue(processed, formData, errors, elt, validate)\n\n    // if a button or submit was clicked last, include its value\n    if (internalData.lastButtonClicked || elt.tagName === 'BUTTON' ||\n    (elt.tagName === 'INPUT' && getRawAttribute(elt, 'type') === 'submit')) {\n      const button = internalData.lastButtonClicked || (/** @type HTMLInputElement|HTMLButtonElement */(elt))\n      const name = getRawAttribute(button, 'name')\n      addValueToFormData(name, button.value, priorityFormData)\n    }\n\n    // include any explicit includes\n    const includes = findAttributeTargets(elt, 'hx-include')\n    forEach(includes, function(node) {\n      processInputValue(processed, formData, errors, asElement(node), validate)\n      // if a non-form is included, include any input values within it\n      if (!matches(node, 'form')) {\n        forEach(asParentNode(node).querySelectorAll(INPUT_SELECTOR), function(descendant) {\n          processInputValue(processed, formData, errors, descendant, validate)\n        })\n      }\n    })\n\n    // values from a <form> take precedence, overriding the regular values\n    overrideFormData(formData, priorityFormData)\n\n    return { errors, formData, values: formDataProxy(formData) }\n  }\n\n  /**\n   * @param {string} returnStr\n   * @param {string} name\n   * @param {any} realValue\n   * @returns {string}\n   */\n  function appendParam(returnStr, name, realValue) {\n    if (returnStr !== '') {\n      returnStr += '&'\n    }\n    if (String(realValue) === '[object Object]') {\n      realValue = JSON.stringify(realValue)\n    }\n    const s = encodeURIComponent(realValue)\n    returnStr += encodeURIComponent(name) + '=' + s\n    return returnStr\n  }\n\n  /**\n   * @param {FormData|Object} values\n   * @returns string\n   */\n  function urlEncode(values) {\n    values = formDataFromObject(values)\n    let returnStr = ''\n    values.forEach(function(value, key) {\n      returnStr = appendParam(returnStr, key, value)\n    })\n    return returnStr\n  }\n\n  //= ===================================================================\n  // Ajax\n  //= ===================================================================\n\n  /**\n * @param {Element} elt\n * @param {Element} target\n * @param {string} prompt\n * @returns {HtmxHeaderSpecification}\n */\n  function getHeaders(elt, target, prompt) {\n    /** @type HtmxHeaderSpecification */\n    const headers = {\n      'HX-Request': 'true',\n      'HX-Trigger': getRawAttribute(elt, 'id'),\n      'HX-Trigger-Name': getRawAttribute(elt, 'name'),\n      'HX-Target': getAttributeValue(target, 'id'),\n      'HX-Current-URL': getDocument().location.href\n    }\n    getValuesForElement(elt, 'hx-headers', false, headers)\n    if (prompt !== undefined) {\n      headers['HX-Prompt'] = prompt\n    }\n    if (getInternalData(elt).boosted) {\n      headers['HX-Boosted'] = 'true'\n    }\n    return headers\n  }\n\n  /**\n * filterValues takes an object containing form input values\n * and returns a new object that only contains keys that are\n * specified by the closest \"hx-params\" attribute\n * @param {FormData} inputValues\n * @param {Element} elt\n * @returns {FormData}\n */\n  function filterValues(inputValues, elt) {\n    const paramsValue = getClosestAttributeValue(elt, 'hx-params')\n    if (paramsValue) {\n      if (paramsValue === 'none') {\n        return new FormData()\n      } else if (paramsValue === '*') {\n        return inputValues\n      } else if (paramsValue.indexOf('not ') === 0) {\n        forEach(paramsValue.slice(4).split(','), function(name) {\n          name = name.trim()\n          inputValues.delete(name)\n        })\n        return inputValues\n      } else {\n        const newValues = new FormData()\n        forEach(paramsValue.split(','), function(name) {\n          name = name.trim()\n          if (inputValues.has(name)) {\n            inputValues.getAll(name).forEach(function(value) { newValues.append(name, value) })\n          }\n        })\n        return newValues\n      }\n    } else {\n      return inputValues\n    }\n  }\n\n  /**\n   * @param {Element} elt\n   * @return {boolean}\n   */\n  function isAnchorLink(elt) {\n    return !!getRawAttribute(elt, 'href') && getRawAttribute(elt, 'href').indexOf('#') >= 0\n  }\n\n  /**\n * @param {Element} elt\n * @param {HtmxSwapStyle} [swapInfoOverride]\n * @returns {HtmxSwapSpecification}\n */\n  function getSwapSpecification(elt, swapInfoOverride) {\n    const swapInfo = swapInfoOverride || getClosestAttributeValue(elt, 'hx-swap')\n    /** @type HtmxSwapSpecification */\n    const swapSpec = {\n      swapStyle: getInternalData(elt).boosted ? 'innerHTML' : htmx.config.defaultSwapStyle,\n      swapDelay: htmx.config.defaultSwapDelay,\n      settleDelay: htmx.config.defaultSettleDelay\n    }\n    if (htmx.config.scrollIntoViewOnBoost && getInternalData(elt).boosted && !isAnchorLink(elt)) {\n      swapSpec.show = 'top'\n    }\n    if (swapInfo) {\n      const split = splitOnWhitespace(swapInfo)\n      if (split.length > 0) {\n        for (let i = 0; i < split.length; i++) {\n          const value = split[i]\n          if (value.indexOf('swap:') === 0) {\n            swapSpec.swapDelay = parseInterval(value.slice(5))\n          } else if (value.indexOf('settle:') === 0) {\n            swapSpec.settleDelay = parseInterval(value.slice(7))\n          } else if (value.indexOf('transition:') === 0) {\n            swapSpec.transition = value.slice(11) === 'true'\n          } else if (value.indexOf('ignoreTitle:') === 0) {\n            swapSpec.ignoreTitle = value.slice(12) === 'true'\n          } else if (value.indexOf('scroll:') === 0) {\n            const scrollSpec = value.slice(7)\n            var splitSpec = scrollSpec.split(':')\n            const scrollVal = splitSpec.pop()\n            var selectorVal = splitSpec.length > 0 ? splitSpec.join(':') : null\n            // @ts-ignore\n            swapSpec.scroll = scrollVal\n            swapSpec.scrollTarget = selectorVal\n          } else if (value.indexOf('show:') === 0) {\n            const showSpec = value.slice(5)\n            var splitSpec = showSpec.split(':')\n            const showVal = splitSpec.pop()\n            var selectorVal = splitSpec.length > 0 ? splitSpec.join(':') : null\n            swapSpec.show = showVal\n            swapSpec.showTarget = selectorVal\n          } else if (value.indexOf('focus-scroll:') === 0) {\n            const focusScrollVal = value.slice('focus-scroll:'.length)\n            swapSpec.focusScroll = focusScrollVal == 'true'\n          } else if (i == 0) {\n            swapSpec.swapStyle = value\n          } else {\n            logError('Unknown modifier in hx-swap: ' + value)\n          }\n        }\n      }\n    }\n    return swapSpec\n  }\n\n  /**\n   * @param {Element} elt\n   * @return {boolean}\n   */\n  function usesFormData(elt) {\n    return getClosestAttributeValue(elt, 'hx-encoding') === 'multipart/form-data' ||\n    (matches(elt, 'form') && getRawAttribute(elt, 'enctype') === 'multipart/form-data')\n  }\n\n  /**\n   * @param {XMLHttpRequest} xhr\n   * @param {Element} elt\n   * @param {FormData} filteredParameters\n   * @returns {*|string|null}\n   */\n  function encodeParamsForBody(xhr, elt, filteredParameters) {\n    let encodedParameters = null\n    withExtensions(elt, function(extension) {\n      if (encodedParameters == null) {\n        encodedParameters = extension.encodeParameters(xhr, filteredParameters, elt)\n      }\n    })\n    if (encodedParameters != null) {\n      return encodedParameters\n    } else {\n      if (usesFormData(elt)) {\n        // Force conversion to an actual FormData object in case filteredParameters is a formDataProxy\n        // See https://github.com/bigskysoftware/htmx/issues/2317\n        return overrideFormData(new FormData(), formDataFromObject(filteredParameters))\n      } else {\n        return urlEncode(filteredParameters)\n      }\n    }\n  }\n\n  /**\n *\n * @param {Element} target\n * @returns {HtmxSettleInfo}\n */\n  function makeSettleInfo(target) {\n    return { tasks: [], elts: [target] }\n  }\n\n  /**\n   * @param {Element[]} content\n   * @param {HtmxSwapSpecification} swapSpec\n   */\n  function updateScrollState(content, swapSpec) {\n    const first = content[0]\n    const last = content[content.length - 1]\n    if (swapSpec.scroll) {\n      var target = null\n      if (swapSpec.scrollTarget) {\n        target = asElement(querySelectorExt(first, swapSpec.scrollTarget))\n      }\n      if (swapSpec.scroll === 'top' && (first || target)) {\n        target = target || first\n        target.scrollTop = 0\n      }\n      if (swapSpec.scroll === 'bottom' && (last || target)) {\n        target = target || last\n        target.scrollTop = target.scrollHeight\n      }\n    }\n    if (swapSpec.show) {\n      var target = null\n      if (swapSpec.showTarget) {\n        let targetStr = swapSpec.showTarget\n        if (swapSpec.showTarget === 'window') {\n          targetStr = 'body'\n        }\n        target = asElement(querySelectorExt(first, targetStr))\n      }\n      if (swapSpec.show === 'top' && (first || target)) {\n        target = target || first\n        // @ts-ignore For some reason tsc doesn't recognize \"instant\" as a valid option for now\n        target.scrollIntoView({ block: 'start', behavior: htmx.config.scrollBehavior })\n      }\n      if (swapSpec.show === 'bottom' && (last || target)) {\n        target = target || last\n        // @ts-ignore For some reason tsc doesn't recognize \"instant\" as a valid option for now\n        target.scrollIntoView({ block: 'end', behavior: htmx.config.scrollBehavior })\n      }\n    }\n  }\n\n  /**\n * @param {Element} elt\n * @param {string} attr\n * @param {boolean=} evalAsDefault\n * @param {Object=} values\n * @returns {Object}\n */\n  function getValuesForElement(elt, attr, evalAsDefault, values) {\n    if (values == null) {\n      values = {}\n    }\n    if (elt == null) {\n      return values\n    }\n    const attributeValue = getAttributeValue(elt, attr)\n    if (attributeValue) {\n      let str = attributeValue.trim()\n      let evaluateValue = evalAsDefault\n      if (str === 'unset') {\n        return null\n      }\n      if (str.indexOf('javascript:') === 0) {\n        str = str.slice(11)\n        evaluateValue = true\n      } else if (str.indexOf('js:') === 0) {\n        str = str.slice(3)\n        evaluateValue = true\n      }\n      if (str.indexOf('{') !== 0) {\n        str = '{' + str + '}'\n      }\n      let varsValues\n      if (evaluateValue) {\n        varsValues = maybeEval(elt, function() { return Function('return (' + str + ')')() }, {})\n      } else {\n        varsValues = parseJSON(str)\n      }\n      for (const key in varsValues) {\n        if (varsValues.hasOwnProperty(key)) {\n          if (values[key] == null) {\n            values[key] = varsValues[key]\n          }\n        }\n      }\n    }\n    return getValuesForElement(asElement(parentElt(elt)), attr, evalAsDefault, values)\n  }\n\n  /**\n   * @param {EventTarget|string} elt\n   * @param {() => any} toEval\n   * @param {any=} defaultVal\n   * @returns {any}\n   */\n  function maybeEval(elt, toEval, defaultVal) {\n    if (htmx.config.allowEval) {\n      return toEval()\n    } else {\n      triggerErrorEvent(elt, 'htmx:evalDisallowedError')\n      return defaultVal\n    }\n  }\n\n  /**\n * @param {Element} elt\n * @param {*?} expressionVars\n * @returns\n */\n  function getHXVarsForElement(elt, expressionVars) {\n    return getValuesForElement(elt, 'hx-vars', true, expressionVars)\n  }\n\n  /**\n * @param {Element} elt\n * @param {*?} expressionVars\n * @returns\n */\n  function getHXValsForElement(elt, expressionVars) {\n    return getValuesForElement(elt, 'hx-vals', false, expressionVars)\n  }\n\n  /**\n * @param {Element} elt\n * @returns {FormData}\n */\n  function getExpressionVars(elt) {\n    return mergeObjects(getHXVarsForElement(elt), getHXValsForElement(elt))\n  }\n\n  /**\n   * @param {XMLHttpRequest} xhr\n   * @param {string} header\n   * @param {string|null} headerValue\n   */\n  function safelySetHeaderValue(xhr, header, headerValue) {\n    if (headerValue !== null) {\n      try {\n        xhr.setRequestHeader(header, headerValue)\n      } catch (e) {\n      // On an exception, try to set the header URI encoded instead\n        xhr.setRequestHeader(header, encodeURIComponent(headerValue))\n        xhr.setRequestHeader(header + '-URI-AutoEncoded', 'true')\n      }\n    }\n  }\n\n  /**\n   * @param {XMLHttpRequest} xhr\n   * @return {string}\n   */\n  function getPathFromResponse(xhr) {\n  // NB: IE11 does not support this stuff\n    if (xhr.responseURL && typeof (URL) !== 'undefined') {\n      try {\n        const url = new URL(xhr.responseURL)\n        return url.pathname + url.search\n      } catch (e) {\n        triggerErrorEvent(getDocument().body, 'htmx:badResponseUrl', { url: xhr.responseURL })\n      }\n    }\n  }\n\n  /**\n   * @param {XMLHttpRequest} xhr\n   * @param {RegExp} regexp\n   * @return {boolean}\n   */\n  function hasHeader(xhr, regexp) {\n    return regexp.test(xhr.getAllResponseHeaders())\n  }\n\n  /**\n   * Issues an htmx-style AJAX request\n   *\n   * @see https://htmx.org/api/#ajax\n   *\n   * @param {HttpVerb} verb\n   * @param {string} path the URL path to make the AJAX\n   * @param {Element|string|HtmxAjaxHelperContext} context the element to target (defaults to the **body**) | a selector for the target | a context object that contains any of the following\n   * @return {Promise<void>} Promise that resolves immediately if no request is sent, or when the request is complete\n   */\n  function ajaxHelper(verb, path, context) {\n    verb = (/** @type HttpVerb */(verb.toLowerCase()))\n    if (context) {\n      if (context instanceof Element || typeof context === 'string') {\n        return issueAjaxRequest(verb, path, null, null, {\n          targetOverride: resolveTarget(context) || DUMMY_ELT,\n          returnPromise: true\n        })\n      } else {\n        let resolvedTarget = resolveTarget(context.target)\n        // If target is supplied but can't resolve OR source is supplied but both target and source can't be resolved\n        // then use DUMMY_ELT to abort the request with htmx:targetError to avoid it replacing body by mistake\n        if ((context.target && !resolvedTarget) || (context.source && !resolvedTarget && !resolveTarget(context.source))) {\n          resolvedTarget = DUMMY_ELT\n        }\n        return issueAjaxRequest(verb, path, resolveTarget(context.source), context.event,\n          {\n            handler: context.handler,\n            headers: context.headers,\n            values: context.values,\n            targetOverride: resolvedTarget,\n            swapOverride: context.swap,\n            select: context.select,\n            returnPromise: true\n          })\n      }\n    } else {\n      return issueAjaxRequest(verb, path, null, null, {\n        returnPromise: true\n      })\n    }\n  }\n\n  /**\n   * @param {Element} elt\n   * @return {Element[]}\n   */\n  function hierarchyForElt(elt) {\n    const arr = []\n    while (elt) {\n      arr.push(elt)\n      elt = elt.parentElement\n    }\n    return arr\n  }\n\n  /**\n   * @param {Element} elt\n   * @param {string} path\n   * @param {HtmxRequestConfig} requestConfig\n   * @return {boolean}\n   */\n  function verifyPath(elt, path, requestConfig) {\n    let sameHost\n    let url\n    if (typeof URL === 'function') {\n      url = new URL(path, document.location.href)\n      const origin = document.location.origin\n      sameHost = origin === url.origin\n    } else {\n    // IE11 doesn't support URL\n      url = path\n      sameHost = startsWith(path, document.location.origin)\n    }\n\n    if (htmx.config.selfRequestsOnly) {\n      if (!sameHost) {\n        return false\n      }\n    }\n    return triggerEvent(elt, 'htmx:validateUrl', mergeObjects({ url, sameHost }, requestConfig))\n  }\n\n  /**\n   * @param {Object|FormData} obj\n   * @return {FormData}\n   */\n  function formDataFromObject(obj) {\n    if (obj instanceof FormData) return obj\n    const formData = new FormData()\n    for (const key in obj) {\n      if (obj.hasOwnProperty(key)) {\n        if (obj[key] && typeof obj[key].forEach === 'function') {\n          obj[key].forEach(function(v) { formData.append(key, v) })\n        } else if (typeof obj[key] === 'object' && !(obj[key] instanceof Blob)) {\n          formData.append(key, JSON.stringify(obj[key]))\n        } else {\n          formData.append(key, obj[key])\n        }\n      }\n    }\n    return formData\n  }\n\n  /**\n   * @param {FormData} formData\n   * @param {string} name\n   * @param {Array} array\n   * @returns {Array}\n   */\n  function formDataArrayProxy(formData, name, array) {\n    // mutating the array should mutate the underlying form data\n    return new Proxy(array, {\n      get: function(target, key) {\n        if (typeof key === 'number') return target[key]\n        if (key === 'length') return target.length\n        if (key === 'push') {\n          return function(value) {\n            target.push(value)\n            formData.append(name, value)\n          }\n        }\n        if (typeof target[key] === 'function') {\n          return function() {\n            target[key].apply(target, arguments)\n            formData.delete(name)\n            target.forEach(function(v) { formData.append(name, v) })\n          }\n        }\n\n        if (target[key] && target[key].length === 1) {\n          return target[key][0]\n        } else {\n          return target[key]\n        }\n      },\n      set: function(target, index, value) {\n        target[index] = value\n        formData.delete(name)\n        target.forEach(function(v) { formData.append(name, v) })\n        return true\n      }\n    })\n  }\n\n  /**\n   * @param {FormData} formData\n   * @returns {Object}\n   */\n  function formDataProxy(formData) {\n    return new Proxy(formData, {\n      get: function(target, name) {\n        if (typeof name === 'symbol') {\n          // Forward symbol calls to the FormData itself directly\n          const result = Reflect.get(target, name)\n          // Wrap in function with apply to correctly bind the FormData context, as a direct call would result in an illegal invocation error\n          if (typeof result === 'function') {\n            return function() {\n              return result.apply(formData, arguments)\n            }\n          } else {\n            return result\n          }\n        }\n        if (name === 'toJSON') {\n          // Support JSON.stringify call on proxy\n          return () => Object.fromEntries(formData)\n        }\n        if (name in target) {\n          // Wrap in function with apply to correctly bind the FormData context, as a direct call would result in an illegal invocation error\n          if (typeof target[name] === 'function') {\n            return function() {\n              return formData[name].apply(formData, arguments)\n            }\n          } else {\n            return target[name]\n          }\n        }\n        const array = formData.getAll(name)\n        // Those 2 undefined & single value returns are for retro-compatibility as we weren't using FormData before\n        if (array.length === 0) {\n          return undefined\n        } else if (array.length === 1) {\n          return array[0]\n        } else {\n          return formDataArrayProxy(target, name, array)\n        }\n      },\n      set: function(target, name, value) {\n        if (typeof name !== 'string') {\n          return false\n        }\n        target.delete(name)\n        if (value && typeof value.forEach === 'function') {\n          value.forEach(function(v) { target.append(name, v) })\n        } else if (typeof value === 'object' && !(value instanceof Blob)) {\n          target.append(name, JSON.stringify(value))\n        } else {\n          target.append(name, value)\n        }\n        return true\n      },\n      deleteProperty: function(target, name) {\n        if (typeof name === 'string') {\n          target.delete(name)\n        }\n        return true\n      },\n      // Support Object.assign call from proxy\n      ownKeys: function(target) {\n        return Reflect.ownKeys(Object.fromEntries(target))\n      },\n      getOwnPropertyDescriptor: function(target, prop) {\n        return Reflect.getOwnPropertyDescriptor(Object.fromEntries(target), prop)\n      }\n    })\n  }\n\n  /**\n   * @param {HttpVerb} verb\n   * @param {string} path\n   * @param {Element} elt\n   * @param {Event} event\n   * @param {HtmxAjaxEtc} [etc]\n   * @param {boolean} [confirmed]\n   * @return {Promise<void>}\n   */\n  function issueAjaxRequest(verb, path, elt, event, etc, confirmed) {\n    let resolve = null\n    let reject = null\n    etc = etc != null ? etc : {}\n    if (etc.returnPromise && typeof Promise !== 'undefined') {\n      var promise = new Promise(function(_resolve, _reject) {\n        resolve = _resolve\n        reject = _reject\n      })\n    }\n    if (elt == null) {\n      elt = getDocument().body\n    }\n    const responseHandler = etc.handler || handleAjaxResponse\n    const select = etc.select || null\n\n    if (!bodyContains(elt)) {\n    // do not issue requests for elements removed from the DOM\n      maybeCall(resolve)\n      return promise\n    }\n    const target = etc.targetOverride || asElement(getTarget(elt))\n    if (target == null || target == DUMMY_ELT) {\n      triggerErrorEvent(elt, 'htmx:targetError', { target: getAttributeValue(elt, 'hx-target') })\n      maybeCall(reject)\n      return promise\n    }\n\n    let eltData = getInternalData(elt)\n    const submitter = eltData.lastButtonClicked\n\n    if (submitter) {\n      const buttonPath = getRawAttribute(submitter, 'formaction')\n      if (buttonPath != null) {\n        path = buttonPath\n      }\n\n      const buttonVerb = getRawAttribute(submitter, 'formmethod')\n      if (buttonVerb != null) {\n      // ignore buttons with formmethod=\"dialog\"\n        if (buttonVerb.toLowerCase() !== 'dialog') {\n          verb = (/** @type HttpVerb */(buttonVerb))\n        }\n      }\n    }\n\n    const confirmQuestion = getClosestAttributeValue(elt, 'hx-confirm')\n    // allow event-based confirmation w/ a callback\n    if (confirmed === undefined) {\n      const issueRequest = function(skipConfirmation) {\n        return issueAjaxRequest(verb, path, elt, event, etc, !!skipConfirmation)\n      }\n      const confirmDetails = { target, elt, path, verb, triggeringEvent: event, etc, issueRequest, question: confirmQuestion }\n      if (triggerEvent(elt, 'htmx:confirm', confirmDetails) === false) {\n        maybeCall(resolve)\n        return promise\n      }\n    }\n\n    let syncElt = elt\n    let syncStrategy = getClosestAttributeValue(elt, 'hx-sync')\n    let queueStrategy = null\n    let abortable = false\n    if (syncStrategy) {\n      const syncStrings = syncStrategy.split(':')\n      const selector = syncStrings[0].trim()\n      if (selector === 'this') {\n        syncElt = findThisElement(elt, 'hx-sync')\n      } else {\n        syncElt = asElement(querySelectorExt(elt, selector))\n      }\n      // default to the drop strategy\n      syncStrategy = (syncStrings[1] || 'drop').trim()\n      eltData = getInternalData(syncElt)\n      if (syncStrategy === 'drop' && eltData.xhr && eltData.abortable !== true) {\n        maybeCall(resolve)\n        return promise\n      } else if (syncStrategy === 'abort') {\n        if (eltData.xhr) {\n          maybeCall(resolve)\n          return promise\n        } else {\n          abortable = true\n        }\n      } else if (syncStrategy === 'replace') {\n        triggerEvent(syncElt, 'htmx:abort') // abort the current request and continue\n      } else if (syncStrategy.indexOf('queue') === 0) {\n        const queueStrArray = syncStrategy.split(' ')\n        queueStrategy = (queueStrArray[1] || 'last').trim()\n      }\n    }\n\n    if (eltData.xhr) {\n      if (eltData.abortable) {\n        triggerEvent(syncElt, 'htmx:abort') // abort the current request and continue\n      } else {\n        if (queueStrategy == null) {\n          if (event) {\n            const eventData = getInternalData(event)\n            if (eventData && eventData.triggerSpec && eventData.triggerSpec.queue) {\n              queueStrategy = eventData.triggerSpec.queue\n            }\n          }\n          if (queueStrategy == null) {\n            queueStrategy = 'last'\n          }\n        }\n        if (eltData.queuedRequests == null) {\n          eltData.queuedRequests = []\n        }\n        if (queueStrategy === 'first' && eltData.queuedRequests.length === 0) {\n          eltData.queuedRequests.push(function() {\n            issueAjaxRequest(verb, path, elt, event, etc)\n          })\n        } else if (queueStrategy === 'all') {\n          eltData.queuedRequests.push(function() {\n            issueAjaxRequest(verb, path, elt, event, etc)\n          })\n        } else if (queueStrategy === 'last') {\n          eltData.queuedRequests = [] // dump existing queue\n          eltData.queuedRequests.push(function() {\n            issueAjaxRequest(verb, path, elt, event, etc)\n          })\n        }\n        maybeCall(resolve)\n        return promise\n      }\n    }\n\n    const xhr = new XMLHttpRequest()\n    eltData.xhr = xhr\n    eltData.abortable = abortable\n    const endRequestLock = function() {\n      eltData.xhr = null\n      eltData.abortable = false\n      if (eltData.queuedRequests != null &&\n      eltData.queuedRequests.length > 0) {\n        const queuedRequest = eltData.queuedRequests.shift()\n        queuedRequest()\n      }\n    }\n    const promptQuestion = getClosestAttributeValue(elt, 'hx-prompt')\n    if (promptQuestion) {\n      var promptResponse = prompt(promptQuestion)\n      // prompt returns null if cancelled and empty string if accepted with no entry\n      if (promptResponse === null ||\n      !triggerEvent(elt, 'htmx:prompt', { prompt: promptResponse, target })) {\n        maybeCall(resolve)\n        endRequestLock()\n        return promise\n      }\n    }\n\n    if (confirmQuestion && !confirmed) {\n      if (!confirm(confirmQuestion)) {\n        maybeCall(resolve)\n        endRequestLock()\n        return promise\n      }\n    }\n\n    let headers = getHeaders(elt, target, promptResponse)\n\n    if (verb !== 'get' && !usesFormData(elt)) {\n      headers['Content-Type'] = 'application/x-www-form-urlencoded'\n    }\n\n    if (etc.headers) {\n      headers = mergeObjects(headers, etc.headers)\n    }\n    const results = getInputValues(elt, verb)\n    let errors = results.errors\n    const rawFormData = results.formData\n    if (etc.values) {\n      overrideFormData(rawFormData, formDataFromObject(etc.values))\n    }\n    const expressionVars = formDataFromObject(getExpressionVars(elt))\n    const allFormData = overrideFormData(rawFormData, expressionVars)\n    let filteredFormData = filterValues(allFormData, elt)\n\n    if (htmx.config.getCacheBusterParam && verb === 'get') {\n      filteredFormData.set('org.htmx.cache-buster', getRawAttribute(target, 'id') || 'true')\n    }\n\n    // behavior of anchors w/ empty href is to use the current URL\n    if (path == null || path === '') {\n      path = getDocument().location.href\n    }\n\n    /**\n     * @type {Object}\n     * @property {boolean} [credentials]\n     * @property {number} [timeout]\n     * @property {boolean} [noHeaders]\n     */\n    const requestAttrValues = getValuesForElement(elt, 'hx-request')\n\n    const eltIsBoosted = getInternalData(elt).boosted\n\n    let useUrlParams = htmx.config.methodsThatUseUrlParams.indexOf(verb) >= 0\n\n    /** @type HtmxRequestConfig */\n    const requestConfig = {\n      boosted: eltIsBoosted,\n      useUrlParams,\n      formData: filteredFormData,\n      parameters: formDataProxy(filteredFormData),\n      unfilteredFormData: allFormData,\n      unfilteredParameters: formDataProxy(allFormData),\n      headers,\n      target,\n      verb,\n      errors,\n      withCredentials: etc.credentials || requestAttrValues.credentials || htmx.config.withCredentials,\n      timeout: etc.timeout || requestAttrValues.timeout || htmx.config.timeout,\n      path,\n      triggeringEvent: event\n    }\n\n    if (!triggerEvent(elt, 'htmx:configRequest', requestConfig)) {\n      maybeCall(resolve)\n      endRequestLock()\n      return promise\n    }\n\n    // copy out in case the object was overwritten\n    path = requestConfig.path\n    verb = requestConfig.verb\n    headers = requestConfig.headers\n    filteredFormData = formDataFromObject(requestConfig.parameters)\n    errors = requestConfig.errors\n    useUrlParams = requestConfig.useUrlParams\n\n    if (errors && errors.length > 0) {\n      triggerEvent(elt, 'htmx:validation:halted', requestConfig)\n      maybeCall(resolve)\n      endRequestLock()\n      return promise\n    }\n\n    const splitPath = path.split('#')\n    const pathNoAnchor = splitPath[0]\n    const anchor = splitPath[1]\n\n    let finalPath = path\n    if (useUrlParams) {\n      finalPath = pathNoAnchor\n      const hasValues = !filteredFormData.keys().next().done\n      if (hasValues) {\n        if (finalPath.indexOf('?') < 0) {\n          finalPath += '?'\n        } else {\n          finalPath += '&'\n        }\n        finalPath += urlEncode(filteredFormData)\n        if (anchor) {\n          finalPath += '#' + anchor\n        }\n      }\n    }\n\n    if (!verifyPath(elt, finalPath, requestConfig)) {\n      triggerErrorEvent(elt, 'htmx:invalidPath', requestConfig)\n      maybeCall(reject)\n      return promise\n    }\n\n    xhr.open(verb.toUpperCase(), finalPath, true)\n    xhr.overrideMimeType('text/html')\n    xhr.withCredentials = requestConfig.withCredentials\n    xhr.timeout = requestConfig.timeout\n\n    // request headers\n    if (requestAttrValues.noHeaders) {\n    // ignore all headers\n    } else {\n      for (const header in headers) {\n        if (headers.hasOwnProperty(header)) {\n          const headerValue = headers[header]\n          safelySetHeaderValue(xhr, header, headerValue)\n        }\n      }\n    }\n\n    /** @type {HtmxResponseInfo} */\n    const responseInfo = {\n      xhr,\n      target,\n      requestConfig,\n      etc,\n      boosted: eltIsBoosted,\n      select,\n      pathInfo: {\n        requestPath: path,\n        finalRequestPath: finalPath,\n        responsePath: null,\n        anchor\n      }\n    }\n\n    xhr.onload = function() {\n      try {\n        const hierarchy = hierarchyForElt(elt)\n        responseInfo.pathInfo.responsePath = getPathFromResponse(xhr)\n        responseHandler(elt, responseInfo)\n        if (responseInfo.keepIndicators !== true) {\n          removeRequestIndicators(indicators, disableElts)\n        }\n        triggerEvent(elt, 'htmx:afterRequest', responseInfo)\n        triggerEvent(elt, 'htmx:afterOnLoad', responseInfo)\n        // if the body no longer contains the element, trigger the event on the closest parent\n        // remaining in the DOM\n        if (!bodyContains(elt)) {\n          let secondaryTriggerElt = null\n          while (hierarchy.length > 0 && secondaryTriggerElt == null) {\n            const parentEltInHierarchy = hierarchy.shift()\n            if (bodyContains(parentEltInHierarchy)) {\n              secondaryTriggerElt = parentEltInHierarchy\n            }\n          }\n          if (secondaryTriggerElt) {\n            triggerEvent(secondaryTriggerElt, 'htmx:afterRequest', responseInfo)\n            triggerEvent(secondaryTriggerElt, 'htmx:afterOnLoad', responseInfo)\n          }\n        }\n        maybeCall(resolve)\n        endRequestLock()\n      } catch (e) {\n        triggerErrorEvent(elt, 'htmx:onLoadError', mergeObjects({ error: e }, responseInfo))\n        throw e\n      }\n    }\n    xhr.onerror = function() {\n      removeRequestIndicators(indicators, disableElts)\n      triggerErrorEvent(elt, 'htmx:afterRequest', responseInfo)\n      triggerErrorEvent(elt, 'htmx:sendError', responseInfo)\n      maybeCall(reject)\n      endRequestLock()\n    }\n    xhr.onabort = function() {\n      removeRequestIndicators(indicators, disableElts)\n      triggerErrorEvent(elt, 'htmx:afterRequest', responseInfo)\n      triggerErrorEvent(elt, 'htmx:sendAbort', responseInfo)\n      maybeCall(reject)\n      endRequestLock()\n    }\n    xhr.ontimeout = function() {\n      removeRequestIndicators(indicators, disableElts)\n      triggerErrorEvent(elt, 'htmx:afterRequest', responseInfo)\n      triggerErrorEvent(elt, 'htmx:timeout', responseInfo)\n      maybeCall(reject)\n      endRequestLock()\n    }\n    if (!triggerEvent(elt, 'htmx:beforeRequest', responseInfo)) {\n      maybeCall(resolve)\n      endRequestLock()\n      return promise\n    }\n    var indicators = addRequestIndicatorClasses(elt)\n    var disableElts = disableElements(elt)\n\n    forEach(['loadstart', 'loadend', 'progress', 'abort'], function(eventName) {\n      forEach([xhr, xhr.upload], function(target) {\n        target.addEventListener(eventName, function(event) {\n          triggerEvent(elt, 'htmx:xhr:' + eventName, {\n            lengthComputable: event.lengthComputable,\n            loaded: event.loaded,\n            total: event.total\n          })\n        })\n      })\n    })\n    triggerEvent(elt, 'htmx:beforeSend', responseInfo)\n    const params = useUrlParams ? null : encodeParamsForBody(xhr, elt, filteredFormData)\n    xhr.send(params)\n    return promise\n  }\n\n  /**\n   * @typedef {Object} HtmxHistoryUpdate\n   * @property {string|null} [type]\n   * @property {string|null} [path]\n   */\n\n  /**\n   * @param {Element} elt\n   * @param {HtmxResponseInfo} responseInfo\n   * @return {HtmxHistoryUpdate}\n   */\n  function determineHistoryUpdates(elt, responseInfo) {\n    const xhr = responseInfo.xhr\n\n    //= ==========================================\n    // First consult response headers\n    //= ==========================================\n    let pathFromHeaders = null\n    let typeFromHeaders = null\n    if (hasHeader(xhr, /HX-Push:/i)) {\n      pathFromHeaders = xhr.getResponseHeader('HX-Push')\n      typeFromHeaders = 'push'\n    } else if (hasHeader(xhr, /HX-Push-Url:/i)) {\n      pathFromHeaders = xhr.getResponseHeader('HX-Push-Url')\n      typeFromHeaders = 'push'\n    } else if (hasHeader(xhr, /HX-Replace-Url:/i)) {\n      pathFromHeaders = xhr.getResponseHeader('HX-Replace-Url')\n      typeFromHeaders = 'replace'\n    }\n\n    // if there was a response header, that has priority\n    if (pathFromHeaders) {\n      if (pathFromHeaders === 'false') {\n        return {}\n      } else {\n        return {\n          type: typeFromHeaders,\n          path: pathFromHeaders\n        }\n      }\n    }\n\n    //= ==========================================\n    // Next resolve via DOM values\n    //= ==========================================\n    const requestPath = responseInfo.pathInfo.finalRequestPath\n    const responsePath = responseInfo.pathInfo.responsePath\n\n    const pushUrl = getClosestAttributeValue(elt, 'hx-push-url')\n    const replaceUrl = getClosestAttributeValue(elt, 'hx-replace-url')\n    const elementIsBoosted = getInternalData(elt).boosted\n\n    let saveType = null\n    let path = null\n\n    if (pushUrl) {\n      saveType = 'push'\n      path = pushUrl\n    } else if (replaceUrl) {\n      saveType = 'replace'\n      path = replaceUrl\n    } else if (elementIsBoosted) {\n      saveType = 'push'\n      path = responsePath || requestPath // if there is no response path, go with the original request path\n    }\n\n    if (path) {\n    // false indicates no push, return empty object\n      if (path === 'false') {\n        return {}\n      }\n\n      // true indicates we want to follow wherever the server ended up sending us\n      if (path === 'true') {\n        path = responsePath || requestPath // if there is no response path, go with the original request path\n      }\n\n      // restore any anchor associated with the request\n      if (responseInfo.pathInfo.anchor && path.indexOf('#') === -1) {\n        path = path + '#' + responseInfo.pathInfo.anchor\n      }\n\n      return {\n        type: saveType,\n        path\n      }\n    } else {\n      return {}\n    }\n  }\n\n  /**\n   * @param {HtmxResponseHandlingConfig} responseHandlingConfig\n   * @param {number} status\n   * @return {boolean}\n   */\n  function codeMatches(responseHandlingConfig, status) {\n    var regExp = new RegExp(responseHandlingConfig.code)\n    return regExp.test(status.toString(10))\n  }\n\n  /**\n   * @param {XMLHttpRequest} xhr\n   * @return {HtmxResponseHandlingConfig}\n   */\n  function resolveResponseHandling(xhr) {\n    for (var i = 0; i < htmx.config.responseHandling.length; i++) {\n      /** @type HtmxResponseHandlingConfig */\n      var responseHandlingElement = htmx.config.responseHandling[i]\n      if (codeMatches(responseHandlingElement, xhr.status)) {\n        return responseHandlingElement\n      }\n    }\n    // no matches, return no swap\n    return {\n      swap: false\n    }\n  }\n\n  /**\n   * @param {string} title\n   */\n  function handleTitle(title) {\n    if (title) {\n      const titleElt = find('title')\n      if (titleElt) {\n        titleElt.innerHTML = title\n      } else {\n        window.document.title = title\n      }\n    }\n  }\n\n  /**\n   * @param {Element} elt\n   * @param {HtmxResponseInfo} responseInfo\n   */\n  function handleAjaxResponse(elt, responseInfo) {\n    const xhr = responseInfo.xhr\n    let target = responseInfo.target\n    const etc = responseInfo.etc\n    const responseInfoSelect = responseInfo.select\n\n    if (!triggerEvent(elt, 'htmx:beforeOnLoad', responseInfo)) return\n\n    if (hasHeader(xhr, /HX-Trigger:/i)) {\n      handleTriggerHeader(xhr, 'HX-Trigger', elt)\n    }\n\n    if (hasHeader(xhr, /HX-Location:/i)) {\n      saveCurrentPageToHistory()\n      let redirectPath = xhr.getResponseHeader('HX-Location')\n      /** @type {HtmxAjaxHelperContext&{path:string}} */\n      var redirectSwapSpec\n      if (redirectPath.indexOf('{') === 0) {\n        redirectSwapSpec = parseJSON(redirectPath)\n        // what's the best way to throw an error if the user didn't include this\n        redirectPath = redirectSwapSpec.path\n        delete redirectSwapSpec.path\n      }\n      ajaxHelper('get', redirectPath, redirectSwapSpec).then(function() {\n        pushUrlIntoHistory(redirectPath)\n      })\n      return\n    }\n\n    const shouldRefresh = hasHeader(xhr, /HX-Refresh:/i) && xhr.getResponseHeader('HX-Refresh') === 'true'\n\n    if (hasHeader(xhr, /HX-Redirect:/i)) {\n      responseInfo.keepIndicators = true\n      location.href = xhr.getResponseHeader('HX-Redirect')\n      shouldRefresh && location.reload()\n      return\n    }\n\n    if (shouldRefresh) {\n      responseInfo.keepIndicators = true\n      location.reload()\n      return\n    }\n\n    if (hasHeader(xhr, /HX-Retarget:/i)) {\n      if (xhr.getResponseHeader('HX-Retarget') === 'this') {\n        responseInfo.target = elt\n      } else {\n        responseInfo.target = asElement(querySelectorExt(elt, xhr.getResponseHeader('HX-Retarget')))\n      }\n    }\n\n    const historyUpdate = determineHistoryUpdates(elt, responseInfo)\n\n    const responseHandling = resolveResponseHandling(xhr)\n    const shouldSwap = responseHandling.swap\n    let isError = !!responseHandling.error\n    let ignoreTitle = htmx.config.ignoreTitle || responseHandling.ignoreTitle\n    let selectOverride = responseHandling.select\n    if (responseHandling.target) {\n      responseInfo.target = asElement(querySelectorExt(elt, responseHandling.target))\n    }\n    var swapOverride = etc.swapOverride\n    if (swapOverride == null && responseHandling.swapOverride) {\n      swapOverride = responseHandling.swapOverride\n    }\n\n    // response headers override response handling config\n    if (hasHeader(xhr, /HX-Retarget:/i)) {\n      if (xhr.getResponseHeader('HX-Retarget') === 'this') {\n        responseInfo.target = elt\n      } else {\n        responseInfo.target = asElement(querySelectorExt(elt, xhr.getResponseHeader('HX-Retarget')))\n      }\n    }\n    if (hasHeader(xhr, /HX-Reswap:/i)) {\n      swapOverride = xhr.getResponseHeader('HX-Reswap')\n    }\n\n    var serverResponse = xhr.response\n    /** @type HtmxBeforeSwapDetails */\n    var beforeSwapDetails = mergeObjects({\n      shouldSwap,\n      serverResponse,\n      isError,\n      ignoreTitle,\n      selectOverride,\n      swapOverride\n    }, responseInfo)\n\n    if (responseHandling.event && !triggerEvent(target, responseHandling.event, beforeSwapDetails)) return\n\n    if (!triggerEvent(target, 'htmx:beforeSwap', beforeSwapDetails)) return\n\n    target = beforeSwapDetails.target // allow re-targeting\n    serverResponse = beforeSwapDetails.serverResponse // allow updating content\n    isError = beforeSwapDetails.isError // allow updating error\n    ignoreTitle = beforeSwapDetails.ignoreTitle // allow updating ignoring title\n    selectOverride = beforeSwapDetails.selectOverride // allow updating select override\n    swapOverride = beforeSwapDetails.swapOverride // allow updating swap override\n\n    responseInfo.target = target // Make updated target available to response events\n    responseInfo.failed = isError // Make failed property available to response events\n    responseInfo.successful = !isError // Make successful property available to response events\n\n    if (beforeSwapDetails.shouldSwap) {\n      if (xhr.status === 286) {\n        cancelPolling(elt)\n      }\n\n      withExtensions(elt, function(extension) {\n        serverResponse = extension.transformResponse(serverResponse, xhr, elt)\n      })\n\n      // Save current page if there will be a history update\n      if (historyUpdate.type) {\n        saveCurrentPageToHistory()\n      }\n\n      var swapSpec = getSwapSpecification(elt, swapOverride)\n\n      if (!swapSpec.hasOwnProperty('ignoreTitle')) {\n        swapSpec.ignoreTitle = ignoreTitle\n      }\n\n      target.classList.add(htmx.config.swappingClass)\n\n      // optional transition API promise callbacks\n      let settleResolve = null\n      let settleReject = null\n\n      if (responseInfoSelect) {\n        selectOverride = responseInfoSelect\n      }\n\n      if (hasHeader(xhr, /HX-Reselect:/i)) {\n        selectOverride = xhr.getResponseHeader('HX-Reselect')\n      }\n\n      const selectOOB = getClosestAttributeValue(elt, 'hx-select-oob')\n      const select = getClosestAttributeValue(elt, 'hx-select')\n\n      let doSwap = function() {\n        try {\n          // if we need to save history, do so, before swapping so that relative resources have the correct base URL\n          if (historyUpdate.type) {\n            triggerEvent(getDocument().body, 'htmx:beforeHistoryUpdate', mergeObjects({ history: historyUpdate }, responseInfo))\n            if (historyUpdate.type === 'push') {\n              pushUrlIntoHistory(historyUpdate.path)\n              triggerEvent(getDocument().body, 'htmx:pushedIntoHistory', { path: historyUpdate.path })\n            } else {\n              replaceUrlInHistory(historyUpdate.path)\n              triggerEvent(getDocument().body, 'htmx:replacedInHistory', { path: historyUpdate.path })\n            }\n          }\n\n          swap(target, serverResponse, swapSpec, {\n            select: selectOverride || select,\n            selectOOB,\n            eventInfo: responseInfo,\n            anchor: responseInfo.pathInfo.anchor,\n            contextElement: elt,\n            afterSwapCallback: function() {\n              if (hasHeader(xhr, /HX-Trigger-After-Swap:/i)) {\n                let finalElt = elt\n                if (!bodyContains(elt)) {\n                  finalElt = getDocument().body\n                }\n                handleTriggerHeader(xhr, 'HX-Trigger-After-Swap', finalElt)\n              }\n            },\n            afterSettleCallback: function() {\n              if (hasHeader(xhr, /HX-Trigger-After-Settle:/i)) {\n                let finalElt = elt\n                if (!bodyContains(elt)) {\n                  finalElt = getDocument().body\n                }\n                handleTriggerHeader(xhr, 'HX-Trigger-After-Settle', finalElt)\n              }\n              maybeCall(settleResolve)\n            }\n          })\n        } catch (e) {\n          triggerErrorEvent(elt, 'htmx:swapError', responseInfo)\n          maybeCall(settleReject)\n          throw e\n        }\n      }\n\n      let shouldTransition = htmx.config.globalViewTransitions\n      if (swapSpec.hasOwnProperty('transition')) {\n        shouldTransition = swapSpec.transition\n      }\n\n      if (shouldTransition &&\n              triggerEvent(elt, 'htmx:beforeTransition', responseInfo) &&\n              typeof Promise !== 'undefined' &&\n              // @ts-ignore experimental feature atm\n              document.startViewTransition) {\n        const settlePromise = new Promise(function(_resolve, _reject) {\n          settleResolve = _resolve\n          settleReject = _reject\n        })\n        // wrap the original doSwap() in a call to startViewTransition()\n        const innerDoSwap = doSwap\n        doSwap = function() {\n          // @ts-ignore experimental feature atm\n          document.startViewTransition(function() {\n            innerDoSwap()\n            return settlePromise\n          })\n        }\n      }\n\n      if (swapSpec.swapDelay > 0) {\n        getWindow().setTimeout(doSwap, swapSpec.swapDelay)\n      } else {\n        doSwap()\n      }\n    }\n    if (isError) {\n      triggerErrorEvent(elt, 'htmx:responseError', mergeObjects({ error: 'Response Status Error Code ' + xhr.status + ' from ' + responseInfo.pathInfo.requestPath }, responseInfo))\n    }\n  }\n\n  //= ===================================================================\n  // Extensions API\n  //= ===================================================================\n\n  /** @type {Object<string, HtmxExtension>} */\n  const extensions = {}\n\n  /**\n   * extensionBase defines the default functions for all extensions.\n   * @returns {HtmxExtension}\n   */\n  function extensionBase() {\n    return {\n      init: function(api) { return null },\n      getSelectors: function() { return null },\n      onEvent: function(name, evt) { return true },\n      transformResponse: function(text, xhr, elt) { return text },\n      isInlineSwap: function(swapStyle) { return false },\n      handleSwap: function(swapStyle, target, fragment, settleInfo) { return false },\n      encodeParameters: function(xhr, parameters, elt) { return null }\n    }\n  }\n\n  /**\n   * defineExtension initializes the extension and adds it to the htmx registry\n   *\n   * @see https://htmx.org/api/#defineExtension\n   *\n   * @param {string} name the extension name\n   * @param {Partial<HtmxExtension>} extension the extension definition\n   */\n  function defineExtension(name, extension) {\n    if (extension.init) {\n      extension.init(internalAPI)\n    }\n    extensions[name] = mergeObjects(extensionBase(), extension)\n  }\n\n  /**\n   * removeExtension removes an extension from the htmx registry\n   *\n   * @see https://htmx.org/api/#removeExtension\n   *\n   * @param {string} name\n   */\n  function removeExtension(name) {\n    delete extensions[name]\n  }\n\n  /**\n   * getExtensions searches up the DOM tree to return all extensions that can be applied to a given element\n   *\n   * @param {Element} elt\n   * @param {HtmxExtension[]=} extensionsToReturn\n   * @param {string[]=} extensionsToIgnore\n   * @returns {HtmxExtension[]}\n   */\n  function getExtensions(elt, extensionsToReturn, extensionsToIgnore) {\n    if (extensionsToReturn == undefined) {\n      extensionsToReturn = []\n    }\n    if (elt == undefined) {\n      return extensionsToReturn\n    }\n    if (extensionsToIgnore == undefined) {\n      extensionsToIgnore = []\n    }\n    const extensionsForElement = getAttributeValue(elt, 'hx-ext')\n    if (extensionsForElement) {\n      forEach(extensionsForElement.split(','), function(extensionName) {\n        extensionName = extensionName.replace(/ /g, '')\n        if (extensionName.slice(0, 7) == 'ignore:') {\n          extensionsToIgnore.push(extensionName.slice(7))\n          return\n        }\n        if (extensionsToIgnore.indexOf(extensionName) < 0) {\n          const extension = extensions[extensionName]\n          if (extension && extensionsToReturn.indexOf(extension) < 0) {\n            extensionsToReturn.push(extension)\n          }\n        }\n      })\n    }\n    return getExtensions(asElement(parentElt(elt)), extensionsToReturn, extensionsToIgnore)\n  }\n\n  //= ===================================================================\n  // Initialization\n  //= ===================================================================\n  var isReady = false\n  getDocument().addEventListener('DOMContentLoaded', function() {\n    isReady = true\n  })\n\n  /**\n   * Execute a function now if DOMContentLoaded has fired, otherwise listen for it.\n   *\n   * This function uses isReady because there is no reliable way to ask the browser whether\n   * the DOMContentLoaded event has already been fired; there's a gap between DOMContentLoaded\n   * firing and readystate=complete.\n   */\n  function ready(fn) {\n    // Checking readyState here is a failsafe in case the htmx script tag entered the DOM by\n    // some means other than the initial page load.\n    if (isReady || getDocument().readyState === 'complete') {\n      fn()\n    } else {\n      getDocument().addEventListener('DOMContentLoaded', fn)\n    }\n  }\n\n  function insertIndicatorStyles() {\n    if (htmx.config.includeIndicatorStyles !== false) {\n      const nonceAttribute = htmx.config.inlineStyleNonce ? ` nonce=\"${htmx.config.inlineStyleNonce}\"` : ''\n      getDocument().head.insertAdjacentHTML('beforeend',\n        '<style' + nonceAttribute + '>\\\n      .' + htmx.config.indicatorClass + '{opacity:0}\\\n      .' + htmx.config.requestClass + ' .' + htmx.config.indicatorClass + '{opacity:1; transition: opacity 200ms ease-in;}\\\n      .' + htmx.config.requestClass + '.' + htmx.config.indicatorClass + '{opacity:1; transition: opacity 200ms ease-in;}\\\n      </style>')\n    }\n  }\n\n  function getMetaConfig() {\n    /** @type HTMLMetaElement */\n    const element = getDocument().querySelector('meta[name=\"htmx-config\"]')\n    if (element) {\n      return parseJSON(element.content)\n    } else {\n      return null\n    }\n  }\n\n  function mergeMetaConfig() {\n    const metaConfig = getMetaConfig()\n    if (metaConfig) {\n      htmx.config = mergeObjects(htmx.config, metaConfig)\n    }\n  }\n\n  // initialize the document\n  ready(function() {\n    mergeMetaConfig()\n    insertIndicatorStyles()\n    let body = getDocument().body\n    processNode(body)\n    const restoredElts = getDocument().querySelectorAll(\n      \"[hx-trigger='restored'],[data-hx-trigger='restored']\"\n    )\n    body.addEventListener('htmx:abort', function(evt) {\n      const target = evt.target\n      const internalData = getInternalData(target)\n      if (internalData && internalData.xhr) {\n        internalData.xhr.abort()\n      }\n    })\n    /** @type {(ev: PopStateEvent) => any} */\n    const originalPopstate = window.onpopstate ? window.onpopstate.bind(window) : null\n    /** @type {(ev: PopStateEvent) => any} */\n    window.onpopstate = function(event) {\n      if (event.state && event.state.htmx) {\n        restoreHistory()\n        forEach(restoredElts, function(elt) {\n          triggerEvent(elt, 'htmx:restored', {\n            document: getDocument(),\n            triggerEvent\n          })\n        })\n      } else {\n        if (originalPopstate) {\n          originalPopstate(event)\n        }\n      }\n    }\n    getWindow().setTimeout(function() {\n      triggerEvent(body, 'htmx:load', {}) // give ready handlers a chance to load up before firing this event\n      body = null // kill reference for gc\n    }, 0)\n  })\n\n  return htmx\n})()\n\n/** @typedef {'get'|'head'|'post'|'put'|'delete'|'connect'|'options'|'trace'|'patch'} HttpVerb */\n\n/**\n * @typedef {Object} SwapOptions\n * @property {string} [select]\n * @property {string} [selectOOB]\n * @property {*} [eventInfo]\n * @property {string} [anchor]\n * @property {Element} [contextElement]\n * @property {swapCallback} [afterSwapCallback]\n * @property {swapCallback} [afterSettleCallback]\n */\n\n/**\n * @callback swapCallback\n */\n\n/**\n * @typedef {'innerHTML' | 'outerHTML' | 'beforebegin' | 'afterbegin' | 'beforeend' | 'afterend' | 'delete' | 'none' | string} HtmxSwapStyle\n */\n\n/**\n * @typedef HtmxSwapSpecification\n * @property {HtmxSwapStyle} swapStyle\n * @property {number} swapDelay\n * @property {number} settleDelay\n * @property {boolean} [transition]\n * @property {boolean} [ignoreTitle]\n * @property {string} [head]\n * @property {'top' | 'bottom'} [scroll]\n * @property {string} [scrollTarget]\n * @property {string} [show]\n * @property {string} [showTarget]\n * @property {boolean} [focusScroll]\n */\n\n/**\n * @typedef {((this:Node, evt:Event) => boolean) & {source: string}} ConditionalFunction\n */\n\n/**\n * @typedef {Object} HtmxTriggerSpecification\n * @property {string} trigger\n * @property {number} [pollInterval]\n * @property {ConditionalFunction} [eventFilter]\n * @property {boolean} [changed]\n * @property {boolean} [once]\n * @property {boolean} [consume]\n * @property {number} [delay]\n * @property {string} [from]\n * @property {string} [target]\n * @property {number} [throttle]\n * @property {string} [queue]\n * @property {string} [root]\n * @property {string} [threshold]\n */\n\n/**\n * @typedef {{elt: Element, message: string, validity: ValidityState}} HtmxElementValidationError\n */\n\n/**\n * @typedef {Record<string, string>} HtmxHeaderSpecification\n * @property {'true'} HX-Request\n * @property {string|null} HX-Trigger\n * @property {string|null} HX-Trigger-Name\n * @property {string|null} HX-Target\n * @property {string} HX-Current-URL\n * @property {string} [HX-Prompt]\n * @property {'true'} [HX-Boosted]\n * @property {string} [Content-Type]\n * @property {'true'} [HX-History-Restore-Request]\n */\n\n/** @typedef HtmxAjaxHelperContext\n * @property {Element|string} [source]\n * @property {Event} [event]\n * @property {HtmxAjaxHandler} [handler]\n * @property {Element|string} [target]\n * @property {HtmxSwapStyle} [swap]\n * @property {Object|FormData} [values]\n * @property {Record<string,string>} [headers]\n * @property {string} [select]\n */\n\n/**\n * @typedef {Object} HtmxRequestConfig\n * @property {boolean} boosted\n * @property {boolean} useUrlParams\n * @property {FormData} formData\n * @property {Object} parameters formData proxy\n * @property {FormData} unfilteredFormData\n * @property {Object} unfilteredParameters unfilteredFormData proxy\n * @property {HtmxHeaderSpecification} headers\n * @property {Element} target\n * @property {HttpVerb} verb\n * @property {HtmxElementValidationError[]} errors\n * @property {boolean} withCredentials\n * @property {number} timeout\n * @property {string} path\n * @property {Event} triggeringEvent\n */\n\n/**\n * @typedef {Object} HtmxResponseInfo\n * @property {XMLHttpRequest} xhr\n * @property {Element} target\n * @property {HtmxRequestConfig} requestConfig\n * @property {HtmxAjaxEtc} etc\n * @property {boolean} boosted\n * @property {string} select\n * @property {{requestPath: string, finalRequestPath: string, responsePath: string|null, anchor: string}} pathInfo\n * @property {boolean} [failed]\n * @property {boolean} [successful]\n * @property {boolean} [keepIndicators]\n */\n\n/**\n * @typedef {Object} HtmxAjaxEtc\n * @property {boolean} [returnPromise]\n * @property {HtmxAjaxHandler} [handler]\n * @property {string} [select]\n * @property {Element} [targetOverride]\n * @property {HtmxSwapStyle} [swapOverride]\n * @property {Record<string,string>} [headers]\n * @property {Object|FormData} [values]\n * @property {boolean} [credentials]\n * @property {number} [timeout]\n */\n\n/**\n * @typedef {Object} HtmxResponseHandlingConfig\n * @property {string} [code]\n * @property {boolean} swap\n * @property {boolean} [error]\n * @property {boolean} [ignoreTitle]\n * @property {string} [select]\n * @property {string} [target]\n * @property {string} [swapOverride]\n * @property {string} [event]\n */\n\n/**\n * @typedef {HtmxResponseInfo & {shouldSwap: boolean, serverResponse: any, isError: boolean, ignoreTitle: boolean, selectOverride:string, swapOverride:string}} HtmxBeforeSwapDetails\n */\n\n/**\n * @callback HtmxAjaxHandler\n * @param {Element} elt\n * @param {HtmxResponseInfo} responseInfo\n */\n\n/**\n * @typedef {(() => void)} HtmxSettleTask\n */\n\n/**\n * @typedef {Object} HtmxSettleInfo\n * @property {HtmxSettleTask[]} tasks\n * @property {Element[]} elts\n * @property {string} [title]\n */\n\n/**\n * @see https://github.com/bigskysoftware/htmx-extensions/blob/main/README.md\n * @typedef {Object} HtmxExtension\n * @property {(api: any) => void} init\n * @property {(name: string, event: Event|CustomEvent) => boolean} onEvent\n * @property {(text: string, xhr: XMLHttpRequest, elt: Element) => string} transformResponse\n * @property {(swapStyle: HtmxSwapStyle) => boolean} isInlineSwap\n * @property {(swapStyle: HtmxSwapStyle, target: Node, fragment: Node, settleInfo: HtmxSettleInfo) => boolean|Node[]} handleSwap\n * @property {(xhr: XMLHttpRequest, parameters: FormData, elt: Node) => *|string|null} encodeParameters\n * @property {() => string[]|null} getSelectors\n */\nexport default htmx\n", "/**\n * MicroEvent - to make any js object an event emitter\n *\n * - pure javascript - server compatible, browser compatible\n * - dont rely on the browser doms\n * - super simple - you get it immediatly, no mistery, no magic involved\n *\n * @author Jerome Etienne (https://github.com/jeromeetienne)\n */\n\ntype TCallback = (...args:any) => any;\n\n/**\n * Execute callback for each event in space separated list of event names\n *\n */\nfunction forEvents(events:string,callback:(event:string)=>any){\n\tevents.split(/\\s+/).forEach((event) =>{\n\t\tcallback(event);\n\t});\n}\n\nexport default class MicroEvent{\n\n\tpublic _events: {[key:string]:TCallback[]};\n\n\tconstructor(){\n\t\tthis._events = {};\n\t}\n\n\ton(events:string, fct:TCallback){\n\t\tforEvents(events,(event) => {\n\t\t\tconst event_array = this._events[event] || [];\n\t\t\tevent_array.push(fct);\n\t\t\tthis._events[event] = event_array;\n\t\t});\n\t}\n\n\toff(events:string, fct:TCallback){\n\t\tvar n = arguments.length;\n\t\tif( n === 0 ){\n\t\t\tthis._events = {};\n\t\t\treturn;\n\t\t}\n\n\t\tforEvents(events,(event) => {\n\n\t\t\tif (n === 1){\n\t\t\t\tdelete this._events[event];\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tconst event_array = this._events[event];\n\t\t\tif( event_array === undefined ) return;\n\n\t\t\tevent_array.splice(event_array.indexOf(fct), 1);\n\t\t\tthis._events[event] = event_array;\n\t\t});\n\t}\n\n\ttrigger(events:string, ...args:any){\n\t\tvar self = this;\n\n\t\tforEvents(events,(event) => {\n\t\t\tconst event_array = self._events[event];\n\t\t\tif( event_array === undefined ) return;\n\t\t\tevent_array.forEach(fct => {\n\t\t\t\tfct.apply(self, args );\n\t\t\t});\n\n\t\t});\n\t}\n};\n", "/**\n * microplugin.js\n * Copyright (c) 2013 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\ntype TSettings = {\n\t[key:string]:any\n}\n\ntype TPlugins = {\n\tnames: string[],\n\tsettings: TSettings,\n\trequested: {[key:string]:boolean},\n\tloaded: {[key:string]:any}\n};\n\nexport type TPluginItem = {name:string,options:{}};\nexport type TPluginHash = {[key:string]:{}};\n\n\n\n\nexport default function MicroPlugin(Interface: any ){\n\n\tInterface.plugins = {};\n\n\treturn class extends Interface{\n\n\t\tpublic plugins:TPlugins = {\n\t\t\tnames     : [],\n\t\t\tsettings  : {},\n\t\t\trequested : {},\n\t\t\tloaded    : {}\n\t\t};\n\n\t\t/**\n\t\t * Registers a plugin.\n\t\t *\n\t\t * @param {function} fn\n\t\t */\n\t\tstatic define(name:string, fn:(this:any,settings:TSettings)=>any){\n\t\t\tInterface.plugins[name] = {\n\t\t\t\t'name' : name,\n\t\t\t\t'fn'   : fn\n\t\t\t};\n\t\t}\n\n\n\t\t/**\n\t\t * Initializes the listed plugins (with options).\n\t\t * Acceptable formats:\n\t\t *\n\t\t * List (without options):\n\t\t *   ['a', 'b', 'c']\n\t\t *\n\t\t * List (with options):\n\t\t *   [{'name': 'a', options: {}}, {'name': 'b', options: {}}]\n\t\t *\n\t\t * Hash (with options):\n\t\t *   {'a': { ... }, 'b': { ... }, 'c': { ... }}\n\t\t *\n\t\t * @param {array|object} plugins\n\t\t */\n\t\tinitializePlugins(plugins:string[]|TPluginItem[]|TPluginHash) {\n\t\t\tvar key, name;\n\t\t\tconst self  = this;\n\t\t\tconst queue:string[] = [];\n\n\t\t\tif (Array.isArray(plugins)) {\n\t\t\t\tplugins.forEach((plugin:string|TPluginItem)=>{\n\t\t\t\t\tif (typeof plugin === 'string') {\n\t\t\t\t\t\tqueue.push(plugin);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.plugins.settings[plugin.name] = plugin.options;\n\t\t\t\t\t\tqueue.push(plugin.name);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (plugins) {\n\t\t\t\tfor (key in plugins) {\n\t\t\t\t\tif (plugins.hasOwnProperty(key)) {\n\t\t\t\t\t\tself.plugins.settings[key] = plugins[key];\n\t\t\t\t\t\tqueue.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\twhile( name = queue.shift() ){\n\t\t\t\tself.require(name);\n\t\t\t}\n\t\t}\n\n\t\tloadPlugin(name:string) {\n\t\t\tvar self    = this;\n\t\t\tvar plugins = self.plugins;\n\t\t\tvar plugin  = Interface.plugins[name];\n\n\t\t\tif (!Interface.plugins.hasOwnProperty(name)) {\n\t\t\t\tthrow new Error('Unable to find \"' +  name + '\" plugin');\n\t\t\t}\n\n\t\t\tplugins.requested[name] = true;\n\t\t\tplugins.loaded[name] = plugin.fn.apply(self, [self.plugins.settings[name] || {}]);\n\t\t\tplugins.names.push(name);\n\t\t}\n\n\t\t/**\n\t\t * Initializes a plugin.\n\t\t *\n\t\t */\n\t\trequire(name:string) {\n\t\t\tvar self = this;\n\t\t\tvar plugins = self.plugins;\n\n\t\t\tif (!self.plugins.loaded.hasOwnProperty(name)) {\n\t\t\t\tif (plugins.requested[name]) {\n\t\t\t\t\tthrow new Error('Plugin has circular dependency (\"' + name + '\")');\n\t\t\t\t}\n\t\t\t\tself.loadPlugin(name);\n\t\t\t}\n\n\t\t\treturn plugins.loaded[name];\n\t\t}\n\n\t};\n\n}\n", "/**\n * Convert array of strings to a regular expression\n *\tex ['ab','a'] => (?:ab|a)\n * \tex ['a','b'] => [ab]\n */\nexport const arrayToPattern = (chars: string[]): string => {\n\n\tchars = chars.filter( Boolean );\n\n\tif( chars.length < 2 ){\n\t\treturn chars[0] || '';\n\t}\n\n\treturn (maxValueLength(chars) == 1) ? '['+chars.join('')+']' : '(?:'+chars.join('|')+')';\n};\n\nexport const sequencePattern = (array: string[]): string => {\n\n\tif( !hasDuplicates(array) ){\n\t\treturn array.join('');\n\t}\n\n\tlet pattern = '';\n\tlet prev_char_count = 0;\n\n\tconst prev_pattern = ()=>{\n\t\tif( prev_char_count > 1 ){\n\t\t\tpattern += '{'+prev_char_count+'}';\n\t\t}\n\t}\n\n\tarray.forEach((char,i)=>{\n\n\t\tif( char === array[i-1] ){\n\t\t\tprev_char_count++;\n\t\t\treturn;\n\t\t}\n\n\t\tprev_pattern();\n\n\t\tpattern += char;\n\t\tprev_char_count = 1;\n\t});\n\n\tprev_pattern();\n\n\treturn pattern;\n\n}\n\n\n\n/**\n * Convert array of strings to a regular expression\n *\tex ['ab','a'] => (?:ab|a)\n * \tex ['a','b'] => [ab]\n */\nexport const setToPattern = (chars: Set<string>): string => {\n\tlet array = Array.from(chars);\n\treturn arrayToPattern(array);\n}\n\n\n\n/**\n * https://stackoverflow.com/questions/7376598/in-javascript-how-do-i-check-if-an-array-has-duplicate-values\n */\nexport const hasDuplicates = (array: any[]) => {\n    return (new Set(array)).size !== array.length;\n}\n\n\n/**\n * https://stackoverflow.com/questions/63006601/why-does-u-throw-an-invalid-escape-error\n */\nexport const escape_regex = (str: string): string => {\n\treturn (str + '').replace(/([\\$\\(\\)\\*\\+\\.\\?\\[\\]\\^\\{\\|\\}\\\\])/gu, '\\\\$1');\n};\n\n/**\n * Return the max length of array values\n */\nexport const maxValueLength = (array: string[]) => {\n\treturn array.reduce( (longest, value) => Math.max(longest,unicodeLength(value)),0);\n}\n\n\nexport const unicodeLength = (str: string) => {\n\treturn Array.from(str).length;\n}\n", "/**\n * Get all possible combinations of substrings that add up to the given string\n * https://stackoverflow.com/questions/30169587/find-all-the-combination-of-substrings-that-add-up-to-the-given-string\n */\nexport const allSubstrings = (input: string): string[][] => {\n\n    if( input.length === 1) return [[input]];\n\n    let result: string[][] = [];\n\n\tconst start = input.substring(1);\n    const suba = allSubstrings(start);\n\n\tsuba.forEach(function(subresult) {\n        let tmp = subresult.slice(0);\n        tmp[0] = input.charAt(0) + tmp[0];\n        result.push(tmp);\n\n        tmp = subresult.slice(0);\n        tmp.unshift(input.charAt(0));\n        result.push(tmp);\n    });\n\n    return result;\n}\n", "import { setToPattern, arrayToPattern, escape_regex, sequencePattern } from './regex.ts';\nimport { allSubstrings } from './strings.ts';\n\nexport type TUnicodeMap = {[key:string]:string};\nexport type TUnicodeSets = {[key:string]:Set<string>};\nexport type TCodePoints = [[number,number]];\nexport type TCodePointObj = {folded:string,composed:string,code_point:number}\nexport type TSequencePart = {start:number,end:number,length:number,substr:string}\n\nexport const code_points: TCodePoints = [[ 0, 65535 ]];\n\nconst accent_pat = '[\\u0300-\\u036F\\u{b7}\\u{2be}\\u{2bc}]';\n\nexport let unicode_map: TUnicodeMap;\n\nlet multi_char_reg: RegExp;\n\nconst max_char_length = 3;\n\nconst latin_convert: TUnicodeMap = {}\n\nconst latin_condensed: TUnicodeMap = {\n\t'/': '\u2044\u2215',\n\t'0': '\u07C0',\n\t\"a\": \"\u2C65\u0250\u0251\",\n\t\"aa\": \"\uA733\",\n\t\"ae\": \"\u00E6\u01FD\u01E3\",\n\t\"ao\": \"\uA735\",\n\t\"au\": \"\uA737\",\n\t\"av\": \"\uA739\uA73B\",\n\t\"ay\": \"\uA73D\",\n\t\"b\": \"\u0180\u0253\u0183\",\n\t\"c\": \"\uA73F\u0188\u023C\u2184\",\n\t\"d\": \"\u0111\u0257\u0256\u1D05\u018C\uABB7\u0501\u0266\",\n\t\"e\": \"\u025B\u01DD\u1D07\u0247\",\n\t\"f\": \"\uA77C\u0192\",\n\t\"g\": \"\u01E5\u0260\uA7A1\u1D79\uA77F\u0262\",\n\t\"h\": \"\u0127\u2C68\u2C76\u0265\",\n\t\"i\": \"\u0268\u0131\",\n\t\"j\": \"\u0249\u0237\",\n\t\"k\": \"\u0199\u2C6A\uA741\uA743\uA745\uA7A3\",\n\t\"l\": \"\u0142\u019A\u026B\u2C61\uA749\uA747\uA781\u026D\",\n\t\"m\": \"\u0271\u026F\u03FB\",\n\t\"n\": \"\uA7A5\u019E\u0272\uA791\u1D0E\u043B\u0509\",\n\t\"o\": \"\u00F8\u01FF\u0254\u0275\uA74B\uA74D\u1D11\",\n\t\"oe\": \"\u0153\",\n\t\"oi\": \"\u01A3\",\n\t\"oo\": \"\uA74F\",\n\t\"ou\": \"\u0223\",\n\t\"p\": \"\u01A5\u1D7D\uA751\uA753\uA755\u03C1\",\n\t\"q\": \"\uA757\uA759\u024B\",\n\t\"r\": \"\u024D\u027D\uA75B\uA7A7\uA783\",\n\t\"s\": \"\u00DF\u023F\uA7A9\uA785\u0282\",\n\t\"t\": \"\u0167\u01AD\u0288\u2C66\uA787\",\n\t\"th\": \"\u00FE\",\n\t\"tz\": \"\uA729\",\n\t\"u\": \"\u0289\",\n\t\"v\": \"\u028B\uA75F\u028C\",\n\t\"vy\": \"\uA761\",\n\t\"w\": \"\u2C73\",\n\t\"y\": \"\u01B4\u024F\u1EFF\",\n\t\"z\": \"\u01B6\u0225\u0240\u2C6C\uA763\",\n\t\"hv\": \"\u0195\"\n}\n\n\nfor( let latin in latin_condensed ){\n\tlet unicode = latin_condensed[latin] || '';\n\tfor( let i = 0; i < unicode.length; i++){\n\t\tlet char\t= unicode.substring(i,i+1);\n\t\tlatin_convert[char] = latin;\n\t}\n}\n\n\nconst convert_pat = new RegExp(Object.keys(latin_convert).join('|')+'|'+accent_pat,'gu');\n\n\n\n/**\n * Initialize the unicode_map from the give code point ranges\n */\nexport const initialize = (_code_points?: TCodePoints) => {\n\tif( unicode_map !== undefined ) return;\n\tunicode_map = generateMap(_code_points || code_points );\n}\n\n\n/**\n * Helper method for normalize a string\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/normalize\n */\nexport const normalize = (str: string, form: string = 'NFKD') => str.normalize(form);\n\n\n\n/**\n * Remove accents without reordering string\n * calling str.normalize('NFKD') on \\u{594}\\u{595}\\u{596} becomes \\u{596}\\u{594}\\u{595}\n * via https://github.com/krisk/Fuse/issues/133#issuecomment-318692703\n */\nexport const asciifold = (str: string): string => {\n\n\treturn Array.from(str).reduce(\n\t\t/**\n\t\t * @param {string} result\n\t\t * @param {string} char\n\t\t */\n\t\t(result, char) =>{\n\t\t\treturn result + _asciifold(char)\n\t\t},\n\t\t''\n\t);\n};\n\nexport const _asciifold = (str: string): string => {\n\tstr = normalize(str)\n\t\t.toLowerCase()\n\t\t.replace(convert_pat,(/** @type {string} */ char) => {\n\t\t\treturn latin_convert[char] || '';\n\t\t})\n\n\t//return str;\n\treturn normalize(str,'NFC')\n};\n\n/**\n * Generate a list of unicode variants from the list of code points\n */\nexport function* generator(code_points: TCodePoints): Generator<TCodePointObj> {\n\n\tfor(const [code_point_min, code_point_max] of code_points){\n\t\tfor(let i = code_point_min; i <= code_point_max; i++){\n\n\t\t\tlet composed\t\t= String.fromCharCode(i);\n\t\t\tlet folded\t\t\t= asciifold(composed);\n\n\n\t\t\tif( folded == composed.toLowerCase() ){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// skip when folded is a string longer than 3 characters long\n\t\t\t// bc the resulting regex patterns will be long\n\t\t\t// eg:\n\t\t\t// folded \u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645 length 18 code point 65018\n\t\t\t// folded \u062C\u0644 \u062C\u0644\u0627\u0644\u0647 length 8 code point 65019\n\t\t\tif( folded.length > max_char_length ){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( folded.length == 0 ){\n\t\t\t\tcontinue\n\t\t\t}\n\n\n\t\t\tyield {folded:folded,composed:composed,code_point:i};\n\t\t}\n\t}\n}\n\n\n/**\n * Generate a unicode map from the list of code points\n */\nexport const generateSets = (code_points: TCodePoints): TUnicodeSets => {\n\n\tconst unicode_sets: {[key: string]: Set<string>} = {};\n\n\tconst addMatching = (folded: string, to_add: string) => {\n\n\t\t/** @type {Set<string>} */\n\t\tconst folded_set = unicode_sets[folded] || new Set();\n\n\t\tconst patt = new RegExp( '^'+setToPattern(folded_set)+'$','iu');\n\t\tif( to_add.match(patt) ){\n\t\t\treturn;\n\t\t}\n\n\t\tfolded_set.add(escape_regex(to_add));\n\t\tunicode_sets[folded] = folded_set;\n\t}\n\n\n\tfor( let value of generator(code_points) ){\n\t\taddMatching(value.folded,value.folded);\n\t\taddMatching(value.folded,value.composed);\n\t}\n\n\treturn unicode_sets;\n}\n\n/**\n * Generate a unicode map from the list of code points\n * ae => (?:(?:ae|\u00C6|\u01FC|\u01E2)|(?:A|\u24B6|\uFF21...)(?:E|\u025B|\u24BA...))\n */\nexport const generateMap = (code_points: TCodePoints): TUnicodeMap => {\n\tconst unicode_sets = generateSets(code_points);\n\n\tconst unicode_map: TUnicodeMap = {};\n\n\tlet multi_char: string[] = [];\n\n\tfor( let folded in unicode_sets ){\n\n\t\tlet set = unicode_sets[folded];\n\t\tif( set ){\n\t\t\tunicode_map[folded] = setToPattern(set);\n\t\t}\n\n\t\tif( folded.length > 1 ){\n\t\t\tmulti_char.push(escape_regex(folded));\n\t\t}\n\t}\n\n\tmulti_char.sort((a, b) => b.length - a.length );\n\tconst multi_char_patt = arrayToPattern(multi_char);\n\tmulti_char_reg = new RegExp('^'+multi_char_patt,'u');\n\n\treturn unicode_map;\n}\n\n\n/**\n * Map each element of an array from its folded value to all possible unicode matches\n */\nexport const mapSequence = (strings: string[], min_replacement: number = 1): string =>{\n\tlet chars_replaced = 0;\n\n\tstrings = strings.map((str)=>{\n\t\tif( unicode_map[str] ){\n\t\t\tchars_replaced += str.length;\n\t\t}\n\t\treturn unicode_map[str] || str;\n\t});\n\n\tif( chars_replaced >= min_replacement ){\n\t\treturn sequencePattern(strings);\n\t}\n\n\treturn '';\n}\n\n/**\n * Convert a short string and split it into all possible patterns\n * Keep a pattern only if min_replacement is met\n *\n * 'abc'\n * \t\t=> [['abc'],['ab','c'],['a','bc'],['a','b','c']]\n *\t\t=> ['abc-pattern','ab-c-pattern'...]\n */\nexport const substringsToPattern = (str: string, min_replacement: number = 1): string => {\n\n\tmin_replacement = Math.max(min_replacement,str.length-1);\n\n\treturn arrayToPattern(\n\t\tallSubstrings(str).map( (sub_pat) =>{\n\t\t\treturn mapSequence(sub_pat,min_replacement)\n\t\t})\n\t);\n}\n\n/**\n * Convert an array of sequences into a pattern\n * [{start:0,end:3,length:3,substr:'iii'}...] => (?:iii...)\n */\nconst sequencesToPattern = (sequences: Sequence[], all: boolean = true) => {\n\n\tlet min_replacement = sequences.length > 1 ? 1 : 0;\n\treturn arrayToPattern(\n\t\tsequences.map( (sequence) =>{\n\t\t\tlet seq: string[] = [];\n\t\t\tconst len = all ? sequence.length() : sequence.length() - 1;\n\t\t\tfor( let j = 0; j < len; j++){\n\t\t\t\tseq.push(substringsToPattern(sequence.substrs[j]||'',min_replacement));\n\t\t\t}\n\n\t\t\treturn sequencePattern(seq);\n\t\t})\n\t);\n}\n\n/**\n * Return true if the sequence is already in the sequences\n */\nconst inSequences = (needle_seq: Sequence, sequences: Sequence[]) => {\n\n\tfor(const seq of sequences){\n\n\t\tif( seq.start != needle_seq.start || seq.end != needle_seq.end ){\n\t\t\tcontinue;\n\t\t}\n\n\t\tif( seq.substrs.join('') !== needle_seq.substrs.join('') ){\n\t\t\tcontinue;\n\t\t}\n\n\n\t\tlet needle_parts\t= needle_seq.parts;\n\n\t\tconst filter = (part: TSequencePart) =>{\n\n\t\t\tfor(const needle_part of needle_parts){\n\n\t\t\t\tif( needle_part.start === part.start && needle_part.substr === part.substr ){\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif( part.length == 1 || needle_part.length == 1 ){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\n\t\t\t\t// check for overlapping parts\n\t\t\t\t// a = ['::=','==']\n\t\t\t\t// b = ['::','===']\n\t\t\t\t// a = ['r','sm']\n\t\t\t\t// b = ['rs','m']\n\t\t\t\tif( part.start < needle_part.start && part.end > needle_part.start ){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif( needle_part.start < part.start && needle_part.end > part.start ){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tlet filtered = seq.parts.filter(filter);\n\n\t\tif( filtered.length > 0 ){\n\t\t\tcontinue;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nclass Sequence{\n\tparts: TSequencePart[];\n\tsubstrs: string[];\n\tstart: number;\n\tend: number;\n\n\tconstructor(){\n\t\tthis.parts\t\t= [];\n\t\tthis.substrs\t= [];\n\t\tthis.start\t\t= 0;\n\t\tthis.end\t\t= 0;\n\t}\n\n\tadd(part: TSequencePart|undefined){\n\t\tif( part ){\n\t\t\tthis.parts.push(part);\n\t\t\tthis.substrs.push(part.substr);\n\t\t\tthis.start\t= Math.min(part.start,this.start);\n\t\t\tthis.end\t= Math.max(part.end,this.end);\n\t\t}\n\t}\n\n\tlast(){\n\t\treturn this.parts[this.parts.length-1];\n\t}\n\n\tlength(){\n\t\treturn this.parts.length;\n\t}\n\n\tclone(position: number, last_piece: TSequencePart){\n\t\tlet clone = new Sequence();\n\n\t\tlet parts = JSON.parse(JSON.stringify(this.parts));\n\t\tlet last_part = parts.pop();\n\t\tfor( const part of parts ){\n\t\t\tclone.add(part);\n\t\t}\n\n\t\tlet last_substr = last_piece.substr.substring(0,position-last_part.start);\n\t\tlet clone_last_len = last_substr.length;\n\t\tclone.add({start:last_part.start,end:last_part.start+clone_last_len,length:clone_last_len,substr:last_substr});\n\n\t\treturn clone;\n\t}\n\n}\n\n/**\n * Expand a regular expression pattern to include unicode variants\n * \teg /a/ becomes /a\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250\u0251A\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F/\n *\n * Issue:\n *  \uFE8A\uFE8B [ '\uFE8A = \\\\u{fe8a}', '\uFE8B = \\\\u{fe8b}' ]\n *\tbecomes:\t\u064A\u0654\u064A\u0654 [ '\u064A = \\\\u{64a}', '\u0654 = \\\\u{654}', '\u064A = \\\\u{64a}', '\u0654 = \\\\u{654}' ]\n *\n *\t\u0130\u0132 = IIJ = \u2161J\n *\n * \t1/2/4\n */\nexport const getPattern = (str: string): string | undefined => {\n\tinitialize();\n\n\tstr\t\t\t\t\t= asciifold(str);\n\n\tlet pattern\t\t\t= '';\n\tlet sequences\t\t= [new Sequence()];\n\n\tfor( let i = 0; i < str.length; i++ ){\n\n\t\tlet substr\t= str.substring(i);\n\t\tlet match\t= substr.match(multi_char_reg);\n\t\tconst char\t= str.substring(i,i+1);\n\t\tconst match_str = match ? match[0] : null;\n\n\n\t\t// loop through sequences\n\t\t// add either the char or multi_match\n\t\tlet overlapping: Sequence[]\t= [];\n\t\tlet added_types\t\t\t\t\t\t\t= new Set();\n\t\tfor(const sequence of sequences){\n\n\t\t\tconst last_piece\t= sequence.last();\n\n\n\t\t\tif( !last_piece || last_piece.length == 1 || last_piece.end <= i ){\n\n\t\t\t\t// if we have a multi match\n\t\t\t\tif( match_str ){\n\t\t\t\t\tconst len = match_str.length;\n\t\t\t\t\tsequence.add({start:i,end:i+len,length:len,substr:match_str});\n\t\t\t\t\tadded_types.add('1');\n\t\t\t\t}else{\n\t\t\t\t\tsequence.add({start:i,end:i+1,length:1,substr:char});\n\t\t\t\t\tadded_types.add('2');\n\t\t\t\t}\n\n\t\t\t}else if( match_str ){\n\n\t\t\t\tlet clone = sequence.clone(i,last_piece);\n\n\t\t\t\tconst len = match_str.length;\n\t\t\t\tclone.add({start:i,end:i+len,length:len,substr:match_str});\n\n\t\t\t\toverlapping.push(clone);\n\n\t\t\t}else{\n\t\t\t\t// don't add char\n\t\t\t\t// adding would create invalid patterns: 234 => [2,34,4]\n\t\t\t\tadded_types.add('3');\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if we have overlapping\n\t\tif( overlapping.length > 0 ){\n\n\t\t\t// ['ii','iii'] before ['i','i','iii']\n\t\t\toverlapping = overlapping.sort((a,b)=>{\n\t\t\t\treturn a.length() - b.length();\n\t\t\t});\n\n\t\t\tfor( let clone of overlapping){\n\n\t\t\t\t// don't add if we already have an equivalent sequence\n\t\t\t\tif( inSequences(clone, sequences) ){\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tsequences.push(clone);\n\t\t\t}\n\n\t\t\tcontinue;\n\t\t}\n\n\n\t\t// if we haven't done anything unique\n\t\t// clean up the patterns\n\t\t// helps keep patterns smaller\n\t\t// if str = 'r\u20A8\u33A7aarss', pattern will be 446 instead of 655\n\t\tif( i > 0 && added_types.size == 1 && !added_types.has('3') ){\n\t\t\tpattern += sequencesToPattern(sequences,false);\n\t\t\tlet new_seq = new Sequence();\n\t\t\tconst old_seq = sequences[0];\n\t\t\tif( old_seq ){\n\t\t\t\tnew_seq.add(old_seq.last());\n\t\t\t}\n\t\t\tsequences = [new_seq];\n\t\t}\n\n\t}\n\n\tpattern += sequencesToPattern(sequences,true);\n\n\treturn pattern;\n}\n\n\nexport { escape_regex };\n", "\nimport { asciifold } from '@orchidjs/unicode-variants';\nimport * as T from './types.ts';\n\n\n/**\n * A property getter resolving dot-notation\n * @param  {Object}  obj     The root object to fetch property on\n * @param  {String}  name    The optionally dotted property name to fetch\n * @return {Object}          The resolved property value\n */\nexport const getAttr = (obj:{[key:string]:any}, name:string ) => {\n    if (!obj ) return;\n    return obj[name];\n};\n\n/**\n * A property getter resolving dot-notation\n * @param  {Object}  obj     The root object to fetch property on\n * @param  {String}  name    The optionally dotted property name to fetch\n * @return {Object}          The resolved property value\n */\nexport const getAttrNesting = (obj:{[key:string]:any}, name:string ) => {\n    if (!obj ) return;\n    var part, names = name.split(\".\");\n\twhile( (part = names.shift()) && (obj = obj[part]));\n    return obj;\n};\n\n/**\n * Calculates how close of a match the\n * given value is against a search token.\n *\n */\nexport const scoreValue = (value:string, token:T.Token, weight:number ):number => {\n\tvar score, pos;\n\n\tif (!value) return 0;\n\n\tvalue = value + '';\n\tif( token.regex == null ) return 0;\n\tpos = value.search(token.regex);\n\tif (pos === -1) return 0;\n\n\tscore = token.string.length / value.length;\n\tif (pos === 0) score += 0.5;\n\n\treturn score * weight;\n};\n\n\n/**\n * Cast object property to an array if it exists and has a value\n *\n */\nexport const propToArray = (obj:{[key:string]:any}, key:string) => {\n\tvar value = obj[key];\n\n\tif( typeof value == 'function' ) return value;\n\n\tif( value && !Array.isArray(value) ){\n\t\tobj[key] = [value];\n\t}\n}\n\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n\n\n\nexport const cmp = (a:number|string, b:number|string) => {\n\tif (typeof a === 'number' && typeof b === 'number') {\n\t\treturn a > b ? 1 : (a < b ? -1 : 0);\n\t}\n\ta = asciifold(a + '').toLowerCase();\n\tb = asciifold(b + '').toLowerCase();\n\tif (a > b) return 1;\n\tif (b > a) return -1;\n\treturn 0;\n};\n", "/**\n * sifter.js\n * Copyright (c) 2013\u20132020 Brian Reavis & contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n * @author Brian Reavis <brian@thirdroute.com>\n */\n\nimport { scoreValue, getAttr, getAttrNesting, propToArray, iterate, cmp } from './utils.ts';\nimport { getPattern, escape_regex } from '@orchidjs/unicode-variants';\nimport * as T from './types.ts';\n\nclass Sifter{\n\n\tpublic items: any; // []|{};\n\tpublic settings: T.Settings;\n\n\t/**\n\t * Textually searches arrays and hashes of objects\n\t * by property (or multiple properties). Designed\n\t * specifically for autocomplete.\n\t *\n\t */\n\tconstructor(items:any, settings:T.Settings) {\n\t\tthis.items = items;\n\t\tthis.settings = settings || {diacritics: true};\n\t};\n\n\t/**\n\t * Splits a search string into an array of individual\n\t * regexps to be used to match results.\n\t *\n\t */\n\ttokenize(query:string, respect_word_boundaries?:boolean, weights?:T.Weights ):T.Token[] {\n\t\tif (!query || !query.length) return [];\n\n\t\tconst tokens:T.Token[]\t= [];\n\t\tconst words\t\t\t\t= query.split(/\\s+/);\n\t\tvar field_regex:RegExp;\n\n\t\tif( weights ){\n\t\t\tfield_regex = new RegExp( '^('+ Object.keys(weights).map(escape_regex).join('|')+')\\:(.*)$');\n\t\t}\n\n\t\twords.forEach((word:string) => {\n\t\t\tlet field_match;\n\t\t\tlet field:null|string\t= null;\n\t\t\tlet regex:null|string\t= null;\n\n\t\t\t// look for \"field:query\" tokens\n\t\t\tif( field_regex && (field_match = word.match(field_regex)) ){\n\t\t\t\tfield\t= field_match[1]!;\n\t\t\t\tword\t= field_match[2]!;\n\t\t\t}\n\n\t\t\tif( word.length > 0 ){\n\t\t\t\tif( this.settings.diacritics ){\n\t\t\t\t\tregex = getPattern(word) || null;\n\t\t\t\t}else{\n\t\t\t\t\tregex = escape_regex(word);\n\t\t\t\t}\n\t\t\t\tif( regex && respect_word_boundaries ) regex = \"\\\\b\"+regex;\n\t\t\t}\n\n\t\t\ttokens.push({\n\t\t\t\tstring : word,\n\t\t\t\tregex  : regex ? new RegExp(regex,'iu') : null,\n\t\t\t\tfield  : field,\n\t\t\t});\n\t\t});\n\n\t\treturn tokens;\n\t};\n\n\n\t/**\n\t * Returns a function to be used to score individual results.\n\t *\n\t * Good matches will have a higher score than poor matches.\n\t * If an item is not a match, 0 will be returned by the function.\n\t *\n\t * @returns {T.ScoreFn}\n\t */\n\tgetScoreFunction(query:string, options:T.UserOptions ){\n\t\tvar search = this.prepareSearch(query, options);\n\t\treturn this._getScoreFunction(search);\n\t}\n\n\t/**\n\t * @returns {T.ScoreFn}\n\t *\n\t */\n\t_getScoreFunction(search:T.PrepareObj ){\n\t\tconst tokens\t\t= search.tokens,\n\t\ttoken_count\t\t\t= tokens.length;\n\n\t\tif (!token_count) {\n\t\t\treturn function() { return 0; };\n\t\t}\n\n\t\tconst fields\t= search.options.fields,\n\t\tweights\t\t\t= search.weights,\n\t\tfield_count\t\t= fields.length,\n\t\tgetAttrFn\t\t= search.getAttrFn;\n\n\t\tif (!field_count) {\n\t\t\treturn function() { return 1; };\n\t\t}\n\n\n\t\t/**\n\t\t * Calculates the score of an object\n\t\t * against the search query.\n\t\t *\n\t\t */\n\t\tconst scoreObject = (function() {\n\n\n\t\t\tif (field_count === 1) {\n\t\t\t\treturn function(token:T.Token, data:{}) {\n\t\t\t\t\tconst field = fields[0]!.field;\n\t\t\t\t\treturn scoreValue(getAttrFn(data, field), token, weights[field]||1);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn function(token:T.Token, data:{}) {\n\t\t\t\tvar sum = 0;\n\n\t\t\t\t// is the token specific to a field?\n\t\t\t\tif( token.field ){\n\n\t\t\t\t\tconst value = getAttrFn(data, token.field);\n\n\t\t\t\t\tif( !token.regex && value ){\n\t\t\t\t\t\tsum += (1/field_count);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsum += scoreValue(value, token, 1);\n\t\t\t\t\t}\n\n\n\n\t\t\t\t}else{\n\t\t\t\t\titerate(weights, (weight:number, field:string) => {\n\t\t\t\t\t\tsum += scoreValue(getAttrFn(data, field), token, weight);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn sum / field_count;\n\t\t\t};\n\t\t})();\n\n\t\tif (token_count === 1) {\n\t\t\treturn function(data:{}) {\n\t\t\t\treturn scoreObject(tokens[0]!, data);\n\t\t\t};\n\t\t}\n\n\t\tif (search.options.conjunction === 'and') {\n\t\t\treturn function(data:{}) {\n\t\t\t\tvar score, sum = 0;\n\t\t\t\tfor( let token of tokens){\n\t\t\t\t\tscore = scoreObject(token, data);\n\t\t\t\t\tif (score <= 0) return 0;\n\t\t\t\t\tsum += score;\n\t\t\t\t}\n\t\t\t\treturn sum / token_count;\n\t\t\t};\n\t\t} else {\n\t\t\treturn function(data:{}) {\n\t\t\t\tvar sum = 0;\n\t\t\t\titerate(tokens,(token:T.Token)=>{\n\t\t\t\t\tsum += scoreObject(token, data);\n\t\t\t\t});\n\t\t\t\treturn sum / token_count;\n\t\t\t};\n\t\t}\n\t};\n\n\t/**\n\t * Returns a function that can be used to compare two\n\t * results, for sorting purposes. If no sorting should\n\t * be performed, `null` will be returned.\n\t *\n\t * @return function(a,b)\n\t */\n\tgetSortFunction(query:string, options:T.UserOptions) {\n\t\tvar search  = this.prepareSearch(query, options);\n\t\treturn this._getSortFunction(search);\n\t}\n\n\t_getSortFunction(search:T.PrepareObj){\n\t\tvar implicit_score,\n\t\tsort_flds:T.Sort[]\t= [];\n\n\t\tconst self\t= this,\n\t\toptions\t\t= search.options,\n\t\tsort\t\t= (!search.query && options.sort_empty) ? options.sort_empty : options.sort;\n\n\n\t\tif( typeof sort == 'function' ){\n\t\t\treturn sort.bind(this);\n\t\t}\n\n\t\t/**\n\t\t * Fetches the specified sort field value\n\t\t * from a search result item.\n\t\t *\n\t\t */\n\t\tconst get_field = function(name:string, result:T.ResultItem):string|number {\n\t\t\tif (name === '$score') return result.score;\n\t\t\treturn search.getAttrFn(self.items[result.id], name);\n\t\t};\n\n\t\t// parse options\n\t\tif (sort) {\n\t\t\tfor( let s of sort ){\n\t\t\t\tif (search.query || s.field !== '$score') {\n\t\t\t\t\tsort_flds.push(s);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// the \"$score\" field is implied to be the primary\n\t\t// sort field, unless it's manually specified\n\t\tif (search.query) {\n\t\t\timplicit_score = true;\n\t\t\tfor( let fld of sort_flds ){\n\t\t\t\tif( fld.field === '$score' ){\n\t\t\t\t\timplicit_score = false;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (implicit_score) {\n\t\t\t\tsort_flds.unshift({field: '$score', direction: 'desc'});\n\t\t\t}\n\n\t\t// without a search.query, all items will have the same score\n\t\t} else {\n\t\t\tsort_flds = sort_flds.filter((fld) => fld.field !== '$score' );\n\t\t}\n\n\n\t\t// build function\n\t\tconst sort_flds_count = sort_flds.length;\n\t\tif (!sort_flds_count) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn function(a:T.ResultItem, b:T.ResultItem) {\n\t\t\tvar result, field;\n\t\t\tfor( let sort_fld of sort_flds ){\n\t\t\t\tfield = sort_fld.field;\n\n\t\t\t\tlet\tmultiplier = sort_fld.direction === 'desc' ? -1 : 1;\n\n\t\t\t\tresult = multiplier * cmp(\n\t\t\t\t\tget_field(field, a),\n\t\t\t\t\tget_field(field, b)\n\t\t\t\t);\n\t\t\t\tif (result) return result;\n\t\t\t}\n\t\t\treturn 0;\n\t\t};\n\n\t};\n\n\t/**\n\t * Parses a search query and returns an object\n\t * with tokens and fields ready to be populated\n\t * with results.\n\t *\n\t */\n\tprepareSearch(query:string, optsUser:T.UserOptions):T.PrepareObj {\n\t\tconst weights:T.Weights = {};\n\t\tvar options\t\t= Object.assign({},optsUser) as T.Options;\n\n\t\tpropToArray(options,'sort');\n\t\tpropToArray(options,'sort_empty');\n\n\t\t// convert fields to new format\n\t\tif( options.fields ){\n\t\t\tpropToArray(options,'fields');\n\t\t\tconst fields:T.Field[] = [];\n\t\t\toptions.fields.forEach((field:string|T.Field) => {\n\t\t\t\tif( typeof field == 'string' ){\n\t\t\t\t\tfield = {field:field,weight:1};\n\t\t\t\t}\n\t\t\t\tfields.push(field);\n\t\t\t\tweights[field.field] = ('weight' in field) ? field.weight : 1;\n\t\t\t});\n\t\t\toptions.fields = fields;\n\t\t}\n\n\n\t\treturn {\n\t\t\toptions\t\t: options as T.Options,\n\t\t\tquery\t\t: query.toLowerCase().trim(),\n\t\t\ttokens\t\t: this.tokenize(query, options.respect_word_boundaries, weights),\n\t\t\ttotal\t\t: 0,\n\t\t\titems\t\t: [],\n\t\t\tweights\t\t: weights,\n\t\t\tgetAttrFn\t: (options.nesting) ? getAttrNesting : getAttr,\n\t\t};\n\t};\n\n\t/**\n\t * Searches through all items and returns a sorted array of matches.\n\t *\n\t */\n\tsearch(query:string, options:T.UserOptions) : T.PrepareObj {\n\t\tvar self = this, score, search: T.PrepareObj;\n\n\t\tsearch  = this.prepareSearch(query, options);\n\t\toptions = search.options;\n\t\tquery   = search.query;\n\n\t\t// generate result scoring function\n\t\tconst fn_score:T.ScoreFn = options.score || self._getScoreFunction(search);\n\n\t\t// perform search and sort\n\t\tif (query.length) {\n\t\t\titerate(self.items, (item:T.ResultItem, id:string|number) => {\n\t\t\t\tscore = fn_score(item);\n\t\t\t\tif (options.filter === false || score > 0) {\n\t\t\t\t\tsearch.items.push({'score': score, 'id': id});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\titerate(self.items, (_:T.ResultItem, id:string|number) => {\n\t\t\t\tsearch.items.push({'score': 1, 'id': id});\n\t\t\t});\n\t\t}\n\n\t\tconst fn_sort = self._getSortFunction(search);\n\t\tif (fn_sort) search.items.sort(fn_sort);\n\n\t\t// apply limits\n\t\tsearch.total = search.items.length;\n\t\tif (typeof options.limit === 'number') {\n\t\t\tsearch.items = search.items.slice(0, options.limit);\n\t\t}\n\n\t\treturn search;\n\t};\n}\n\nexport { Sifter, scoreValue, getAttr, getAttrNesting, propToArray, iterate, cmp, getPattern }\nexport * from './types.ts';\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * highlight v3 | MIT license | Johann Burkard <jb@eaio.com>\n * Highlights arbitrary terms in a node.\n *\n * - Modified by Marshal <beatgates@gmail.com> 2011-6-24 (added regex)\n * - Modified by Brian Reavis <brian@thirdroute.com> 2012-8-27 (cleanup)\n */\n\nimport {replaceNode} from '../vanilla.ts';\n\n\nexport const highlight = (element:HTMLElement, regex:string|RegExp) => {\n\n\tif( regex === null ) return;\n\n\t// convet string to regex\n\tif( typeof regex === 'string' ){\n\n\t\tif( !regex.length ) return;\n\t\tregex = new RegExp(regex, 'i');\n\t}\n\n\n\t// Wrap matching part of text node with highlighting <span>, e.g.\n\t// Soccer  ->  <span class=\"highlight\">Soc</span>cer  for regex = /soc/i\n\tconst highlightText = ( node:Text ):number => {\n\n\t\tvar match = node.data.match(regex);\n\t\tif( match && node.data.length > 0 ){\n\t\t\tvar spannode\t\t= document.createElement('span');\n\t\t\tspannode.className\t= 'highlight';\n\t\t\tvar middlebit\t\t= node.splitText(match.index as number);\n\n\t\t\tmiddlebit.splitText(match[0]!.length);\n\t\t\tvar middleclone\t\t= middlebit.cloneNode(true);\n\n\t\t\tspannode.appendChild(middleclone);\n\t\t\treplaceNode(middlebit, spannode);\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn 0;\n\t};\n\n\t// Recurse element node, looking for child text nodes to highlight, unless element\n\t// is childless, <script>, <style>, or already highlighted: <span class=\"hightlight\">\n\tconst highlightChildren = ( node:Element ):void => {\n\t\tif( node.nodeType === 1 && node.childNodes && !/(script|style)/i.test(node.tagName) && ( node.className !== 'highlight' || node.tagName !== 'SPAN' ) ){\n\t\t\tArray.from(node.childNodes).forEach(element => {\n\t\t\t\thighlightRecursive(element);\n\t\t\t});\n\t\t}\n\t};\n\n\n\tconst highlightRecursive = ( node:Node|Element ):number => {\n\n\t\tif( node.nodeType === 3 ){\n\t\t\treturn highlightText(node as Text);\n\t\t}\n\n\t\thighlightChildren(node as Element);\n\n\t\treturn 0;\n\t};\n\n\thighlightRecursive( element );\n};\n\n/**\n * removeHighlight fn copied from highlight v5 and\n * edited to remove with(), pass js strict mode, and use without jquery\n */\nexport const removeHighlight = (el:HTMLElement) => {\n\tvar elements = el.querySelectorAll(\"span.highlight\");\n\tArray.prototype.forEach.call(elements, function(el:HTMLElement){\n\t\tvar parent = el.parentNode as Node;\n\t\tparent.replaceChild(el.firstChild as Node, el);\n\t\tparent.normalize();\n\t});\n};\n", "export const KEY_A\t\t\t\t= 65;\nexport const KEY_RETURN\t\t\t= 13;\nexport const KEY_ESC\t\t\t= 27;\nexport const KEY_LEFT\t\t\t= 37;\nexport const KEY_UP\t\t\t\t= 38;\nexport const KEY_RIGHT\t\t\t= 39;\nexport const KEY_DOWN\t\t\t= 40;\nexport const KEY_BACKSPACE\t\t= 8;\nexport const KEY_DELETE\t\t\t= 46;\nexport const KEY_TAB\t\t\t= 9;\n\nexport const IS_MAC      \t\t= typeof navigator === 'undefined' ? false : /Mac/.test(navigator.userAgent);\nexport const KEY_SHORTCUT\t\t= IS_MAC ? 'metaKey' : 'ctrlKey'; // ctrl key or apple key for ma\n", "\nexport default {\n\toptions: [],\n\toptgroups: [],\n\n\tplugins: [],\n\tdelimiter: ',',\n\tsplitOn: null, // regexp or string for splitting up values from a paste command\n\tpersist: true,\n\tdiacritics: true,\n\tcreate: null,\n\tcreateOnBlur: false,\n\tcreateFilter: null,\n\thighlight: true,\n\topenOnFocus: true,\n\tshouldOpen: null,\n\tmaxOptions: 50,\n\tmaxItems: null,\n\thideSelected: null,\n\tduplicates: false,\n\taddPrecedence: false,\n\tselectOnTab: false,\n\tpreload: null,\n\tallowEmptyOption: false,\n\t//closeAfterSelect: false,\n\trefreshThrottle: 300,\n\n\n\tloadThrottle: 300,\n\tloadingClass: 'loading',\n\n\tdataAttr: null, //'data-data',\n\toptgroupField: 'optgroup',\n\tvalueField: 'value',\n\tlabelField: 'text',\n\tdisabledField: 'disabled',\n\toptgroupLabelField: 'label',\n\toptgroupValueField: 'value',\n\tlockOptgroupOrder: false,\n\n\tsortField: '$order',\n\tsearchField: ['text'],\n\tsearchConjunction: 'and',\n\n\tmode: null,\n\twrapperClass: 'ts-wrapper',\n\tcontrolClass: 'ts-control',\n\tdropdownClass: 'ts-dropdown',\n\tdropdownContentClass: 'ts-dropdown-content',\n\titemClass: 'item',\n\toptionClass: 'option',\n\n\tdropdownParent: null,\n\tcontrolInput: '<input type=\"text\" autocomplete=\"off\" size=\"1\" />',\n\n\tcopyClassesToDropdown: false,\n\n\tplaceholder: null,\n\thidePlaceholder: null,\n\n\tshouldLoad: function(query:string):boolean{\n\t\treturn query.length > 0;\n\t},\n\n\t/*\n\tload                 : null, // function(query, callback) { ... }\n\tscore                : null, // function(search) { ... }\n\tonInitialize         : null, // function() { ... }\n\tonChange             : null, // function(value) { ... }\n\tonItemAdd            : null, // function(value, $item) { ... }\n\tonItemRemove         : null, // function(value) { ... }\n\tonClear              : null, // function() { ... }\n\tonOptionAdd          : null, // function(value, data) { ... }\n\tonOptionRemove       : null, // function(value) { ... }\n\tonOptionClear        : null, // function() { ... }\n\tonOptionGroupAdd     : null, // function(id, data) { ... }\n\tonOptionGroupRemove  : null, // function(id) { ... }\n\tonOptionGroupClear   : null, // function() { ... }\n\tonDropdownOpen       : null, // function(dropdown) { ... }\n\tonDropdownClose      : null, // function(dropdown) { ... }\n\tonType               : null, // function(str) { ... }\n\tonDelete             : null, // function(values) { ... }\n\t*/\n\n\trender: {\n\t\t/*\n\t\titem: null,\n\t\toptgroup: null,\n\t\toptgroup_header: null,\n\t\toption: null,\n\t\toption_create: null\n\t\t*/\n\t}\n};\n", "import defaults from './defaults.ts';\nimport { hash_key, iterate } from './utils.ts';\nimport { TomOption, TomSettings, RecursivePartial } from './types/index.ts';\nimport { TomInput } from './types/index.ts';\n\n\nexport default function getSettings( input:TomInput, settings_user:RecursivePartial<TomSettings>):TomSettings{\n\tvar settings:TomSettings\t= Object.assign({}, defaults, settings_user);\n\n\tvar attr_data\t\t\t\t= settings.dataAttr;\n\tvar field_label\t\t\t\t= settings.labelField;\n\tvar field_value\t\t\t\t= settings.valueField;\n\tvar field_disabled\t\t\t= settings.disabledField;\n\tvar field_optgroup\t\t\t= settings.optgroupField;\n\tvar field_optgroup_label\t= settings.optgroupLabelField;\n\tvar field_optgroup_value\t= settings.optgroupValueField;\n\n\tvar tag_name\t\t\t\t= input.tagName.toLowerCase();\n\tvar placeholder\t\t\t\t= input.getAttribute('placeholder') || input.getAttribute('data-placeholder');\n\n\tif (!placeholder && !settings.allowEmptyOption) {\n\t\tlet option\t\t= input.querySelector('option[value=\"\"]');\n\t\tif( option ){\n\t\t\tplaceholder = option.textContent;\n\t\t}\n\n\t}\n\n\tvar settings_element:{\n\t\tplaceholder\t: null|string,\n\t\toptions\t\t: TomOption[],\n\t\toptgroups\t: TomOption[],\n\t\titems\t\t: string[],\n\t\tmaxItems\t: null|number,\n\t} = {\n\t\tplaceholder\t: placeholder,\n\t\toptions\t\t: [],\n\t\toptgroups\t: [],\n\t\titems\t\t: [],\n\t\tmaxItems\t: null,\n\t};\n\n\n\t/**\n\t * Initialize from a <select> element.\n\t *\n\t */\n\tvar init_select = () => {\n\t\tvar tagName;\n\t\tvar options = settings_element.options;\n\t\tvar optionsMap:{[key:string]:any} = {};\n\t\tvar group_count = 1;\n\t\tlet $order = 0;\n\n\t\tvar readData = (el:HTMLElement):TomOption => {\n\n\t\t\tvar data\t= Object.assign({},el.dataset); // get plain object from DOMStringMap\n\t\t\tvar json\t= attr_data && data[attr_data];\n\n\t\t\tif( typeof json === 'string' && json.length ){\n\t\t\t\tdata = Object.assign(data,JSON.parse(json));\n\t\t\t}\n\n\t\t\treturn data;\n\t\t};\n\n\t\tvar addOption = (option:HTMLOptionElement, group?:string) => {\n\n\t\t\tvar value = hash_key(option.value);\n\t\t\tif ( value == null ) return;\n\t\t\tif ( !value && !settings.allowEmptyOption) return;\n\n\t\t\t// if the option already exists, it's probably been\n\t\t\t// duplicated in another optgroup. in this case, push\n\t\t\t// the current group to the \"optgroup\" property on the\n\t\t\t// existing option so that it's rendered in both places.\n\t\t\tif (optionsMap.hasOwnProperty(value)) {\n\t\t\t\tif (group) {\n\t\t\t\t\tvar arr = optionsMap[value][field_optgroup];\n\t\t\t\t\tif (!arr) {\n\t\t\t\t\t\toptionsMap[value][field_optgroup] = group;\n\t\t\t\t\t} else if (!Array.isArray(arr)) {\n\t\t\t\t\t\toptionsMap[value][field_optgroup] = [arr, group];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tarr.push(group);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}else{\n\n\t\t\t\tvar option_data             = readData(option);\n\t\t\t\toption_data[field_label]    = option_data[field_label] || option.textContent;\n\t\t\t\toption_data[field_value]    = option_data[field_value] || value;\n\t\t\t\toption_data[field_disabled] = option_data[field_disabled] || option.disabled;\n\t\t\t\toption_data[field_optgroup] = option_data[field_optgroup] || group;\n\t\t\t\toption_data.$option\t\t\t= option;\n\t\t\t\toption_data.$order\t\t\t= option_data.$order || ++$order;\n\n\t\t\t\toptionsMap[value] = option_data;\n\t\t\t\toptions.push(option_data);\n\t\t\t}\n\n\t\t\tif( option.selected ){\n\t\t\t\tsettings_element.items.push(value);\n\t\t\t}\n\t\t};\n\n\t\tvar addGroup = ( optgroup:HTMLOptGroupElement ) => {\n\t\t\tvar id:string, optgroup_data\n\n\t\t\toptgroup_data\t\t\t\t\t\t\t= readData(optgroup);\n\t\t\toptgroup_data[field_optgroup_label]\t\t= optgroup_data[field_optgroup_label] || optgroup.getAttribute('label') || '';\n\t\t\toptgroup_data[field_optgroup_value]\t\t= optgroup_data[field_optgroup_value] || group_count++;\n\t\t\toptgroup_data[field_disabled]\t\t\t= optgroup_data[field_disabled] || optgroup.disabled;\n\t\t\toptgroup_data.$order\t\t\t\t\t= optgroup_data.$order || ++$order;\n\n\t\t\tsettings_element.optgroups.push(optgroup_data);\n\n\t\t\tid = optgroup_data[field_optgroup_value];\n\n\t\t\titerate(optgroup.children, (option)=>{\n\t\t\t\taddOption(option as HTMLOptionElement, id);\n\t\t\t});\n\n\t\t};\n\n\t\tsettings_element.maxItems = input.hasAttribute('multiple') ? null : 1;\n\n\t\titerate(input.children,(child)=>{\n\t\t\ttagName = child.tagName.toLowerCase();\n\t\t\tif (tagName === 'optgroup') {\n\t\t\t\taddGroup(child as HTMLOptGroupElement);\n\t\t\t} else if (tagName === 'option') {\n\t\t\t\taddOption(child as HTMLOptionElement);\n\t\t\t}\n\t\t});\n\n\t};\n\n\n\t/**\n\t * Initialize from a <input type=\"text\"> element.\n\t *\n\t */\n\tvar init_textbox = () => {\n\t\tconst data_raw = input.getAttribute(attr_data);\n\n\t\tif (!data_raw) {\n\t\t\tvar value = input.value.trim() || '';\n\t\t\tif (!settings.allowEmptyOption && !value.length) return;\n\t\t\tconst values = value.split(settings.delimiter);\n\n\t\t\titerate( values, (value) => {\n\t\t\t\tconst option:TomOption = {};\n\t\t\t\toption[field_label] = value;\n\t\t\t\toption[field_value] = value;\n\t\t\t\tsettings_element.options.push(option);\n\t\t\t});\n\t\t\tsettings_element.items = values;\n\t\t} else {\n\t\t\tsettings_element.options = JSON.parse(data_raw);\n\t\t\titerate( settings_element.options, (opt) => {\n\t\t\t\tsettings_element.items.push(opt[field_value]);\n\t\t\t});\n\t\t}\n\t};\n\n\n\tif (tag_name === 'select') {\n\t\tinit_select();\n\t} else {\n\t\tinit_textbox();\n\t}\n\n\treturn Object.assign( {}, defaults, settings_element, settings_user) as TomSettings;\n};\n", "\nimport MicroEvent from './contrib/microevent.ts';\nimport MicroPlugin from './contrib/microplugin.ts';\nimport { Sifter } from '@orchidjs/sifter';\nimport { escape_regex } from '@orchidjs/unicode-variants';\nimport { TomInput, TomArgObject, TomOption, TomOptions, TomCreateFilter, TomCreateCallback, TomItem, TomSettings, TomTemplateNames, TomClearFilter, RecursivePartial } from './types/index.ts';\nimport {highlight, removeHighlight} from './contrib/highlight.ts';\nimport * as constants from './constants.ts';\nimport getSettings from './getSettings.ts';\nimport {\n\thash_key,\n\tget_hash,\n\tescape_html,\n\tdebounce_events,\n\tgetSelection,\n\tpreventDefault,\n\taddEvent,\n\tloadDebounce,\n\ttimeout,\n\tisKeyDown,\n\tgetId,\n\taddSlashes,\n\tappend,\n\titerate\n} from './utils.ts';\n\nimport {\n\tgetDom,\n\tisHtmlString,\n\tescapeQuery,\n\ttriggerEvent,\n\tapplyCSS,\n\taddClasses,\n\tremoveClasses,\n\tparentMatch,\n\tgetTail,\n\tisEmptyObject,\n\tnodeIndex,\n\tsetAttr,\n\treplaceNode\n} from './vanilla.ts';\n\nvar instance_i = 0;\n\nexport default class TomSelect extends MicroPlugin(MicroEvent){\n\n\tpublic control_input\t\t\t: HTMLInputElement;\n\tpublic wrapper\t\t\t\t\t: HTMLElement;\n\tpublic dropdown\t\t\t\t\t: HTMLElement;\n\tpublic control\t\t\t\t\t: HTMLElement;\n\tpublic dropdown_content\t\t\t: HTMLElement;\n\tpublic focus_node\t\t\t\t: HTMLElement;\n\n\tpublic order\t\t\t\t\t: number = 0;\n\tpublic settings\t\t\t\t\t: TomSettings;\n\tpublic input\t\t\t\t\t: TomInput;\n\tpublic tabIndex\t\t\t\t\t: number;\n\tpublic is_select_tag\t\t\t: boolean;\n\tpublic rtl\t\t\t\t\t\t: boolean;\n\tprivate inputId\t\t\t\t\t: string;\n\n\tprivate _destroy\t\t\t\t!: () => void;\n\tpublic sifter\t\t\t\t\t: Sifter;\n\n\n\tpublic isOpen\t\t\t\t\t: boolean = false;\n\tpublic isDisabled\t\t\t\t: boolean = false;\n\tpublic isReadOnly\t\t\t\t: boolean = false;\n\tpublic isRequired\t\t\t\t: boolean;\n\tpublic isInvalid\t\t\t\t: boolean = false; // @deprecated 1.8\n\tpublic isValid\t\t\t\t\t: boolean = true;\n\tpublic isLocked\t\t\t\t\t: boolean = false;\n\tpublic isFocused\t\t\t\t: boolean = false;\n\tpublic isInputHidden\t\t\t: boolean = false;\n\tpublic isSetup\t\t\t\t\t: boolean = false;\n\tpublic ignoreFocus\t\t\t\t: boolean = false;\n\tpublic ignoreHover\t\t\t\t: boolean = false;\n\tpublic hasOptions\t\t\t\t: boolean = false;\n\tpublic currentResults\t\t\t?: ReturnType<Sifter['search']>;\n\tpublic lastValue\t\t\t\t: string = '';\n\tpublic caretPos\t\t\t\t\t: number = 0;\n\tpublic loading\t\t\t\t\t: number = 0;\n\tpublic loadedSearches\t\t\t: { [key: string]: boolean } = {};\n\n\tpublic activeOption\t\t\t\t: null|HTMLElement = null;\n\tpublic activeItems\t\t\t\t: TomItem[] = [];\n\n\tpublic optgroups\t\t\t\t: TomOptions = {};\n\tpublic options\t\t\t\t\t: TomOptions = {};\n\tpublic userOptions\t\t\t\t: {[key:string]:boolean} = {};\n\tpublic items\t\t\t\t\t: string[] = [];\n\n\tprivate refreshTimeout\t\t\t: null|number = null;\n\n\n\tconstructor( input_arg: string|TomInput, user_settings:RecursivePartial<TomSettings> ){\n\t\tsuper();\n\n\t\tinstance_i++;\n\n\t\tvar dir;\n\t\tvar input\t\t\t\t= getDom( input_arg ) as TomInput;\n\n\t\tif( input.tomselect ){\n\t\t\tthrow new Error('Tom Select already initialized on this element');\n\t\t}\n\n\n\t\tinput.tomselect\t\t\t= this;\n\n\n\t\t// detect rtl environment\n\t\tvar computedStyle\t\t= window.getComputedStyle && window.getComputedStyle(input, null);\n\t\tdir\t\t\t\t\t\t= computedStyle.getPropertyValue('direction');\n\n\t\t// setup default state\n\t\tconst settings\t\t\t= getSettings( input, user_settings );\n\t\tthis.settings\t\t\t= settings;\n\t\tthis.input\t\t\t\t= input;\n\t\tthis.tabIndex\t\t\t= input.tabIndex || 0;\n\t\tthis.is_select_tag\t\t= input.tagName.toLowerCase() === 'select';\n\t\tthis.rtl\t\t\t\t= /rtl/i.test(dir);\n\t\tthis.inputId\t\t\t= getId(input, 'tomselect-'+instance_i);\n\t\tthis.isRequired\t\t\t= input.required;\n\n\n\t\t// search system\n\t\tthis.sifter = new Sifter(this.options, {diacritics: settings.diacritics});\n\n\t\t// option-dependent defaults\n\t\tsettings.mode = settings.mode || (settings.maxItems === 1 ? 'single' : 'multi');\n\t\tif (typeof settings.hideSelected !== 'boolean') {\n\t\t\tsettings.hideSelected = settings.mode === 'multi';\n\t\t}\n\n\t\tif( typeof settings.hidePlaceholder !== 'boolean' ){\n\t\t\tsettings.hidePlaceholder = settings.mode !== 'multi';\n\t\t}\n\n\t\t// set up createFilter callback\n\t\tvar filter = settings.createFilter;\n\t\tif( typeof filter !== 'function' ){\n\n\t\t\tif( typeof filter === 'string' ){\n\t\t\t\tfilter = new RegExp(filter);\n\t\t\t}\n\n\t\t\tif( filter instanceof RegExp ){\n\t\t\t\tsettings.createFilter = (input: string) => (filter as RegExp).test(input);\n\t\t\t}else{\n\t\t\t\tsettings.createFilter = (value: string) => {\n\t\t\t\t\treturn this.settings.duplicates || !this.options[value];\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\n\t\tthis.initializePlugins(settings.plugins);\n\t\tthis.setupCallbacks();\n\t\tthis.setupTemplates();\n\n\n\t\t// Create all elements\n\t\tconst wrapper\t\t\t= getDom('<div>');\n\t\tconst control\t\t\t= getDom('<div>');\n\t\tconst dropdown\t\t\t= this._render('dropdown');\n\t\tconst dropdown_content\t= getDom(`<div role=\"listbox\" tabindex=\"-1\">`);\n\n\t\tconst classes\t\t\t= this.input.getAttribute('class') || '';\n\t\tconst inputMode\t\t\t= settings.mode;\n\n\t\tvar control_input: HTMLInputElement;\n\n\n\t\taddClasses( wrapper, settings.wrapperClass, classes, inputMode);\n\n\n\t\taddClasses(control,settings.controlClass);\n\t\tappend( wrapper, control );\n\n\n\t\taddClasses(dropdown, settings.dropdownClass, inputMode);\n\t\tif( settings.copyClassesToDropdown ){\n\t\t\taddClasses( dropdown, classes);\n\t\t}\n\n\n\t\taddClasses(dropdown_content, settings.dropdownContentClass);\n\t\tappend( dropdown, dropdown_content );\n\n\t\tgetDom( settings.dropdownParent || wrapper ).appendChild( dropdown );\n\n\n\t\t// default controlInput\n\t\tif( isHtmlString(settings.controlInput) ){\n\t\t\tcontrol_input\t\t= getDom(settings.controlInput ) as HTMLInputElement;\n\n\t\t\t// set attributes\n\t\t\tvar attrs = ['autocorrect','autocapitalize','autocomplete','spellcheck'];\n\t\t\titerate(attrs,(attr:string) => {\n\t\t\t\tif( input.getAttribute(attr) ){\n\t\t\t\t\tsetAttr(control_input,{[attr]:input.getAttribute(attr)});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcontrol_input.tabIndex = -1;\n\t\t\tcontrol.appendChild( control_input );\n\t\t\tthis.focus_node\t\t= control_input;\n\n\t\t// dom element\n\t\t}else if( settings.controlInput ){\n\t\t\tcontrol_input\t\t= getDom( settings.controlInput ) as HTMLInputElement;\n\t\t\tthis.focus_node\t\t= control_input;\n\n\t\t}else{\n\t\t\tcontrol_input\t\t= getDom('<input/>') as HTMLInputElement;\n\t\t\tthis.focus_node\t\t= control;\n\t\t}\n\n\t\tthis.wrapper\t\t\t= wrapper;\n\t\tthis.dropdown\t\t\t= dropdown;\n\t\tthis.dropdown_content\t= dropdown_content;\n\t\tthis.control \t\t\t= control;\n\t\tthis.control_input\t\t= control_input;\n\n\t\tthis.setup();\n\t}\n\n\t/**\n\t * set up event bindings.\n\t *\n\t */\n\tsetup(){\n\n\t\tconst self = this;\n\t\tconst settings\t\t\t\t= self.settings;\n\t\tconst control_input\t\t\t= self.control_input;\n\t\tconst dropdown\t\t\t\t= self.dropdown;\n\t\tconst dropdown_content\t\t= self.dropdown_content;\n\t\tconst wrapper\t\t\t\t= self.wrapper;\n\t\tconst control\t\t\t\t= self.control;\n\t\tconst input\t\t\t\t\t= self.input;\n\t\tconst focus_node\t\t\t= self.focus_node;\n\t\tconst passive_event\t\t\t= { passive: true };\n\t\tconst listboxId\t\t\t\t= self.inputId +'-ts-dropdown';\n\n\n\t\tsetAttr(dropdown_content,{\n\t\t\tid: listboxId\n\t\t});\n\n\t\tsetAttr(focus_node,{\n\t\t\trole:'combobox',\n\t\t\t'aria-haspopup':'listbox',\n\t\t\t'aria-expanded':'false',\n\t\t\t'aria-controls':listboxId\n\t\t});\n\n\t\tconst control_id\t= getId(focus_node,self.inputId + '-ts-control');\n\t\tconst query\t\t\t= \"label[for='\"+escapeQuery(self.inputId)+\"']\";\n\t\tconst label\t\t\t= document.querySelector(query);\n\t\tconst label_click\t= self.focus.bind(self);\n\t\tif( label ){\n\t\t\taddEvent(label,'click', label_click );\n\t\t\tsetAttr(label,{for:control_id});\n\t\t\tconst label_id = getId(label,self.inputId+'-ts-label');\n\t\t\tsetAttr(focus_node,{'aria-labelledby':label_id});\n\t\t\tsetAttr(dropdown_content,{'aria-labelledby':label_id});\n\t\t}\n\n\t\twrapper.style.width = input.style.width;\n\n\t\tif (self.plugins.names.length) {\n\t\t\tconst classes_plugins = 'plugin-' + self.plugins.names.join(' plugin-');\n\t\t\taddClasses( [wrapper,dropdown], classes_plugins);\n\t\t}\n\n\t\tif ((settings.maxItems === null || settings.maxItems > 1) && self.is_select_tag ){\n\t\t\tsetAttr(input,{multiple:'multiple'});\n\t\t}\n\n\t\tif (settings.placeholder) {\n\t\t\tsetAttr(control_input,{placeholder:settings.placeholder});\n\t\t}\n\n\t\t// if splitOn was not passed in, construct it from the delimiter to allow pasting universally\n\t\tif (!settings.splitOn && settings.delimiter) {\n\t\t\tsettings.splitOn = new RegExp('\\\\s*' + escape_regex(settings.delimiter) + '+\\\\s*');\n\t\t}\n\n\t\t// debounce user defined load() if loadThrottle > 0\n\t\t// after initializePlugins() so plugins can create/modify user defined loaders\n\t\tif( settings.load && settings.loadThrottle ){\n\t\t\tsettings.load = loadDebounce(settings.load,settings.loadThrottle)\n\t\t}\n\n\t\taddEvent(dropdown,'mousemove', () => {\n\t\t\tself.ignoreHover = false;\n\t\t});\n\n\t\taddEvent(dropdown,'mouseenter', (e) => {\n\n\t\t\tvar target_match = parentMatch(e.target as HTMLElement, '[data-selectable]', dropdown);\n\t\t\tif( target_match ) self.onOptionHover( e as MouseEvent, target_match );\n\n\t\t}, {capture:true});\n\n\t\t// clicking on an option should select it\n\t\taddEvent(dropdown,'click',(evt) => {\n\t\t\tconst option = parentMatch(evt.target as HTMLElement, '[data-selectable]');\n\t\t\tif( option ){\n\t\t\t\tself.onOptionSelect( evt as MouseEvent, option );\n\t\t\t\tpreventDefault(evt,true);\n\t\t\t}\n\t\t});\n\n\t\taddEvent(control,'click', (evt) => {\n\n\t\t\tvar target_match = parentMatch( evt.target as HTMLElement, '[data-ts-item]', control);\n\t\t\tif( target_match && self.onItemSelect(evt as MouseEvent, target_match as TomItem) ){\n\t\t\t\tpreventDefault(evt,true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// retain focus (see control_input mousedown)\n\t\t\tif( control_input.value != '' ){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tself.onClick();\n\t\t\tpreventDefault(evt,true);\n\t\t});\n\n\n\t\t// keydown on focus_node for arrow_down/arrow_up\n\t\taddEvent(focus_node,'keydown',\t\t(e) => self.onKeyDown(e as KeyboardEvent) );\n\n\t\t// keypress and input/keyup\n\t\taddEvent(control_input,'keypress',\t(e) => self.onKeyPress(e as KeyboardEvent) );\n\t\taddEvent(control_input,'input',\t\t(e) => self.onInput(e as KeyboardEvent) );\n\t\taddEvent(focus_node,'blur', \t\t(e) => self.onBlur(e as FocusEvent) );\n\t\taddEvent(focus_node,'focus',\t\t(e) => self.onFocus(e as MouseEvent) );\n\t\taddEvent(control_input,'paste',\t\t(e) => self.onPaste(e as MouseEvent) );\n\n\n\t\tconst doc_mousedown = (evt:Event) => {\n\n\t\t\t// blur if target is outside of this instance\n\t\t\t// dropdown is not always inside wrapper\n\t\t\tconst target = evt.composedPath()[0];\n\t\t\tif( !wrapper.contains(target as HTMLElement) && !dropdown.contains(target as HTMLElement) ){\n\t\t\t\tif (self.isFocused) {\n\t\t\t\t\tself.blur();\n\t\t\t\t}\n\t\t\t\tself.inputState();\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\t// retain focus by preventing native handling. if the\n\t\t\t// event target is the input it should not be modified.\n\t\t\t// otherwise, text selection within the input won't work.\n\t\t\t// Fixes bug #212 which is no covered by tests\n\t\t\tif( target == control_input && self.isOpen ){\n\t\t\t\tevt.stopPropagation();\n\n\t\t\t// clicking anywhere in the control should not blur the control_input (which would close the dropdown)\n\t\t\t}else{\n\t\t\t\tpreventDefault(evt,true);\n\t\t\t}\n\n\t\t};\n\n\t\tconst win_scroll = () => {\n\t\t\tif (self.isOpen) {\n\t\t\t\tself.positionDropdown();\n\t\t\t}\n\t\t};\n\n\n\t\taddEvent(document,'mousedown', doc_mousedown);\n\t\taddEvent(window,'scroll', win_scroll, passive_event);\n\t\taddEvent(window,'resize', win_scroll, passive_event);\n\n\t\tthis._destroy = () => {\n\t\t\tdocument.removeEventListener('mousedown',doc_mousedown);\n\t\t\twindow.removeEventListener('scroll',win_scroll);\n\t\t\twindow.removeEventListener('resize',win_scroll);\n\t\t\tif( label ) label.removeEventListener('click',label_click);\n\t\t};\n\n\t\t// store original html and tab index so that they can be\n\t\t// restored when the destroy() method is called.\n\t\tthis.revertSettings = {\n\t\t\tinnerHTML : input.innerHTML,\n\t\t\ttabIndex : input.tabIndex\n\t\t};\n\n\n\t\tinput.tabIndex = -1;\n\t\tinput.insertAdjacentElement('afterend', self.wrapper);\n\n\t\tself.sync(false);\n\t\tsettings.items = [];\n\t\tdelete settings.optgroups;\n\t\tdelete settings.options;\n\n\t\taddEvent(input,'invalid', () => {\n\t\t\tif( self.isValid ){\n\t\t\t\tself.isValid = false;\n\t\t\t\tself.isInvalid = true;\n\t\t\t\tself.refreshState();\n\t\t\t}\n\t\t});\n\n\t\tself.updateOriginalInput();\n\t\tself.refreshItems();\n\t\tself.close(false);\n\t\tself.inputState();\n\t\tself.isSetup = true;\n\n\t\tif( input.disabled ){\n\t\t\tself.disable();\n\t\t}else if( input.readOnly ){\n\t\t\tself.setReadOnly(true);\n\t\t}else{\n\t\t\tself.enable(); //sets tabIndex\n\t\t}\n\n\t\tself.on('change', this.onChange);\n\n\t\taddClasses(input,'tomselected','ts-hidden-accessible');\n\t\tself.trigger('initialize');\n\n\t\t// preload options\n\t\tif (settings.preload === true) {\n\t\t\tself.preload();\n\t\t}\n\n\t}\n\n\n\t/**\n\t * Register options and optgroups\n\t *\n\t */\n\tsetupOptions(options:TomOption[] = [], optgroups:TomOption[] = []){\n\n\t\t// build options table\n\t\tthis.addOptions(options);\n\n\n\t\t// build optgroup table\n\t\titerate( optgroups, (optgroup:TomOption) => {\n\t\t\tthis.registerOptionGroup(optgroup);\n\t\t});\n\t}\n\n\t/**\n\t * Sets up default rendering functions.\n\t */\n\tsetupTemplates() {\n\t\tvar self = this;\n\t\tvar field_label = self.settings.labelField;\n\t\tvar field_optgroup = self.settings.optgroupLabelField;\n\n\t\tvar templates = {\n\t\t\t'optgroup': (data:TomOption) => {\n\t\t\t\tlet optgroup = document.createElement('div');\n\t\t\t\toptgroup.className = 'optgroup';\n\t\t\t\toptgroup.appendChild(data.options);\n\t\t\t\treturn optgroup;\n\n\t\t\t},\n\t\t\t'optgroup_header': (data:TomOption, escape:typeof escape_html) => {\n\t\t\t\treturn '<div class=\"optgroup-header\">' + escape(data[field_optgroup]) + '</div>';\n\t\t\t},\n\t\t\t'option': (data:TomOption, escape:typeof escape_html) => {\n\t\t\t\treturn '<div>' + escape(data[field_label]) + '</div>';\n\t\t\t},\n\t\t\t'item': (data:TomOption, escape:typeof escape_html) => {\n\t\t\t\treturn '<div>' + escape(data[field_label]) + '</div>';\n\t\t\t},\n\t\t\t'option_create': (data:TomOption, escape:typeof escape_html) => {\n\t\t\t\treturn '<div class=\"create\">Add <strong>' + escape(data.input) + '</strong>&hellip;</div>';\n\t\t\t},\n\t\t\t'no_results':() => {\n\t\t\t\treturn '<div class=\"no-results\">No results found</div>';\n\t\t\t},\n\t\t\t'loading':() => {\n\t\t\t\treturn '<div class=\"spinner\"></div>';\n\t\t\t},\n\t\t\t'not_loading':() => {},\n\t\t\t'dropdown':() => {\n\t\t\t\treturn '<div></div>';\n\t\t\t}\n\t\t};\n\n\n\t\tself.settings.render = Object.assign({}, templates, self.settings.render);\n\t}\n\n\t/**\n\t * Maps fired events to callbacks provided\n\t * in the settings used when creating the control.\n\t */\n\tsetupCallbacks() {\n\t\tvar key, fn;\n\t\tvar callbacks:{[key:string]:string} = {\n\t\t\t'initialize'      : 'onInitialize',\n\t\t\t'change'          : 'onChange',\n\t\t\t'item_add'        : 'onItemAdd',\n\t\t\t'item_remove'     : 'onItemRemove',\n\t\t\t'item_select'     : 'onItemSelect',\n\t\t\t'clear'           : 'onClear',\n\t\t\t'option_add'      : 'onOptionAdd',\n\t\t\t'option_remove'   : 'onOptionRemove',\n\t\t\t'option_clear'    : 'onOptionClear',\n\t\t\t'optgroup_add'    : 'onOptionGroupAdd',\n\t\t\t'optgroup_remove' : 'onOptionGroupRemove',\n\t\t\t'optgroup_clear'  : 'onOptionGroupClear',\n\t\t\t'dropdown_open'   : 'onDropdownOpen',\n\t\t\t'dropdown_close'  : 'onDropdownClose',\n\t\t\t'type'            : 'onType',\n\t\t\t'load'            : 'onLoad',\n\t\t\t'focus'           : 'onFocus',\n\t\t\t'blur'            : 'onBlur'\n\t\t};\n\n\t\tfor (key in callbacks) {\n\n\t\t\tfn = this.settings[callbacks[key] as (keyof TomSettings)];\n\t\t\tif (fn) this.on(key, fn);\n\n\t\t}\n\t}\n\n\t/**\n\t * Sync the Tom Select instance with the original input or select\n\t *\n\t */\n\tsync(get_settings:boolean=true):void{\n\t\tconst self\t\t= this;\n\t\tconst settings\t= get_settings ? getSettings( self.input, {delimiter:self.settings.delimiter} as RecursivePartial<TomSettings> ) : self.settings;\n\n\t\tself.setupOptions(settings.options,settings.optgroups);\n\n\t\tself.setValue(settings.items||[],true); // silent prevents recursion\n\n\t\tself.lastQuery = null; // so updated options will be displayed in dropdown\n\t}\n\n\t/**\n\t * Triggered when the main control element\n\t * has a click event.\n\t *\n\t */\n\tonClick():void {\n\t\tvar self = this;\n\n\t\tif( self.activeItems.length > 0 ){\n\t\t\tself.clearActiveItems();\n\t\t\tself.focus();\n\t\t\treturn;\n\t\t}\n\n\t\tif( self.isFocused && self.isOpen ){\n\t\t\tself.blur();\n\t\t} else {\n\t\t\tself.focus();\n\t\t}\n\t}\n\n\t/**\n\t * @deprecated v1.7\n\t *\n\t */\n\tonMouseDown():void {}\n\n\t/**\n\t * Triggered when the value of the control has been changed.\n\t * This should propagate the event to the original DOM\n\t * input / select element.\n\t */\n\tonChange() {\n\t\ttriggerEvent(this.input, 'input');\n\t\ttriggerEvent(this.input, 'change');\n\t}\n\n\t/**\n\t * Triggered on <input> paste.\n\t *\n\t */\n\tonPaste(e:MouseEvent|KeyboardEvent):void {\n\t\tvar self = this;\n\n\t\tif( self.isInputHidden || self.isLocked ){\n\t\t\tpreventDefault(e);\n\t\t\treturn;\n\t\t}\n\n\t\t// If a regex or string is included, this will split the pasted\n\t\t// input and create Items for each separate value\n\t\tif( !self.settings.splitOn ){\n\t\t\treturn;\n\t\t}\n\n\t\t// Wait for pasted text to be recognized in value\n\t\tsetTimeout(() => {\n\t\t\tvar pastedText = self.inputValue();\n\t\t\tif( !pastedText.match(self.settings.splitOn)){\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tvar splitInput = pastedText.trim().split(self.settings.splitOn);\n\t\t\titerate( splitInput, (piece:string) => {\n\n\t\t\t\tconst hash = hash_key(piece);\n\t\t\t\tif( hash ){\n\t\t\t\t\tif( this.options[piece] ){\n\t\t\t\t\t\tself.addItem(piece);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tself.createItem(piece);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}, 0);\n\n\t}\n\n\t/**\n\t * Triggered on <input> keypress.\n\t *\n\t */\n\tonKeyPress(e:KeyboardEvent):void {\n\t\tvar self = this;\n\t\tif(self.isLocked){\n\t\t\tpreventDefault(e);\n\t\t\treturn;\n\t\t}\n\t\tvar character = String.fromCharCode(e.keyCode || e.which);\n\t\tif (self.settings.create && self.settings.mode === 'multi' && character === self.settings.delimiter) {\n\t\t\tself.createItem();\n\t\t\tpreventDefault(e);\n\t\t\treturn;\n\t\t}\n\t}\n\n\t/**\n\t * Triggered on <input> keydown.\n\t *\n\t */\n\tonKeyDown(e:KeyboardEvent):void {\n\t\tvar self = this;\n\n\t\tself.ignoreHover = true;\n\n\t\tif (self.isLocked) {\n\t\t\tif (e.keyCode !== constants.KEY_TAB) {\n\t\t\t\tpreventDefault(e);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (e.keyCode) {\n\n\t\t\t// ctrl+A: select all\n\t\t\tcase constants.KEY_A:\n\t\t\t\tif( isKeyDown(constants.KEY_SHORTCUT,e) ){\n\t\t\t\t\tif( self.control_input.value == '' ){\n\t\t\t\t\t\tpreventDefault(e);\n\t\t\t\t\t\tself.selectAll();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t// esc: close dropdown\n\t\t\tcase constants.KEY_ESC:\n\t\t\t\tif (self.isOpen) {\n\t\t\t\t\tpreventDefault(e,true);\n\t\t\t\t\tself.close();\n\t\t\t\t}\n\t\t\t\tself.clearActiveItems();\n\t\t\t\treturn;\n\n\t\t\t// down: open dropdown or move selection down\n\t\t\tcase constants.KEY_DOWN:\n\t\t\t\tif (!self.isOpen && self.hasOptions) {\n\t\t\t\t\tself.open();\n\t\t\t\t} else if (self.activeOption) {\n\t\t\t\t\tlet next = self.getAdjacent(self.activeOption, 1);\n\t\t\t\t\tif (next) self.setActiveOption(next);\n\t\t\t\t}\n\t\t\t\tpreventDefault(e);\n\t\t\t\treturn;\n\n\t\t\t// up: move selection up\n\t\t\tcase constants.KEY_UP:\n\t\t\t\tif (self.activeOption) {\n\t\t\t\t\tlet prev = self.getAdjacent(self.activeOption, -1);\n\t\t\t\t\tif (prev) self.setActiveOption(prev);\n\t\t\t\t}\n\t\t\t\tpreventDefault(e);\n\t\t\t\treturn;\n\n\t\t\t// return: select active option\n\t\t\tcase constants.KEY_RETURN:\n\t\t\t\tif( self.canSelect(self.activeOption) ){\n\t\t\t\t\tself.onOptionSelect(e,self.activeOption!);\n\t\t\t\t\tpreventDefault(e);\n\n\t\t\t\t// if the option_create=null, the dropdown might be closed\n\t\t\t\t}else if (self.settings.create && self.createItem()) {\n\t\t\t\t\tpreventDefault(e);\n\n\t\t\t\t// don't submit form when searching for a value\n\t\t\t\t}else if( document.activeElement == self.control_input && self.isOpen ){\n\t\t\t\t\tpreventDefault(e);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\n\t\t\t// left: modifiy item selection to the left\n\t\t\tcase constants.KEY_LEFT:\n\t\t\t\tself.advanceSelection(-1, e);\n\t\t\t\treturn;\n\n\t\t\t// right: modifiy item selection to the right\n\t\t\tcase constants.KEY_RIGHT:\n\t\t\t\tself.advanceSelection(1, e);\n\t\t\t\treturn;\n\n\t\t\t// tab: select active option and/or create item\n\t\t\tcase constants.KEY_TAB:\n\n\t\t\t\tif( self.settings.selectOnTab ){\n\t\t\t\t\tif( self.canSelect(self.activeOption) ){\n\t\t\t\t\t\tself.onOptionSelect(e,self.activeOption!);\n\n\t\t\t\t\t\t// prevent default [tab] behaviour of jump to the next field\n\t\t\t\t\t\t// if select isFull, then the dropdown won't be open and [tab] will work normally\n\t\t\t\t\t\tpreventDefault(e);\n\t\t\t\t\t}\n\t\t\t\t\tif (self.settings.create && self.createItem()) {\n\t\t\t\t\t\tpreventDefault(e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\n\t\t\t// delete|backspace: delete items\n\t\t\tcase constants.KEY_BACKSPACE:\n\t\t\tcase constants.KEY_DELETE:\n\t\t\t\tself.deleteSelection(e);\n\t\t\t\treturn;\n\t\t}\n\n\t\t// don't enter text in the control_input when active items are selected\n\t\tif( self.isInputHidden && !isKeyDown(constants.KEY_SHORTCUT,e) ){\n\t\t\tpreventDefault(e);\n\t\t}\n\t}\n\n\t/**\n\t * Triggered on <input> keyup.\n\t *\n\t */\n\tonInput(e:MouseEvent|KeyboardEvent):void {\n\t\t\n\t\tif( this.isLocked ){\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.inputValue();\n\t\tif( this.lastValue === value ) return;\n\t\tthis.lastValue = value;\n\t\t\n\t\tif( value == '' ){\n\t\t\tthis._onInput();\n\t\t\treturn;\n\t\t}\n\n\t\tif( this.refreshTimeout ){\n\t\t\twindow.clearTimeout(this.refreshTimeout);\n\t\t}\n\n\t\tthis.refreshTimeout = timeout(()=> {\n\t\t\tthis.refreshTimeout = null;\n\t\t\tthis._onInput();\n\t\t}, this.settings.refreshThrottle);\n\t}\n\n\t_onInput():void {\n\t\tconst value = this.lastValue;\n\n\t\tif( this.settings.shouldLoad.call(this,value) ){\n\t\t\tthis.load(value);\n\t\t}\n\n\t\tthis.refreshOptions();\n\t\tthis.trigger('type', value);\n\t}\n\n\t/**\n\t * Triggered when the user rolls over\n\t * an option in the autocomplete dropdown menu.\n\t *\n\t */\n\tonOptionHover( evt:MouseEvent|KeyboardEvent, option:HTMLElement ):void{\n\t\tif( this.ignoreHover ) return;\n\t\tthis.setActiveOption(option, false);\n\t}\n\n\t/**\n\t * Triggered on <input> focus.\n\t *\n\t */\n\tonFocus(e?:MouseEvent|KeyboardEvent):void {\n\t\tvar self = this;\n\t\tvar wasFocused = self.isFocused;\n\n\t\tif( self.isDisabled || self.isReadOnly ){\n\t\t\tself.blur();\n\t\t\tpreventDefault(e);\n\t\t\treturn;\n\t\t}\n\n\t\tif (self.ignoreFocus) return;\n\t\tself.isFocused = true;\n\t\tif( self.settings.preload === 'focus' ) self.preload();\n\n\t\tif (!wasFocused) self.trigger('focus');\n\n\t\tif (!self.activeItems.length) {\n\t\t\tself.inputState();\n\t\t\tself.refreshOptions(!!self.settings.openOnFocus);\n\t\t}\n\n\t\tself.refreshState();\n\t}\n\n\t/**\n\t * Triggered on <input> blur.\n\t *\n\t */\n\tonBlur(e?:FocusEvent):void {\n\n\t\tif( document.hasFocus() === false ) return;\n\n\t\tvar self = this;\n\t\tif (!self.isFocused) return;\n\t\tself.isFocused = false;\n\t\tself.ignoreFocus = false;\n\n\t\tvar deactivate = () => {\n\t\t\tself.close();\n\t\t\tself.setActiveItem();\n\t\t\tself.setCaret(self.items.length);\n\t\t\tself.trigger('blur');\n\t\t};\n\n\t\tif (self.settings.create && self.settings.createOnBlur) {\n\t\t\tself.createItem(null, deactivate);\n\t\t} else {\n\t\t\tdeactivate();\n\t\t}\n\t}\n\n\n\t/**\n\t * Triggered when the user clicks on an option\n\t * in the autocomplete dropdown menu.\n\t *\n\t */\n\tonOptionSelect( evt:MouseEvent|KeyboardEvent, option:HTMLElement ){\n\t\tvar value, self = this;\n\n\n\t\t// should not be possible to trigger a option under a disabled optgroup\n\t\tif( option.parentElement && option.parentElement.matches('[data-disabled]') ){\n\t\t\treturn;\n\t\t}\n\n\n\t\tif( option.classList.contains('create') ){\n\t\t\tself.createItem(null, () => {\n\t\t\t\tif (self.settings.closeAfterSelect) {\n\t\t\t\t\tself.close();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tvalue = option.dataset.value;\n\t\t\tif (typeof value !== 'undefined') {\n\t\t\t\tself.lastQuery = null;\n\t\t\t\tself.addItem(value);\n\t\t\t\tif (self.settings.closeAfterSelect) {\n\t\t\t\t\tself.close();\n\t\t\t\t}\n\n\t\t\t\tif( !self.settings.hideSelected && evt.type && /click/.test(evt.type) ){\n\t\t\t\t\tself.setActiveOption(option);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Return true if the given option can be selected\n\t *\n\t */\n\tcanSelect(option:HTMLElement|null):boolean{\n\n\t\tif( this.isOpen && option && this.dropdown_content.contains(option) ) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Triggered when the user clicks on an item\n\t * that has been selected.\n\t *\n\t */\n\tonItemSelect( evt?:MouseEvent, item?:TomItem ):boolean{\n\t\tvar self = this;\n\n\t\tif( !self.isLocked && self.settings.mode === 'multi' ){\n\t\t\tpreventDefault(evt);\n\t\t\tself.setActiveItem(item, evt);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Determines whether or not to invoke\n\t * the user-provided option provider / loader\n\t *\n\t * Note, there is a subtle difference between\n\t * this.canLoad() and this.settings.shouldLoad();\n\t *\n\t *\t- settings.shouldLoad() is a user-input validator.\n\t *\tWhen false is returned, the not_loading template\n\t *\twill be added to the dropdown\n\t *\n\t *\t- canLoad() is lower level validator that checks\n\t * \tthe Tom Select instance. There is no inherent user\n\t *\tfeedback when canLoad returns false\n\t *\n\t */\n\tcanLoad(value:string):boolean{\n\n\t\tif( !this.settings.load ) return false;\n\t\tif( this.loadedSearches.hasOwnProperty(value) ) return false;\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Invokes the user-provided option provider / loader.\n\t *\n\t */\n\tload(value:string):void {\n\t\tconst self = this;\n\n\t\tif( !self.canLoad(value) ) return;\n\n\t\taddClasses(self.wrapper,self.settings.loadingClass);\n\t\tself.loading++;\n\n\t\tconst callback = self.loadCallback.bind(self);\n\t\tself.settings.load.call(self, value, callback);\n\t}\n\n\t/**\n\t * Invoked by the user-provided option provider\n\t *\n\t */\n\tloadCallback( options:TomOption[], optgroups:TomOption[] ):void{\n\t\tconst self = this;\n\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\tself.lastQuery = null;\n\n\t\tself.clearActiveOption(); // when new results load, focus should be on first option\n\t\tself.setupOptions(options,optgroups);\n\n\t\tself.refreshOptions(self.isFocused && !self.isInputHidden);\n\n\t\tif (!self.loading) {\n\t\t\tremoveClasses(self.wrapper,self.settings.loadingClass);\n\t\t}\n\n\t\tself.trigger('load', options, optgroups);\n\t}\n\n\tpreload():void{\n\t\tvar classList = this.wrapper.classList;\n\t\tif( classList.contains('preloaded') ) return;\n\t\tclassList.add('preloaded');\n\t\tthis.load('');\n\t}\n\n\n\t/**\n\t * Sets the input field of the control to the specified value.\n\t *\n\t */\n\tsetTextboxValue(value:string = '') {\n\t\tvar input = this.control_input;\n\t\tvar changed = input.value !== value;\n\t\tif (changed) {\n\t\t\tinput.value = value;\n\t\t\ttriggerEvent(input,'update');\n\t\t\tthis.lastValue = value;\n\t\t}\n\t}\n\n\t/**\n\t * Returns the value of the control. If multiple items\n\t * can be selected (e.g. <select multiple>), this returns\n\t * an array. If only one item can be selected, this\n\t * returns a string.\n\t *\n\t */\n\tgetValue():string|string[] {\n\n\t\tif( this.is_select_tag && this.input.hasAttribute('multiple')) {\n\t\t\treturn this.items;\n\t\t}\n\n\t\treturn this.items.join(this.settings.delimiter);\n\t}\n\n\t/**\n\t * Resets the selected items to the given value.\n\t *\n\t */\n\tsetValue( value:string|string[], silent?:boolean ):void{\n\t\tvar events = silent ? [] : ['change'];\n\n\t\tdebounce_events(this, events,() => {\n\t\t\tthis.clear(silent);\n\t\t\tthis.addItems(value, silent);\n\t\t});\n\t}\n\n\n\t/**\n\t * Resets the number of max items to the given value\n\t *\n\t */\n\tsetMaxItems(value:null|number){\n\t\tif(value === 0) value = null; //reset to unlimited items.\n\t\tthis.settings.maxItems = value;\n\t\tthis.refreshState();\n\t}\n\n\t/**\n\t * Sets the selected item.\n\t *\n\t */\n\tsetActiveItem( item?:TomItem, e?:MouseEvent|KeyboardEvent ){\n\t\tvar self = this;\n\t\tvar eventName;\n\t\tvar i, begin, end, swap;\n\t\tvar last;\n\n\t\tif (self.settings.mode === 'single') return;\n\n\t\t// clear the active selection\n\t\tif( !item ){\n\t\t\tself.clearActiveItems();\n\t\t\tif (self.isFocused) {\n\t\t\t\tself.inputState();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// modify selection\n\t\teventName = e && e.type.toLowerCase();\n\n\t\tif (eventName === 'click' && isKeyDown('shiftKey',e) && self.activeItems.length) {\n\t\t\tlast\t= self.getLastActive();\n\t\t\tbegin\t= Array.prototype.indexOf.call(self.control.children, last);\n\t\t\tend\t\t= Array.prototype.indexOf.call(self.control.children, item);\n\n\t\t\tif (begin > end) {\n\t\t\t\tswap  = begin;\n\t\t\t\tbegin = end;\n\t\t\t\tend   = swap;\n\t\t\t}\n\t\t\tfor (i = begin; i <= end; i++) {\n\t\t\t\titem = self.control.children[i] as TomItem;\n\t\t\t\tif (self.activeItems.indexOf(item) === -1) {\n\t\t\t\t\tself.setActiveItemClass(item);\n\t\t\t\t}\n\t\t\t}\n\t\t\tpreventDefault(e);\n\t\t} else if ((eventName === 'click' && isKeyDown(constants.KEY_SHORTCUT,e) ) || (eventName === 'keydown' && isKeyDown('shiftKey',e))) {\n\t\t\tif( item.classList.contains('active') ){\n\t\t\t\tself.removeActiveItem( item );\n\t\t\t} else {\n\t\t\t\tself.setActiveItemClass(item);\n\t\t\t}\n\t\t} else {\n\t\t\tself.clearActiveItems();\n\t\t\tself.setActiveItemClass(item);\n\t\t}\n\n\t\t// ensure control has focus\n\t\tself.inputState();\n\t\tif (!self.isFocused) {\n\t\t\tself.focus();\n\t\t}\n\t}\n\n\t/**\n\t * Set the active and last-active classes\n\t *\n\t */\n\tsetActiveItemClass( item:TomItem ){\n\t\tconst self = this;\n\t\tconst last_active = self.control.querySelector('.last-active');\n\t\tif( last_active ) removeClasses(last_active as HTMLElement,'last-active');\n\n\t\taddClasses(item,'active last-active');\n\t\tself.trigger('item_select', item);\n\t\tif( self.activeItems.indexOf(item) == -1 ){\n\t\t\tself.activeItems.push( item );\n\t\t}\n\t}\n\n\t/**\n\t * Remove active item\n\t *\n\t */\n\tremoveActiveItem( item:TomItem ){\n\t\tvar idx = this.activeItems.indexOf(item);\n\t\tthis.activeItems.splice(idx, 1);\n\t\tremoveClasses(item,'active');\n\t}\n\n\t/**\n\t * Clears all the active items\n\t *\n\t */\n\tclearActiveItems(){\n\t\tremoveClasses(this.activeItems,'active');\n\t\tthis.activeItems = [];\n\t}\n\n\t/**\n\t * Sets the selected item in the dropdown menu\n\t * of available options.\n\t *\n\t */\n\tsetActiveOption( option:null|HTMLElement,scroll:boolean=true ):void{\n\n\t\tif( option === this.activeOption ){\n\t\t\treturn;\n\t\t}\n\n\t\tthis.clearActiveOption();\n\t\tif( !option ) return;\n\n\t\tthis.activeOption = option;\n\t\tsetAttr(this.focus_node,{'aria-activedescendant':option.getAttribute('id')});\n\t\tsetAttr(option,{'aria-selected':'true'});\n\t\taddClasses(option,'active');\n\t\tif( scroll ) this.scrollToOption(option);\n\t}\n\n\t/**\n\t * Sets the dropdown_content scrollTop to display the option\n\t *\n\t */\n\tscrollToOption( option:null|HTMLElement, behavior?:string ):void{\n\n\t\tif( !option ) return;\n\n\t\tconst content\t\t= this.dropdown_content;\n\t\tconst height_menu\t= content.clientHeight;\n\t\tconst scrollTop\t\t= content.scrollTop || 0;\n\t\tconst height_item\t= option.offsetHeight;\n\t\tconst y\t\t\t\t= option.getBoundingClientRect().top - content.getBoundingClientRect().top + scrollTop;\n\n\t\tif (y + height_item > height_menu + scrollTop) {\n\t\t\tthis.scroll(y - height_menu + height_item, behavior);\n\n\t\t} else if (y < scrollTop) {\n\t\t\tthis.scroll(y, behavior);\n\t\t}\n\t}\n\n\t/**\n\t * Scroll the dropdown to the given position\n\t *\n\t */\n\tscroll( scrollTop:number, behavior?:string ):void{\n\t\tconst content = this.dropdown_content;\n\t\tif( behavior ){\n\t\t\tcontent.style.scrollBehavior = behavior;\n\t\t}\n\t\tcontent.scrollTop = scrollTop;\n\t\tcontent.style.scrollBehavior = '';\n\t}\n\n\t/**\n\t * Clears the active option\n\t *\n\t */\n\tclearActiveOption(){\n\t\tif( this.activeOption ){\n\t\t\tremoveClasses(this.activeOption,'active');\n\t\t\tsetAttr(this.activeOption,{'aria-selected':null});\n\t\t}\n\t\tthis.activeOption = null;\n\t\tsetAttr(this.focus_node,{'aria-activedescendant':null});\n\t}\n\n\n\t/**\n\t * Selects all items (CTRL + A).\n\t */\n\tselectAll() {\n\t\tconst self = this;\n\n\t\tif (self.settings.mode === 'single') return;\n\n\t\tconst activeItems = self.controlChildren();\n\n\t\tif( !activeItems.length ) return;\n\n\t\tself.inputState();\n\t\tself.close();\n\n\t\tself.activeItems = activeItems;\n\t\titerate( activeItems, (item:TomItem) => {\n\t\t\tself.setActiveItemClass(item);\n\t\t});\n\n\t}\n\n\t/**\n\t * Determines if the control_input should be in a hidden or visible state\n\t *\n\t */\n\tinputState(){\n\t\tvar self = this;\n\n\t\tif( !self.control.contains(self.control_input) ) return;\n\n\t\tsetAttr(self.control_input,{placeholder:self.settings.placeholder});\n\n\t\tif( self.activeItems.length > 0 || (!self.isFocused && self.settings.hidePlaceholder && self.items.length > 0) ){\n\t\t\tself.setTextboxValue();\n\t\t\tself.isInputHidden = true;\n\n\t\t}else{\n\n\t\t\tif( self.settings.hidePlaceholder && self.items.length > 0 ){\n\t\t\t\tsetAttr(self.control_input,{placeholder:''});\n\t\t\t}\n\t\t\tself.isInputHidden = false;\n\t\t}\n\n\t\tself.wrapper.classList.toggle('input-hidden', self.isInputHidden );\n\t}\n\n\t/**\n\t * Get the input value\n\t */\n\tinputValue(){\n\t\treturn this.control_input.value.trim();\n\t}\n\n\t/**\n\t * Gives the control focus.\n\t */\n\tfocus() {\n\t\tvar self = this;\n\t\tif( self.isDisabled || self.isReadOnly) return;\n\n\t\tself.ignoreFocus = true;\n\n\t\tif( self.control_input.offsetWidth ){\n\t\t\tself.control_input.focus();\n\t\t}else{\n\t\t\tself.focus_node.focus();\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tself.ignoreFocus = false;\n\t\t\tself.onFocus();\n\t\t}, 0);\n\t}\n\n\t/**\n\t * Forces the control out of focus.\n\t *\n\t */\n\tblur():void {\n\t\tthis.focus_node.blur();\n\t\tthis.onBlur();\n\t}\n\n\t/**\n\t * Returns a function that scores an object\n\t * to show how good of a match it is to the\n\t * provided query.\n\t *\n\t * @return {function}\n\t */\n\tgetScoreFunction(query:string) {\n\t\treturn this.sifter.getScoreFunction(query, this.getSearchOptions());\n\t}\n\n\t/**\n\t * Returns search options for sifter (the system\n\t * for scoring and sorting results).\n\t *\n\t * @see https://github.com/orchidjs/sifter.js\n\t * @return {object}\n\t */\n\tgetSearchOptions() {\n\t\tvar settings = this.settings;\n\t\tvar sort = settings.sortField;\n\t\tif (typeof settings.sortField === 'string') {\n\t\t\tsort = [{field: settings.sortField}];\n\t\t}\n\n\t\treturn {\n\t\t\tfields      : settings.searchField,\n\t\t\tconjunction : settings.searchConjunction,\n\t\t\tsort        : sort,\n\t\t\tnesting     : settings.nesting\n\t\t};\n\t}\n\n\t/**\n\t * Searches through available options and returns\n\t * a sorted array of matches.\n\t *\n\t */\n\tsearch(query:string) : ReturnType<Sifter['search']>{\n\t\tvar result, calculateScore;\n\t\tvar self     = this;\n\t\tvar options  = this.getSearchOptions();\n\n\t\t// validate user-provided result scoring function\n\t\tif ( self.settings.score ){\n\t\t\tcalculateScore = self.settings.score.call(self,query);\n\t\t\tif (typeof calculateScore !== 'function') {\n\t\t\t\tthrow new Error('Tom Select \"score\" setting must be a function that returns a function');\n\t\t\t}\n\t\t}\n\n\t\t// perform search\n\t\tif (query !== self.lastQuery) {\n\t\t\tself.lastQuery\t\t\t= query;\n\t\t\tresult\t\t\t\t\t= self.sifter.search(query, Object.assign(options, {score: calculateScore}));\n\t\t\tself.currentResults\t\t= result;\n\t\t} else {\n\t\t\tresult\t\t\t\t\t= Object.assign( {}, self.currentResults);\n\t\t}\n\n\t\t// filter out selected items\n\t\tif( self.settings.hideSelected ){\n\t\t\tresult.items = result.items.filter((item) => {\n\t\t\t\tlet hashed = hash_key(item.id);\n\t\t\t\treturn !(hashed && self.items.indexOf(hashed) !== -1 );\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Refreshes the list of available options shown\n\t * in the autocomplete dropdown menu.\n\t *\n\t */\n\trefreshOptions( triggerDropdown:boolean = true ){\n\t\tvar i, j, k, n, optgroup, optgroups, html:DocumentFragment, has_create_option, active_group;\n\t\tvar create;\n\n\t\ttype Group = {fragment:DocumentFragment,order:number,optgroup:string}\n\t\tconst groups: {[key:string]:number} = {};\n\t\tconst groups_order:Group[]\t= [];\n\n\t\tvar self\t\t\t\t\t= this;\n\t\tvar query\t\t\t\t\t= self.inputValue();\n\t\tconst same_query\t\t\t= query === self.lastQuery || (query == '' && self.lastQuery == null);\n\t\tvar results\t\t\t\t\t= self.search(query);\n\t\tvar active_option:HTMLElement|null = null;\n\t\tvar show_dropdown\t\t\t= self.settings.shouldOpen || false;\n\t\tvar dropdown_content\t\t= self.dropdown_content;\n\n\n\t\tif( same_query ){\n\t\t\tactive_option\t\t\t= self.activeOption;\n\n\t\t\tif( active_option ){\n\t\t\t\tactive_group = active_option.closest('[data-group]') as HTMLElement;\n\t\t\t}\n\t\t}\n\n\t\t// build markup\n\t\tn = results.items.length;\n\t\tif (typeof self.settings.maxOptions === 'number') {\n\t\t\tn = Math.min(n, self.settings.maxOptions);\n\t\t}\n\n\t\tif( n > 0 ){\n\t\t\tshow_dropdown = true;\n\t\t}\n\n\t\t// get fragment for group and the position of the group in group_order\n\t\tconst getGroupFragment = (optgroup:string,order:number):[number,DocumentFragment] => {\n\n\t\t\tlet group_order_i = groups[optgroup];\n\n\t\t\tif( group_order_i !== undefined ){\n\t\t\t\tlet order_group = groups_order[group_order_i];\n\t\t\t\tif( order_group !== undefined ){\n\t\t\t\t\treturn [group_order_i,order_group.fragment];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet group_fragment = document.createDocumentFragment();\n\t\t\tgroup_order_i = groups_order.length;\n\t\t\tgroups_order.push({fragment:group_fragment,order,optgroup});\n\n\t\t\treturn [group_order_i,group_fragment]\n\t\t}\n\n\t\t// render and group available options individually\n\t\tfor (i = 0; i < n; i++) {\n\n\t\t\t// get option dom element\n\t\t\tlet item\t\t\t= results.items[i];\n\t\t\tif( !item ) continue;\n\n\t\t\tlet opt_value\t\t= item.id;\n\t\t\tlet option\t\t\t= self.options[opt_value];\n\n\t\t\tif( option === undefined ) continue;\n\n\t\t\tlet opt_hash\t\t= get_hash(opt_value);\n\t\t\tlet option_el\t\t= self.getOption(opt_hash,true) as HTMLElement;\n\n\t\t\t// toggle 'selected' class\n\t\t\tif( !self.settings.hideSelected ){\n\t\t\t\toption_el.classList.toggle('selected', self.items.includes(opt_hash) );\n\t\t\t}\n\n\t\t\toptgroup    = option[self.settings.optgroupField] || '';\n\t\t\toptgroups   = Array.isArray(optgroup) ? optgroup : [optgroup];\n\t\t\t\n\n\t\t\tfor (j = 0, k = optgroups && optgroups.length; j < k; j++) {\n\t\t\t\toptgroup = optgroups[j];\n\n\t\t\t\tlet order = option.$order;\n\t\t\t\tlet self_optgroup = self.optgroups[optgroup];\n\t\t\t\tif( self_optgroup === undefined ){\t\t\t\t\t\n\t\t\t\t\toptgroup = '';\n\t\t\t\t}else{\n\t\t\t\t\torder = self_optgroup.$order;\n\t\t\t\t}\n\n\t\t\t\tconst [group_order_i,group_fragment] = getGroupFragment(optgroup,order);\n\n\n\t\t\t\t// nodes can only have one parent, so if the option is in mutple groups, we need a clone\n\t\t\t\tif( j > 0 ){\n\t\t\t\t\toption_el = option_el.cloneNode(true) as HTMLElement;\n\t\t\t\t\tsetAttr(option_el,{id: option.$id+'-clone-'+j,'aria-selected':null});\n\t\t\t\t\toption_el.classList.add('ts-cloned');\n\t\t\t\t\tremoveClasses(option_el,'active');\n\n\n\t\t\t\t\t// make sure we keep the activeOption in the same group\n\t\t\t\t\tif( self.activeOption && self.activeOption.dataset.value == opt_value ){\n\t\t\t\t\t\tif( active_group && active_group.dataset.group === optgroup.toString() ){\n\t\t\t\t\t\t\tactive_option = option_el;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\t\n\t\t\t\t\n\t\t\t\tgroup_fragment.appendChild(option_el);\n\t\t\t\tif( optgroup != '' ){\n\t\t\t\t\tgroups[optgroup] = group_order_i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// sort optgroups\n\t\tif( self.settings.lockOptgroupOrder ){\n\t\t\tgroups_order.sort((a, b) => {\n\t\t\t\treturn a.order - b.order;\n\t\t\t});\n\t\t}\n\n\t\t// render optgroup headers & join groups\n\t\thtml = document.createDocumentFragment();\n\t\titerate( groups_order, (group_order:Group) => {\n\n\t\t\tlet group_fragment = group_order.fragment;\n\t\t\tlet optgroup = group_order.optgroup\n\n\t\t\tif( !group_fragment || !group_fragment.children.length ) return;\n\n\t\t\tlet group_heading = self.optgroups[optgroup];\n\n\t\t\tif( group_heading !== undefined ){\n\n\t\t\t\tlet group_options = document.createDocumentFragment();\n\t\t\t\tlet header = self.render('optgroup_header', group_heading);\n\t\t\t\tappend( group_options, header );\n\t\t\t\tappend( group_options, group_fragment );\n\n\t\t\t\tlet group_html = self.render('optgroup', {group:group_heading,options:group_options} );\n\n\t\t\t\tappend( html, group_html );\n\n\t\t\t} else {\n\t\t\t\tappend( html, group_fragment );\n\t\t\t}\n\t\t});\n\n\t\tdropdown_content.innerHTML = '';\n\t\tappend( dropdown_content, html );\n\n\t\t// highlight matching terms inline\n\t\tif (self.settings.highlight) {\n\t\t\tremoveHighlight( dropdown_content );\n\t\t\tif (results.query.length && results.tokens.length) {\n\t\t\t\titerate( results.tokens, (tok) => {\n\t\t\t\t\thighlight( dropdown_content, tok.regex);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// helper method for adding templates to dropdown\n\t\tvar add_template = (template:TomTemplateNames) => {\n\t\t\tlet content = self.render(template,{input:query});\n\t\t\tif( content ){\n\t\t\t\tshow_dropdown = true;\n\t\t\t\tdropdown_content.insertBefore(content, dropdown_content.firstChild);\n\t\t\t}\n\t\t\treturn content;\n\t\t};\n\n\n\t\t// add loading message\n\t\tif( self.loading ){\n\t\t\tadd_template('loading');\n\n\t\t// invalid query\n\t\t}else if( !self.settings.shouldLoad.call(self,query) ){\n\t\t\tadd_template('not_loading');\n\n\t\t// add no_results message\n\t\t}else if( results.items.length === 0 ){\n\t\t\tadd_template('no_results');\n\n\t\t}\n\n\n\n\t\t// add create option\n\t\thas_create_option = self.canCreate(query);\n\t\tif (has_create_option) {\n\t\t\tcreate = add_template('option_create');\n\t\t}\n\n\n\t\t// activate\n\t\tself.hasOptions = results.items.length > 0 || has_create_option;\n\t\tif( show_dropdown ){\n\n\t\t\tif (results.items.length > 0) {\n\n\t\t\t\tif( !active_option && self.settings.mode === 'single' && self.items[0] != undefined ){\n\t\t\t\t\tactive_option = self.getOption(self.items[0]);\n\t\t\t\t}\n\n\t\t\t\tif( !dropdown_content.contains(active_option)  ){\n\n\t\t\t\t\tlet active_index = 0;\n\t\t\t\t\tif( create && !self.settings.addPrecedence ){\n\t\t\t\t\t\tactive_index = 1;\n\t\t\t\t\t}\n\t\t\t\t\tactive_option = self.selectable()[active_index] as HTMLElement;\n\t\t\t\t}\n\n\t\t\t}else if( create ){\n\t\t\t\tactive_option = create;\n\t\t\t}\n\n\t\t\tif( triggerDropdown && !self.isOpen ){\n\t\t\t\tself.open();\n\t\t\t\tself.scrollToOption(active_option,'auto');\n\t\t\t}\n\t\t\tself.setActiveOption(active_option);\n\n\t\t}else{\n\t\t\tself.clearActiveOption();\n\t\t\tif( triggerDropdown && self.isOpen ){\n\t\t\t\tself.close(false); // if create_option=null, we want the dropdown to close but not reset the textbox value\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Return list of selectable options\n\t *\n\t */\n\tselectable():NodeList{\n\t\treturn this.dropdown_content.querySelectorAll('[data-selectable]');\n\t}\n\n\n\n\t/**\n\t * Adds an available option. If it already exists,\n\t * nothing will happen. Note: this does not refresh\n\t * the options list dropdown (use `refreshOptions`\n\t * for that).\n\t *\n\t * Usage:\n\t *\n\t *   this.addOption(data)\n\t *\n\t */\n\taddOption( data:TomOption, user_created = false ):false|string {\n\t\tconst self = this;\n\n\t\t// @deprecated 1.7.7\n\t\t// use addOptions( array, user_created ) for adding multiple options\n\t\tif( Array.isArray(data) ){\n\t\t\tself.addOptions( data, user_created);\n\t\t\treturn false;\n\t\t}\n\n\t\tconst key = hash_key(data[self.settings.valueField]);\n\t\tif( key === null || self.options.hasOwnProperty(key) ){\n\t\t\treturn false;\n\t\t}\n\n\t\tdata.$order\t\t\t= data.$order || ++self.order;\n\t\tdata.$id\t\t\t= self.inputId + '-opt-' + data.$order;\n\t\tself.options[key]\t= data;\n\t\tself.lastQuery\t\t= null;\n\n\t\tif( user_created ){\n\t\t\tself.userOptions[key] = user_created;\n\t\t\tself.trigger('option_add', key, data);\n\t\t}\n\n\t\treturn key;\n\t}\n\n\t/**\n\t * Add multiple options\n\t *\n\t */\n\taddOptions( data:TomOption[], user_created = false ):void{\n\t\titerate( data, (dat:TomOption) => {\n\t\t\tthis.addOption(dat, user_created);\n\t\t});\n\t}\n\n\t/**\n\t * @deprecated 1.7.7\n\t */\n\tregisterOption( data:TomOption ):false|string {\n\t\treturn this.addOption(data);\n\t}\n\n\t/**\n\t * Registers an option group to the pool of option groups.\n\t *\n\t * @return {boolean|string}\n\t */\n\tregisterOptionGroup(data:TomOption) {\n\t\tvar key = hash_key(data[this.settings.optgroupValueField]);\n\n\t\tif ( key === null ) return false;\n\n\t\tdata.$order = data.$order || ++this.order;\n\t\tthis.optgroups[key] = data;\n\t\treturn key;\n\t}\n\n\t/**\n\t * Registers a new optgroup for options\n\t * to be bucketed into.\n\t *\n\t */\n\taddOptionGroup(id:string, data:TomOption) {\n\t\tvar hashed_id;\n\t\tdata[this.settings.optgroupValueField] = id;\n\n\t\tif( hashed_id = this.registerOptionGroup(data) ){\n\t\t\tthis.trigger('optgroup_add', hashed_id, data);\n\t\t}\n\t}\n\n\t/**\n\t * Removes an existing option group.\n\t *\n\t */\n\tremoveOptionGroup(id:string) {\n\t\tif (this.optgroups.hasOwnProperty(id)) {\n\t\t\tdelete this.optgroups[id];\n\t\t\tthis.clearCache();\n\t\t\tthis.trigger('optgroup_remove', id);\n\t\t}\n\t}\n\n\t/**\n\t * Clears all existing option groups.\n\t */\n\tclearOptionGroups() {\n\t\tthis.optgroups = {};\n\t\tthis.clearCache();\n\t\tthis.trigger('optgroup_clear');\n\t}\n\n\t/**\n\t * Updates an option available for selection. If\n\t * it is visible in the selected items or options\n\t * dropdown, it will be re-rendered automatically.\n\t *\n\t */\n\tupdateOption(value:string, data:TomOption) {\n\t\tconst self = this;\n\t\tvar item_new;\n\t\tvar index_item;\n\n\t\tconst value_old\t\t= hash_key(value);\n\t\tconst value_new\t\t= hash_key(data[self.settings.valueField]);\n\n\t\t// sanity checks\n\t\tif( value_old === null ) return;\n\n\t\tconst data_old\t\t= self.options[value_old];\n\n\t\tif( data_old == undefined ) return;\n\t\tif( typeof value_new !== 'string' ) throw new Error('Value must be set in option data');\n\n\n\t\tconst option\t\t= self.getOption(value_old);\n\t\tconst item\t\t\t= self.getItem(value_old);\n\n\n\t\tdata.$order = data.$order || data_old.$order;\n\t\tdelete self.options[value_old];\n\n\t\t// invalidate render cache\n\t\t// don't remove existing node yet, we'll remove it after replacing it\n\t\tself.uncacheValue(value_new);\n\n\t\tself.options[value_new] = data;\n\n\t\t// update the option if it's in the dropdown\n\t\tif( option ){\n\t\t\tif( self.dropdown_content.contains(option) ){\n\n\t\t\t\tconst option_new\t= self._render('option', data);\n\t\t\t\treplaceNode(option, option_new);\n\n\t\t\t\tif( self.activeOption === option ){\n\t\t\t\t\tself.setActiveOption(option_new);\n\t\t\t\t}\n\t\t\t}\n\t\t\toption.remove();\n\t\t}\n\n\t\t// update the item if we have one\n\t\tif( item ){\n\t\t\tindex_item = self.items.indexOf(value_old);\n\t\t\tif (index_item !== -1) {\n\t\t\t\tself.items.splice(index_item, 1, value_new);\n\t\t\t}\n\n\t\t\titem_new\t= self._render('item', data);\n\n\t\t\tif( item.classList.contains('active') ) addClasses(item_new,'active');\n\n\t\t\treplaceNode( item, item_new);\n\t\t}\n\n\t\t// invalidate last query because we might have updated the sortField\n\t\tself.lastQuery = null;\n\t}\n\n\t/**\n\t * Removes a single option.\n\t *\n\t */\n\tremoveOption(value:string, silent?:boolean):void {\n\t\tconst self = this;\n\t\tvalue = get_hash(value);\n\n\t\tself.uncacheValue(value);\n\n\t\tdelete self.userOptions[value];\n\t\tdelete self.options[value];\n\t\tself.lastQuery = null;\n\t\tself.trigger('option_remove', value);\n\t\tself.removeItem(value, silent);\n\t}\n\n\t/**\n\t * Clears all options.\n\t */\n\tclearOptions(filter?:TomClearFilter ) {\n\n\t\tconst boundFilter = (filter || this.clearFilter).bind(this);\n\n\t\tthis.loadedSearches\t\t= {};\n\t\tthis.userOptions\t\t= {};\n\t\tthis.clearCache();\n\n\t\tconst selected:TomOptions\t= {};\n\t\titerate(this.options,(option:TomOption,key:string)=>{\n\t\t\tif( boundFilter(option,key as string) ){\n\t\t\t\tselected[key] = option;\n\t\t\t}\n\t\t});\n\n\t\tthis.options = this.sifter.items = selected;\n\t\tthis.lastQuery = null;\n\t\tthis.trigger('option_clear');\n\t}\n\n\t/**\n\t * Used by clearOptions() to decide whether or not an option should be removed\n\t * Return true to keep an option, false to remove\n\t *\n\t */\n\tclearFilter(option:TomOption,value:string){\n\t\tif( this.items.indexOf(value) >= 0 ){\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns the dom element of the option\n\t * matching the given value.\n\t *\n\t */\n\tgetOption(value:undefined|null|boolean|string|number, create:boolean=false):null|HTMLElement {\n\n\t\tconst hashed = hash_key(value);\n\t\tif( hashed === null ) return null;\n\n\t\tconst option = this.options[hashed];\n\t\tif( option != undefined ){\n\n\t\t\tif( option.$div ){\n\t\t\t\treturn option.$div;\n\t\t\t}\n\n\t\t\tif( create ){\n\t\t\t\treturn this._render('option', option);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Returns the dom element of the next or previous dom element of the same type\n\t * Note: adjacent options may not be adjacent DOM elements (optgroups)\n\t *\n\t */\n\tgetAdjacent( option:null|HTMLElement, direction:number, type:string = 'option' ) : HTMLElement|null{\n\t\tvar self = this, all;\n\n\t\tif( !option ){\n\t\t\treturn null;\n\t\t}\n\n\t\tif( type == 'item' ){\n\t\t\tall\t\t\t= self.controlChildren();\n\t\t}else{\n\t\t\tall\t\t\t= self.dropdown_content.querySelectorAll('[data-selectable]');\n\t\t}\n\n\t\tfor( let i = 0; i < all.length; i++ ){\n\t\t\tif( all[i] != option ){\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif( direction > 0 ){\n\t\t\t\treturn all[i+1] as HTMLElement;\n\t\t\t}\n\n\t\t\treturn all[i-1] as HTMLElement;\n\t\t}\n\t\treturn null;\n\t}\n\n\n\t/**\n\t * Returns the dom element of the item\n\t * matching the given value.\n\t *\n\t */\n\tgetItem(item:string|TomItem|null):null|TomItem {\n\n\t\tif( typeof item == 'object' ){\n\t\t\treturn item;\n\t\t}\n\n\t\tvar value = hash_key(item);\n\t\treturn value !== null\n\t\t\t? this.control.querySelector(`[data-value=\"${addSlashes(value)}\"]`)\n\t\t\t: null;\n\t}\n\n\t/**\n\t * \"Selects\" multiple items at once. Adds them to the list\n\t * at the current caret position.\n\t *\n\t */\n\taddItems( values:string|string[], silent?:boolean ):void{\n\t\tvar self = this;\n\n\t\tvar items = Array.isArray(values) ? values : [values];\n\t\titems = items.filter(x => self.items.indexOf(x) === -1);\n\t\tconst last_item = items[items.length - 1];\n\t\titems.forEach(item => {\n\t\t\tself.isPending = (item !== last_item);\n\t\t\tself.addItem(item, silent);\n\t\t});\n\t}\n\n\t/**\n\t * \"Selects\" an item. Adds it to the list\n\t * at the current caret position.\n\t *\n\t */\n\taddItem( value:string, silent?:boolean ):void{\n\t\tvar events = silent ? [] : ['change','dropdown_close'];\n\n\t\tdebounce_events(this, events, () => {\n\t\t\tvar item, wasFull;\n\t\t\tconst self = this;\n\t\t \tconst inputMode = self.settings.mode;\n\t\t\tconst hashed = hash_key(value);\n\n\t\t\tif( hashed && self.items.indexOf(hashed) !== -1 ){\n\n\t\t\t\tif( inputMode === 'single' ){\n\t\t\t\t\tself.close();\n\t\t\t\t}\n\n\t\t\t\tif( inputMode === 'single' || !self.settings.duplicates ){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (hashed === null || !self.options.hasOwnProperty(hashed)) return;\n\t\t\tif (inputMode === 'single') self.clear(silent);\n\t\t\tif (inputMode === 'multi' && self.isFull()) return;\n\n\t\t\titem = self._render('item', self.options[hashed]);\n\n\t\t\tif( self.control.contains(item) ){ // duplicates\n\t\t\t\titem = item.cloneNode(true) as HTMLElement;\n\t\t\t}\n\n\t\t\twasFull = self.isFull();\n\t\t\tself.items.splice(self.caretPos, 0, hashed);\n\t\t\tself.insertAtCaret(item);\n\n\t\t\tif (self.isSetup) {\n\n\t\t\t\t// update menu / remove the option (if this is not one item being added as part of series)\n\t\t\t\tif( !self.isPending && self.settings.hideSelected ){\n\t\t\t\t\tlet option = self.getOption(hashed);\n\t\t\t\t\tlet next = self.getAdjacent(option, 1);\n\t\t\t\t\tif( next ){\n\t\t\t\t\t\tself.setActiveOption(next);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// refreshOptions after setActiveOption(),\n\t\t\t\t// otherwise setActiveOption() will be called by refreshOptions() with the wrong value\n\t\t\t\tif( !self.isPending && !self.settings.closeAfterSelect ){\n\t\t\t\t\tself.refreshOptions(self.isFocused && inputMode !== 'single');\n\t\t\t\t}\n\n\t\t\t\t// hide the menu if the maximum number of items have been selected or no options are left\n\t\t\t\tif( self.settings.closeAfterSelect != false && self.isFull() ){\n\t\t\t\t\tself.close();\n\t\t\t\t} else if (!self.isPending) {\n\t\t\t\t\tself.positionDropdown();\n\t\t\t\t}\n\n\t\t\t\tself.trigger('item_add', hashed, item);\n\n\t\t\t\tif (!self.isPending) {\n\t\t\t\t\tself.updateOriginalInput({silent: silent});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!self.isPending || (!wasFull && self.isFull())) {\n\t\t\t\tself.inputState();\n\t\t\t\tself.refreshState();\n\t\t\t}\n\n\t\t});\n\t}\n\n\t/**\n\t * Removes the selected item matching\n\t * the provided value.\n\t *\n\t */\n\tremoveItem( item:string|TomItem|null=null, silent?:boolean ){\n\t\tconst self\t\t= this;\n\t\titem\t\t\t= self.getItem(item);\n\n\t\tif( !item ) return;\n\n\t\tvar i,idx;\n\t\tconst value\t= item.dataset.value;\n\t\ti = nodeIndex(item);\n\n\t\titem.remove();\n\t\tif( item.classList.contains('active') ){\n\t\t\tidx = self.activeItems.indexOf(item);\n\t\t\tself.activeItems.splice(idx, 1);\n\t\t\tremoveClasses(item,'active');\n\t\t}\n\n\t\tself.items.splice(i, 1);\n\t\tself.lastQuery = null;\n\t\tif (!self.settings.persist && self.userOptions.hasOwnProperty(value)) {\n\t\t\tself.removeOption(value, silent);\n\t\t}\n\n\t\tif (i < self.caretPos) {\n\t\t\tself.setCaret(self.caretPos - 1);\n\t\t}\n\n\t\tself.updateOriginalInput({silent: silent});\n\t\tself.refreshState();\n\t\tself.positionDropdown();\n\t\tself.trigger('item_remove', value, item);\n\n\t}\n\n\t/**\n\t * Invokes the `create` method provided in the\n\t * TomSelect options that should provide the data\n\t * for the new item, given the user input.\n\t *\n\t * Once this completes, it will be added\n\t * to the item list.\n\t *\n\t */\n\tcreateItem( input:null|string=null, callback:TomCreateCallback = ()=>{} ):boolean{\n\n\t\t// triggerDropdown parameter @deprecated 2.1.1\n\t\tif( arguments.length === 3 ){\n\t\t\tcallback = arguments[2];\n\t\t}\n\t\tif( typeof callback != 'function' ){\n\t\t\tcallback = () => {};\n\t\t}\n\n\t\tvar self  = this;\n\t\tvar caret = self.caretPos;\n\t\tvar output;\n\t\tinput = input || self.inputValue();\n\n\t\tif (!self.canCreate(input)) {\n\t\t\tcallback();\n\t\t\treturn false;\n\t\t}\n\n\t\tself.lock();\n\n\t\tvar created = false;\n\t\tvar create = (data?:boolean|TomOption) => {\n\t\t\tself.unlock();\n\n\t\t\tif (!data || typeof data !== 'object') return callback();\n\t\t\tvar value = hash_key(data[self.settings.valueField]);\n\t\t\tif( typeof value !== 'string' ){\n\t\t\t\treturn callback();\n\t\t\t}\n\n\t\t\tself.setTextboxValue();\n\t\t\tself.addOption(data,true);\n\t\t\tself.setCaret(caret);\n\t\t\tself.addItem(value);\n\t\t\tcallback(data);\n\t\t\tcreated = true;\n\t\t};\n\n\t\tif( typeof self.settings.create === 'function' ){\n\t\t\toutput = self.settings.create.call(this, input, create);\n\t\t}else{\n\t\t\toutput = {\n\t\t\t\t[self.settings.labelField]: input,\n\t\t\t\t[self.settings.valueField]: input,\n\t\t\t};\n\t\t}\n\n\t\tif( !created ){\n\t\t\tcreate(output);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Re-renders the selected item lists.\n\t */\n\trefreshItems() {\n\t\tvar self = this;\n\t\tself.lastQuery = null;\n\n\t\tif (self.isSetup) {\n\t\t\tself.addItems(self.items);\n\t\t}\n\n\t\tself.updateOriginalInput();\n\t\tself.refreshState();\n\t}\n\n\t/**\n\t * Updates all state-dependent attributes\n\t * and CSS classes.\n\t */\n\trefreshState() {\n\t\tconst self     = this;\n\n\t\tself.refreshValidityState();\n\n\t\tconst isFull\t= self.isFull();\n\t\tconst isLocked\t= self.isLocked;\n\n\t\tself.wrapper.classList.toggle('rtl',self.rtl);\n\n\n\t\tconst wrap_classList = self.wrapper.classList;\n\n\t\twrap_classList.toggle('focus', self.isFocused)\n\t\twrap_classList.toggle('disabled', self.isDisabled)\n\t\twrap_classList.toggle('readonly', self.isReadOnly)\n\t\twrap_classList.toggle('required', self.isRequired)\n\t\twrap_classList.toggle('invalid', !self.isValid)\n\t\twrap_classList.toggle('locked', isLocked)\n\t\twrap_classList.toggle('full', isFull)\n\t\twrap_classList.toggle('input-active', self.isFocused && !self.isInputHidden)\n\t\twrap_classList.toggle('dropdown-active', self.isOpen)\n\t\twrap_classList.toggle('has-options', isEmptyObject(self.options) )\n\t\twrap_classList.toggle('has-items', self.items.length > 0);\n\n\t}\n\n\n\t/**\n\t * Update the `required` attribute of both input and control input.\n\t *\n\t * The `required` property needs to be activated on the control input\n\t * for the error to be displayed at the right place. `required` also\n\t * needs to be temporarily deactivated on the input since the input is\n\t * hidden and can't show errors.\n\t */\n\trefreshValidityState() {\n\t\tvar self = this;\n\n\t\tif( !self.input.validity ){\n\t\t\treturn;\n\t\t}\n\n\t\tself.isValid = self.input.validity.valid;\n\t\tself.isInvalid = !self.isValid;\n\t}\n\n\t/**\n\t * Determines whether or not more items can be added\n\t * to the control without exceeding the user-defined maximum.\n\t *\n\t * @returns {boolean}\n\t */\n\tisFull() {\n\t\treturn this.settings.maxItems !== null && this.items.length >= this.settings.maxItems;\n\t}\n\n\t/**\n\t * Refreshes the original <select> or <input>\n\t * element to reflect the current state.\n\t *\n\t */\n\tupdateOriginalInput( opts:TomArgObject = {} ){\n\t\tconst self = this;\n\t\tvar option, label;\n\n\t\tconst empty_option = self.input.querySelector('option[value=\"\"]') as HTMLOptionElement;\n\n\t\tif( self.is_select_tag ){\n\n\t\t\tconst selected:HTMLOptionElement[]\t\t= [];\n\t\t\tconst has_selected:number\t\t\t\t= self.input.querySelectorAll('option:checked').length;\n\n\t\t\tfunction AddSelected(option_el:HTMLOptionElement|null, value:string, label:string):HTMLOptionElement{\n\n\t\t\t\tif( !option_el ){\n\t\t\t\t\toption_el = getDom('<option value=\"' + escape_html(value) + '\">' + escape_html(label) + '</option>') as HTMLOptionElement;\n\t\t\t\t}\n\n\t\t\t\t// don't move empty option from top of list\n\t\t\t\t// fixes bug in firefox https://bugzilla.mozilla.org/show_bug.cgi?id=1725293\n\t\t\t\tif( option_el != empty_option ){\n\t\t\t\t\tself.input.append(option_el);\n\t\t\t\t}\n\n\t\t\t\tselected.push(option_el);\n\n\t\t\t\t// marking empty option as selected can break validation\n\t\t\t\t// fixes https://github.com/orchidjs/tom-select/issues/303\n\t\t\t\tif( option_el != empty_option || has_selected > 0 ){\n\t\t\t\t\toption_el.selected = true;\n\t\t\t\t}\n\n\t\t\t\treturn option_el;\n\t\t\t}\n\n\t\t\t// unselect all selected options\n\t\t\tself.input.querySelectorAll('option:checked').forEach((option_el:Element) => {\n\t\t\t\t(<HTMLOptionElement>option_el).selected = false;\n\t\t\t});\n\n\n\t\t\t// nothing selected?\n\t\t\tif( self.items.length == 0 && self.settings.mode == 'single' ){\n\n\t\t\t\tAddSelected(empty_option, \"\", \"\");\n\n\t\t\t// order selected <option> tags for values in self.items\n\t\t\t}else{\n\n\t\t\t\tself.items.forEach((value)=>{\n\t\t\t\t\toption\t\t\t= self.options[value]!;\n\t\t\t\t\tlabel\t\t\t= option[self.settings.labelField] || '';\n\n\t\t\t\t\tif( selected.includes(option.$option) ){\n\t\t\t\t\t\tconst reuse_opt = self.input.querySelector(`option[value=\"${addSlashes(value)}\"]:not(:checked)`) as HTMLOptionElement;\n\t\t\t\t\t\tAddSelected(reuse_opt, value, label);\n\t\t\t\t\t}else{\n\t\t\t\t\t\toption.$option\t= AddSelected(option.$option, value, label);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t} else {\n\t\t\tself.input.value = self.getValue() as string;\n\t\t}\n\n\t\tif (self.isSetup) {\n\t\t\tif (!opts.silent) {\n\t\t\t\tself.trigger('change', self.getValue() );\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Shows the autocomplete dropdown containing\n\t * the available options.\n\t */\n\topen() {\n\t\tvar self = this;\n\n\t\tif (self.isLocked || self.isOpen || (self.settings.mode === 'multi' && self.isFull())) return;\n\t\tself.isOpen = true;\n\t\tsetAttr(self.focus_node,{'aria-expanded': 'true'});\n\t\tself.refreshState();\n\t\tapplyCSS(self.dropdown,{visibility: 'hidden', display: 'block'});\n\t\tself.positionDropdown();\n\t\tapplyCSS(self.dropdown,{visibility: 'visible', display: 'block'});\n\t\tself.focus();\n\t\tself.trigger('dropdown_open', self.dropdown);\n\t}\n\n\t/**\n\t * Closes the autocomplete dropdown menu.\n\t */\n\tclose(setTextboxValue=true) {\n\t\tvar self = this;\n\t\tvar trigger = self.isOpen;\n\n\t\tif( setTextboxValue ){\n\n\t\t\t// before blur() to prevent form onchange event\n\t\t\tself.setTextboxValue();\n\n\t\t\tif (self.settings.mode === 'single' && self.items.length) {\n\t\t\t\tself.inputState();\n\t\t\t}\n\t\t}\n\n\t\tself.isOpen = false;\n\t\tsetAttr(self.focus_node,{'aria-expanded': 'false'});\n\t\tapplyCSS(self.dropdown,{display: 'none'});\n\t\tif( self.settings.hideSelected ){\n\t\t\tself.clearActiveOption();\n\t\t}\n\t\tself.refreshState();\n\n\t\tif (trigger) self.trigger('dropdown_close', self.dropdown);\n\t}\n\n\t/**\n\t * Calculates and applies the appropriate\n\t * position of the dropdown if dropdownParent = 'body'.\n\t * Otherwise, position is determined by css\n\t */\n\tpositionDropdown(){\n\n\t\tif( this.settings.dropdownParent !== 'body' ){\n\t\t\treturn;\n\t\t}\n\n\t\tvar context\t\t\t= this.control;\n\t\tvar rect\t\t\t= context.getBoundingClientRect();\n\t\tvar top\t\t\t\t= context.offsetHeight + rect.top  + window.scrollY;\n\t\tvar left\t\t\t= rect.left + window.scrollX;\n\n\n\t\tapplyCSS(this.dropdown,{\n\t\t\twidth : rect.width + 'px',\n\t\t\ttop   : top + 'px',\n\t\t\tleft  : left + 'px'\n\t\t});\n\n\t}\n\n\t/**\n\t * Resets / clears all selected items\n\t * from the control.\n\t *\n\t */\n\tclear(silent?:boolean) {\n\t\tvar self = this;\n\n\t\tif (!self.items.length) return;\n\n\t\tvar items = self.controlChildren();\n\t\titerate(items,(item:TomItem)=>{\n\t\t\tself.removeItem(item,true);\n\t\t});\n\n\t\tself.inputState();\n\t\tif( !silent ) self.updateOriginalInput();\n\t\tself.trigger('clear');\n\t}\n\n\t/**\n\t * A helper method for inserting an element\n\t * at the current caret position.\n\t *\n\t */\n\tinsertAtCaret(el:HTMLElement) {\n\t\tconst self\t\t= this;\n\t\tconst caret\t\t= self.caretPos;\n\t\tconst target\t= self.control;\n\n\t\ttarget.insertBefore(el, target.children[caret] || null);\n\t\tself.setCaret(caret + 1);\n\t}\n\n\t/**\n\t * Removes the current selected item(s).\n\t *\n\t */\n\tdeleteSelection(e:KeyboardEvent):boolean {\n\t\tvar direction, selection, caret, tail;\n\t\tvar self = this;\n\n\t\tdirection = (e && e.keyCode === constants.KEY_BACKSPACE) ? -1 : 1;\n\t\tselection = getSelection(self.control_input);\n\n\n\t\t// determine items that will be removed\n\t\tconst rm_items:TomItem[]\t= [];\n\n\t\tif (self.activeItems.length) {\n\n\t\t\ttail = getTail(self.activeItems, direction);\n\t\t\tcaret = nodeIndex(tail);\n\n\t\t\tif (direction > 0) { caret++; }\n\n\t\t\titerate(self.activeItems, (item:TomItem) => rm_items.push(item) );\n\n\t\t} else if ((self.isFocused || self.settings.mode === 'single') && self.items.length) {\n\t\t\tconst items = self.controlChildren();\n\t\t\tlet rm_item;\n\t\t\tif( direction < 0 && selection.start === 0 && selection.length === 0 ){\n\t\t\t\trm_item = items[self.caretPos - 1];\n\n\t\t\t}else if( direction > 0 && selection.start === self.inputValue().length ){\n\t\t\t\trm_item = items[self.caretPos];\n\t\t\t}\n\n\t\t\tif( rm_item !== undefined ){\n\t\t\t\trm_items.push( rm_item );\n\t\t\t}\n\t\t}\n\n\t\tif( !self.shouldDelete(rm_items,e) ){\n\t\t\treturn false;\n\t\t}\n\n\t\tpreventDefault(e,true);\n\n\t\t// perform removal\n\t\tif (typeof caret !== 'undefined') {\n\t\t\tself.setCaret(caret);\n\t\t}\n\n\t\twhile( rm_items.length ){\n\t\t\tself.removeItem(rm_items.pop());\n\t\t}\n\n\t\tself.inputState();\n\t\tself.positionDropdown();\n\t\tself.refreshOptions(false);\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Return true if the items should be deleted\n\t */\n\tshouldDelete(items:TomItem[],evt:MouseEvent|KeyboardEvent){\n\n\t\tconst values = items.map(item => item.dataset.value);\n\n\t\t// allow the callback to abort\n\t\tif( !values.length || (typeof this.settings.onDelete === 'function' && this.settings.onDelete(values,evt) === false) ){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Selects the previous / next item (depending on the `direction` argument).\n\t *\n\t * > 0 - right\n\t * < 0 - left\n\t *\n\t */\n\tadvanceSelection(direction:number, e?:MouseEvent|KeyboardEvent) {\n\t\tvar last_active, adjacent, self = this;\n\n\t\tif (self.rtl) direction *= -1;\n\t\tif( self.inputValue().length ) return;\n\n\n\t\t// add or remove to active items\n\t\tif( isKeyDown(constants.KEY_SHORTCUT,e) || isKeyDown('shiftKey',e) ){\n\n\t\t\tlast_active\t\t\t= self.getLastActive(direction);\n\t\t\tif( last_active ){\n\n\t\t\t\tif( !last_active.classList.contains('active') ){\n\t\t\t\t\tadjacent\t\t\t= last_active;\n\t\t\t\t}else{\n\t\t\t\t\tadjacent\t\t\t= self.getAdjacent(last_active,direction,'item');\n\t\t\t\t}\n\n\t\t\t// if no active item, get items adjacent to the control input\n\t\t\t}else if( direction > 0 ){\n\t\t\t\tadjacent\t\t\t= self.control_input.nextElementSibling;\n\t\t\t}else{\n\t\t\t\tadjacent\t\t\t= self.control_input.previousElementSibling;\n\t\t\t}\n\n\n\t\t\tif( adjacent ){\n\t\t\t\tif( adjacent.classList.contains('active') ){\n\t\t\t\t\tself.removeActiveItem(last_active);\n\t\t\t\t}\n\t\t\t\tself.setActiveItemClass(adjacent); // mark as last_active !! after removeActiveItem() on last_active\n\t\t\t}\n\n\t\t// move caret to the left or right\n\t\t}else{\n\t\t\tself.moveCaret(direction);\n\t\t}\n\t}\n\n\tmoveCaret(direction:number){}\n\n\t/**\n\t * Get the last active item\n\t *\n\t */\n\tgetLastActive(direction?:number){\n\n\t\tlet last_active = this.control.querySelector('.last-active');\n\t\tif( last_active ){\n\t\t\treturn last_active;\n\t\t}\n\n\n\t\tvar result = this.control.querySelectorAll('.active');\n\t\tif( result ){\n\t\t\treturn getTail(result,direction);\n\t\t}\n\t}\n\n\n\t/**\n\t * Moves the caret to the specified index.\n\t *\n\t * The input must be moved by leaving it in place and moving the\n\t * siblings, due to the fact that focus cannot be restored once lost\n\t * on mobile webkit devices\n\t *\n\t */\n\tsetCaret(new_pos:number) {\n\t\tthis.caretPos = this.items.length;\n\t}\n\n\t/**\n\t * Return list of item dom elements\n\t *\n\t */\n\tcontrolChildren():TomItem[]{\n\t\treturn Array.from( this.control.querySelectorAll('[data-ts-item]') ) as TomItem[];\n\t}\n\n\t/**\n\t * Disables user input on the control. Used while\n\t * items are being asynchronously created.\n\t */\n\tlock() {\n\t\tthis.setLocked(true);\n\t}\n\n\t/**\n\t * Re-enables user input on the control.\n\t */\n\tunlock() {\n\t\tthis.setLocked(false);\n\t}\n\n\t/**\n\t * Disable or enable user input on the control\n\t */\n\tsetLocked( lock:boolean = this.isReadOnly || this.isDisabled ){\n\t\tthis.isLocked = lock;\n\t\tthis.refreshState();\n\t}\n\n\t/**\n\t * Disables user input on the control completely.\n\t * While disabled, it cannot receive focus.\n\t */\n\tdisable() {\n\t\tthis.setDisabled(true);\n\t\tthis.close();\n\t}\n\n\t/**\n\t * Enables the control so that it can respond\n\t * to focus and user input.\n\t */\n\tenable() {\n\t\tthis.setDisabled(false);\n\t}\n\n\tsetDisabled(disabled:boolean){\n\t\tthis.focus_node.tabIndex\t\t= disabled ? -1 : this.tabIndex;\n\t\tthis.isDisabled\t\t\t\t\t= disabled;\n\t\tthis.input.disabled\t\t\t\t= disabled;\n\t\tthis.control_input.disabled\t\t= disabled;\n\t\tthis.setLocked();\n\t}\n\n\tsetReadOnly(isReadOnly:boolean){\n\t\tthis.isReadOnly\t\t\t\t\t= isReadOnly;\n\t\tthis.input.readOnly\t\t\t\t= isReadOnly;\n\t\tthis.control_input.readOnly\t\t= isReadOnly;\n\t\tthis.setLocked();\n\t}\n\n\t/**\n\t * Completely destroys the control and\n\t * unbinds all event listeners so that it can\n\t * be garbage collected.\n\t */\n\tdestroy() {\n\t\tvar self = this;\n\t\tvar revertSettings = self.revertSettings;\n\n\t\tself.trigger('destroy');\n\t\tself.off();\n\t\tself.wrapper.remove();\n\t\tself.dropdown.remove();\n\n\t\tself.input.innerHTML = revertSettings.innerHTML;\n\t\tself.input.tabIndex = revertSettings.tabIndex;\n\n\t\tremoveClasses(self.input,'tomselected','ts-hidden-accessible');\n\n\t\tself._destroy();\n\n\t\tdelete self.input.tomselect;\n\t}\n\n\t/**\n\t * A helper method for rendering \"item\" and\n\t * \"option\" templates, given the data.\n\t *\n\t */\n\trender( templateName:TomTemplateNames, data?:any ):null|HTMLElement{\n\t\tvar id, html;\n\t\tconst self = this;\n\n\t\tif( typeof this.settings.render[templateName] !== 'function' ){\n\t\t\treturn null;\n\t\t}\n\n\t\t// render markup\n\t\thtml = self.settings.render[templateName].call(this, data, escape_html);\n\n\t\tif( !html ){\n\t\t\treturn null;\n\t\t}\n\n\t\thtml = getDom( html );\n\n\t\t// add mandatory attributes\n\t\tif (templateName === 'option' || templateName === 'option_create') {\n\n\t\t\tif( data[self.settings.disabledField] ){\n\t\t\t\tsetAttr(html,{'aria-disabled':'true'});\n\t\t\t}else{\n\t\t\t\tsetAttr(html,{'data-selectable': ''});\n\t\t\t}\n\n\t\t}else if (templateName === 'optgroup') {\n\t\t\tid = data.group[self.settings.optgroupValueField];\n\t\t\tsetAttr(html,{'data-group': id});\n\t\t\tif(data.group[self.settings.disabledField]) {\n\t\t\t\tsetAttr(html,{'data-disabled': ''});\n\t\t\t}\n\t\t}\n\n\t\tif (templateName === 'option' || templateName === 'item') {\n\t\t\tconst value\t= get_hash(data[self.settings.valueField]);\n\t\t\tsetAttr(html,{'data-value': value });\n\n\n\t\t\t// make sure we have some classes if a template is overwritten\n\t\t\tif( templateName === 'item' ){\n\t\t\t\taddClasses(html,self.settings.itemClass);\n\t\t\t\tsetAttr(html,{'data-ts-item':''});\n\t\t\t}else{\n\t\t\t\taddClasses(html,self.settings.optionClass);\n\t\t\t\tsetAttr(html,{\n\t\t\t\t\trole:'option',\n\t\t\t\t\tid:data.$id\n\t\t\t\t});\n\n\t\t\t\t// update cache\n\t\t\t\tdata.$div = html;\n\t\t\t\tself.options[value] = data;\n\t\t\t}\n\n\n\t\t}\n\n\t\treturn html;\n\n\t}\n\n\n\t/**\n\t * Type guarded rendering\n\t *\n\t */\n\t_render( templateName:TomTemplateNames, data?:any ):HTMLElement{\n\t\tconst html = this.render(templateName, data);\n\n\t\tif( html == null ){\n\t\t\tthrow 'HTMLElement expected';\n\t\t}\n\t\treturn html;\n\t}\n\n\n\t/**\n\t * Clears the render cache for a template. If\n\t * no template is given, clears all render\n\t * caches.\n\t *\n\t */\n\tclearCache():void{\n\n\t\titerate(this.options, (option:TomOption)=>{\n\t\t\tif( option.$div ){\n\t\t\t\toption.$div.remove();\n\t\t\t\tdelete option.$div;\n\t\t\t}\n\t\t});\n\n\t}\n\n\t/**\n\t * Removes a value from item and option caches\n\t *\n\t */\n\tuncacheValue(value:string){\n\n\t\tconst option_el\t\t\t= this.getOption(value);\n\t\tif( option_el ) option_el.remove();\n\n\t}\n\n\t/**\n\t * Determines whether or not to display the\n\t * create item prompt, given a user input.\n\t *\n\t */\n\tcanCreate( input:string ):boolean {\n\t\treturn this.settings.create && (input.length > 0) && (this.settings.createFilter as TomCreateFilter ).call(this, input);\n\t}\n\n\n\t/**\n\t * Wraps this.`method` so that `new_fn` can be invoked 'before', 'after', or 'instead' of the original method\n\t *\n\t * this.hook('instead','onKeyDown',function( arg1, arg2 ...){\n\t *\n\t * });\n\t */\n\thook( when:string, method:string, new_fn:any ){\n\t\tvar self = this;\n\t\tvar orig_method = self[method];\n\n\n\t\tself[method] = function(){\n\t\t\tvar result, result_new;\n\n\t\t\tif( when === 'after' ){\n\t\t\t\tresult = orig_method.apply(self, arguments);\n\t\t\t}\n\n\t\t\tresult_new = new_fn.apply(self, arguments );\n\n\t\t\tif( when === 'instead' ){\n\t\t\t\treturn result_new;\n\t\t\t}\n\n\t\t\tif( when === 'before' ){\n\t\t\t\tresult = orig_method.apply(self, arguments);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\n\t}\n\n};\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "/**\n * Plugin: \"change_listener\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport { addEvent } from '../../utils.ts';\n\nexport default function(this:TomSelect) {\n\taddEvent(this.input,'change',()=>{\n\t\tthis.sync();\n\t});\n};\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * Plugin: \"checkbox_options\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport { TomTemplate } from '../../types/index.ts';\nimport { preventDefault, hash_key } from '../../utils.ts';\nimport { getDom } from '../../vanilla.ts';\nimport { CBOptions } from './types.ts';\n\n\nexport default function(this:TomSelect, userOptions:CBOptions) {\n\tvar self = this;\n\tvar orig_onOptionSelect = self.onOptionSelect;\n\n\tself.settings.hideSelected = false;\n\n\tconst cbOptions : CBOptions = Object.assign({\n\t\t// so that the user may add different ones as well\n\t\tclassName             : \"tomselect-checkbox\",\n\n\t\t// the following default to the historic plugin's values\n\t\tcheckedClassNames     : undefined,\n\t\tuncheckedClassNames   : undefined,\n\t}, userOptions);\n\n\n\tvar UpdateChecked = function(checkbox:HTMLInputElement, toCheck : boolean) {\n\t\tif( toCheck ){\n\t\t\tcheckbox.checked = true;\n\t\t\tif (cbOptions.uncheckedClassNames) {\n\t\t\t\tcheckbox.classList.remove(...cbOptions.uncheckedClassNames);\n\t\t\t}\n\t\t\tif (cbOptions.checkedClassNames) {\n\t\t\t\tcheckbox.classList.add(...cbOptions.checkedClassNames);\n\t\t\t}\n\t\t}else{\n\t\t\tcheckbox.checked = false;\n\t\t\tif (cbOptions.checkedClassNames) {\n\t\t\t\tcheckbox.classList.remove(...cbOptions.checkedClassNames);\n\t\t\t}\n\t\t\tif (cbOptions.uncheckedClassNames) {\n\t\t\t\tcheckbox.classList.add(...cbOptions.uncheckedClassNames);\n\t\t\t}\n\t\t}\n\t}\n\n\t// update the checkbox for an option\n\tvar UpdateCheckbox = function(option:HTMLElement){\n\t\tsetTimeout(()=>{\n\t\t\tvar checkbox = option.querySelector('input.' + cbOptions.className);\n\t\t\tif( checkbox instanceof HTMLInputElement ){\n\t\t\t\tUpdateChecked(checkbox, option.classList.contains('selected'));\n\t\t\t}\n\t\t},1);\n\t};\n\n\t// add checkbox to option template\n\tself.hook('after','setupTemplates',() => {\n\n\t\tvar orig_render_option = self.settings.render.option;\n\n\t\tself.settings.render.option = ((data, escape_html) => {\n\t\t\tvar rendered = getDom(orig_render_option.call(self, data, escape_html));\n\t\t\tvar checkbox = document.createElement('input');\n\t\t\tif (cbOptions.className) {\n\t\t\t\tcheckbox.classList.add(cbOptions.className);\n\t\t\t}\n\t\t\tcheckbox.addEventListener('click',function(evt){\n\t\t\t\tpreventDefault(evt);\n\t\t\t});\n\n\t\t\tcheckbox.type = 'checkbox';\n\t\t\tconst hashed = hash_key(data[self.settings.valueField]);\n\n\t\t\tUpdateChecked(checkbox, !!(hashed && self.items.indexOf(hashed) > -1) );\n\n\t\t\trendered.prepend(checkbox);\n\t\t\treturn rendered;\n\t\t}) satisfies TomTemplate;\n\t});\n\n\t// uncheck when item removed\n\tself.on('item_remove',(value:string) => {\n\t\tvar option = self.getOption(value);\n\n\t\tif( option ){ // if dropdown hasn't been opened yet, the option won't exist\n\t\t\toption.classList.remove('selected'); // selected class won't be removed yet\n\t\t\tUpdateCheckbox(option);\n\t\t}\n\t});\n\n\t// check when item added\n\tself.on('item_add',(value:string) => {\n\t\tvar option = self.getOption(value);\n\n\t\tif( option ){ // if dropdown hasn't been opened yet, the option won't exist\n\t\t\tUpdateCheckbox(option);\n\t\t}\n\t});\n\n\n\t// remove items when selected option is clicked\n\tself.hook('instead','onOptionSelect',( evt:KeyboardEvent, option:HTMLElement )=>{\n\n\t\tif( option.classList.contains('selected') ){\n\t\t\toption.classList.remove('selected')\n\t\t\tself.removeItem(option.dataset.value);\n\t\t\tself.refreshOptions();\n\t\t\tpreventDefault(evt,true);\n\t\t\treturn;\n        }\n\n\t\torig_onOptionSelect.call(self, evt, option);\n\n\t\tUpdateCheckbox(option);\n\t});\n\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * Plugin: \"dropdown_header\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport { getDom } from '../../vanilla.ts';\nimport { CBOptions } from './types.ts';\n\nexport default function(this:TomSelect, userOptions:CBOptions) {\n\tconst self = this;\n\n\tconst options = Object.assign({\n\t\tclassName: 'clear-button',\n\t\ttitle: 'Clear All',\n\t\thtml: (data:CBOptions) => {\n\t\t\treturn `<div class=\"${data.className}\" title=\"${data.title}\">&#10799;</div>`;\n\t\t}\n\t}, userOptions);\n\n\tself.on('initialize',()=>{\n\t\tvar button = getDom(options.html(options));\n\t\tbutton.addEventListener('click',(evt)=>{\n\n\t\t\tif( self.isLocked ) return;\n\n\t\t\tself.clear();\n\n\t\t\tif( self.settings.mode === 'single' && self.settings.allowEmptyOption ){\n\t\t\t\tself.addItem('');\n\t\t\t}\n\n\t\t\tevt.preventDefault();\n\t\t\tevt.stopPropagation();\n\t\t});\n\t\tself.control.appendChild(button);\n\t});\n\n};\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * Plugin: \"drag_drop\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport { TomOption, TomItem } from '../../types/index.ts';\nimport { escape_html, preventDefault, addEvent } from '../../utils.ts';\nimport { getDom, setAttr } from '../../vanilla.ts';\n\n\nconst insertAfter = (referenceNode:Element, newNode:Element) => {\n\treferenceNode.parentNode?.insertBefore(newNode, referenceNode.nextSibling);\n}\n\nconst insertBefore = (referenceNode:Element, newNode:Element) => {\n\treferenceNode.parentNode?.insertBefore(newNode, referenceNode);\n}\n\nconst isBefore = (referenceNode:Element|undefined|null, newNode:Element|undefined|null) =>{\n\t\n\tdo{\n\t\tnewNode = newNode?.previousElementSibling;\n\n\t\tif( referenceNode == newNode ){\n\t\t\treturn true;\n\t\t}\n\n\t}while( newNode && newNode.previousElementSibling );\n\n\treturn false;\n}\n\nexport default function(this:TomSelect) {\n\tvar self = this;\n\tif (self.settings.mode !== 'multi') return;\n\n\tvar orig_lock\t\t= self.lock;\n\tvar orig_unlock\t\t= self.unlock;\n\tlet sortable = true;\n\t\tlet drag_item:TomItem|undefined;\n\n\n\t/**\n\t * Add draggable attribute to item\n\t */\n\tself.hook('after','setupTemplates',() => {\n\n\t\tvar orig_render_item = self.settings.render.item;\n\n\t\tself.settings.render.item = (data:TomOption, escape:typeof escape_html) => {\n\t\t\tconst item = getDom(orig_render_item.call(self, data, escape)) as TomItem;\n\t\t\tsetAttr(item,{'draggable':'true'});\n\n\n\t\t\t// prevent doc_mousedown (see tom-select.ts)\n\t\t\tconst mousedown = (evt:Event) => {\n\t\t\t\tif( !sortable ) preventDefault(evt);\n\t\t\t\tevt.stopPropagation();\n\t\t\t}\n\n\t\t\tconst dragStart = (evt:Event) => {\n\t\t\t\tdrag_item = item;\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\titem.classList.add('ts-dragging');\n\t\t\t\t}, 0);\n\t\t\t\t\n\t\t\t}\n\n\t\t\tconst dragOver = (evt:Event) =>{\n\t\t\t\tevt.preventDefault();\n\t\t\t\titem.classList.add('ts-drag-over');\n\t\t\t\tmoveitem(item,drag_item);\n\t\t\t}\n\n\t\t\tconst dragLeave = () => {\n\t\t\t\titem.classList.remove('ts-drag-over');\n\t\t\t}\n\n\t\t\tconst moveitem = (targetitem:TomItem, dragitem:TomItem|undefined) => {\n\t\t\t\tif( dragitem === undefined ) return;\n\t\t\t\t\n\t\t\t\tif( isBefore(dragitem,item) ){\n\t\t\t\t\tinsertAfter(targetitem,dragitem);\n\t\t\t\t}else{\n\t\t\t\t\tinsertBefore(targetitem,dragitem);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst dragend = () => {\n\t\t\t\tdocument.querySelectorAll('.ts-drag-over').forEach(el=> el.classList.remove('ts-drag-over'));\n\t\t\t\tdrag_item?.classList.remove('ts-dragging');\n\t\t\t\tdrag_item = undefined;\n\n\t\t\t\tvar values:string[] = [];\n\t\t\t\tself.control.querySelectorAll(`[data-value]`).forEach((el:Element)=> {\n\t\t\t\t\tif( (<HTMLOptionElement>el).dataset.value ){\n\t\t\t\t\t\tlet value = (<HTMLOptionElement>el).dataset.value;\n\t\t\t\t\t\tif( value ){\n\t\t\t\t\t\t\tvalues.push(value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tself.setValue(values);\n\t\t\t}\t\n\n\n\t\t\taddEvent(item,'mousedown', mousedown);\n\t\t\taddEvent(item,'dragstart', dragStart);\n\t\t\taddEvent(item,'dragenter', dragOver)\n\t\t\taddEvent(item,'dragover', dragOver);\n\t\t\taddEvent(item,'dragleave', dragLeave);\n\t\t\taddEvent(item,'dragend', dragend);\n\t\t\t\t\n\t\t\treturn item;\n\t\t}\t\n\t});\n\n\n\n\tself.hook('instead','lock',()=>{\n\t\tsortable = false;\n\t\treturn orig_lock.call(self);\n\t});\n\n\tself.hook('instead','unlock',()=>{\n\t\tsortable = true;\n\t\treturn orig_unlock.call(self);\n\t});\n\n};\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * Plugin: \"dropdown_header\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport { getDom } from '../../vanilla.ts';\nimport { preventDefault } from '../../utils.ts';\nimport { DHOptions } from './types.ts';\n\nexport default function(this:TomSelect, userOptions:DHOptions) {\n\tconst self = this;\n\n\tconst options = Object.assign({\n\t\ttitle         : 'Untitled',\n\t\theaderClass   : 'dropdown-header',\n\t\ttitleRowClass : 'dropdown-header-title',\n\t\tlabelClass    : 'dropdown-header-label',\n\t\tcloseClass    : 'dropdown-header-close',\n\n\t\thtml: (data:DHOptions) => {\n\t\t\treturn (\n\t\t\t\t'<div class=\"' + data.headerClass + '\">' +\n\t\t\t\t\t'<div class=\"' + data.titleRowClass + '\">' +\n\t\t\t\t\t\t'<span class=\"' + data.labelClass + '\">' + data.title + '</span>' +\n\t\t\t\t\t\t'<a class=\"' + data.closeClass + '\">&times;</a>' +\n\t\t\t\t\t'</div>' +\n\t\t\t\t'</div>'\n\t\t\t);\n\t\t}\n\t}, userOptions);\n\n\tself.on('initialize',()=>{\n\t\tvar header = getDom(options.html(options));\n\n\t\tvar close_link = header.querySelector('.'+options.closeClass);\n\t\tif( close_link ){\n\t\t\tclose_link.addEventListener('click',(evt)=>{\n\t\t\t\tpreventDefault(evt,true);\n\t\t\t\tself.close();\n\t\t\t});\n\t\t}\n\n\t\tself.dropdown.insertBefore(header, self.dropdown.firstChild);\n\t});\n\n};\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * Plugin: \"dropdown_input\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport { nodeIndex, removeClasses } from '../../vanilla.ts';\n\n\nexport default function(this:TomSelect) {\n\tvar self = this;\n\n\t/**\n\t * Moves the caret to the specified index.\n\t *\n\t * The input must be moved by leaving it in place and moving the\n\t * siblings, due to the fact that focus cannot be restored once lost\n\t * on mobile webkit devices\n\t *\n\t */\n\tself.hook('instead','setCaret',(new_pos:number) => {\n\n\t\tif( self.settings.mode === 'single' || !self.control.contains(self.control_input) ) {\n\t\t\tnew_pos = self.items.length;\n\t\t} else {\n\t\t\tnew_pos = Math.max(0, Math.min(self.items.length, new_pos));\n\n\t\t\tif( new_pos != self.caretPos && !self.isPending ){\n\n\t\t\t\tself.controlChildren().forEach((child,j) => {\n\t\t\t\t\tif( j < new_pos ){\n\t\t\t\t\t\tself.control_input.insertAdjacentElement('beforebegin', child );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.control.appendChild( child );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tself.caretPos = new_pos;\n\t});\n\n\tself.hook('instead','moveCaret',(direction:number) => {\n\n\t\tif( !self.isFocused ) return;\n\n\t\t// move caret before or after selected items\n\t\tconst last_active\t\t= self.getLastActive(direction);\n\t\tif( last_active ){\n\t\t\tconst idx = nodeIndex(last_active);\n\t\t\tself.setCaret(direction > 0 ? idx + 1: idx);\n\t\t\tself.setActiveItem();\n\t\t\tremoveClasses(last_active as HTMLElement,'last-active');\n\n\t\t// move caret left or right of current position\n\t\t}else{\n\t\t\tself.setCaret(self.caretPos + direction);\n\n\t\t}\n\n\t});\n\n};\n", "export const KEY_A\t\t\t\t= 65;\nexport const KEY_RETURN\t\t\t= 13;\nexport const KEY_ESC\t\t\t= 27;\nexport const KEY_LEFT\t\t\t= 37;\nexport const KEY_UP\t\t\t\t= 38;\nexport const KEY_RIGHT\t\t\t= 39;\nexport const KEY_DOWN\t\t\t= 40;\nexport const KEY_BACKSPACE\t\t= 8;\nexport const KEY_DELETE\t\t\t= 46;\nexport const KEY_TAB\t\t\t= 9;\n\nexport const IS_MAC      \t\t= typeof navigator === 'undefined' ? false : /Mac/.test(navigator.userAgent);\nexport const KEY_SHORTCUT\t\t= IS_MAC ? 'metaKey' : 'ctrlKey'; // ctrl key or apple key for ma\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * Plugin: \"dropdown_input\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport * as constants from '../../constants.ts';\nimport { getDom, addClasses } from '../../vanilla.ts';\nimport { addEvent, preventDefault } from '../../utils.ts';\n\n\nexport default function(this:TomSelect) {\n\tconst self = this;\n\n\tself.settings.shouldOpen = true; // make sure the input is shown even if there are no options to display in the dropdown\n\n\tself.hook('before','setup',()=>{\n\t\tself.focus_node\t\t= self.control;\n\n\t\taddClasses( self.control_input, 'dropdown-input');\n\n\t \tconst div = getDom('<div class=\"dropdown-input-wrap\">');\n\t\tdiv.append(self.control_input);\n\t\tself.dropdown.insertBefore(div, self.dropdown.firstChild);\n\n\t\t// set a placeholder in the select control\n\t\tconst placeholder = getDom('<input class=\"items-placeholder\" tabindex=\"-1\" />') as HTMLInputElement;\n\t\tplaceholder.placeholder = self.settings.placeholder ||'';\n\t\tself.control.append(placeholder);\n\n\t});\n\n\n\tself.on('initialize',()=>{\n\n\t\t// set tabIndex on control to -1, otherwise [shift+tab] will put focus right back on control_input\n\t\tself.control_input.addEventListener('keydown',(evt:KeyboardEvent) =>{\n\t\t//addEvent(self.control_input,'keydown' as const,(evt:KeyboardEvent) =>{\n\t\t\tswitch( evt.keyCode ){\n\t\t\t\tcase constants.KEY_ESC:\n\t\t\t\t\tif (self.isOpen) {\n\t\t\t\t\t\tpreventDefault(evt,true);\n\t\t\t\t\t\tself.close();\n\t\t\t\t\t}\n\t\t\t\t\tself.clearActiveItems();\n\t\t\t\treturn;\n\t\t\t\tcase constants.KEY_TAB:\n\t\t\t\t\tself.focus_node.tabIndex = -1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\treturn self.onKeyDown.call(self,evt);\n\t\t});\n\n\t\tself.on('blur',()=>{\n\t\t\tself.focus_node.tabIndex = self.isDisabled ? -1 : self.tabIndex;\n\t\t});\n\n\n\t\t// give the control_input focus when the dropdown is open\n\t\tself.on('dropdown_open',() =>{\n\t\t\tself.control_input.focus();\n\t\t});\n\n\t\t// prevent onBlur from closing when focus is on the control_input\n\t\tconst orig_onBlur = self.onBlur;\n\t\tself.hook('instead','onBlur',(evt?:FocusEvent)=>{\n\t\t\tif( evt && evt.relatedTarget == self.control_input ) return;\n\t\t\treturn orig_onBlur.call(self);\n\t\t});\n\n\t\taddEvent(self.control_input,'blur', () => self.onBlur() );\n\n\t\t// return focus to control to allow further keyboard input\n\t\tself.hook('before','close',() =>{\n\n\t\t\tif( !self.isOpen ) return;\n\t\t\tself.focus_node.focus({preventScroll: true});\n\t\t});\n\n\t});\n\n};\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "/**\n * Plugin: \"input_autogrow\" (Tom Select)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport { addEvent } from '../../utils.ts';\n\nexport default function(this:TomSelect) {\n\tvar self\t\t\t\t\t= this;\n\n\tself.on('initialize',()=>{\n\n\n\t\tvar test_input\t\t\t\t= document.createElement('span');\n\t\tvar control\t\t\t\t\t= self.control_input;\n\t\ttest_input.style.cssText\t= 'position:absolute; top:-99999px; left:-99999px; width:auto; padding:0; white-space:pre; ';\n\n\t\tself.wrapper.appendChild(test_input);\n\n\n\t\tvar transfer_styles\t\t\t= [ 'letterSpacing', 'fontSize', 'fontFamily', 'fontWeight', 'textTransform' ];\n\n\t\tfor( const style_name of transfer_styles ){\n\t\t\t// @ts-ignore TS7015 https://stackoverflow.com/a/50506154/697576\n\t\t\ttest_input.style[style_name] = control.style[style_name];\n\t\t}\n\n\n\t\t/**\n\t\t * Set the control width\n\t\t *\n\t\t */\n\t\tvar resize = ()=>{\n\t\t\ttest_input.textContent\t= control.value;\n\t\t\tcontrol.style.width\t\t= test_input.clientWidth+'px';\n\t\t};\n\n\t\tresize();\n\t\tself.on('update item_add item_remove',resize);\n\t\taddEvent(control,'input', resize );\n\t\taddEvent(control,'keyup', resize );\n\t\taddEvent(control,'blur', resize );\n\t\taddEvent(control,'update', resize );\n\t});\n\n};\n", "/**\n * Plugin: \"input_autogrow\" (Tom Select)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\n\nexport default function(this:TomSelect) {\n\tvar self = this;\n\tvar orig_deleteSelection = self.deleteSelection;\n\n\tthis.hook('instead','deleteSelection',(evt:KeyboardEvent) => {\n\n\t\tif( self.activeItems.length ){\n\t\t\treturn orig_deleteSelection.call(self, evt);\n\t\t}\n\n\t\treturn false;\n\t});\n\n};\n", "/**\n * Plugin: \"no_active_items\" (Tom Select)\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\n\nexport default function(this:TomSelect) {\n\tthis.hook('instead','setActiveItem',() => {});\n\tthis.hook('instead','selectAll',() => {});\n};\n", "export const KEY_A\t\t\t\t= 65;\nexport const KEY_RETURN\t\t\t= 13;\nexport const KEY_ESC\t\t\t= 27;\nexport const KEY_LEFT\t\t\t= 37;\nexport const KEY_UP\t\t\t\t= 38;\nexport const KEY_RIGHT\t\t\t= 39;\nexport const KEY_DOWN\t\t\t= 40;\nexport const KEY_BACKSPACE\t\t= 8;\nexport const KEY_DELETE\t\t\t= 46;\nexport const KEY_TAB\t\t\t= 9;\n\nexport const IS_MAC      \t\t= typeof navigator === 'undefined' ? false : /Mac/.test(navigator.userAgent);\nexport const KEY_SHORTCUT\t\t= IS_MAC ? 'metaKey' : 'ctrlKey'; // ctrl key or apple key for ma\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * Plugin: \"optgroup_columns\" (Tom Select.js)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport * as constants from '../../constants.ts';\nimport { parentMatch, nodeIndex } from '../../vanilla.ts';\n\nexport default function(this:TomSelect) {\n\tvar self = this;\n\n\tvar orig_keydown = self.onKeyDown;\n\n\tself.hook('instead','onKeyDown',(evt:KeyboardEvent)=>{\n\t\tvar index, option, options, optgroup;\n\n\t\tif( !self.isOpen || !(evt.keyCode === constants.KEY_LEFT || evt.keyCode === constants.KEY_RIGHT)) {\n\t\t\treturn orig_keydown.call(self,evt);\n\t\t}\n\n\t\tself.ignoreHover\t= true;\n\t\toptgroup\t\t\t= parentMatch(self.activeOption,'[data-group]');\n\t\tindex\t\t\t\t= nodeIndex(self.activeOption,'[data-selectable]');\n\n\t\tif( !optgroup ){\n\t\t\treturn;\n\t\t}\n\n\t\tif( evt.keyCode === constants.KEY_LEFT ){\n\t\t\toptgroup = optgroup.previousSibling;\n\t\t} else {\n\t\t\toptgroup = optgroup.nextSibling;\n\t\t}\n\n\t\tif( !optgroup ){\n\t\t\treturn;\n\t\t}\n\n\t\toptions\t\t\t\t= (<HTMLOptGroupElement>optgroup).querySelectorAll('[data-selectable]');\n\t\toption\t\t\t\t= options[ Math.min(options.length - 1, index) ] as HTMLElement;\n\n\t\tif( option ){\n\t\t\tself.setActiveOption(option);\n\t\t}\n\n\t});\n\n};\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * Plugin: \"remove_button\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport { getDom } from '../../vanilla.ts';\nimport { escape_html, preventDefault, addEvent } from '../../utils.ts';\nimport { TomOption, TomItem } from '../../types/index.ts';\nimport { RBOptions } from './types.ts';\n\nexport default function(this:TomSelect, userOptions:RBOptions) {\n\n\tconst options = Object.assign({\n\t\t\tlabel     : '&times;',\n\t\t\ttitle     : 'Remove',\n\t\t\tclassName : 'remove',\n\t\t\tappend    : true\n\t\t}, userOptions);\n\n\n\t//options.className = 'remove-single';\n\tvar self\t\t\t= this;\n\n\t// override the render method to add remove button to each item\n\tif( !options.append ){\n\t\treturn;\n\t}\n\n\tvar html = '<a href=\"javascript:void(0)\" class=\"' + options.className + '\" tabindex=\"-1\" title=\"' + escape_html(options.title) + '\">' + options.label + '</a>';\n\n\tself.hook('after','setupTemplates',() => {\n\n\t\tvar orig_render_item = self.settings.render.item;\n\n\t\tself.settings.render.item = (data:TomOption, escape:typeof escape_html) => {\n\n\t\t\tvar item = getDom(orig_render_item.call(self, data, escape)) as TomItem;\n\n\t\t\tvar close_button = getDom(html);\n\t\t\titem.appendChild(close_button);\n\n\t\t\taddEvent(close_button,'mousedown',(evt) => {\n\t\t\t\tpreventDefault(evt,true);\n\t\t\t});\n\n\t\t\taddEvent(close_button,'click',(evt) => {\n\n\t\t\t\tif( self.isLocked ) return;\n\n\t\t\t\t// propagating will trigger the dropdown to show for single mode\n\t\t\t\tpreventDefault(evt,true);\n\n\t\t\t\tif( self.isLocked ) return;\n\t\t\t\tif( !self.shouldDelete([item],evt as MouseEvent) ) return;\n\n\t\t\t\tself.removeItem(item);\n\t\t\t\tself.refreshOptions(false);\n\t\t\t\tself.inputState();\n\t\t\t});\n\n\t\t\treturn item;\n\t\t};\n\n\t});\n\n\n};\n", "/**\n * Plugin: \"restore_on_backspace\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\nimport type TomSelect from '../../tom-select.ts';\nimport { TomOption } from '../../types/index.ts';\n\ntype TPluginOptions = {\n\ttext?:(option:TomOption)=>string,\n};\n\nexport default function(this:TomSelect, userOptions:TPluginOptions) {\n\tconst self = this;\n\n\tconst options = Object.assign({\n\t\ttext: (option:TomOption) => {\n\t\t\treturn option[self.settings.labelField];\n\t\t}\n\t},userOptions);\n\n\tself.on('item_remove',function(value:string){\n\t\tif( !self.isFocused ){\n\t\t\treturn;\n\t\t}\n\n\t\tif( self.control_input.value.trim() === '' ){\n\t\t\tvar option = self.options[value];\n\t\t\tif( option ){\n\t\t\t\tself.setTextboxValue(options.text.call(self, option));\n\t\t\t}\n\t\t}\n\t});\n\n};\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "/**\n * Plugin: \"restore_on_backspace\" (Tom Select)\n * Copyright (c) contributors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use this\n * file except in compliance with the License. You may obtain a copy of the License at:\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n *\n */\n\nimport type TomSelect from '../../tom-select.ts';\nimport { TomOption } from '../../types/index.ts';\nimport { addClasses } from '../../vanilla.ts';\n\nexport default function(this:TomSelect) {\n\tconst self\t\t\t\t\t\t\t= this;\n\tconst orig_canLoad\t\t\t\t\t= self.canLoad;\n\tconst orig_clearActiveOption\t\t= self.clearActiveOption;\n\tconst orig_loadCallback\t\t\t\t= self.loadCallback;\n\n\tvar pagination:{[key:string]:any}\t= {};\n\tvar dropdown_content:HTMLElement;\n\tvar loading_more\t\t\t\t\t= false;\n\tvar load_more_opt:HTMLElement;\n\tvar default_values: string[]\t\t= [];\n\n\tif( !self.settings.shouldLoadMore ){\n\n\t\t// return true if additional results should be loaded\n\t\tself.settings.shouldLoadMore = ():boolean=>{\n\n\t\t\tconst scroll_percent = dropdown_content.clientHeight / (dropdown_content.scrollHeight - dropdown_content.scrollTop);\n\t\t\tif( scroll_percent > 0.9 ){\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif( self.activeOption ){\n\t\t\t\tvar selectable\t= self.selectable();\n\t\t\t\tvar index\t\t= Array.from(selectable).indexOf(self.activeOption);\n\t\t\t\tif( index >= (selectable.length-2) ){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\n\tif( !self.settings.firstUrl ){\n\t\tthrow 'virtual_scroll plugin requires a firstUrl() method';\n\t}\n\n\n\t// in order for virtual scrolling to work,\n\t// options need to be ordered the same way they're returned from the remote data source\n\tself.settings.sortField\t\t\t= [{field:'$order'},{field:'$score'}];\n\n\n\t// can we load more results for given query?\n\tconst canLoadMore = (query:string):boolean => {\n\n\t\tif( typeof self.settings.maxOptions === 'number' && dropdown_content.children.length >= self.settings.maxOptions ){\n\t\t\treturn false;\n\t\t}\n\n\t\tif( (query in pagination) && pagination[query] ){\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\tconst clearFilter = (option:TomOption, value:string):boolean => {\n\t\tif( self.items.indexOf(value) >= 0 || default_values.indexOf(value) >= 0 ){\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\n\n\t// set the next url that will be\n\tself.setNextUrl = (value:string,next_url:any):void => {\n\t\tpagination[value] = next_url;\n\t};\n\n\t// getUrl() to be used in settings.load()\n\tself.getUrl = (query:string):any =>{\n\n\t\tif( query in pagination ){\n\t\t\tconst next_url = pagination[query];\n\t\t\tpagination[query] = false;\n\t\t\treturn next_url;\n\t\t}\n\n\t\t// if the user goes back to a previous query\n\t\t// we need to load the first page again\n\t\tself.clearPagination();\n\n\t\treturn self.settings.firstUrl.call(self,query);\n\t};\n\n\t// clear pagination\n\tself.clearPagination = ():void =>{\n\t\tpagination = {};\n\t};\n\n\t// don't clear the active option (and cause unwanted dropdown scroll)\n\t// while loading more results\n\tself.hook('instead','clearActiveOption',()=>{\n\n\t\tif( loading_more ){\n\t\t\treturn;\n\t\t}\n\n\t\treturn orig_clearActiveOption.call(self);\n\t});\n\n\t// override the canLoad method\n\tself.hook('instead','canLoad',(query:string)=>{\n\n\t\t// first time the query has been seen\n\t\tif( !(query in pagination) ){\n\t\t\treturn orig_canLoad.call(self,query);\n\t\t}\n\n\t\treturn canLoadMore(query);\n\t});\n\n\n\t// wrap the load\n\tself.hook('instead','loadCallback',( options:TomOption[], optgroups:TomOption[])=>{\n\n\t\tif( !loading_more ){\n\t\t\tself.clearOptions(clearFilter);\n\t\t}else if( load_more_opt ){\n\t\t\tconst first_option = options[0];\n\t\t\tif( first_option !== undefined ){\n\t\t\t\tload_more_opt.dataset.value\t\t= first_option[self.settings.valueField];\n\t\t\t}\n\t\t}\n\n\t\torig_loadCallback.call( self, options, optgroups);\n\n\t\tloading_more = false;\n\t});\n\n\n\t// add templates to dropdown\n\t//\tloading_more if we have another url in the queue\n\t//\tno_more_results if we don't have another url in the queue\n\tself.hook('after','refreshOptions',()=>{\n\n\t\tconst query\t\t= self.lastValue;\n\t\tvar option;\n\n\t\tif( canLoadMore(query) ){\n\n\t\t\toption = self.render('loading_more',{query:query});\n\t\t\tif( option ){\n\t\t\t\toption.setAttribute('data-selectable',''); // so that navigating dropdown with [down] keypresses can navigate to this node\n\t\t\t\tload_more_opt = option;\n\t\t\t}\n\n\t\t}else if( (query in pagination) && !dropdown_content.querySelector('.no-results') ){\n\t\t\toption = self.render('no_more_results',{query:query});\n\t\t}\n\n\t\tif( option ){\n\t\t\taddClasses(option,self.settings.optionClass);\n\t\t\tdropdown_content.append( option );\n\t\t}\n\n\t});\n\n\n\t// add scroll listener and default templates\n\tself.on('initialize',()=>{\n\t\tdefault_values = Object.keys(self.options);\n\t\tdropdown_content = self.dropdown_content;\n\n\t\t// default templates\n\t\tself.settings.render = Object.assign({}, {\n\t\t\tloading_more:() => {\n\t\t\t\treturn `<div class=\"loading-more-results\">Loading more results ... </div>`;\n\t\t\t},\n\t\t\tno_more_results:() =>{\n\t\t\t\treturn `<div class=\"no-more-results\">No more results</div>`;\n\t\t\t}\n\t\t},self.settings.render);\n\n\n\t\t// watch dropdown content scroll position\n\t\tdropdown_content.addEventListener('scroll',()=>{\n\n\t\t\tif( !self.settings.shouldLoadMore.call(self) ){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// !important: this will get checked again in load() but we still need to check here otherwise loading_more will be set to true\n\t\t\tif( !canLoadMore(self.lastValue) ){\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// don't call load() too much\n\t\t\tif( loading_more ) return;\n\n\n\t\t\tloading_more = true;\n\t\t\tself.load.call(self,self.lastValue);\n\t\t});\n\t});\n\n};\n", "import TomSelect from './tom-select.ts';\n\nimport change_listener from './plugins/change_listener/plugin.ts';\nimport checkbox_options from './plugins/checkbox_options/plugin.ts';\nimport clear_button from './plugins/clear_button/plugin.ts';\nimport drag_drop from './plugins/drag_drop/plugin.ts';\nimport dropdown_header from './plugins/dropdown_header/plugin.ts';\nimport caret_position from './plugins/caret_position/plugin.ts';\nimport dropdown_input from './plugins/dropdown_input/plugin.ts';\nimport input_autogrow from './plugins/input_autogrow/plugin.ts';\nimport no_backspace_delete from './plugins/no_backspace_delete/plugin.ts';\nimport no_active_items from './plugins/no_active_items/plugin.ts';\nimport optgroup_columns from './plugins/optgroup_columns/plugin.ts';\nimport remove_button from './plugins/remove_button/plugin.ts';\nimport restore_on_backspace from './plugins/restore_on_backspace/plugin.ts';\nimport virtual_scroll from './plugins/virtual_scroll/plugin.ts';\n\nTomSelect.define('change_listener', change_listener);\nTomSelect.define('checkbox_options', checkbox_options);\nTomSelect.define('clear_button', clear_button);\nTomSelect.define('drag_drop', drag_drop);\nTomSelect.define('dropdown_header', dropdown_header);\nTomSelect.define('caret_position', caret_position);\nTomSelect.define('dropdown_input', dropdown_input);\nTomSelect.define('input_autogrow', input_autogrow);\nTomSelect.define('no_backspace_delete', no_backspace_delete);\nTomSelect.define('no_active_items', no_active_items);\nTomSelect.define('optgroup_columns', optgroup_columns);\nTomSelect.define('remove_button', remove_button);\nTomSelect.define('restore_on_backspace', restore_on_backspace);\nTomSelect.define('virtual_scroll', virtual_scroll);\n\nexport default TomSelect;\n", "type Method = 'GET' | 'POST' | 'PATCH' | 'PUT' | 'DELETE';\ntype ReqData = URLSearchParams | Dict | undefined | unknown;\ntype SelectedOption = { name: string; options: string[] };\n\ndeclare global {\n    interface Window { CSRF_TOKEN: any; }\n}\n\n/**\n * Infer valid HTMLElement props based on element name.\n */\ntype InferredProps<\n  // Element name.\n  T extends keyof HTMLElementTagNameMap,\n  // Element type.\n  E extends HTMLElementTagNameMap[T] = HTMLElementTagNameMap[T],\n> = Partial<Record<keyof E, E[keyof E]>>;\n\nexport function isApiError(data: Record<string, unknown>): data is APIError {\n  return 'error' in data && 'exception' in data;\n}\n\nexport function hasError<E extends ErrorBase = ErrorBase>(\n  data: Record<string, unknown>,\n): data is E {\n  return 'error' in data;\n}\n\nexport function hasMore(data: APIAnswer<APIObjectBase>): data is APIAnswerWithNext<APIObjectBase> {\n  return typeof data.next === 'string';\n}\n\n/**\n * Type guard to determine if a value is not null, undefined, or empty.\n */\nexport function isTruthy<V extends unknown>(value: V): value is NonNullable<V> {\n  const badStrings = ['', 'null', 'undefined'];\n  if (Array.isArray(value)) {\n    return value.length > 0;\n  } else if (typeof value === 'string' && !badStrings.includes(value)) {\n    return true;\n  } else if (typeof value === 'number') {\n    return true;\n  } else if (typeof value === 'boolean') {\n    return true;\n  } else if (typeof value === 'object' && value !== null) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Type guard to determine if all elements of an array are not null or undefined.\n *\n * @example\n * ```js\n * const elements = [document.getElementById(\"element1\"), document.getElementById(\"element2\")];\n * if (all(elements)) {\n *   const [element1, element2] = elements;\n *   // element1 and element2 are now of type HTMLElement, not Nullable<HTMLElement>.\n * }\n * ```\n */\nexport function all<T extends unknown>(values: T[]): values is NonNullable<T>[] {\n  return values.every(value => typeof value !== 'undefined' && value !== null);\n}\n\n/**\n * Deselect all selected options and reset the field value of a select element.\n *\n * @example\n * ```js\n * const select = document.querySelectorAll<HTMLSelectElement>(\"select.example\");\n * select.value = \"test\";\n * console.log(select.value);\n * // test\n * resetSelect(select);\n * console.log(select.value);\n * // ''\n * ```\n */\nexport function resetSelect<S extends HTMLSelectElement>(select: S): void {\n  for (const option of select.options) {\n    if (option.selected) {\n      option.selected = false;\n    }\n  }\n  select.value = '';\n}\n\n/**\n * Type guard to determine if a value is an `Element`.\n */\nexport function isElement(obj: Element | null | undefined): obj is Element {\n  return typeof obj !== null && typeof obj !== 'undefined';\n}\n\nexport async function apiRequest<R extends Dict, D extends ReqData = undefined>(\n  url: string,\n  method: Method,\n  data?: D,\n): Promise<APIResponse<R>> {\n  const token = window.CSRF_TOKEN;\n  const headers = new Headers({ 'X-CSRFToken': token });\n\n  let body;\n  if (typeof data !== 'undefined') {\n    body = JSON.stringify(data);\n    headers.set('content-type', 'application/json');\n  }\n\n  const res = await fetch(url, { method, body, headers, credentials: 'same-origin' });\n  const contentType = res.headers.get('Content-Type');\n  if (typeof contentType === 'string' && contentType.includes('text')) {\n    const error = await res.text();\n    return { error } as ErrorBase;\n  }\n  const json = (await res.json()) as R | APIError;\n  if (!res.ok && Array.isArray(json)) {\n    const error = json.join('\\n');\n    return { error } as ErrorBase;\n  } else if (!res.ok && 'detail' in json) {\n    return { error: json.detail } as ErrorBase;\n  }\n  return json;\n}\n\nexport async function apiPatch<R extends Dict, D extends ReqData = Dict>(\n  url: string,\n  data: D,\n): Promise<APIResponse<R>> {\n  return await apiRequest(url, 'PATCH', data);\n}\n\nexport async function apiGetBase<R extends Dict>(url: string): Promise<APIResponse<R>> {\n  return await apiRequest<R>(url, 'GET');\n}\n\nexport async function apiPostForm<R extends Dict, D extends Dict>(\n  url: string,\n  data: D,\n): Promise<APIResponse<R>> {\n  const body = new URLSearchParams();\n  for (const [k, v] of Object.entries(data)) {\n    body.append(k, String(v));\n  }\n  return await apiRequest<R, URLSearchParams>(url, 'POST', body);\n}\n\n/**\n * Fetch data from the NetBox API (authenticated).\n * @param url API endpoint\n */\nexport async function getApiData<T extends APIObjectBase>(\n  url: string,\n): Promise<APIAnswer<T> | ErrorBase | APIError> {\n  return await apiGetBase<APIAnswer<T>>(url);\n}\n\nexport function getElements<K extends keyof SVGElementTagNameMap>(\n  ...key: K[]\n): Generator<SVGElementTagNameMap[K]>;\nexport function getElements<K extends keyof HTMLElementTagNameMap>(\n  ...key: K[]\n): Generator<HTMLElementTagNameMap[K]>;\nexport function getElements<E extends Element>(...key: string[]): Generator<E>;\nexport function* getElements(\n  ...key: (string | keyof HTMLElementTagNameMap | keyof SVGElementTagNameMap)[]\n): Generator<Element> {\n  for (const query of key) {\n    for (const element of document.querySelectorAll(query)) {\n      if (element !== null) {\n        yield element;\n      }\n    }\n  }\n}\n\nexport function getElement<E extends HTMLElement>(id: string): Nullable<E> {\n  return document.getElementById(id) as Nullable<E>;\n}\n\nexport function removeElements(...selectors: string[]): void {\n  for (const element of getElements(...selectors)) {\n    element.remove();\n  }\n}\n\nexport function elementWidth<E extends HTMLElement>(element: Nullable<E>): number {\n  let width = 0;\n  if (element !== null) {\n    const style = getComputedStyle(element);\n    const pre = style.width.replace('px', '');\n    width = parseFloat(pre);\n  }\n  return width;\n}\n\n/**\n * scrollTo() wrapper that calculates a Y offset relative to `element`, but also factors in an\n * offset relative to div#content-title. This ensures we scroll to the element, but leave enough\n * room to see said element.\n *\n * @param element Element to scroll to\n * @param offset Y Offset. 0 by default, to take into account the NetBox header.\n */\nexport function scrollTo(element: Element, offset: number = 0): void {\n  let yOffset = offset;\n  const title = document.getElementById('content-title') as Nullable<HTMLDivElement>;\n  if (title !== null) {\n    // If the #content-title element exists, add it to the offset.\n    yOffset += title.getBoundingClientRect().bottom;\n  }\n  // Calculate the scrollTo target.\n  const top = element.getBoundingClientRect().top + window.pageYOffset + yOffset;\n  // Scroll to the calculated location.\n  window.scrollTo({ top, behavior: 'smooth' });\n  return;\n}\n\n/**\n * Iterate through a select element's options and return an array of options that are selected.\n *\n * @param base Select element.\n * @param selector Optionally specify a selector. 'select' by default.\n * @returns Array of selected options.\n */\nexport function getSelectedOptions<E extends HTMLElement>(\n  base: E,\n  selector: string = 'select',\n): SelectedOption[] {\n  let selected = [] as SelectedOption[];\n  for (const element of base.querySelectorAll<HTMLSelectElement>(selector)) {\n    if (element !== null) {\n      const select = { name: element.name, options: [] } as SelectedOption;\n      for (const option of element.options) {\n        if (option.selected) {\n          select.options.push(option.value);\n        }\n      }\n      selected = [...selected, select];\n    }\n  }\n  return selected;\n}\n\n/**\n * Toggle visibility of an element.\n */\nexport function toggleVisibility<E extends HTMLElement | SVGElement>(\n  element: E | null,\n  action?: 'show' | 'hide',\n): void {\n  if (element !== null) {\n    if (typeof action === 'undefined') {\n      // No action is passed, so we should toggle the existing state.\n      const current = window.getComputedStyle(element).display;\n      if (current === 'none') {\n        element.style.display = '';\n      } else {\n        element.style.display = 'none';\n      }\n    } else {\n      if (action === 'show') {\n        element.style.display = '';\n      } else {\n        element.style.display = 'none';\n      }\n    }\n  }\n}\n\n/**\n * Toggle visibility of card loader.\n */\nexport function toggleLoader(action: 'show' | 'hide'): void {\n  for (const element of getElements<HTMLDivElement>('div.card-overlay')) {\n    toggleVisibility(element, action);\n  }\n}\n\n/**\n * Get the value of every cell in a table.\n * @param table Table Element\n */\nexport function* getRowValues(table: HTMLTableRowElement): Generator<string> {\n  for (const element of table.querySelectorAll<HTMLTableCellElement>('td')) {\n    if (element !== null) {\n      if (isTruthy(element.innerText) && element.innerText !== '\u2014') {\n        yield replaceAll(element.innerText, '[\\n\\r]', '').trim();\n      }\n    }\n  }\n}\n\n/**\n * Recurse upward through an element's siblings until an element matching the query is found.\n *\n * @param base Base Element\n * @param query CSS Query\n * @param boundary Optionally specify a CSS Query which, when matched, recursion will cease.\n */\nexport function findFirstAdjacent<R extends HTMLElement, B extends Element = Element>(\n  base: B,\n  query: string,\n  boundary?: string,\n): Nullable<R> {\n  function atBoundary<E extends Element | null>(element: E): boolean {\n    if (typeof boundary === 'string' && element !== null) {\n      if (element.matches(boundary)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function match<P extends Element | null>(parent: P): Nullable<R> {\n    if (parent !== null && parent.parentElement !== null && !atBoundary(parent)) {\n      for (const child of parent.parentElement.querySelectorAll<R>(query)) {\n        if (child !== null) {\n          return child;\n        }\n      }\n      return match(parent.parentElement.parentElement);\n    }\n    return null;\n  }\n  return match(base);\n}\n\n/**\n * Helper for creating HTML elements.\n *\n * @param tag HTML element type.\n * @param properties Properties/attributes to apply to the element.\n * @param classes CSS classes to apply to the element.\n * @param children Child elements.\n */\nexport function createElement<\n  // Element name.\n  T extends keyof HTMLElementTagNameMap,\n  // Element props.\n  P extends InferredProps<T>,\n  // Child element type.\n  C extends HTMLElement = HTMLElement,\n>(\n  tag: T,\n  properties: P | null,\n  classes: Nullable<string[]> = null,\n  children: C[] = [],\n): HTMLElementTagNameMap[T] {\n  // Create the base element.\n  const element = document.createElement<T>(tag);\n\n  if (properties !== null) {\n    for (const k of Object.keys(properties)) {\n      // Add each property to the element.\n      const key = k as keyof InferredProps<T>;\n      const value = properties[key] as NonNullable<P[keyof P]>;\n      if (key in element) {\n        element[key] = value;\n      }\n    }\n  }\n\n  // Add each CSS class to the element's class list.\n  if (classes !== null && classes.length > 0) {\n    element.classList.add(...classes);\n  }\n\n  for (const child of children) {\n    // Add each child element to the base element.\n    element.appendChild(child);\n  }\n  return element as HTMLElementTagNameMap[T];\n}\n\n/**\n * Deduplicate an array of objects based on the value of a property.\n *\n * @example\n * ```js\n * const withDups = [{id: 1, name: 'One'}, {id: 2, name: 'Two'}, {id: 1, name: 'Other One'}];\n * const withoutDups = uniqueByProperty(withDups, 'id');\n * console.log(withoutDups);\n * // [{id: 1, name: 'One'}, {id: 2, name: 'Two'}]\n * ```\n * @param arr Array of objects to deduplicate.\n * @param prop Object property to use as a unique key.\n * @returns Deduplicated array.\n */\nexport function uniqueByProperty<T extends unknown, P extends keyof T>(arr: T[], prop: P): T[] {\n  const baseMap = new Map<T[P], T>();\n  for (const item of arr) {\n    const value = item[prop];\n    if (!baseMap.has(value)) {\n      baseMap.set(value, item);\n    }\n  }\n  return Array.from(baseMap.values());\n}\n\n/**\n * Replace all occurrences of a pattern with a replacement string.\n *\n * This is a browser-compatibility-focused drop-in replacement for `String.prototype.replaceAll()`,\n * introduced in ES2021.\n *\n * @param input string to be processed.\n * @param pattern regex pattern string or RegExp object to search for.\n * @param replacement replacement substring with which `pattern` matches will be replaced.\n * @returns processed version of `input`.\n */\nexport function replaceAll(input: string, pattern: string | RegExp, replacement: string): string {\n  // Ensure input is a string.\n  if (typeof input !== 'string') {\n    throw new TypeError(\"replaceAll 'input' argument must be a string\");\n  }\n  // Ensure pattern is a string or RegExp.\n  if (typeof pattern !== 'string' && !(pattern instanceof RegExp)) {\n    throw new TypeError(\"replaceAll 'pattern' argument must be a string or RegExp instance\");\n  }\n  // Ensure replacement is able to be stringified.\n  switch (typeof replacement) {\n    case 'boolean':\n      replacement = String(replacement);\n      break;\n    case 'number':\n      replacement = String(replacement);\n      break;\n    case 'string':\n      break;\n    default:\n      throw new TypeError(\"replaceAll 'replacement' argument must be stringifyable\");\n  }\n\n  if (pattern instanceof RegExp) {\n    // Add global flag to existing RegExp object and deduplicate\n    const flags = Array.from(new Set([...pattern.flags.split(''), 'g'])).join('');\n    pattern = new RegExp(pattern.source, flags);\n  } else {\n    // Create a RegExp object with the global flag set.\n    pattern = new RegExp(pattern, 'g');\n  }\n\n  return input.replace(pattern, replacement);\n}\n", "import { getElements, scrollTo } from '../util';\n\nfunction handleFormSubmit(event: Event, form: HTMLFormElement): void {\n  // Automatically select all options in any <select> with the \"select-all\" class. This is useful for\n  // multi-select fields that are used to add/remove choices.\n  for (const element of getElements<HTMLOptionElement>('select.select-all option')) {\n    element.selected = true;\n  }\n\n  // Track the names of each invalid field.\n  const invalids = new Set<string>();\n\n  for (const element of form.querySelectorAll<FormControls>('*[name]')) {\n    if (!element.validity.valid) {\n      invalids.add(element.name);\n      // If the field is invalid, but doesn't contain the .is-invalid class, add it.\n      if (!element.classList.contains('is-invalid')) {\n        element.classList.add('is-invalid');\n      }\n    } else {\n      // If the field is valid, but contains the .is-invalid class, remove it.\n      if (element.classList.contains('is-invalid')) {\n        element.classList.remove('is-invalid');\n      }\n    }\n  }\n\n  if (invalids.size !== 0) {\n    // If there are invalid fields, pick the first field and scroll to it.\n    const firstInvalid = form.elements.namedItem(Array.from(invalids)[0]) as Element;\n    scrollTo(firstInvalid);\n\n    // If the form has invalid fields, don't submit it.\n    event.preventDefault();\n  }\n}\n\n/**\n * Attach an event listener to each form's submitter (button[type=submit]). When called, the\n * callback checks the validity of each form field and adds the appropriate Bootstrap CSS class\n * based on the field's validity.\n */\nexport function initFormElements(): void {\n  for (const form of getElements('form')) {\n    // Find each of the form's submitters. Most object edit forms have a \"Create\" and\n    // a \"Create & Add\", so we need to add a listener to both.\n    const submitters = form.querySelectorAll<HTMLButtonElement>('button[type=submit]');\n    for (const submitter of submitters) {\n      // Add the event listener to each submitter.\n      submitter.addEventListener('click', (event: Event) => handleFormSubmit(event, form));\n    }\n\n    // Initialize any reset buttons so that when clicked, the page is reloaded without query parameters.\n    const resetButton = document.querySelector<HTMLButtonElement>('button[data-reset-select]');\n    if (resetButton !== null) {\n      resetButton.addEventListener('click', () => {\n        window.location.assign(window.location.origin + window.location.pathname);\n      });\n    }\n  }\n}\n", "import { getElements } from '../util';\n\n/**\n * Set the value of the number input field based on the selection of the dropdown.\n */\nexport function initSpeedSelector(): void {\n  for (const element of getElements<HTMLAnchorElement>('a.set_field_value')) {\n    if (element !== null) {\n      function handleClick(event: Event) {\n        // Don't reload the page (due to href=\"#\").\n        event.preventDefault();\n        // Get the value of the `data` attribute on the dropdown option.\n        const value = element.getAttribute('data');\n        // Find the input element referenced by the dropdown element.\n        const input = document.getElementById(element.target) as Nullable<HTMLInputElement>;\n        if (input !== null && value !== null) {\n          // Set the value of the input field to the `data` attribute's value.\n          input.value = value;\n        }\n      }\n      element.addEventListener('click', handleClick);\n    }\n  }\n}\n", "import { initFormElements } from './elements';\nimport { initSpeedSelector } from './speedSelector';\n\nexport function initForms(): void {\n  for (const func of [initFormElements, initSpeedSelector]) {\n    func();\n  }\n}\n", "import { Collapse, Modal, Popover, Tab, Toast, Tooltip } from 'bootstrap';\nimport { createElement, getElements } from './util';\n\ntype ToastLevel = 'danger' | 'warning' | 'success' | 'info';\n\n// Add common Bootstrap components to `window`, so they may be consumed globally (primarily for\n// plugins).\nwindow.Collapse = Collapse;\nwindow.Modal = Modal;\nwindow.Popover = Popover;\nwindow.Toast = Toast;\nwindow.Tooltip = Tooltip;\n\nfunction initTooltips() {\n  for (const tooltip of getElements('[data-bs-toggle=\"tooltip\"]')) {\n    new Tooltip(tooltip, { container: 'body' });\n  }\n}\n\nfunction initModals() {\n  for (const modal of getElements('[data-bs-toggle=\"modal\"]')) {\n    new Modal(modal);\n  }\n}\n\nexport function createToast(\n  level: ToastLevel,\n  title: string,\n  message: string,\n  extra?: string,\n): Toast {\n  let iconName = 'mdi-alert';\n  switch (level) {\n    case 'warning':\n      iconName = 'mdi-alert';\n      break;\n    case 'success':\n      iconName = 'mdi-check-circle';\n      break;\n    case 'info':\n      iconName = 'mdi-information';\n      break;\n    case 'danger':\n      iconName = 'mdi-alert';\n      break;\n  }\n\n  const container = document.createElement('div');\n  container.setAttribute('class', 'toast-container position-fixed bottom-0 end-0 m-3');\n\n  const main = document.createElement('div');\n  main.setAttribute('class', `toast bg-${level}`);\n  main.setAttribute('role', 'alert');\n  main.setAttribute('aria-live', 'assertive');\n  main.setAttribute('aria-atomic', 'true');\n\n  const header = document.createElement('div');\n  header.setAttribute('class', `toast-header bg-${level} text-body`);\n\n  const icon = document.createElement('i');\n  icon.setAttribute('class', `mdi ${iconName}`);\n\n  const titleElement = document.createElement('strong');\n  titleElement.setAttribute('class', 'me-auto ms-1');\n  titleElement.innerText = title;\n\n  const button = document.createElement('button');\n  button.setAttribute('type', 'button');\n  button.setAttribute('class', 'btn-close');\n  button.setAttribute('data-bs-dismiss', 'toast');\n  button.setAttribute('aria-label', 'Close');\n\n  const body = document.createElement('div');\n  body.setAttribute('class', 'toast-body');\n\n  header.appendChild(icon);\n  header.appendChild(titleElement);\n\n  if (typeof extra !== 'undefined') {\n    const extraElement = document.createElement('small');\n    extraElement.setAttribute('class', 'text-muted');\n    header.appendChild(extraElement);\n  }\n\n  header.appendChild(button);\n\n  body.innerText = message.trim();\n\n  main.appendChild(header);\n  main.appendChild(body);\n  container.appendChild(main);\n  document.body.appendChild(container);\n\n  const toast = new Toast(main);\n  return toast;\n}\n\n/**\n * Open the tab specified in the URL. For example, /dcim/device-types/1/#tab_frontports will\n * change the open tab to the Front Ports tab.\n */\nfunction initTabs() {\n  const { hash } = location;\n  if (hash && hash.match(/^#tab_.+$/)) {\n    // The tab element will have a data-bs-target attribute with a value of the object type for\n    // the corresponding tab. Once we drop the `tab_` prefix, the hash will match the target\n    // element's data-bs-target value. For example, `#tab_frontports` becomes `#frontports`.\n    const target = hash.replace('tab_', '');\n    for (const element of getElements(`ul.nav.nav-tabs .nav-link[data-bs-target=\"${target}\"]`)) {\n      // Instantiate a Bootstrap tab instance.\n      // See https://getbootstrap.com/docs/5.0/components/navs-tabs/#javascript-behavior\n      const tab = new Tab(element);\n      // Show the tab.\n      tab.show();\n    }\n  }\n}\n\n/**\n * When accordion buttons are clicked, add a class to the parent accordion item. This is used\n * for the side navigation to apply a box-shadow when the section is open.\n */\nfunction initSidebarAccordions(): void {\n  const items = document.querySelectorAll<HTMLDivElement>('.sidebar .accordion-item');\n\n  function handleToggle(thisItem: HTMLDivElement) {\n    for (const item of items) {\n      if (item !== thisItem) {\n        // Remove the is-open class from all other accordion items, so that if one is clicked while\n        // another is open, the shadow is removed.\n        item.classList.remove('is-open');\n      } else {\n        item.classList.toggle('is-open');\n      }\n    }\n  }\n\n  for (const item of items) {\n    for (const button of item.querySelectorAll<HTMLButtonElement>('.accordion-button')) {\n      button.addEventListener('click', () => {\n        handleToggle(item);\n      });\n    }\n  }\n}\n\n/**\n * Initialize image preview popover, which shows a preview of an image from an image link with the\n * `.image-preview` class.\n */\nfunction initImagePreview(): void {\n  for (const element of getElements<HTMLAnchorElement>('a.image-preview')) {\n    // Generate a max-width that's a quarter of the screen's width (note - the actual element\n    // width will be slightly larger due to the popover body's padding).\n    const maxWidth = `${Math.round(window.innerWidth / 4)}px`;\n\n    // Create an image element that uses the linked image as its `src`.\n    const image = createElement('img', { src: element.href });\n    image.style.maxWidth = maxWidth;\n\n    // Create a container for the image.\n    const content = createElement('div', null, null, [image]);\n\n    // Initialize the Bootstrap Popper instance.\n    new Popover(element, {\n      // Attach this custom class to the popover so that it styling can be controlled via CSS.\n      customClass: 'image-preview-popover',\n      trigger: 'hover',\n      html: true,\n      content,\n    });\n  }\n}\n\n/**\n * Enable any defined Bootstrap Tooltips.\n *\n * @see https://getbootstrap.com/docs/5.0/components/tooltips\n */\nexport function initBootstrap(): void {\n  for (const func of [\n    initTooltips,\n    initModals,\n    initTabs,\n    initImagePreview,\n    initSidebarAccordions,\n  ]) {\n    func();\n  }\n}\n", "import { isTruthy } from './util';\n\n/**\n * Show/hide quicksearch clear button.\n *\n * @param event \"keyup\" or \"search\" event for the quicksearch input\n */\nfunction quickSearchEventHandler(event: Event): void {\n  const quicksearch = event.currentTarget as HTMLInputElement;\n  const clearbtn = document.getElementById('quicksearch_clear') as HTMLAnchorElement;\n  if (isTruthy(clearbtn)) {\n    if (quicksearch.value === '') {\n      clearbtn.classList.add('invisible');\n    } else {\n      clearbtn.classList.remove('invisible');\n    }\n  }\n}\n\n/**\n * Clear the existing search parameters in the link to export Current View.\n */\nfunction clearLinkParams(): void {\n  const link = document.getElementById('export_current_view') as HTMLLinkElement;\n  const linkUpdated = link?.href.split('&')[0];\n  link.setAttribute('href', linkUpdated);\n}\n\n/**\n * Update the Export View link to add the Quick Search parameters.\n * @param event\n */\nfunction handleQuickSearchParams(event: Event): void {\n  const quickSearchParameters = event.currentTarget as HTMLInputElement;\n\n  // Clear the existing search parameters\n  clearLinkParams();\n\n  if (quickSearchParameters != null) {\n    const link = document.getElementById('export_current_view') as HTMLLinkElement;\n    const search_parameter = `q=${quickSearchParameters.value}`;\n    const linkUpdated = link?.href + '&' + search_parameter;\n    link.setAttribute('href', linkUpdated);\n  }\n}\n\n/**\n * Initialize Quicksearch Event listener/handlers.\n */\nexport function initQuickSearch(): void {\n  const quicksearch = document.getElementById('quicksearch') as HTMLInputElement;\n  const clearbtn = document.getElementById('quicksearch_clear') as HTMLAnchorElement;\n  if (isTruthy(quicksearch)) {\n    quicksearch.addEventListener('keyup', quickSearchEventHandler, {\n      passive: true,\n    });\n    quicksearch.addEventListener('search', quickSearchEventHandler, {\n      passive: true,\n    });\n    quicksearch.addEventListener('change', handleQuickSearchParams, {\n      passive: true,\n    });\n\n    if (isTruthy(clearbtn)) {\n      clearbtn.addEventListener(\n        'click',\n        async () => {\n          const search = new Event('search');\n          quicksearch.value = '';\n          await new Promise(f => setTimeout(f, 100));\n          quicksearch.dispatchEvent(search);\n          clearLinkParams();\n        },\n        {\n          passive: true,\n        },\n      );\n    }\n  }\n}\n", "interface PluginConfig {\n  [plugin: string]: object;\n}\n\nexport function getPlugins(element: HTMLSelectElement): object {\n  const plugins: PluginConfig = {};\n\n  // Enable \"clear all\" button for non-required fields\n  if (!element.required) {\n    plugins.clear_button = {\n      html: (data: Dict) =>\n        `<i class=\"mdi mdi-close-circle ${data.className}\" title=\"${data.title}\"></i>`,\n    };\n  }\n\n  // Enable individual \"remove\" buttons for items on multi-select fields\n  if (element.hasAttribute('multiple')) {\n    plugins.remove_button = {\n      title: 'Remove',\n    };\n  }\n\n  return {\n    plugins: plugins,\n  };\n}\n", "import { TomOption } from 'tom-select/src/types';\nimport TomSelect from 'tom-select';\nimport { escape_html } from 'tom-select/src/utils';\nimport { getPlugins } from './config';\nimport { getElements } from '../util';\n\n// Initialize <select> elements with statically-defined options\nexport function initStaticSelects(): void {\n  for (const select of getElements<HTMLSelectElement>(\n    'select:not(.tomselected):not(.no-ts):not([size]):not(.api-select):not(.color-select)',\n  )) {\n    new TomSelect(select, {\n      ...getPlugins(select),\n      maxOptions: undefined,\n    });\n  }\n}\n\n// Initialize color selection fields\nexport function initColorSelects(): void {\n  function renderColor(item: TomOption, escape: typeof escape_html) {\n    return `<div><span class=\"dropdown-item-indicator color-label\" style=\"background-color: #${escape(\n      item.value,\n    )}\"></span> ${escape(item.text)}</div>`;\n  }\n\n  for (const select of getElements<HTMLSelectElement>('select.color-select:not(.tomselected)')) {\n    new TomSelect(select, {\n      ...getPlugins(select),\n      maxOptions: undefined,\n      render: {\n        option: renderColor,\n        item: renderColor,\n      },\n    });\n  }\n}\n", "\nimport type TomSelect from './tom-select.ts';\nimport { TomLoadCallback } from './types/index.ts';\n\n\n/**\n * Converts a scalar to its best string representation\n * for hash keys and HTML attribute values.\n *\n * Transformations:\n *   'str'     -> 'str'\n *   null      -> ''\n *   undefined -> ''\n *   true      -> '1'\n *   false     -> '0'\n *   0         -> '0'\n *   1         -> '1'\n *\n */\nexport const hash_key = (value:undefined|null|boolean|string|number):string|null => {\n\tif (typeof value === 'undefined' || value === null) return null;\n\treturn get_hash(value);\n};\n\nexport const get_hash = (value:boolean|string|number):string => {\n\tif (typeof value === 'boolean') return value ? '1' : '0';\n\treturn value + '';\n};\n\n/**\n * Escapes a string for use within HTML.\n *\n */\nexport const escape_html = (str:string):string => {\n\treturn (str + '')\n\t\t.replace(/&/g, '&amp;')\n\t\t.replace(/</g, '&lt;')\n\t\t.replace(/>/g, '&gt;')\n\t\t.replace(/\"/g, '&quot;');\n};\n\n\n/**\n * use setTimeout if timeout > 0 \n */\nexport const timeout = (fn:()=>void,timeout:number): number | null => {\n\tif( timeout > 0 ){\n\t\treturn window.setTimeout(fn,timeout);\n\t}\n\n\tfn.call(null);\n\treturn null;\n}\n\n/**\n * Debounce the user provided load function\n *\n */\nexport const loadDebounce = (fn:(value:string,callback:TomLoadCallback) => void,delay:number) => {\n\tvar timeout: null|ReturnType<typeof setTimeout>;\n\treturn function(this:TomSelect, value:string,callback:TomLoadCallback) {\n\t\tvar self = this;\n\n\t\tif( timeout ){\n\t\t\tself.loading = Math.max(self.loading - 1, 0);\n\t\t\tclearTimeout(timeout);\n\t\t}\n\t\ttimeout = setTimeout(function() {\n\t\t\ttimeout = null;\n\t\t\tself.loadedSearches[value] = true;\n\t\t\tfn.call(self, value, callback);\n\n\t\t}, delay);\n\t};\n};\n\n\n/**\n * Debounce all fired events types listed in `types`\n * while executing the provided `fn`.\n *\n */\nexport const debounce_events = ( self:TomSelect, types:string[], fn:() => void ) => {\n\tvar type:string;\n\tvar trigger = self.trigger;\n\tvar event_args:{ [key: string]: any } = {};\n\n\t// override trigger method\n\tself.trigger = function(){\n\t\tvar type = arguments[0];\n\t\tif (types.indexOf(type) !== -1) {\n\t\t\tevent_args[type] = arguments;\n\t\t} else {\n\t\t\treturn trigger.apply(self, arguments);\n\t\t}\n\t};\n\n\t// invoke provided function\n\tfn.apply(self, []);\n\tself.trigger = trigger;\n\n\t// trigger queued events\n\tfor( type of types ){\n\t\tif( type in event_args ){\n\t\t\ttrigger.apply(self, event_args[type]);\n\t\t}\n\t}\n};\n\n\n/**\n * Determines the current selection within a text input control.\n * Returns an object containing:\n *   - start\n *   - length\n *\n * Note: \"selectionStart, selectionEnd ... apply only to inputs of types text, search, URL, tel and password\"\n * \t- https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n */\nexport const getSelection = (input:HTMLInputElement):{ start: number; length: number } => {\n\treturn {\n\t\tstart\t: input.selectionStart || 0,\n\t\tlength\t: (input.selectionEnd||0) - (input.selectionStart||0),\n\t};\n};\n\n\n/**\n * Prevent default\n *\n */\nexport const preventDefault = (evt?:Event, stop:boolean=false):void => {\n\tif( evt ){\n\t\tevt.preventDefault();\n\t\tif( stop ){\n\t\t\tevt.stopPropagation();\n\t\t}\n\t}\n}\n\n\n/**\n * Add event helper\n *\n */\nexport const addEvent = (target:EventTarget, type:string, callback:EventListenerOrEventListenerObject, options?:object):void => {\n\ttarget.addEventListener(type,callback,options);\n};\n\n\n/**\n * Return true if the requested key is down\n * Will return false if more than one control character is pressed ( when [ctrl+shift+a] != [ctrl+a] )\n * The current evt may not always set ( eg calling advanceSelection() )\n *\n */\nexport const isKeyDown = ( key_name:keyof (KeyboardEvent|MouseEvent), evt?:KeyboardEvent|MouseEvent ) => {\n\n\tif( !evt ){\n\t\treturn false;\n\t}\n\n\tif( !evt[key_name] ){\n\t\treturn false;\n\t}\n\n\tvar count = (evt.altKey?1:0) + (evt.ctrlKey?1:0) + (evt.shiftKey?1:0) + (evt.metaKey?1:0);\n\n\tif( count === 1 ){\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\n\n/**\n * Get the id of an element\n * If the id attribute is not set, set the attribute with the given id\n *\n */\nexport const getId = (el:Element,id:string) => {\n\tconst existing_id = el.getAttribute('id');\n\tif( existing_id ){\n\t\treturn existing_id;\n\t}\n\n\tel.setAttribute('id',id);\n\treturn id;\n};\n\n\n/**\n * Returns a string with backslashes added before characters that need to be escaped.\n */\nexport const addSlashes = (str:string):string => {\n\treturn str.replace(/[\\\\\"']/g, '\\\\$&');\n};\n\n/**\n *\n */\nexport const append = ( parent:Element|DocumentFragment, node: string|Node|null|undefined ):void =>{\n\tif( node ) parent.append(node);\n};\n\n/**\n * Iterates over arrays and hashes.\n *\n * ```\n * iterate(this.items, function(item, id) {\n *    // invoked for each item\n * });\n * ```\n *\n */\nexport const iterate = (object:[]|{[key:string]:any}, callback:(value:any,key:any)=>any) => {\n\n\tif ( Array.isArray(object)) {\n\t\tobject.forEach(callback);\n\n\t}else{\n\n\t\tfor (var key in object) {\n\t\t\tif (object.hasOwnProperty(key)) {\n\t\t\t\tcallback(object[key], key);\n\t\t\t}\n\t\t}\n\t}\n};\n", "\nimport { iterate } from './utils.ts';\n\n/**\n * Return a dom element from either a dom query string, jQuery object, a dom element or html string\n * https://stackoverflow.com/questions/494143/creating-a-new-dom-element-from-an-html-string-using-built-in-dom-methods-or-pro/35385518#35385518\n *\n * param query should be {}\n */\nexport const getDom = ( query:any ):HTMLElement => {\n\n\tif( query.jquery ){\n\t\treturn query[0];\n\t}\n\n\tif( query instanceof HTMLElement ){\n\t\treturn query;\n\t}\n\n\tif( isHtmlString(query) ){\n\t\tvar tpl = document.createElement('template');\n\t\ttpl.innerHTML = query.trim(); // Never return a text node of whitespace as the result\n\t\treturn tpl.content.firstChild as HTMLElement;\n\t}\n\n\treturn document.querySelector(query);\n};\n\nexport const isHtmlString = (arg:any): boolean => {\n\tif( typeof arg === 'string' && arg.indexOf('<') > -1 ){\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const escapeQuery = (query:string):string => {\n\treturn query.replace(/['\"\\\\]/g, '\\\\$&');\n}\n\n/**\n * Dispatch an event\n *\n */\nexport const triggerEvent = ( dom_el:HTMLElement, event_name:string ):void => {\n\tvar event = document.createEvent('HTMLEvents');\n\tevent.initEvent(event_name, true, false);\n\tdom_el.dispatchEvent(event)\n};\n\n/**\n * Apply CSS rules to a dom element\n *\n */\nexport const applyCSS = ( dom_el:HTMLElement, css:{ [key: string]: string|number }):void => {\n\tObject.assign(dom_el.style, css);\n}\n\n\n/**\n * Add css classes\n *\n */\nexport const addClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n\tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map( cls => {\n\t\t\tel.classList.add( cls );\n\t\t});\n\t});\n}\n\n/**\n * Remove css classes\n *\n */\n export const removeClasses = ( elmts:HTMLElement|HTMLElement[], ...classes:string[]|string[][] ) => {\n\n \tvar norm_classes \t= classesArray(classes);\n\telmts\t\t\t\t= castAsArray(elmts);\n\n\telmts.map( el => {\n\t\tnorm_classes.map(cls => {\n\t \t\tel.classList.remove( cls );\n\t\t});\n \t});\n }\n\n\n/**\n * Return arguments\n *\n */\nexport const classesArray = (args:string[]|string[][]):string[] => {\n\tvar classes:string[] = [];\n\titerate( args, (_classes) =>{\n\t\tif( typeof _classes === 'string' ){\n\t\t\t_classes = _classes.trim().split(/[\\t\\n\\f\\r\\s]/);\n\t\t}\n\t\tif( Array.isArray(_classes) ){\n\t\t\tclasses = classes.concat(_classes);\n\t\t}\n\t});\n\n\treturn classes.filter(Boolean);\n}\n\n\n/**\n * Create an array from arg if it's not already an array\n *\n */\nexport const castAsArray = (arg:any):Array<any> => {\n\tif( !Array.isArray(arg) ){\n \t\targ = [arg];\n \t}\n\treturn arg;\n}\n\n\n/**\n * Get the closest node to the evt.target matching the selector\n * Stops at wrapper\n *\n */\nexport const parentMatch = ( target:null|HTMLElement, selector:string, wrapper?:HTMLElement ):HTMLElement|void => {\n\n\tif( wrapper && !wrapper.contains(target) ){\n\t\treturn;\n\t}\n\n\twhile( target && target.matches ){\n\n\t\tif( target.matches(selector) ){\n\t\t\treturn target;\n\t\t}\n\n\t\ttarget = target.parentNode as HTMLElement;\n\t}\n}\n\n\n/**\n * Get the first or last item from an array\n *\n * > 0 - right (last)\n * <= 0 - left (first)\n *\n */\nexport const getTail = ( list:Array<any>|NodeList, direction:number=0 ):any => {\n\n\tif( direction > 0 ){\n\t\treturn list[list.length-1];\n\t}\n\n\treturn list[0];\n}\n\n/**\n * Return true if an object is empty\n *\n */\nexport const isEmptyObject = (obj:object):boolean => {\n\treturn (Object.keys(obj).length === 0);\n}\n\n\n/**\n * Get the index of an element amongst sibling nodes of the same type\n *\n */\nexport const nodeIndex = ( el:null|Element, amongst?:string ):number => {\n\tif (!el) return -1;\n\n\tamongst = amongst || el.nodeName;\n\n\tvar i = 0;\n\twhile( el = el.previousElementSibling ){\n\n\t\tif( el.matches(amongst) ){\n\t\t\ti++;\n\t\t}\n\t}\n\treturn i;\n}\n\n\n/**\n * Set attributes of an element\n *\n */\nexport const setAttr = (el:Element,attrs:{ [key: string]: null|string|number }) => {\n\titerate( attrs,(val,attr) => {\n\t\tif( val == null ){\n\t\t\tel.removeAttribute(attr as string);\n\t\t}else{\n\t\t\tel.setAttribute(attr as string, ''+val);\n\t\t}\n\t});\n}\n\n\n/**\n * Replace a node\n */\nexport const replaceNode = ( existing:Node, replacement:Node ) => {\n\tif( existing.parentNode ) existing.parentNode.replaceChild(replacement, existing);\n}\n", "import decodeComponent from 'decode-uri-component';\nimport {includeKeys} from 'filter-obj';\nimport splitOnFirst from 'split-on-first';\n\nconst isNullOrUndefined = value => value === null || value === undefined;\n\n// eslint-disable-next-line unicorn/prefer-code-point\nconst strictUriEncode = string => encodeURIComponent(string).replaceAll(/[!'()*]/g, x => `%${x.charCodeAt(0).toString(16).toUpperCase()}`);\n\nconst encodeFragmentIdentifier = Symbol('encodeFragmentIdentifier');\n\nfunction encoderForArrayFormat(options) {\n\tswitch (options.arrayFormat) {\n\t\tcase 'index': {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tconst index = result.length;\n\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result, [encode(key, options), '[', index, ']'].join(''),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[', encode(index, options), ']=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\n\t\tcase 'bracket': {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\t[encode(key, options), '[]'].join(''),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '[]=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\n\t\tcase 'colon-list-separator': {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\t[encode(key, options), ':list='].join(''),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), ':list=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\n\t\tcase 'comma':\n\t\tcase 'separator':\n\t\tcase 'bracket-separator': {\n\t\t\tconst keyValueSeparator = options.arrayFormat === 'bracket-separator'\n\t\t\t\t? '[]='\n\t\t\t\t: '=';\n\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\t// Translate null to an empty string so that it doesn't serialize as 'null'\n\t\t\t\tvalue = value === null ? '' : value;\n\n\t\t\t\tif (result.length === 0) {\n\t\t\t\t\treturn [[encode(key, options), keyValueSeparator, encode(value, options)].join('')];\n\t\t\t\t}\n\n\t\t\t\treturn [[result, encode(value, options)].join(options.arrayFormatSeparator)];\n\t\t\t};\n\t\t}\n\n\t\tdefault: {\n\t\t\treturn key => (result, value) => {\n\t\t\t\tif (\n\t\t\t\t\tvalue === undefined\n\t\t\t\t\t|| (options.skipNull && value === null)\n\t\t\t\t\t|| (options.skipEmptyString && value === '')\n\t\t\t\t) {\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\n\t\t\t\tif (value === null) {\n\t\t\t\t\treturn [\n\t\t\t\t\t\t...result,\n\t\t\t\t\t\tencode(key, options),\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\treturn [\n\t\t\t\t\t...result,\n\t\t\t\t\t[encode(key, options), '=', encode(value, options)].join(''),\n\t\t\t\t];\n\t\t\t};\n\t\t}\n\t}\n}\n\nfunction parserForArrayFormat(options) {\n\tlet result;\n\n\tswitch (options.arrayFormat) {\n\t\tcase 'index': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /\\[(\\d*)]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\t\t}\n\n\t\tcase 'bracket': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(\\[])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...accumulator[key], value];\n\t\t\t};\n\t\t}\n\n\t\tcase 'colon-list-separator': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tresult = /(:list)$/.exec(key);\n\t\t\t\tkey = key.replace(/:list$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...accumulator[key], value];\n\t\t\t};\n\t\t}\n\n\t\tcase 'comma':\n\t\tcase 'separator': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = typeof value === 'string' && value.includes(options.arrayFormatSeparator);\n\t\t\t\tconst isEncodedArray = (typeof value === 'string' && !isArray && decode(value, options).includes(options.arrayFormatSeparator));\n\t\t\t\tvalue = isEncodedArray ? decode(value, options) : value;\n\t\t\t\tconst newValue = isArray || isEncodedArray ? value.split(options.arrayFormatSeparator).map(item => decode(item, options)) : (value === null ? value : decode(value, options));\n\t\t\t\taccumulator[key] = newValue;\n\t\t\t};\n\t\t}\n\n\t\tcase 'bracket-separator': {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tconst isArray = /(\\[])$/.test(key);\n\t\t\t\tkey = key.replace(/\\[]$/, '');\n\n\t\t\t\tif (!isArray) {\n\t\t\t\t\taccumulator[key] = value ? decode(value, options) : value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst arrayValue = value === null\n\t\t\t\t\t? []\n\t\t\t\t\t: decode(value, options).split(options.arrayFormatSeparator);\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = arrayValue;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...accumulator[key], ...arrayValue];\n\t\t\t};\n\t\t}\n\n\t\tdefault: {\n\t\t\treturn (key, value, accumulator) => {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [...[accumulator[key]].flat(), value];\n\t\t\t};\n\t\t}\n\t}\n}\n\nfunction validateArrayFormatSeparator(value) {\n\tif (typeof value !== 'string' || value.length !== 1) {\n\t\tthrow new TypeError('arrayFormatSeparator must be single character string');\n\t}\n}\n\nfunction encode(value, options) {\n\tif (options.encode) {\n\t\treturn options.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction decode(value, options) {\n\tif (options.decode) {\n\t\treturn decodeComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t}\n\n\tif (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input))\n\t\t\t.sort((a, b) => Number(a) - Number(b))\n\t\t\t.map(key => input[key]);\n\t}\n\n\treturn input;\n}\n\nfunction removeHash(input) {\n\tconst hashStart = input.indexOf('#');\n\tif (hashStart !== -1) {\n\t\tinput = input.slice(0, hashStart);\n\t}\n\n\treturn input;\n}\n\nfunction getHash(url) {\n\tlet hash = '';\n\tconst hashStart = url.indexOf('#');\n\tif (hashStart !== -1) {\n\t\thash = url.slice(hashStart);\n\t}\n\n\treturn hash;\n}\n\nfunction parseValue(value, options, type) {\n\tif (type === 'string' && typeof value === 'string') {\n\t\treturn value;\n\t}\n\n\tif (typeof type === 'function' && typeof value === 'string') {\n\t\treturn type(value);\n\t}\n\n\tif (options.parseBooleans && value !== null && (value.toLowerCase() === 'true' || value.toLowerCase() === 'false')) {\n\t\treturn value.toLowerCase() === 'true';\n\t}\n\n\tif (type === 'number' && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\treturn Number(value);\n\t}\n\n\tif (options.parseNumbers && !Number.isNaN(Number(value)) && (typeof value === 'string' && value.trim() !== '')) {\n\t\treturn Number(value);\n\t}\n\n\treturn value;\n}\n\nexport function extract(input) {\n\tinput = removeHash(input);\n\tconst queryStart = input.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\n\treturn input.slice(queryStart + 1);\n}\n\nexport function parse(query, options) {\n\toptions = {\n\t\tdecode: true,\n\t\tsort: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\tparseNumbers: false,\n\t\tparseBooleans: false,\n\t\ttypes: Object.create(null),\n\t\t...options,\n\t};\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst formatter = parserForArrayFormat(options);\n\n\t// Create an object with no prototype\n\tconst returnValue = Object.create(null);\n\n\tif (typeof query !== 'string') {\n\t\treturn returnValue;\n\t}\n\n\tquery = query.trim().replace(/^[?#&]/, '');\n\n\tif (!query) {\n\t\treturn returnValue;\n\t}\n\n\tfor (const parameter of query.split('&')) {\n\t\tif (parameter === '') {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst parameter_ = options.decode ? parameter.replaceAll('+', ' ') : parameter;\n\n\t\tlet [key, value] = splitOnFirst(parameter_, '=');\n\n\t\tif (key === undefined) {\n\t\t\tkey = parameter_;\n\t\t}\n\n\t\t// Missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tvalue = value === undefined ? null : (['comma', 'separator', 'bracket-separator'].includes(options.arrayFormat) ? value : decode(value, options));\n\t\tformatter(decode(key, options), value, returnValue);\n\t}\n\n\tfor (const [key, value] of Object.entries(returnValue)) {\n\t\tif (typeof value === 'object' && value !== null && options.types[key] !== 'string') {\n\t\t\tfor (const [key2, value2] of Object.entries(value)) {\n\t\t\t\tconst type = options.types[key] ? options.types[key].replace('[]', '') : undefined;\n\t\t\t\tvalue[key2] = parseValue(value2, options, type);\n\t\t\t}\n\t\t} else if (typeof value === 'object' && value !== null && options.types[key] === 'string') {\n\t\t\treturnValue[key] = Object.values(value).join(options.arrayFormatSeparator);\n\t\t} else {\n\t\t\treturnValue[key] = parseValue(value, options, options.types[key]);\n\t\t}\n\t}\n\n\tif (options.sort === false) {\n\t\treturn returnValue;\n\t}\n\n\t// TODO: Remove the use of `reduce`.\n\t// eslint-disable-next-line unicorn/no-array-reduce\n\treturn (options.sort === true ? Object.keys(returnValue).sort() : Object.keys(returnValue).sort(options.sort)).reduce((result, key) => {\n\t\tconst value = returnValue[key];\n\t\tresult[key] = Boolean(value) && typeof value === 'object' && !Array.isArray(value) ? keysSorter(value) : value;\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexport function stringify(object, options) {\n\tif (!object) {\n\t\treturn '';\n\t}\n\n\toptions = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none',\n\t\tarrayFormatSeparator: ',',\n\t\t...options,\n\t};\n\n\tvalidateArrayFormatSeparator(options.arrayFormatSeparator);\n\n\tconst shouldFilter = key => (\n\t\t(options.skipNull && isNullOrUndefined(object[key]))\n\t\t|| (options.skipEmptyString && object[key] === '')\n\t);\n\n\tconst formatter = encoderForArrayFormat(options);\n\n\tconst objectCopy = {};\n\n\tfor (const [key, value] of Object.entries(object)) {\n\t\tif (!shouldFilter(key)) {\n\t\t\tobjectCopy[key] = value;\n\t\t}\n\t}\n\n\tconst keys = Object.keys(objectCopy);\n\n\tif (options.sort !== false) {\n\t\tkeys.sort(options.sort);\n\t}\n\n\treturn keys.map(key => {\n\t\tconst value = object[key];\n\n\t\tif (value === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (value === null) {\n\t\t\treturn encode(key, options);\n\t\t}\n\n\t\tif (Array.isArray(value)) {\n\t\t\tif (value.length === 0 && options.arrayFormat === 'bracket-separator') {\n\t\t\t\treturn encode(key, options) + '[]';\n\t\t\t}\n\n\t\t\treturn value\n\t\t\t\t.reduce(formatter(key), [])\n\t\t\t\t.join('&');\n\t\t}\n\n\t\treturn encode(key, options) + '=' + encode(value, options);\n\t}).filter(x => x.length > 0).join('&');\n}\n\nexport function parseUrl(url, options) {\n\toptions = {\n\t\tdecode: true,\n\t\t...options,\n\t};\n\n\tlet [url_, hash] = splitOnFirst(url, '#');\n\n\tif (url_ === undefined) {\n\t\turl_ = url;\n\t}\n\n\treturn {\n\t\turl: url_?.split('?')?.[0] ?? '',\n\t\tquery: parse(extract(url), options),\n\t\t...(options && options.parseFragmentIdentifier && hash ? {fragmentIdentifier: decode(hash, options)} : {}),\n\t};\n}\n\nexport function stringifyUrl(object, options) {\n\toptions = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\t[encodeFragmentIdentifier]: true,\n\t\t...options,\n\t};\n\n\tconst url = removeHash(object.url).split('?')[0] || '';\n\tconst queryFromUrl = extract(object.url);\n\n\tconst query = {\n\t\t...parse(queryFromUrl, {sort: false}),\n\t\t...object.query,\n\t};\n\n\tlet queryString = stringify(query, options);\n\tqueryString &&= `?${queryString}`;\n\n\tlet hash = getHash(object.url);\n\tif (typeof object.fragmentIdentifier === 'string') {\n\t\tconst urlObjectForFragmentEncode = new URL(url);\n\t\turlObjectForFragmentEncode.hash = object.fragmentIdentifier;\n\t\thash = options[encodeFragmentIdentifier] ? urlObjectForFragmentEncode.hash : `#${object.fragmentIdentifier}`;\n\t}\n\n\treturn `${url}${queryString}${hash}`;\n}\n\nexport function pick(input, filter, options) {\n\toptions = {\n\t\tparseFragmentIdentifier: true,\n\t\t[encodeFragmentIdentifier]: false,\n\t\t...options,\n\t};\n\n\tconst {url, query, fragmentIdentifier} = parseUrl(input, options);\n\n\treturn stringifyUrl({\n\t\turl,\n\t\tquery: includeKeys(query, filter),\n\t\tfragmentIdentifier,\n\t}, options);\n}\n\nexport function exclude(input, filter, options) {\n\tconst exclusionFilter = Array.isArray(filter) ? key => !filter.includes(key) : (key, value) => !filter(key, value);\n\n\treturn pick(input, exclusionFilter, options);\n}\n", "const token = '%[a-f0-9]{2}';\nconst singleMatcher = new RegExp('(' + token + ')|([^%]+?)', 'gi');\nconst multiMatcher = new RegExp('(' + token + ')+', 'gi');\n\nfunction decodeComponents(components, split) {\n\ttry {\n\t\t// Try to decode the entire string first\n\t\treturn [decodeURIComponent(components.join(''))];\n\t} catch {\n\t\t// Do nothing\n\t}\n\n\tif (components.length === 1) {\n\t\treturn components;\n\t}\n\n\tsplit = split || 1;\n\n\t// Split the array in 2 parts\n\tconst left = components.slice(0, split);\n\tconst right = components.slice(split);\n\n\treturn Array.prototype.concat.call([], decodeComponents(left), decodeComponents(right));\n}\n\nfunction decode(input) {\n\ttry {\n\t\treturn decodeURIComponent(input);\n\t} catch {\n\t\tlet tokens = input.match(singleMatcher) || [];\n\n\t\tfor (let i = 1; i < tokens.length; i++) {\n\t\t\tinput = decodeComponents(tokens, i).join('');\n\n\t\t\ttokens = input.match(singleMatcher) || [];\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nfunction customDecodeURIComponent(input) {\n\t// Keep track of all the replacements and prefill the map with the `BOM`\n\tconst replaceMap = {\n\t\t'%FE%FF': '\\uFFFD\\uFFFD',\n\t\t'%FF%FE': '\\uFFFD\\uFFFD',\n\t};\n\n\tlet match = multiMatcher.exec(input);\n\twhile (match) {\n\t\ttry {\n\t\t\t// Decode as big chunks as possible\n\t\t\treplaceMap[match[0]] = decodeURIComponent(match[0]);\n\t\t} catch {\n\t\t\tconst result = decode(match[0]);\n\n\t\t\tif (result !== match[0]) {\n\t\t\t\treplaceMap[match[0]] = result;\n\t\t\t}\n\t\t}\n\n\t\tmatch = multiMatcher.exec(input);\n\t}\n\n\t// Add `%C2` at the end of the map to make sure it does not replace the combinator before everything else\n\treplaceMap['%C2'] = '\\uFFFD';\n\n\tconst entries = Object.keys(replaceMap);\n\n\tfor (const key of entries) {\n\t\t// Replace all decoded components\n\t\tinput = input.replace(new RegExp(key, 'g'), replaceMap[key]);\n\t}\n\n\treturn input;\n}\n\nexport default function decodeUriComponent(encodedURI) {\n\tif (typeof encodedURI !== 'string') {\n\t\tthrow new TypeError('Expected `encodedURI` to be of type `string`, got `' + typeof encodedURI + '`');\n\t}\n\n\ttry {\n\t\t// Try the built in decoder first\n\t\treturn decodeURIComponent(encodedURI);\n\t} catch {\n\t\t// Fallback to a more advanced decoder\n\t\treturn customDecodeURIComponent(encodedURI);\n\t}\n}\n", "export function includeKeys(object, predicate) {\n\tconst result = {};\n\n\tif (Array.isArray(predicate)) {\n\t\tfor (const key of predicate) {\n\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(object, key);\n\t\t\tif (descriptor?.enumerable) {\n\t\t\t\tObject.defineProperty(result, key, descriptor);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// `Reflect.ownKeys()` is required to retrieve symbol properties\n\t\tfor (const key of Reflect.ownKeys(object)) {\n\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(object, key);\n\t\t\tif (descriptor.enumerable) {\n\t\t\t\tconst value = object[key];\n\t\t\t\tif (predicate(key, value, object)) {\n\t\t\t\t\tObject.defineProperty(result, key, descriptor);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function excludeKeys(object, predicate) {\n\tif (Array.isArray(predicate)) {\n\t\tconst set = new Set(predicate);\n\t\treturn includeKeys(object, key => !set.has(key));\n\t}\n\n\treturn includeKeys(object, (key, value, object) => !predicate(key, value, object));\n}\n", "export default function splitOnFirst(string, separator) {\n\tif (!(typeof string === 'string' && typeof separator === 'string')) {\n\t\tthrow new TypeError('Expected the arguments to be of type `string`');\n\t}\n\n\tif (string === '' || separator === '') {\n\t\treturn [];\n\t}\n\n\tconst separatorIndex = string.indexOf(separator);\n\n\tif (separatorIndex === -1) {\n\t\treturn [];\n\t}\n\n\treturn [\n\t\tstring.slice(0, separatorIndex),\n\t\tstring.slice(separatorIndex + separator.length)\n\t];\n}\n", "import * as queryString from './base.js';\n\nexport default queryString;\n", "import type { Stringifiable } from 'query-string';\n\n/**\n * Map of string keys to primitive array values accepted by `query-string`. Keys are used as\n * URL query parameter keys. Values correspond to query param values, enforced as an array\n * for easier handling. For example, a mapping of `{ site_id: [1, 2] }` is serialized by\n * `query-string` as `?site_id=1&site_id=2`. Likewise, `{ site_id: [1] }` is serialized as\n * `?site_id=1`.\n */\nexport type QueryFilter = Map<string, Stringifiable[]>;\n\n/**\n * JSON data structure from `data-dynamic-params` attribute.\n */\nexport type DataDynamicParam = {\n  /**\n   * Name of form field to track.\n   *\n   * @example [name=\"tenant_group\"]\n   */\n  fieldName: string;\n  /**\n   * Query param key.\n   *\n   * @example group_id\n   */\n  queryParam: string;\n};\n\n/**\n * `queryParams` Map value.\n */\nexport type QueryParam = {\n  queryParam: string;\n  queryValue: Stringifiable[];\n};\n\n/**\n * Map of string keys to primitive values. Used to track variables within URLs from the server. For\n * example, `/api/$key/thing`. `PathFilter` tracks `$key` as `{ key: '' }` in the map, and when the\n * value is later known, the value is set \u2014 `{ key: 'value' }`, and the URL is transformed to\n * `/api/value/thing`.\n */\nexport type PathFilter = Map<string, Stringifiable>;\n\n/**\n * Strict Type Guard to determine if a deserialized value from the `data-dynamic-params` attribute\n * is of type `DataDynamicParam[]`.\n *\n * @param value Deserialized value from `data-dynamic-params` attribute.\n */\nexport function isDataDynamicParams(value: unknown): value is DataDynamicParam[] {\n  if (Array.isArray(value)) {\n    for (const item of value) {\n      if (typeof item === 'object' && item !== null) {\n        if ('fieldName' in item && 'queryParam' in item) {\n          return (\n            typeof (item as DataDynamicParam).fieldName === 'string' &&\n            typeof (item as DataDynamicParam).queryParam === 'string'\n          );\n        }\n      }\n    }\n  }\n  return false;\n}\n", "import { isTruthy } from '../../util';\nimport { isDataDynamicParams } from '../types';\n\nimport type { QueryParam } from '../types';\n\n/**\n * Extension of built-in `Map` to add convenience functions.\n */\nexport class DynamicParamsMap extends Map<string, QueryParam> {\n  /**\n   * Get the query parameter key based on field name.\n   *\n   * @param fieldName Related field name.\n   * @returns `queryParam` key.\n   */\n  public queryParam(fieldName: string): Nullable<QueryParam['queryParam']> {\n    const value = this.get(fieldName);\n    if (typeof value !== 'undefined') {\n      return value.queryParam;\n    }\n    return null;\n  }\n\n  /**\n   * Get the query parameter value based on field name.\n   *\n   * @param fieldName Related field name.\n   * @returns `queryValue` value, or an empty array if there is no corresponding Map entry.\n   */\n  public queryValue(fieldName: string): QueryParam['queryValue'] {\n    const value = this.get(fieldName);\n    if (typeof value !== 'undefined') {\n      return value.queryValue;\n    }\n    return [];\n  }\n\n  /**\n   * Update the value of a field when the value changes.\n   *\n   * @param fieldName Related field name.\n   * @param queryValue New value.\n   * @returns `true` if the update was successful, `false` if there was no corresponding Map entry.\n   */\n  public updateValue(fieldName: string, queryValue: QueryParam['queryValue']): boolean {\n    const current = this.get(fieldName);\n    if (isTruthy(current)) {\n      const { queryParam } = current;\n      this.set(fieldName, { queryParam, queryValue });\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Populate the underlying map based on the JSON passed in the `data-dynamic-params` attribute.\n   *\n   * @param json Raw JSON string from `data-dynamic-params` attribute.\n   */\n  public addFromJson(json: string | null | undefined): void {\n    if (isTruthy(json)) {\n      const deserialized = JSON.parse(json);\n      // Ensure the value is the data structure we expect.\n      if (isDataDynamicParams(deserialized)) {\n        for (const { queryParam, fieldName } of deserialized) {\n          // Populate the underlying map with the initial data.\n          this.set(fieldName, { queryParam, queryValue: [] });\n        }\n      } else {\n        throw new Error(\n          `Data from 'data-dynamic-params' attribute is improperly formatted: '${json}'`,\n        );\n      }\n    }\n  }\n}\n", "import { RecursivePartial, TomOption, TomSettings } from 'tom-select/dist/types/types';\nimport { TomInput } from 'tom-select/dist/cjs/types/core';\nimport { addClasses } from 'tom-select/src/vanilla.ts';\nimport queryString from 'query-string';\nimport TomSelect from 'tom-select';\nimport type { Stringifiable } from 'query-string';\nimport { DynamicParamsMap } from './dynamicParamsMap';\n\n// Transitional\nimport { QueryFilter, PathFilter } from '../types';\nimport { getElement, replaceAll } from '../../util';\n\n// Extends TomSelect to provide enhanced fetching of options via the REST API\nexport class DynamicTomSelect extends TomSelect {\n  public readonly nullOption: Nullable<TomOption> = null;\n\n  // Transitional code from APISelect\n  private readonly queryParams: QueryFilter = new Map();\n  private readonly staticParams: QueryFilter = new Map();\n  private readonly dynamicParams: DynamicParamsMap = new DynamicParamsMap();\n  private readonly pathValues: PathFilter = new Map();\n\n  /**\n   * Overrides\n   */\n\n  constructor(input_arg: string | TomInput, user_settings: RecursivePartial<TomSettings>) {\n    super(input_arg, user_settings);\n\n    // Glean the REST API endpoint URL from the <select> element\n    this.api_url = this.input.getAttribute('data-url') as string;\n\n    // Override any field names set as widget attributes\n    this.valueField = this.input.getAttribute('ts-value-field') || this.settings.valueField;\n    this.labelField = this.input.getAttribute('ts-label-field') || this.settings.labelField;\n    this.disabledField =\n      this.input.getAttribute('ts-disabled-field') || this.settings.disabledField;\n    this.descriptionField = this.input.getAttribute('ts-description-field') || 'description';\n    this.depthField = this.input.getAttribute('ts-depth-field') || '_depth';\n    this.parentField = this.input.getAttribute('ts-parent-field') || null;\n    this.countField = this.input.getAttribute('ts-count-field') || null;\n\n    // Set the null option (if any)\n    const nullOption = this.input.getAttribute('data-null-option');\n    if (nullOption) {\n      const valueField = this.settings.valueField;\n      const labelField = this.settings.labelField;\n      this.nullOption = {};\n      this.nullOption[valueField] = 'null';\n      this.nullOption[labelField] = nullOption;\n    }\n\n    // Populate static query parameters.\n    this.getStaticParams();\n    for (const [key, value] of this.staticParams.entries()) {\n      this.queryParams.set(key, value);\n    }\n\n    // Populate dynamic query parameters\n    this.getDynamicParams();\n    for (const filter of this.dynamicParams.keys()) {\n      this.updateQueryParams(filter);\n    }\n\n    // Path values\n    this.getPathKeys();\n    for (const filter of this.pathValues.keys()) {\n      this.updatePathValues(filter);\n    }\n\n    // Add dependency event listeners.\n    this.addEventListeners();\n  }\n\n  load(value: string) {\n    const self = this;\n\n    // Automatically clear any cached options. (Only options included\n    // in the API response should be present.)\n    self.clearOptions();\n\n    // Populate the null option (if any) if not searching\n    if (self.nullOption && !value) {\n      self.addOption(self.nullOption);\n    }\n\n    // Get the API request URL. If none is provided, abort as no request can be made.\n    const url = self.getRequestUrl(value);\n    if (!url) {\n      return;\n    }\n\n    addClasses(self.wrapper, self.settings.loadingClass);\n    self.loading++;\n\n    // Make the API request\n    fetch(url)\n      .then(response => response.json())\n      .then(apiData => {\n        const results: Dict[] = apiData.results;\n        const options: Dict[] = [];\n        for (const result of results) {\n          const option = self.getOptionFromData(result);\n          options.push(option);\n        }\n        return options;\n      })\n      // Pass the options to the callback function\n      .then(options => {\n        self.loadCallback(options, []);\n      })\n      .catch(() => {\n        self.loadCallback([], []);\n      });\n  }\n\n  /**\n   * Custom methods\n   */\n\n  // Formulate and return the complete URL for an API request, including any query parameters.\n  getRequestUrl(search: string): string {\n    let url = this.api_url;\n\n    // Create new URL query parameters based on the current state of `queryParams` and create an\n    // updated API query URL.\n    const query = {} as Dict<Stringifiable[]>;\n    for (const [key, value] of this.queryParams.entries()) {\n      query[key] = value;\n    }\n\n    // Replace any variables in the URL with values from `pathValues` if set.\n    for (const [key, value] of this.pathValues.entries()) {\n      for (const result of this.api_url.matchAll(new RegExp(`({{${key}}})`, 'g'))) {\n        if (value) {\n          url = replaceAll(url, result[1], value.toString());\n        } else {\n          // No value is available to replace the token; abort.\n          return '';\n        }\n      }\n    }\n\n    // Append the search query, if any\n    if (search) {\n      query['q'] = [search];\n    }\n\n    // Add standard parameters\n    query['brief'] = [true];\n    query['limit'] = [this.settings.maxOptions];\n\n    return queryString.stringifyUrl({ url, query });\n  }\n\n  // Compile TomOption data from an API result\n  getOptionFromData(data: Dict) {\n    const option: Dict = {\n      id: data[this.valueField],\n      display: data[this.labelField],\n      depth: data[this.depthField] || null,\n      description: data[this.descriptionField] || null,\n    };\n    if (data[this.parentField]) {\n      const parent: Dict = data[this.parentField] as Dict;\n      option['parent'] = parent[this.labelField];\n    }\n    if (data[this.countField]) {\n      option['count'] = data[this.countField];\n    }\n    if (data[this.disabledField]) {\n      option['disabled'] = data[this.disabledField];\n    }\n    return option;\n  }\n\n  /**\n   * Transitional methods\n   */\n\n  // Determine if this instance's options should be filtered by static values passed from the\n  // server. Looks for the DOM attribute `data-static-params`, the value of which is a JSON\n  // array of objects containing key/value pairs to add to `this.staticParams`.\n  private getStaticParams(): void {\n    const serialized = this.input.getAttribute('data-static-params');\n\n    try {\n      if (serialized) {\n        const deserialized = JSON.parse(serialized);\n        if (deserialized) {\n          for (const { queryParam, queryValue } of deserialized) {\n            if (Array.isArray(queryValue)) {\n              this.staticParams.set(queryParam, queryValue);\n            } else {\n              this.staticParams.set(queryParam, [queryValue]);\n            }\n          }\n        }\n      }\n    } catch (err) {\n      console.group(`Unable to determine static query parameters for select field '${this.name}'`);\n      console.warn(err);\n      console.groupEnd();\n    }\n  }\n\n  // Determine if this instances' options should be filtered by the value of another select\n  // element. Looks for the DOM attribute `data-dynamic-params`, the value of which is a JSON\n  // array of objects containing information about how to handle the related field.\n  private getDynamicParams(): void {\n    const serialized = this.input.getAttribute('data-dynamic-params');\n    try {\n      this.dynamicParams.addFromJson(serialized);\n    } catch (err) {\n      console.group(`Unable to determine dynamic query parameters for select field '${this.name}'`);\n      console.warn(err);\n      console.groupEnd();\n    }\n  }\n\n  // Parse the `data-url` attribute to add any variables to `pathValues` as keys with empty\n  // values. As those keys' corresponding form fields' values change, `pathValues` will be\n  // updated to reflect the new value.\n  private getPathKeys() {\n    for (const result of this.api_url.matchAll(new RegExp(`{{(.+)}}`, 'g'))) {\n      this.pathValues.set(result[1], '');\n    }\n  }\n\n  // Update an element's API URL based on the value of another element on which this element\n  // relies.\n  private updateQueryParams(fieldName: string): void {\n    // Find the element dependency.\n    const element = document.querySelector<HTMLSelectElement>(`[name=\"${fieldName}\"]`);\n    if (element !== null) {\n      // Initialize the element value as an array, in case there are multiple values.\n      let elementValue = [] as Stringifiable[];\n\n      if (element.multiple) {\n        // If this is a multi-select (form filters, tags, etc.), use all selected options as the value.\n        elementValue = Array.from(element.options)\n          .filter(o => o.selected)\n          .map(o => o.value);\n      } else if (element.value !== '') {\n        // If this is single-select (most fields), use the element's value. This seemingly\n        // redundant/verbose check is mainly for performance, so we're not running the above three\n        // functions (`Array.from()`, `Array.filter()`, `Array.map()`) every time every select\n        // field's value changes.\n        elementValue = [element.value];\n      }\n\n      if (elementValue.length > 0) {\n        // If the field has a value, add it to the map.\n        this.dynamicParams.updateValue(fieldName, elementValue);\n        // Get the updated value.\n        const current = this.dynamicParams.get(fieldName);\n\n        if (typeof current !== 'undefined') {\n          const { queryParam, queryValue } = current;\n          let value = [] as Stringifiable[];\n\n          if (this.staticParams.has(queryParam)) {\n            // If the field is defined in `staticParams`, we should merge the dynamic value with\n            // the static value.\n            const staticValue = this.staticParams.get(queryParam);\n            if (typeof staticValue !== 'undefined') {\n              value = [...staticValue, ...queryValue];\n            }\n          } else {\n            // If the field is _not_ defined in `staticParams`, we should replace the current value\n            // with the new dynamic value.\n            value = queryValue;\n          }\n          if (value.length > 0) {\n            this.queryParams.set(queryParam, value);\n          } else {\n            this.queryParams.delete(queryParam);\n          }\n        }\n      } else {\n        // Otherwise, delete it (we don't want to send an empty query like `?site_id=`)\n        const queryParam = this.dynamicParams.queryParam(fieldName);\n        if (queryParam !== null) {\n          this.queryParams.delete(queryParam);\n        }\n      }\n    }\n  }\n\n  // Update `pathValues` based on the form value of another element.\n  private updatePathValues(id: string): void {\n    const key = replaceAll(id, /^id_/i, '');\n    const element = getElement<HTMLSelectElement>(`id_${key}`);\n    if (element !== null) {\n      // If this element's URL contains variable tags ({{), replace the tag with the dependency's\n      // value. For example, if the dependency is the `rack` field, and the `rack` field's value\n      // is `1`, this element's URL would change from `/dcim/racks/{{rack}}/` to `/dcim/racks/1/`.\n      const hasReplacement =\n        this.api_url.includes(`{{`) &&\n        Boolean(this.api_url.match(new RegExp(`({{(${id})}})`, 'g')));\n\n      if (hasReplacement) {\n        if (element.value) {\n          // If the field has a value, add it to the map.\n          this.pathValues.set(id, element.value);\n        } else {\n          // Otherwise, reset the value.\n          this.pathValues.set(id, '');\n        }\n      }\n    }\n  }\n\n  /**\n   * Events\n   */\n\n  // Add event listeners to this element and its dependencies so that when dependencies change\n  //this element's options are updated.\n  private addEventListeners(): void {\n    // Create a unique iterator of all possible form fields which, when changed, should cause this\n    // element to update its API query.\n    const dependencies = new Set([...this.dynamicParams.keys(), ...this.pathValues.keys()]);\n\n    for (const dep of dependencies) {\n      const filterElement = document.querySelector(`[name=\"${dep}\"]`);\n      if (filterElement !== null) {\n        // Subscribe to dependency changes.\n        filterElement.addEventListener('change', event => this.handleEvent(event));\n      }\n      // Subscribe to changes dispatched by this state manager.\n      this.input.addEventListener(`netbox.select.onload.${dep}`, event => this.handleEvent(event));\n    }\n  }\n\n  // Event handler to be dispatched any time a dependency's value changes. For example, when the\n  // value of `tenant_group` changes, `handleEvent` is called to get the current value of\n  // `tenant_group` and update the query parameters and API query URL for the `tenant` field.\n  private handleEvent(event: Event): void {\n    const target = event.target as HTMLSelectElement;\n\n    // Update the element's URL after any changes to a dependency.\n    this.updateQueryParams(target.name);\n    this.updatePathValues(target.name);\n\n    // Clear any previous selection(s) as the parent filter has changed\n    this.clear();\n\n    // Load new data.\n    this.load(this.lastValue);\n  }\n}\n", "import { TomOption } from 'tom-select/src/types';\nimport { escape_html } from 'tom-select/src/utils';\nimport { DynamicTomSelect } from './classes/dynamicTomSelect';\nimport { getPlugins } from './config';\nimport { getElements } from '../util';\n\nconst VALUE_FIELD = 'id';\nconst LABEL_FIELD = 'display';\nconst MAX_OPTIONS = 100;\n\n// Render the HTML for a dropdown option\nfunction renderOption(data: TomOption, escape: typeof escape_html) {\n  let html = '<div>';\n\n  // If the option has a `depth` property, indent its label\n  if (typeof data.depth === 'number' && data.depth > 0) {\n    html = `${html}${'\u2500'.repeat(data.depth)} `;\n  }\n\n  html = `${html}${escape(data[LABEL_FIELD])}`;\n  if (data['parent']) {\n    html = `${html} <span class=\"text-secondary\">${escape(data['parent'])}</span>`;\n  }\n  if (data['count']) {\n    html = `${html} <span class=\"badge\">${escape(data['count'])}</span>`;\n  }\n  if (data['description']) {\n    html = `${html}<br /><small class=\"text-secondary\">${escape(data['description'])}</small>`;\n  }\n  html = `${html}</div>`;\n\n  return html;\n}\n\n// Render the HTML for a selected item\nfunction renderItem(data: TomOption, escape: typeof escape_html) {\n  if (data['parent']) {\n    return `<div>${escape(data['parent'])} > ${escape(data[LABEL_FIELD])}</div>`;\n  }\n  return `<div>${escape(data[LABEL_FIELD])}<div>`;\n}\n\n// Initialize <select> elements which are populated via a REST API call\nexport function initDynamicSelects(): void {\n  for (const select of getElements<HTMLSelectElement>('select.api-select:not(.tomselected)')) {\n    new DynamicTomSelect(select, {\n      ...getPlugins(select),\n      valueField: VALUE_FIELD,\n      labelField: LABEL_FIELD,\n      maxOptions: MAX_OPTIONS,\n\n      // Disable local search (search is performed on the backend)\n      searchField: [],\n\n      // Load options from API immediately on focus\n      preload: 'focus',\n\n      // Define custom rendering functions\n      render: {\n        option: renderOption,\n        item: renderItem,\n      },\n\n      // By default, load() will be called only if query.length > 0\n      shouldLoad: function (): boolean {\n        return true;\n      },\n    });\n  }\n}\n", "import { initColorSelects, initStaticSelects } from './static';\nimport { initDynamicSelects } from './dynamic';\n\nexport function initSelects(): void {\n  initStaticSelects();\n  initDynamicSelects();\n  initColorSelects();\n}\n", "import { createToast } from '../bs';\nimport { isTruthy, apiPatch, hasError, getElements } from '../util';\n\n/**\n * When the toggle button is clicked, swap the connection status via the API and toggle CSS\n * classes to reflect the connection status.\n *\n * @param element Connection Toggle Button Element\n */\nfunction setConnectionStatus(element: HTMLButtonElement, status: string): void {\n  // Get the button's row to change its data-cable-status attribute\n  const row = element.parentElement?.parentElement as HTMLTableRowElement;\n  const url = element.getAttribute('data-url');\n\n  if (isTruthy(url)) {\n    apiPatch(url, { status }).then(res => {\n      if (hasError(res)) {\n        // If the API responds with an error, show it to the user.\n        createToast('danger', 'Error', res.error).show();\n        return;\n      } else {\n        // Update cable status in DOM\n        row.setAttribute('data-cable-status', status);\n      }\n    });\n  }\n}\n\nexport function initConnectionToggle(): void {\n  for (const element of getElements<HTMLButtonElement>('button.mark-planned')) {\n    element.addEventListener('click', () => setConnectionStatus(element, 'planned'));\n  }\n  for (const element of getElements<HTMLButtonElement>('button.mark-installed')) {\n    element.addEventListener('click', () => setConnectionStatus(element, 'connected'));\n  }\n}\n", "/**\n * `StateManger` configuration options.\n */\ninterface StateOptions {\n  /**\n   * If true, all values will be written to localStorage when calling `set()`. Additionally, when\n   * a new state instance is initialized, if the same localStorage state key (see `key` property)\n   * exists in localStorage, the value will be read and used as the initial value.\n   */\n  persist?: boolean;\n\n  /**\n   * Use a static localStorage key instead of automatically generating one.\n   */\n  key?: string;\n}\n\n/**\n * Typed implementation of native `ProxyHandler`.\n */\nclass ProxyStateHandler<T extends Dict, K extends keyof T = keyof T> implements ProxyHandler<T> {\n  public set<S extends Index<T, K>>(target: T, key: S, value: T[S]): boolean {\n    target[key] = value;\n    return true;\n  }\n\n  public get<G extends Index<T, K>>(target: T, key: G): T[G] {\n    return target[key];\n  }\n  public has(target: T, key: string): boolean {\n    return key in target;\n  }\n}\n\n/**\n * Manage runtime and/or locally stored (via localStorage) state.\n */\nexport class StateManager<T extends Dict, K extends keyof T = keyof T> {\n  /**\n   * implemented `ProxyHandler` for the underlying `Proxy` object.\n   */\n  private handlers: ProxyStateHandler<T>;\n  /**\n   * Underlying `Proxy` object for this instance.\n   */\n  private proxy: T;\n  /**\n   * Options for this instance.\n   */\n  private options: StateOptions;\n  /**\n   * localStorage key for this instance.\n   */\n  private key: string = '';\n\n  constructor(raw: T, options: StateOptions) {\n    this.options = options;\n\n    // Use static key if defined.\n    if (typeof this.options.key === 'string') {\n      this.key = this.options.key;\n    } else {\n      this.key = this.generateStateKey(raw);\n    }\n\n    if (this.options.persist) {\n      const saved = this.retrieve();\n      if (saved !== null) {\n        raw = { ...raw, ...saved };\n      }\n    }\n\n    this.handlers = new ProxyStateHandler<T>();\n    this.proxy = new Proxy(raw, this.handlers);\n\n    if (this.options.persist) {\n      this.save();\n    }\n  }\n\n  /**\n   * Generate a semi-unique localStorage key for this instance.\n   */\n  private generateStateKey(obj: T): string {\n    const encoded = window.btoa(Object.keys(obj).join('---'));\n    return `netbox-${encoded}`;\n  }\n\n  /**\n   * Get the current value of `key`.\n   *\n   * @param key Object key name.\n   * @returns Object value.\n   */\n  public get<G extends Index<T, K>>(key: G): T[G] {\n    return this.handlers.get(this.proxy, key);\n  }\n\n  /**\n   * Set a new value for `key`.\n   *\n   * @param key Object key name.\n   * @param value New value.\n   */\n  public set<G extends Index<T, K>>(key: G, value: T[G]): void {\n    this.handlers.set(this.proxy, key, value);\n    if (this.options.persist) {\n      this.save();\n    }\n  }\n\n  /**\n   * Access the full instance.\n   *\n   * @returns StateManager instance.\n   */\n  public all(): T {\n    return this.proxy;\n  }\n\n  /**\n   * Access all state keys.\n   */\n  public keys(): K[] {\n    return Object.keys(this.proxy) as K[];\n  }\n\n  /**\n   * Access all state values.\n   */\n  public values(): T[K][] {\n    return Object.values(this.proxy) as T[K][];\n  }\n\n  /**\n   * Serialize and save the current state to localStorage.\n   */\n  private save(): void {\n    const value = JSON.stringify(this.proxy);\n    localStorage.setItem(this.key, value);\n  }\n\n  /**\n   * Retrieve the serialized state object from localStorage.\n   *\n   * @returns Parsed state object.\n   */\n  private retrieve(): T | null {\n    const raw = localStorage.getItem(this.key);\n    if (raw !== null) {\n      const data = JSON.parse(raw) as T;\n      return data;\n    }\n    return null;\n  }\n}\n\n/**\n * Create a new state object. Only one instance should exist at runtime for a given state.\n *\n * @param initial State's initial value.\n * @param options State management instance options.\n * @returns State management instance.\n */\nexport function createState<T extends Dict>(\n  initial: T,\n  options: StateOptions = {},\n): StateManager<T> {\n  return new StateManager<T>(initial, options);\n}\n", "import { createState } from '../state';\n\nexport const objectDepthState = createState<{ hidden: boolean }>(\n  { hidden: false },\n  { persist: true, key: 'netbox-object-depth' },\n);\n", "import { createState } from '../state';\n\nexport type RackViewSelection = 'images-and-labels' | 'images-only' | 'labels-only';\n\nexport const rackImagesState = createState<{ view: RackViewSelection }>(\n  { view: 'images-and-labels' },\n  { persist: true },\n);\n", "import { createState } from '../state';\n\nexport const previousPkCheckState = createState<{ element: Nullable<HTMLInputElement> }>(\n  { element: null },\n  { persist: false },\n);\n", "import { createState } from '../state';\n\nexport const secretState = createState<{ hidden: boolean }>(\n  { hidden: true },\n  { persist: true, key: 'netbox-secret' },\n);\n", "import { objectDepthState } from '../stores';\nimport { getElements } from '../util';\n\nimport type { StateManager } from '../state';\n\ntype ObjectDepthState = { hidden: boolean };\n\n/**\n * Change toggle button's text and attribute to reflect the current state.\n *\n * @param hidden `true` if the current state is hidden, `false` otherwise.\n * @param button Toggle element.\n */\nfunction toggleDepthButton(hidden: boolean, button: HTMLButtonElement): void {\n  button.setAttribute('data-depth-indicators', hidden ? 'hidden' : 'shown');\n  button.innerText = hidden ? 'Show Depth Indicators' : 'Hide Depth Indicators';\n}\n\n/**\n * Show all depth indicators.\n */\nfunction showDepthIndicators(): void {\n  for (const element of getElements<HTMLDivElement>('.record-depth')) {\n    element.style.display = '';\n  }\n}\n\n/**\n * Hide all depth indicators.\n */\nfunction hideDepthIndicators(): void {\n  for (const element of getElements<HTMLDivElement>('.record-depth')) {\n    element.style.display = 'none';\n  }\n}\n\n/**\n * Update object depth local state and visualization when the button is clicked.\n *\n * @param state State instance.\n * @param button Toggle element.\n */\nfunction handleDepthToggle(state: StateManager<ObjectDepthState>, button: HTMLButtonElement): void {\n  const initiallyHidden = state.get('hidden');\n  state.set('hidden', !initiallyHidden);\n  const hidden = state.get('hidden');\n\n  if (hidden) {\n    hideDepthIndicators();\n  } else {\n    showDepthIndicators();\n  }\n  toggleDepthButton(hidden, button);\n}\n\n/**\n * Initialize object depth toggle buttons.\n */\nexport function initDepthToggle(): void {\n  const initiallyHidden = objectDepthState.get('hidden');\n\n  for (const button of getElements<HTMLButtonElement>('button.toggle-depth')) {\n    toggleDepthButton(initiallyHidden, button);\n\n    button.addEventListener(\n      'click',\n      event => {\n        handleDepthToggle(objectDepthState, event.currentTarget as HTMLButtonElement);\n      },\n      false,\n    );\n  }\n  // Synchronize local state with default DOM elements.\n  if (initiallyHidden) {\n    hideDepthIndicators();\n  } else if (!initiallyHidden) {\n    showDepthIndicators();\n  }\n}\n", "import { getElements } from '../util';\n\n/**\n * Move selected options of a select element up in order.\n *\n * Adapted from:\n * @see https://www.tomred.net/css-html-js/reorder-option-elements-of-an-html-select.html\n * @param element Select Element\n */\nfunction moveOptionUp(element: HTMLSelectElement): void {\n  const options = Array.from(element.options);\n  for (let i = 1; i < options.length; i++) {\n    const option = options[i];\n    if (option.selected) {\n      element.removeChild(option);\n      element.insertBefore(option, element.options[i - 1]);\n    }\n  }\n}\n\n/**\n * Move selected options of a select element down in order.\n *\n * Adapted from:\n * @see https://www.tomred.net/css-html-js/reorder-option-elements-of-an-html-select.html\n * @param element Select Element\n */\nfunction moveOptionDown(element: HTMLSelectElement): void {\n  const options = Array.from(element.options);\n  for (let i = options.length - 2; i >= 0; i--) {\n    let option = options[i];\n    if (option.selected) {\n      let next = element.options[i + 1];\n      option = element.removeChild(option);\n      next = element.replaceChild(option, next);\n      element.insertBefore(next, option);\n    }\n  }\n}\n\n/**\n * Initialize move up/down buttons.\n */\nexport function initMoveButtons(): void {\n  for (const button of getElements<HTMLButtonElement>('#move-option-up')) {\n    const target = button.getAttribute('data-target');\n    if (target !== null) {\n      for (const select of getElements<HTMLSelectElement>(`#${target}`)) {\n        button.addEventListener('click', () => moveOptionUp(select));\n      }\n    }\n  }\n  for (const button of getElements<HTMLButtonElement>('#move-option-down')) {\n    const target = button.getAttribute('data-target');\n    if (target !== null) {\n      for (const select of getElements<HTMLSelectElement>(`#${target}`)) {\n        button.addEventListener('click', () => moveOptionDown(select));\n      }\n    }\n  }\n}\n", "import { getElements } from '../util';\n\n/**\n * Create a slug from any input string.\n *\n * @param slug Original string.\n * @param chars Maximum number of characters.\n * @returns Slugified string.\n */\nfunction slugify(slug: string, chars: number): string {\n  return slug\n    .replace(/[^\\-.\\w\\s]/g, '') // Remove unneeded chars\n    .replace(/^[\\s.]+|[\\s.]+$/g, '') // Trim leading/trailing spaces\n    .replace(/[-.\\s]+/g, '-') // Convert spaces and decimals to hyphens\n    .toLowerCase() // Convert to lowercase\n    .substring(0, chars); // Trim to first chars chars\n}\n\n/**\n * For any slug fields, add event listeners to handle automatically generating slug values.\n */\nexport function initReslug(): void {\n  for (const slugButton of getElements<HTMLButtonElement>('button#reslug')) {\n    const form = slugButton.form;\n    if (form == null) continue;\n    const slugField = form.querySelector('#id_slug') as HTMLInputElement;\n    if (slugField == null) continue;\n    const sourceId = slugField.getAttribute('slug-source');\n    const sourceField = form.querySelector(`#id_${sourceId}`) as HTMLInputElement;\n\n    const slugLengthAttr = slugField.getAttribute('maxlength');\n    let slugLength = 50;\n\n    if (slugLengthAttr) {\n      slugLength = Number(slugLengthAttr);\n    }\n    sourceField.addEventListener('blur', () => {\n      if (!slugField.value) {\n        slugField.value = slugify(sourceField.value, slugLength);\n      }\n    });\n    slugButton.addEventListener('click', () => {\n      slugField.value = slugify(sourceField.value, slugLength);\n    });\n  }\n}\n", "import { getElements, findFirstAdjacent } from '../util';\n\n/**\n * If any PK checkbox is checked, uncheck the select all table checkbox and the select all\n * confirmation checkbox.\n *\n * @param event Change Event\n */\nfunction handlePkCheck(event: Event): void {\n  const target = event.currentTarget as HTMLInputElement;\n  if (!target.checked) {\n    for (const element of getElements<HTMLInputElement>(\n      'input[type=\"checkbox\"].toggle',\n      'input#select-all',\n    )) {\n      element.checked = false;\n    }\n  }\n}\n\n/**\n * Show the select all card when the select all checkbox is checked, and sync the checkbox state\n * with all the PK checkboxes in the table.\n *\n * @param event Change Event\n */\nfunction handleSelectAllToggle(event: Event): void {\n  // Select all checkbox in header row.\n  const tableSelectAll = event.currentTarget as HTMLInputElement;\n  // Nearest table to the select all checkbox.\n  const table = findFirstAdjacent<HTMLInputElement>(tableSelectAll, 'table');\n  // Select all confirmation card.\n  const confirmCard = document.getElementById('select-all-box');\n  // Checkbox in confirmation card to signal if all objects should be selected.\n  const confirmCheckbox = document.getElementById('select-all') as Nullable<HTMLInputElement>;\n\n  if (table !== null) {\n    for (const element of table.querySelectorAll<HTMLInputElement>(\n      'tr:not(.d-none) input[type=\"checkbox\"][name=\"pk\"]',\n    )) {\n      if (tableSelectAll.checked) {\n        // Check all PK checkboxes if the select all checkbox is checked.\n        element.checked = true;\n      } else {\n        // Uncheck all PK checkboxes if the select all checkbox is unchecked.\n        element.checked = false;\n      }\n    }\n    if (confirmCard !== null) {\n      if (tableSelectAll.checked) {\n        // Unhide the select all confirmation card if the select all checkbox is checked.\n        confirmCard.classList.remove('d-none');\n      } else {\n        // Hide the select all confirmation card if the select all checkbox is unchecked.\n        confirmCard.classList.add('d-none');\n        if (confirmCheckbox !== null) {\n          // Uncheck the confirmation checkbox when the table checkbox is unchecked (after which\n          // the confirmation card will be hidden).\n          confirmCheckbox.checked = false;\n        }\n      }\n    }\n  }\n}\n\n/**\n * Initialize table select all elements.\n */\nexport function initSelectAll(): void {\n  for (const element of getElements<HTMLInputElement>(\n    'table tr th > input[type=\"checkbox\"].toggle',\n  )) {\n    element.addEventListener('change', handleSelectAllToggle);\n  }\n  for (const element of getElements<HTMLInputElement>('input[type=\"checkbox\"][name=\"pk\"]')) {\n    element.addEventListener('change', handlePkCheck);\n  }\n}\n", "import { getElements } from '../util';\n\n/**\n * Conditionally add and remove a class that will float the button group\n * based on whether or not items in the list are checked\n */\nfunction toggleFloat(): void {\n  const checkedCheckboxes = document.querySelector<HTMLInputElement>(\n    'input[type=\"checkbox\"][name=\"pk\"]:checked',\n  );\n  const buttonGroup = document.querySelector<HTMLDivElement>(\n    'div.form.form-horizontal div.btn-list',\n  );\n  if (!buttonGroup) {\n    return;\n  }\n  const isFloating = buttonGroup.classList.contains('btn-float-group-left');\n  if (checkedCheckboxes !== null && !isFloating) {\n    buttonGroup.classList.add('btn-float-group-left');\n  } else if (checkedCheckboxes === null && isFloating) {\n    buttonGroup.classList.remove('btn-float-group-left');\n  }\n}\n\n/**\n * Initialize floating bulk buttons.\n */\nexport function initFloatBulk(): void {\n  for (const element of getElements<HTMLInputElement>('input[type=\"checkbox\"][name=\"pk\"]')) {\n    element.addEventListener('change', () => {\n      toggleFloat();\n    });\n  }\n  // Handle the select-all checkbox\n  for (const element of getElements<HTMLInputElement>(\n    'table tr th > input[type=\"checkbox\"].toggle',\n  )) {\n    element.addEventListener('change', () => {\n      toggleFloat();\n    });\n  }\n}\n", "import { getElements } from '../util';\nimport { StateManager } from 'src/state';\nimport { previousPkCheckState } from '../stores';\n\ntype PreviousPkCheckState = { element: Nullable<HTMLInputElement> };\n\n/**\n * If there is a text selection, removes it.\n */\nfunction removeTextSelection(): void {\n  window.getSelection()?.removeAllRanges();\n}\n\n/**\n * Sets the state object passed in to the eventTargetElement object passed in.\n *\n * @param eventTargetElement HTML Input Element, retrieved from getting the target of the\n * event passed in from handlePkCheck()\n * @param state PreviousPkCheckState object.\n */\nfunction updatePreviousPkCheckState(\n  eventTargetElement: HTMLInputElement,\n  state: StateManager<PreviousPkCheckState>,\n): void {\n  state.set('element', eventTargetElement);\n}\n\n/**\n * For all checkboxes between eventTargetElement and previousStateElement in elementList, toggle\n * \"checked\" value to eventTargetElement.checked\n *\n * @param eventTargetElement HTML Input Element, retrieved from getting the target of the\n * event passed in from handlePkCheck()\n * @param state PreviousPkCheckState object.\n */\nfunction toggleCheckboxRange(\n  eventTargetElement: HTMLInputElement,\n  previousStateElement: HTMLInputElement,\n  elementList: Generator,\n): void {\n  let changePkCheckboxState = false;\n  for (const element of elementList) {\n    const typedElement = element as HTMLInputElement;\n    //Change loop's current checkbox state to eventTargetElement checkbox state\n    if (changePkCheckboxState === true) {\n      if (!typedElement.closest('tr')?.classList.contains('d-none')) {\n        typedElement.checked = eventTargetElement.checked;\n      }\n    }\n    //The previously clicked checkbox was above the shift clicked checkbox\n    if (element === previousStateElement) {\n      if (changePkCheckboxState === true) {\n        changePkCheckboxState = false;\n        return;\n      }\n      changePkCheckboxState = true;\n      if (!typedElement.closest('tr')?.classList.contains('d-none')) {\n        typedElement.checked = eventTargetElement.checked;\n      }\n    }\n    //The previously clicked checkbox was below the shift clicked checkbox\n    if (element === eventTargetElement) {\n      if (changePkCheckboxState === true) {\n        changePkCheckboxState = false;\n        return;\n      }\n      changePkCheckboxState = true;\n    }\n  }\n}\n\n/**\n * IF the shift key is pressed and there is state is not null, toggleCheckboxRange between the\n * event target element and the state element.\n *\n * @param event Mouse event.\n * @param state PreviousPkCheckState object.\n */\nfunction handlePkCheck(event: MouseEvent, state: StateManager<PreviousPkCheckState>): void {\n  const eventTargetElement = event.target as HTMLInputElement;\n  const previousStateElement = state.get('element');\n  updatePreviousPkCheckState(eventTargetElement, state);\n  //Stop if user is not holding shift key\n  if (!event.shiftKey) {\n    return;\n  }\n  removeTextSelection();\n  //If no previous state, store event target element as previous state and return\n  if (previousStateElement === null) {\n    return updatePreviousPkCheckState(eventTargetElement, state);\n  }\n  const checkboxList = getElements<HTMLInputElement>('input[type=\"checkbox\"][name=\"pk\"]');\n  toggleCheckboxRange(eventTargetElement, previousStateElement, checkboxList);\n}\n\n/**\n * Initialize table select all elements.\n */\nexport function initSelectMultiple(): void {\n  const checkboxElements = getElements<HTMLInputElement>('input[type=\"checkbox\"][name=\"pk\"]');\n  for (const element of checkboxElements) {\n    element.addEventListener('click', event => {\n      removeTextSelection();\n      //Stop propogation to avoid event firing multiple times\n      event.stopPropagation();\n      handlePkCheck(event, previousPkCheckState);\n    });\n  }\n}\n", "import { isTruthy } from 'src/util';\n\n/**\n * interface for htmx configRequest event\n */\ndeclare global {\n  interface HTMLElementEventMap {\n    'htmx:configRequest': CustomEvent<{\n      parameters: Record<string, string>;\n      headers: Record<string, string>;\n    }>;\n  }\n}\n\nfunction initMarkdownPreview(markdownWidget: HTMLDivElement) {\n  const previewButton = markdownWidget.querySelector('button.preview-button') as HTMLButtonElement;\n  const textarea = markdownWidget.querySelector('textarea') as HTMLTextAreaElement;\n  const preview = markdownWidget.querySelector('div.preview') as HTMLDivElement;\n\n  /**\n   * Make sure the textarea has style attribute height\n   * So that it can be copied over to preview div.\n   */\n  if (!isTruthy(textarea.style.height)) {\n    const { height } = textarea.getBoundingClientRect();\n    textarea.style.height = `${height}px`;\n  }\n\n  /**\n   * Add the value of the textarea to the body of the htmx request\n   * and copy the height of text are to the preview div\n   */\n  previewButton.addEventListener('htmx:configRequest', e => {\n    e.detail.parameters = { text: textarea.value || '' };\n    e.detail.headers['X-CSRFToken'] = window.CSRF_TOKEN;\n    preview.style.minHeight = textarea.style.height;\n    preview.innerHTML = '';\n  });\n}\n\nexport function initMarkdownPreviews(): void {\n  for (const markdownWidget of document.querySelectorAll<HTMLDivElement>('.markdown-widget')) {\n    initMarkdownPreview(markdownWidget);\n  }\n}\n", "import { secretState } from '../stores';\nimport { getElement, getElements, isTruthy } from '../util';\n\nimport type { StateManager } from '../state';\n\ntype SecretState = { hidden: boolean };\n\n/**\n * Change toggle button's text and attribute to reflect the current state.\n *\n * @param hidden `true` if the current state is hidden, `false` otherwise.\n * @param button Toggle element.\n */\nfunction toggleSecretButton(hidden: boolean, button: HTMLButtonElement): void {\n  button.setAttribute('data-secret-visibility', hidden ? 'hidden' : 'shown');\n  button.innerText = hidden ? 'Show Secret' : 'Hide Secret';\n}\n\n/**\n * Show secret.\n */\nfunction showSecret(): void {\n  const secret = getElement('secret');\n  if (isTruthy(secret)) {\n    const value = secret.getAttribute('data-secret');\n    if (isTruthy(value)) {\n      secret.innerText = value;\n    }\n  }\n}\n\n/**\n * Hide secret.\n */\nfunction hideSecret(): void {\n  const secret = getElement('secret');\n  if (isTruthy(secret)) {\n    const value = secret.getAttribute('data-secret');\n    if (isTruthy(value)) {\n      secret.innerText = '\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022';\n    }\n  }\n}\n\n/**\n * Update secret state and visualization when the button is clicked.\n *\n * @param state State instance.\n * @param button Toggle element.\n */\nfunction handleSecretToggle(state: StateManager<SecretState>, button: HTMLButtonElement): void {\n  state.set('hidden', !state.get('hidden'));\n  const hidden = state.get('hidden');\n\n  if (hidden) {\n    hideSecret();\n  } else {\n    showSecret();\n  }\n  toggleSecretButton(hidden, button);\n}\n\nfunction toggleCallback(event: MouseEvent) {\n  handleSecretToggle(secretState, event.currentTarget as HTMLButtonElement);\n}\n\n/**\n * Initialize secret toggle button.\n */\nexport function initSecretToggle(): void {\n  hideSecret();\n  for (const button of getElements<HTMLButtonElement>('button.toggle-secret')) {\n    button.removeEventListener('click', toggleCallback);\n    button.addEventListener('click', toggleCallback);\n  }\n}\n", "import { initConnectionToggle } from './connectionToggle';\nimport { initDepthToggle } from './depthToggle';\nimport { initMoveButtons } from './moveOptions';\nimport { initReslug } from './reslug';\nimport { initSelectAll } from './selectAll';\nimport { initFloatBulk } from './floatBulk';\nimport { initSelectMultiple } from './selectMultiple';\nimport { initMarkdownPreviews } from './markdownPreview';\nimport { initSecretToggle } from './secretToggle';\n\nexport function initButtons(): void {\n  for (const func of [\n    initDepthToggle,\n    initConnectionToggle,\n    initReslug,\n    initSelectAll,\n    initSelectMultiple,\n    initFloatBulk,\n    initMoveButtons,\n    initMarkdownPreviews,\n    initSecretToggle,\n  ]) {\n    func();\n  }\n}\n", "import { getElements, isTruthy } from './util';\n\nconst COLOR_MODE_KEY = 'netbox-color-mode';\n\n/**\n * Determine if a value is a supported color mode string value.\n */\nfunction isColorMode(value: unknown): value is ColorMode {\n  return value === 'dark' || value === 'light';\n}\n\n/**\n * Set the color mode to light or dark.\n *\n * @param mode `'light'` or `'dark'`\n * @returns `true` if the color mode was successfully set, `false` if not.\n */\nfunction storeColorMode(mode: ColorMode): void {\n  return localStorage.setItem(COLOR_MODE_KEY, mode);\n}\n\nfunction updateElements(targetMode: ColorMode): void {\n  const body = document.querySelector('body');\n  if (body && targetMode == 'dark') {\n    body.setAttribute('data-bs-theme', 'dark');\n  } else if (body) {\n    body.setAttribute('data-bs-theme', 'light');\n  }\n\n  for (const elevation of getElements<HTMLObjectElement>('.rack_elevation')) {\n    const svg = elevation.contentDocument?.querySelector('svg') ?? null;\n    if (svg !== null) {\n      svg.setAttribute(`data-bs-theme`, targetMode);\n    }\n  }\n}\n\n/**\n * Call all functions necessary to update the color mode across the UI.\n *\n * @param mode Target color mode.\n */\nexport function setColorMode(mode: ColorMode): void {\n  storeColorMode(mode);\n  updateElements(mode);\n}\n\n/**\n * Toggle the color mode when a color mode toggle is clicked.\n */\nfunction handleColorModeToggle(): void {\n  const currentValue = localStorage.getItem(COLOR_MODE_KEY);\n  if (currentValue === 'light') {\n    setColorMode('dark');\n  } else if (currentValue === 'dark') {\n    setColorMode('light');\n  } else {\n    console.warn('Unable to determine the current color mode');\n  }\n}\n\n/**\n * Determine the user's preference and set it as the color mode.\n */\nfunction defaultColorMode(): void {\n  // Get the current color mode value from local storage.\n  const currentValue = localStorage.getItem(COLOR_MODE_KEY) as Nullable<ColorMode>;\n\n  if (isTruthy(currentValue)) {\n    return setColorMode(currentValue);\n  }\n\n  let preference: ColorModePreference = 'none';\n\n  // Determine if the user prefers dark or light mode.\n  for (const mode of ['dark', 'light']) {\n    if (window.matchMedia(`(prefers-color-scheme: ${mode})`).matches) {\n      preference = mode as ColorModePreference;\n      break;\n    }\n  }\n\n  if (isTruthy(currentValue) && isColorMode(currentValue)) {\n    return setColorMode(currentValue);\n  }\n\n  switch (preference) {\n    case 'dark':\n      return setColorMode('dark');\n    case 'light':\n      return setColorMode('light');\n    case 'none':\n      return setColorMode('light');\n    default:\n      return setColorMode('light');\n  }\n}\n\n/**\n * Initialize color mode toggle buttons and set the default color mode.\n */\nfunction initColorModeToggle(): void {\n  for (const element of getElements<HTMLButtonElement>('button.color-mode-toggle')) {\n    element.addEventListener('click', handleColorModeToggle);\n  }\n}\n\n/**\n * Initialize all color mode elements.\n */\nexport function initColorMode(): void {\n  window.addEventListener('load', defaultColorMode);\n  for (const func of [initColorModeToggle]) {\n    func();\n  }\n}\n", "import { Toast } from 'bootstrap';\n\n/**\n * Find any active messages from django.contrib.messages and show them in a toast.\n */\nexport function initMessages(): void {\n  const elements = document.querySelectorAll<HTMLDivElement>(\n    'body > div#django-messages > div.toast',\n  );\n  for (const element of elements) {\n    if (element !== null) {\n      const toast = new Toast(element);\n      if (!toast.isShown()) {\n        toast.show();\n      }\n    }\n  }\n}\n", "import Clipboard from 'clipboard';\nimport { getElements } from './util';\n\nexport function initClipboard(): void {\n  for (const element of getElements('.copy-content')) {\n    new Clipboard(element);\n  }\n}\n", "export var HOOKS = [\n    \"onChange\",\n    \"onClose\",\n    \"onDayCreate\",\n    \"onDestroy\",\n    \"onKeyDown\",\n    \"onMonthChange\",\n    \"onOpen\",\n    \"onParseConfig\",\n    \"onReady\",\n    \"onValueUpdate\",\n    \"onYearChange\",\n    \"onPreCalendarPosition\",\n];\nexport var defaults = {\n    _disable: [],\n    allowInput: false,\n    allowInvalidPreload: false,\n    altFormat: \"F j, Y\",\n    altInput: false,\n    altInputClass: \"form-control input\",\n    animate: typeof window === \"object\" &&\n        window.navigator.userAgent.indexOf(\"MSIE\") === -1,\n    ariaDateFormat: \"F j, Y\",\n    autoFillDefaultTime: true,\n    clickOpens: true,\n    closeOnSelect: true,\n    conjunction: \", \",\n    dateFormat: \"Y-m-d\",\n    defaultHour: 12,\n    defaultMinute: 0,\n    defaultSeconds: 0,\n    disable: [],\n    disableMobile: false,\n    enableSeconds: false,\n    enableTime: false,\n    errorHandler: function (err) {\n        return typeof console !== \"undefined\" && console.warn(err);\n    },\n    getWeek: function (givenDate) {\n        var date = new Date(givenDate.getTime());\n        date.setHours(0, 0, 0, 0);\n        date.setDate(date.getDate() + 3 - ((date.getDay() + 6) % 7));\n        var week1 = new Date(date.getFullYear(), 0, 4);\n        return (1 +\n            Math.round(((date.getTime() - week1.getTime()) / 86400000 -\n                3 +\n                ((week1.getDay() + 6) % 7)) /\n                7));\n    },\n    hourIncrement: 1,\n    ignoredFocusElements: [],\n    inline: false,\n    locale: \"default\",\n    minuteIncrement: 5,\n    mode: \"single\",\n    monthSelectorType: \"dropdown\",\n    nextArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>\",\n    noCalendar: false,\n    now: new Date(),\n    onChange: [],\n    onClose: [],\n    onDayCreate: [],\n    onDestroy: [],\n    onKeyDown: [],\n    onMonthChange: [],\n    onOpen: [],\n    onParseConfig: [],\n    onReady: [],\n    onValueUpdate: [],\n    onYearChange: [],\n    onPreCalendarPosition: [],\n    plugins: [],\n    position: \"auto\",\n    positionElement: undefined,\n    prevArrow: \"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>\",\n    shorthandCurrentMonth: false,\n    showMonths: 1,\n    static: false,\n    time_24hr: false,\n    weekNumbers: false,\n    wrap: false,\n};\n", "export var english = {\n    weekdays: {\n        shorthand: [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"],\n        longhand: [\n            \"Sunday\",\n            \"Monday\",\n            \"Tuesday\",\n            \"Wednesday\",\n            \"Thursday\",\n            \"Friday\",\n            \"Saturday\",\n        ],\n    },\n    months: {\n        shorthand: [\n            \"Jan\",\n            \"Feb\",\n            \"Mar\",\n            \"Apr\",\n            \"May\",\n            \"Jun\",\n            \"Jul\",\n            \"Aug\",\n            \"Sep\",\n            \"Oct\",\n            \"Nov\",\n            \"Dec\",\n        ],\n        longhand: [\n            \"January\",\n            \"February\",\n            \"March\",\n            \"April\",\n            \"May\",\n            \"June\",\n            \"July\",\n            \"August\",\n            \"September\",\n            \"October\",\n            \"November\",\n            \"December\",\n        ],\n    },\n    daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n    firstDayOfWeek: 0,\n    ordinal: function (nth) {\n        var s = nth % 100;\n        if (s > 3 && s < 21)\n            return \"th\";\n        switch (s % 10) {\n            case 1:\n                return \"st\";\n            case 2:\n                return \"nd\";\n            case 3:\n                return \"rd\";\n            default:\n                return \"th\";\n        }\n    },\n    rangeSeparator: \" to \",\n    weekAbbreviation: \"Wk\",\n    scrollTitle: \"Scroll to increment\",\n    toggleTitle: \"Click to toggle\",\n    amPM: [\"AM\", \"PM\"],\n    yearAriaLabel: \"Year\",\n    monthAriaLabel: \"Month\",\n    hourAriaLabel: \"Hour\",\n    minuteAriaLabel: \"Minute\",\n    time_24hr: false,\n};\nexport default english;\n", "export var pad = function (number, length) {\n    if (length === void 0) { length = 2; }\n    return (\"000\" + number).slice(length * -1);\n};\nexport var int = function (bool) { return (bool === true ? 1 : 0); };\nexport function debounce(fn, wait) {\n    var t;\n    return function () {\n        var _this = this;\n        var args = arguments;\n        clearTimeout(t);\n        t = setTimeout(function () { return fn.apply(_this, args); }, wait);\n    };\n}\nexport var arrayify = function (obj) {\n    return obj instanceof Array ? obj : [obj];\n};\n", "export function toggleClass(elem, className, bool) {\n    if (bool === true)\n        return elem.classList.add(className);\n    elem.classList.remove(className);\n}\nexport function createElement(tag, className, content) {\n    var e = window.document.createElement(tag);\n    className = className || \"\";\n    content = content || \"\";\n    e.className = className;\n    if (content !== undefined)\n        e.textContent = content;\n    return e;\n}\nexport function clearNode(node) {\n    while (node.firstChild)\n        node.removeChild(node.firstChild);\n}\nexport function findParent(node, condition) {\n    if (condition(node))\n        return node;\n    else if (node.parentNode)\n        return findParent(node.parentNode, condition);\n    return undefined;\n}\nexport function createNumberInput(inputClassName, opts) {\n    var wrapper = createElement(\"div\", \"numInputWrapper\"), numInput = createElement(\"input\", \"numInput \" + inputClassName), arrowUp = createElement(\"span\", \"arrowUp\"), arrowDown = createElement(\"span\", \"arrowDown\");\n    if (navigator.userAgent.indexOf(\"MSIE 9.0\") === -1) {\n        numInput.type = \"number\";\n    }\n    else {\n        numInput.type = \"text\";\n        numInput.pattern = \"\\\\d*\";\n    }\n    if (opts !== undefined)\n        for (var key in opts)\n            numInput.setAttribute(key, opts[key]);\n    wrapper.appendChild(numInput);\n    wrapper.appendChild(arrowUp);\n    wrapper.appendChild(arrowDown);\n    return wrapper;\n}\nexport function getEventTarget(event) {\n    try {\n        if (typeof event.composedPath === \"function\") {\n            var path = event.composedPath();\n            return path[0];\n        }\n        return event.target;\n    }\n    catch (error) {\n        return event.target;\n    }\n}\n", "import { int, pad } from \"../utils\";\nvar doNothing = function () { return undefined; };\nexport var monthToStr = function (monthNumber, shorthand, locale) { return locale.months[shorthand ? \"shorthand\" : \"longhand\"][monthNumber]; };\nexport var revFormat = {\n    D: doNothing,\n    F: function (dateObj, monthName, locale) {\n        dateObj.setMonth(locale.months.longhand.indexOf(monthName));\n    },\n    G: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    H: function (dateObj, hour) {\n        dateObj.setHours(parseFloat(hour));\n    },\n    J: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    K: function (dateObj, amPM, locale) {\n        dateObj.setHours((dateObj.getHours() % 12) +\n            12 * int(new RegExp(locale.amPM[1], \"i\").test(amPM)));\n    },\n    M: function (dateObj, shortMonth, locale) {\n        dateObj.setMonth(locale.months.shorthand.indexOf(shortMonth));\n    },\n    S: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    U: function (_, unixSeconds) { return new Date(parseFloat(unixSeconds) * 1000); },\n    W: function (dateObj, weekNum, locale) {\n        var weekNumber = parseInt(weekNum);\n        var date = new Date(dateObj.getFullYear(), 0, 2 + (weekNumber - 1) * 7, 0, 0, 0, 0);\n        date.setDate(date.getDate() - date.getDay() + locale.firstDayOfWeek);\n        return date;\n    },\n    Y: function (dateObj, year) {\n        dateObj.setFullYear(parseFloat(year));\n    },\n    Z: function (_, ISODate) { return new Date(ISODate); },\n    d: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    h: function (dateObj, hour) {\n        dateObj.setHours((dateObj.getHours() >= 12 ? 12 : 0) + parseFloat(hour));\n    },\n    i: function (dateObj, minutes) {\n        dateObj.setMinutes(parseFloat(minutes));\n    },\n    j: function (dateObj, day) {\n        dateObj.setDate(parseFloat(day));\n    },\n    l: doNothing,\n    m: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    n: function (dateObj, month) {\n        dateObj.setMonth(parseFloat(month) - 1);\n    },\n    s: function (dateObj, seconds) {\n        dateObj.setSeconds(parseFloat(seconds));\n    },\n    u: function (_, unixMillSeconds) {\n        return new Date(parseFloat(unixMillSeconds));\n    },\n    w: doNothing,\n    y: function (dateObj, year) {\n        dateObj.setFullYear(2000 + parseFloat(year));\n    },\n};\nexport var tokenRegex = {\n    D: \"\",\n    F: \"\",\n    G: \"(\\\\d\\\\d|\\\\d)\",\n    H: \"(\\\\d\\\\d|\\\\d)\",\n    J: \"(\\\\d\\\\d|\\\\d)\\\\w+\",\n    K: \"\",\n    M: \"\",\n    S: \"(\\\\d\\\\d|\\\\d)\",\n    U: \"(.+)\",\n    W: \"(\\\\d\\\\d|\\\\d)\",\n    Y: \"(\\\\d{4})\",\n    Z: \"(.+)\",\n    d: \"(\\\\d\\\\d|\\\\d)\",\n    h: \"(\\\\d\\\\d|\\\\d)\",\n    i: \"(\\\\d\\\\d|\\\\d)\",\n    j: \"(\\\\d\\\\d|\\\\d)\",\n    l: \"\",\n    m: \"(\\\\d\\\\d|\\\\d)\",\n    n: \"(\\\\d\\\\d|\\\\d)\",\n    s: \"(\\\\d\\\\d|\\\\d)\",\n    u: \"(.+)\",\n    w: \"(\\\\d\\\\d|\\\\d)\",\n    y: \"(\\\\d{2})\",\n};\nexport var formats = {\n    Z: function (date) { return date.toISOString(); },\n    D: function (date, locale, options) {\n        return locale.weekdays.shorthand[formats.w(date, locale, options)];\n    },\n    F: function (date, locale, options) {\n        return monthToStr(formats.n(date, locale, options) - 1, false, locale);\n    },\n    G: function (date, locale, options) {\n        return pad(formats.h(date, locale, options));\n    },\n    H: function (date) { return pad(date.getHours()); },\n    J: function (date, locale) {\n        return locale.ordinal !== undefined\n            ? date.getDate() + locale.ordinal(date.getDate())\n            : date.getDate();\n    },\n    K: function (date, locale) { return locale.amPM[int(date.getHours() > 11)]; },\n    M: function (date, locale) {\n        return monthToStr(date.getMonth(), true, locale);\n    },\n    S: function (date) { return pad(date.getSeconds()); },\n    U: function (date) { return date.getTime() / 1000; },\n    W: function (date, _, options) {\n        return options.getWeek(date);\n    },\n    Y: function (date) { return pad(date.getFullYear(), 4); },\n    d: function (date) { return pad(date.getDate()); },\n    h: function (date) { return (date.getHours() % 12 ? date.getHours() % 12 : 12); },\n    i: function (date) { return pad(date.getMinutes()); },\n    j: function (date) { return date.getDate(); },\n    l: function (date, locale) {\n        return locale.weekdays.longhand[date.getDay()];\n    },\n    m: function (date) { return pad(date.getMonth() + 1); },\n    n: function (date) { return date.getMonth() + 1; },\n    s: function (date) { return date.getSeconds(); },\n    u: function (date) { return date.getTime(); },\n    w: function (date) { return date.getDay(); },\n    y: function (date) { return String(date.getFullYear()).substring(2); },\n};\n", "import { tokenRegex, revFormat, formats, } from \"./formatting\";\nimport { defaults } from \"../types/options\";\nimport { english } from \"../l10n/default\";\nexport var createDateFormatter = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c, _d = _a.isMobile, isMobile = _d === void 0 ? false : _d;\n    return function (dateObj, frmt, overrideLocale) {\n        var locale = overrideLocale || l10n;\n        if (config.formatDate !== undefined && !isMobile) {\n            return config.formatDate(dateObj, frmt, locale);\n        }\n        return frmt\n            .split(\"\")\n            .map(function (c, i, arr) {\n            return formats[c] && arr[i - 1] !== \"\\\\\"\n                ? formats[c](dateObj, locale, config)\n                : c !== \"\\\\\"\n                    ? c\n                    : \"\";\n        })\n            .join(\"\");\n    };\n};\nexport var createDateParser = function (_a) {\n    var _b = _a.config, config = _b === void 0 ? defaults : _b, _c = _a.l10n, l10n = _c === void 0 ? english : _c;\n    return function (date, givenFormat, timeless, customLocale) {\n        if (date !== 0 && !date)\n            return undefined;\n        var locale = customLocale || l10n;\n        var parsedDate;\n        var dateOrig = date;\n        if (date instanceof Date)\n            parsedDate = new Date(date.getTime());\n        else if (typeof date !== \"string\" &&\n            date.toFixed !== undefined)\n            parsedDate = new Date(date);\n        else if (typeof date === \"string\") {\n            var format = givenFormat || (config || defaults).dateFormat;\n            var datestr = String(date).trim();\n            if (datestr === \"today\") {\n                parsedDate = new Date();\n                timeless = true;\n            }\n            else if (config && config.parseDate) {\n                parsedDate = config.parseDate(date, format);\n            }\n            else if (/Z$/.test(datestr) ||\n                /GMT$/.test(datestr)) {\n                parsedDate = new Date(date);\n            }\n            else {\n                var matched = void 0, ops = [];\n                for (var i = 0, matchIndex = 0, regexStr = \"\"; i < format.length; i++) {\n                    var token = format[i];\n                    var isBackSlash = token === \"\\\\\";\n                    var escaped = format[i - 1] === \"\\\\\" || isBackSlash;\n                    if (tokenRegex[token] && !escaped) {\n                        regexStr += tokenRegex[token];\n                        var match = new RegExp(regexStr).exec(date);\n                        if (match && (matched = true)) {\n                            ops[token !== \"Y\" ? \"push\" : \"unshift\"]({\n                                fn: revFormat[token],\n                                val: match[++matchIndex],\n                            });\n                        }\n                    }\n                    else if (!isBackSlash)\n                        regexStr += \".\";\n                }\n                parsedDate =\n                    !config || !config.noCalendar\n                        ? new Date(new Date().getFullYear(), 0, 1, 0, 0, 0, 0)\n                        : new Date(new Date().setHours(0, 0, 0, 0));\n                ops.forEach(function (_a) {\n                    var fn = _a.fn, val = _a.val;\n                    return (parsedDate = fn(parsedDate, val, locale) || parsedDate);\n                });\n                parsedDate = matched ? parsedDate : undefined;\n            }\n        }\n        if (!(parsedDate instanceof Date && !isNaN(parsedDate.getTime()))) {\n            config.errorHandler(new Error(\"Invalid date provided: \" + dateOrig));\n            return undefined;\n        }\n        if (timeless === true)\n            parsedDate.setHours(0, 0, 0, 0);\n        return parsedDate;\n    };\n};\nexport function compareDates(date1, date2, timeless) {\n    if (timeless === void 0) { timeless = true; }\n    if (timeless !== false) {\n        return (new Date(date1.getTime()).setHours(0, 0, 0, 0) -\n            new Date(date2.getTime()).setHours(0, 0, 0, 0));\n    }\n    return date1.getTime() - date2.getTime();\n}\nexport function compareTimes(date1, date2) {\n    return (3600 * (date1.getHours() - date2.getHours()) +\n        60 * (date1.getMinutes() - date2.getMinutes()) +\n        date1.getSeconds() -\n        date2.getSeconds());\n}\nexport var isBetween = function (ts, ts1, ts2) {\n    return ts > Math.min(ts1, ts2) && ts < Math.max(ts1, ts2);\n};\nexport var calculateSecondsSinceMidnight = function (hours, minutes, seconds) {\n    return hours * 3600 + minutes * 60 + seconds;\n};\nexport var parseSeconds = function (secondsSinceMidnight) {\n    var hours = Math.floor(secondsSinceMidnight / 3600), minutes = (secondsSinceMidnight - hours * 3600) / 60;\n    return [hours, minutes, secondsSinceMidnight - hours * 3600 - minutes * 60];\n};\nexport var duration = {\n    DAY: 86400000,\n};\nexport function getDefaultHours(config) {\n    var hours = config.defaultHour;\n    var minutes = config.defaultMinute;\n    var seconds = config.defaultSeconds;\n    if (config.minDate !== undefined) {\n        var minHour = config.minDate.getHours();\n        var minMinutes = config.minDate.getMinutes();\n        var minSeconds = config.minDate.getSeconds();\n        if (hours < minHour) {\n            hours = minHour;\n        }\n        if (hours === minHour && minutes < minMinutes) {\n            minutes = minMinutes;\n        }\n        if (hours === minHour && minutes === minMinutes && seconds < minSeconds)\n            seconds = config.minDate.getSeconds();\n    }\n    if (config.maxDate !== undefined) {\n        var maxHr = config.maxDate.getHours();\n        var maxMinutes = config.maxDate.getMinutes();\n        hours = Math.min(hours, maxHr);\n        if (hours === maxHr)\n            minutes = Math.min(maxMinutes, minutes);\n        if (hours === maxHr && minutes === maxMinutes)\n            seconds = config.maxDate.getSeconds();\n    }\n    return { hours: hours, minutes: minutes, seconds: seconds };\n}\n", "\"use strict\";\nif (typeof Object.assign !== \"function\") {\n    Object.assign = function (target) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!target) {\n            throw TypeError(\"Cannot convert undefined or null to object\");\n        }\n        var _loop_1 = function (source) {\n            if (source) {\n                Object.keys(source).forEach(function (key) { return (target[key] = source[key]); });\n            }\n        };\n        for (var _a = 0, args_1 = args; _a < args_1.length; _a++) {\n            var source = args_1[_a];\n            _loop_1(source);\n        }\n        return target;\n    };\n}\n", "var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nimport { defaults as defaultOptions, HOOKS, } from \"./types/options\";\nimport English from \"./l10n/default\";\nimport { arrayify, debounce, int, pad } from \"./utils\";\nimport { clearNode, createElement, createNumberInput, findParent, toggleClass, getEventTarget, } from \"./utils/dom\";\nimport { compareDates, createDateParser, createDateFormatter, duration, isBetween, getDefaultHours, calculateSecondsSinceMidnight, parseSeconds, } from \"./utils/dates\";\nimport { tokenRegex, monthToStr } from \"./utils/formatting\";\nimport \"./utils/polyfills\";\nvar DEBOUNCED_CHANGE_MS = 300;\nfunction FlatpickrInstance(element, instanceConfig) {\n    var self = {\n        config: __assign(__assign({}, defaultOptions), flatpickr.defaultConfig),\n        l10n: English,\n    };\n    self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n    self._handlers = [];\n    self.pluginElements = [];\n    self.loadedPlugins = [];\n    self._bind = bind;\n    self._setHoursFromDate = setHoursFromDate;\n    self._positionCalendar = positionCalendar;\n    self.changeMonth = changeMonth;\n    self.changeYear = changeYear;\n    self.clear = clear;\n    self.close = close;\n    self.onMouseOver = onMouseOver;\n    self._createElement = createElement;\n    self.createDay = createDay;\n    self.destroy = destroy;\n    self.isEnabled = isEnabled;\n    self.jumpToDate = jumpToDate;\n    self.updateValue = updateValue;\n    self.open = open;\n    self.redraw = redraw;\n    self.set = set;\n    self.setDate = setDate;\n    self.toggle = toggle;\n    function setupHelperFunctions() {\n        self.utils = {\n            getDaysInMonth: function (month, yr) {\n                if (month === void 0) { month = self.currentMonth; }\n                if (yr === void 0) { yr = self.currentYear; }\n                if (month === 1 && ((yr % 4 === 0 && yr % 100 !== 0) || yr % 400 === 0))\n                    return 29;\n                return self.l10n.daysInMonth[month];\n            },\n        };\n    }\n    function init() {\n        self.element = self.input = element;\n        self.isOpen = false;\n        parseConfig();\n        setupLocale();\n        setupInputs();\n        setupDates();\n        setupHelperFunctions();\n        if (!self.isMobile)\n            build();\n        bindEvents();\n        if (self.selectedDates.length || self.config.noCalendar) {\n            if (self.config.enableTime) {\n                setHoursFromDate(self.config.noCalendar ? self.latestSelectedDateObj : undefined);\n            }\n            updateValue(false);\n        }\n        setCalendarWidth();\n        var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n        if (!self.isMobile && isSafari) {\n            positionCalendar();\n        }\n        triggerEvent(\"onReady\");\n    }\n    function getClosestActiveElement() {\n        var _a;\n        return (((_a = self.calendarContainer) === null || _a === void 0 ? void 0 : _a.getRootNode())\n            .activeElement || document.activeElement);\n    }\n    function bindToInstance(fn) {\n        return fn.bind(self);\n    }\n    function setCalendarWidth() {\n        var config = self.config;\n        if (config.weekNumbers === false && config.showMonths === 1) {\n            return;\n        }\n        else if (config.noCalendar !== true) {\n            window.requestAnimationFrame(function () {\n                if (self.calendarContainer !== undefined) {\n                    self.calendarContainer.style.visibility = \"hidden\";\n                    self.calendarContainer.style.display = \"block\";\n                }\n                if (self.daysContainer !== undefined) {\n                    var daysWidth = (self.days.offsetWidth + 1) * config.showMonths;\n                    self.daysContainer.style.width = daysWidth + \"px\";\n                    self.calendarContainer.style.width =\n                        daysWidth +\n                            (self.weekWrapper !== undefined\n                                ? self.weekWrapper.offsetWidth\n                                : 0) +\n                            \"px\";\n                    self.calendarContainer.style.removeProperty(\"visibility\");\n                    self.calendarContainer.style.removeProperty(\"display\");\n                }\n            });\n        }\n    }\n    function updateTime(e) {\n        if (self.selectedDates.length === 0) {\n            var defaultDate = self.config.minDate === undefined ||\n                compareDates(new Date(), self.config.minDate) >= 0\n                ? new Date()\n                : new Date(self.config.minDate.getTime());\n            var defaults = getDefaultHours(self.config);\n            defaultDate.setHours(defaults.hours, defaults.minutes, defaults.seconds, defaultDate.getMilliseconds());\n            self.selectedDates = [defaultDate];\n            self.latestSelectedDateObj = defaultDate;\n        }\n        if (e !== undefined && e.type !== \"blur\") {\n            timeWrapper(e);\n        }\n        var prevValue = self._input.value;\n        setHoursFromInputs();\n        updateValue();\n        if (self._input.value !== prevValue) {\n            self._debouncedChange();\n        }\n    }\n    function ampm2military(hour, amPM) {\n        return (hour % 12) + 12 * int(amPM === self.l10n.amPM[1]);\n    }\n    function military2ampm(hour) {\n        switch (hour % 24) {\n            case 0:\n            case 12:\n                return 12;\n            default:\n                return hour % 12;\n        }\n    }\n    function setHoursFromInputs() {\n        if (self.hourElement === undefined || self.minuteElement === undefined)\n            return;\n        var hours = (parseInt(self.hourElement.value.slice(-2), 10) || 0) % 24, minutes = (parseInt(self.minuteElement.value, 10) || 0) % 60, seconds = self.secondElement !== undefined\n            ? (parseInt(self.secondElement.value, 10) || 0) % 60\n            : 0;\n        if (self.amPM !== undefined) {\n            hours = ampm2military(hours, self.amPM.textContent);\n        }\n        var limitMinHours = self.config.minTime !== undefined ||\n            (self.config.minDate &&\n                self.minDateHasTime &&\n                self.latestSelectedDateObj &&\n                compareDates(self.latestSelectedDateObj, self.config.minDate, true) ===\n                    0);\n        var limitMaxHours = self.config.maxTime !== undefined ||\n            (self.config.maxDate &&\n                self.maxDateHasTime &&\n                self.latestSelectedDateObj &&\n                compareDates(self.latestSelectedDateObj, self.config.maxDate, true) ===\n                    0);\n        if (self.config.maxTime !== undefined &&\n            self.config.minTime !== undefined &&\n            self.config.minTime > self.config.maxTime) {\n            var minBound = calculateSecondsSinceMidnight(self.config.minTime.getHours(), self.config.minTime.getMinutes(), self.config.minTime.getSeconds());\n            var maxBound = calculateSecondsSinceMidnight(self.config.maxTime.getHours(), self.config.maxTime.getMinutes(), self.config.maxTime.getSeconds());\n            var currentTime = calculateSecondsSinceMidnight(hours, minutes, seconds);\n            if (currentTime > maxBound && currentTime < minBound) {\n                var result = parseSeconds(minBound);\n                hours = result[0];\n                minutes = result[1];\n                seconds = result[2];\n            }\n        }\n        else {\n            if (limitMaxHours) {\n                var maxTime = self.config.maxTime !== undefined\n                    ? self.config.maxTime\n                    : self.config.maxDate;\n                hours = Math.min(hours, maxTime.getHours());\n                if (hours === maxTime.getHours())\n                    minutes = Math.min(minutes, maxTime.getMinutes());\n                if (minutes === maxTime.getMinutes())\n                    seconds = Math.min(seconds, maxTime.getSeconds());\n            }\n            if (limitMinHours) {\n                var minTime = self.config.minTime !== undefined\n                    ? self.config.minTime\n                    : self.config.minDate;\n                hours = Math.max(hours, minTime.getHours());\n                if (hours === minTime.getHours() && minutes < minTime.getMinutes())\n                    minutes = minTime.getMinutes();\n                if (minutes === minTime.getMinutes())\n                    seconds = Math.max(seconds, minTime.getSeconds());\n            }\n        }\n        setHours(hours, minutes, seconds);\n    }\n    function setHoursFromDate(dateObj) {\n        var date = dateObj || self.latestSelectedDateObj;\n        if (date && date instanceof Date) {\n            setHours(date.getHours(), date.getMinutes(), date.getSeconds());\n        }\n    }\n    function setHours(hours, minutes, seconds) {\n        if (self.latestSelectedDateObj !== undefined) {\n            self.latestSelectedDateObj.setHours(hours % 24, minutes, seconds || 0, 0);\n        }\n        if (!self.hourElement || !self.minuteElement || self.isMobile)\n            return;\n        self.hourElement.value = pad(!self.config.time_24hr\n            ? ((12 + hours) % 12) + 12 * int(hours % 12 === 0)\n            : hours);\n        self.minuteElement.value = pad(minutes);\n        if (self.amPM !== undefined)\n            self.amPM.textContent = self.l10n.amPM[int(hours >= 12)];\n        if (self.secondElement !== undefined)\n            self.secondElement.value = pad(seconds);\n    }\n    function onYearInput(event) {\n        var eventTarget = getEventTarget(event);\n        var year = parseInt(eventTarget.value) + (event.delta || 0);\n        if (year / 1000 > 1 ||\n            (event.key === \"Enter\" && !/[^\\d]/.test(year.toString()))) {\n            changeYear(year);\n        }\n    }\n    function bind(element, event, handler, options) {\n        if (event instanceof Array)\n            return event.forEach(function (ev) { return bind(element, ev, handler, options); });\n        if (element instanceof Array)\n            return element.forEach(function (el) { return bind(el, event, handler, options); });\n        element.addEventListener(event, handler, options);\n        self._handlers.push({\n            remove: function () { return element.removeEventListener(event, handler, options); },\n        });\n    }\n    function triggerChange() {\n        triggerEvent(\"onChange\");\n    }\n    function bindEvents() {\n        if (self.config.wrap) {\n            [\"open\", \"close\", \"toggle\", \"clear\"].forEach(function (evt) {\n                Array.prototype.forEach.call(self.element.querySelectorAll(\"[data-\" + evt + \"]\"), function (el) {\n                    return bind(el, \"click\", self[evt]);\n                });\n            });\n        }\n        if (self.isMobile) {\n            setupMobile();\n            return;\n        }\n        var debouncedResize = debounce(onResize, 50);\n        self._debouncedChange = debounce(triggerChange, DEBOUNCED_CHANGE_MS);\n        if (self.daysContainer && !/iPhone|iPad|iPod/i.test(navigator.userAgent))\n            bind(self.daysContainer, \"mouseover\", function (e) {\n                if (self.config.mode === \"range\")\n                    onMouseOver(getEventTarget(e));\n            });\n        bind(self._input, \"keydown\", onKeyDown);\n        if (self.calendarContainer !== undefined) {\n            bind(self.calendarContainer, \"keydown\", onKeyDown);\n        }\n        if (!self.config.inline && !self.config.static)\n            bind(window, \"resize\", debouncedResize);\n        if (window.ontouchstart !== undefined)\n            bind(window.document, \"touchstart\", documentClick);\n        else\n            bind(window.document, \"mousedown\", documentClick);\n        bind(window.document, \"focus\", documentClick, { capture: true });\n        if (self.config.clickOpens === true) {\n            bind(self._input, \"focus\", self.open);\n            bind(self._input, \"click\", self.open);\n        }\n        if (self.daysContainer !== undefined) {\n            bind(self.monthNav, \"click\", onMonthNavClick);\n            bind(self.monthNav, [\"keyup\", \"increment\"], onYearInput);\n            bind(self.daysContainer, \"click\", selectDate);\n        }\n        if (self.timeContainer !== undefined &&\n            self.minuteElement !== undefined &&\n            self.hourElement !== undefined) {\n            var selText = function (e) {\n                return getEventTarget(e).select();\n            };\n            bind(self.timeContainer, [\"increment\"], updateTime);\n            bind(self.timeContainer, \"blur\", updateTime, { capture: true });\n            bind(self.timeContainer, \"click\", timeIncrement);\n            bind([self.hourElement, self.minuteElement], [\"focus\", \"click\"], selText);\n            if (self.secondElement !== undefined)\n                bind(self.secondElement, \"focus\", function () { return self.secondElement && self.secondElement.select(); });\n            if (self.amPM !== undefined) {\n                bind(self.amPM, \"click\", function (e) {\n                    updateTime(e);\n                });\n            }\n        }\n        if (self.config.allowInput) {\n            bind(self._input, \"blur\", onBlur);\n        }\n    }\n    function jumpToDate(jumpDate, triggerChange) {\n        var jumpTo = jumpDate !== undefined\n            ? self.parseDate(jumpDate)\n            : self.latestSelectedDateObj ||\n                (self.config.minDate && self.config.minDate > self.now\n                    ? self.config.minDate\n                    : self.config.maxDate && self.config.maxDate < self.now\n                        ? self.config.maxDate\n                        : self.now);\n        var oldYear = self.currentYear;\n        var oldMonth = self.currentMonth;\n        try {\n            if (jumpTo !== undefined) {\n                self.currentYear = jumpTo.getFullYear();\n                self.currentMonth = jumpTo.getMonth();\n            }\n        }\n        catch (e) {\n            e.message = \"Invalid date supplied: \" + jumpTo;\n            self.config.errorHandler(e);\n        }\n        if (triggerChange && self.currentYear !== oldYear) {\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        if (triggerChange &&\n            (self.currentYear !== oldYear || self.currentMonth !== oldMonth)) {\n            triggerEvent(\"onMonthChange\");\n        }\n        self.redraw();\n    }\n    function timeIncrement(e) {\n        var eventTarget = getEventTarget(e);\n        if (~eventTarget.className.indexOf(\"arrow\"))\n            incrementNumInput(e, eventTarget.classList.contains(\"arrowUp\") ? 1 : -1);\n    }\n    function incrementNumInput(e, delta, inputElem) {\n        var target = e && getEventTarget(e);\n        var input = inputElem ||\n            (target && target.parentNode && target.parentNode.firstChild);\n        var event = createEvent(\"increment\");\n        event.delta = delta;\n        input && input.dispatchEvent(event);\n    }\n    function build() {\n        var fragment = window.document.createDocumentFragment();\n        self.calendarContainer = createElement(\"div\", \"flatpickr-calendar\");\n        self.calendarContainer.tabIndex = -1;\n        if (!self.config.noCalendar) {\n            fragment.appendChild(buildMonthNav());\n            self.innerContainer = createElement(\"div\", \"flatpickr-innerContainer\");\n            if (self.config.weekNumbers) {\n                var _a = buildWeeks(), weekWrapper = _a.weekWrapper, weekNumbers = _a.weekNumbers;\n                self.innerContainer.appendChild(weekWrapper);\n                self.weekNumbers = weekNumbers;\n                self.weekWrapper = weekWrapper;\n            }\n            self.rContainer = createElement(\"div\", \"flatpickr-rContainer\");\n            self.rContainer.appendChild(buildWeekdays());\n            if (!self.daysContainer) {\n                self.daysContainer = createElement(\"div\", \"flatpickr-days\");\n                self.daysContainer.tabIndex = -1;\n            }\n            buildDays();\n            self.rContainer.appendChild(self.daysContainer);\n            self.innerContainer.appendChild(self.rContainer);\n            fragment.appendChild(self.innerContainer);\n        }\n        if (self.config.enableTime) {\n            fragment.appendChild(buildTime());\n        }\n        toggleClass(self.calendarContainer, \"rangeMode\", self.config.mode === \"range\");\n        toggleClass(self.calendarContainer, \"animate\", self.config.animate === true);\n        toggleClass(self.calendarContainer, \"multiMonth\", self.config.showMonths > 1);\n        self.calendarContainer.appendChild(fragment);\n        var customAppend = self.config.appendTo !== undefined &&\n            self.config.appendTo.nodeType !== undefined;\n        if (self.config.inline || self.config.static) {\n            self.calendarContainer.classList.add(self.config.inline ? \"inline\" : \"static\");\n            if (self.config.inline) {\n                if (!customAppend && self.element.parentNode)\n                    self.element.parentNode.insertBefore(self.calendarContainer, self._input.nextSibling);\n                else if (self.config.appendTo !== undefined)\n                    self.config.appendTo.appendChild(self.calendarContainer);\n            }\n            if (self.config.static) {\n                var wrapper = createElement(\"div\", \"flatpickr-wrapper\");\n                if (self.element.parentNode)\n                    self.element.parentNode.insertBefore(wrapper, self.element);\n                wrapper.appendChild(self.element);\n                if (self.altInput)\n                    wrapper.appendChild(self.altInput);\n                wrapper.appendChild(self.calendarContainer);\n            }\n        }\n        if (!self.config.static && !self.config.inline)\n            (self.config.appendTo !== undefined\n                ? self.config.appendTo\n                : window.document.body).appendChild(self.calendarContainer);\n    }\n    function createDay(className, date, _dayNumber, i) {\n        var dateIsEnabled = isEnabled(date, true), dayElement = createElement(\"span\", className, date.getDate().toString());\n        dayElement.dateObj = date;\n        dayElement.$i = i;\n        dayElement.setAttribute(\"aria-label\", self.formatDate(date, self.config.ariaDateFormat));\n        if (className.indexOf(\"hidden\") === -1 &&\n            compareDates(date, self.now) === 0) {\n            self.todayDateElem = dayElement;\n            dayElement.classList.add(\"today\");\n            dayElement.setAttribute(\"aria-current\", \"date\");\n        }\n        if (dateIsEnabled) {\n            dayElement.tabIndex = -1;\n            if (isDateSelected(date)) {\n                dayElement.classList.add(\"selected\");\n                self.selectedDateElem = dayElement;\n                if (self.config.mode === \"range\") {\n                    toggleClass(dayElement, \"startRange\", self.selectedDates[0] &&\n                        compareDates(date, self.selectedDates[0], true) === 0);\n                    toggleClass(dayElement, \"endRange\", self.selectedDates[1] &&\n                        compareDates(date, self.selectedDates[1], true) === 0);\n                    if (className === \"nextMonthDay\")\n                        dayElement.classList.add(\"inRange\");\n                }\n            }\n        }\n        else {\n            dayElement.classList.add(\"flatpickr-disabled\");\n        }\n        if (self.config.mode === \"range\") {\n            if (isDateInRange(date) && !isDateSelected(date))\n                dayElement.classList.add(\"inRange\");\n        }\n        if (self.weekNumbers &&\n            self.config.showMonths === 1 &&\n            className !== \"prevMonthDay\" &&\n            i % 7 === 6) {\n            self.weekNumbers.insertAdjacentHTML(\"beforeend\", \"<span class='flatpickr-day'>\" + self.config.getWeek(date) + \"</span>\");\n        }\n        triggerEvent(\"onDayCreate\", dayElement);\n        return dayElement;\n    }\n    function focusOnDayElem(targetNode) {\n        targetNode.focus();\n        if (self.config.mode === \"range\")\n            onMouseOver(targetNode);\n    }\n    function getFirstAvailableDay(delta) {\n        var startMonth = delta > 0 ? 0 : self.config.showMonths - 1;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        for (var m = startMonth; m != endMonth; m += delta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = delta > 0 ? 0 : month.children.length - 1;\n            var endIndex = delta > 0 ? month.children.length : -1;\n            for (var i = startIndex; i != endIndex; i += delta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 && isEnabled(c.dateObj))\n                    return c;\n            }\n        }\n        return undefined;\n    }\n    function getNextAvailableDay(current, delta) {\n        var givenMonth = current.className.indexOf(\"Month\") === -1\n            ? current.dateObj.getMonth()\n            : self.currentMonth;\n        var endMonth = delta > 0 ? self.config.showMonths : -1;\n        var loopDelta = delta > 0 ? 1 : -1;\n        for (var m = givenMonth - self.currentMonth; m != endMonth; m += loopDelta) {\n            var month = self.daysContainer.children[m];\n            var startIndex = givenMonth - self.currentMonth === m\n                ? current.$i + delta\n                : delta < 0\n                    ? month.children.length - 1\n                    : 0;\n            var numMonthDays = month.children.length;\n            for (var i = startIndex; i >= 0 && i < numMonthDays && i != (delta > 0 ? numMonthDays : -1); i += loopDelta) {\n                var c = month.children[i];\n                if (c.className.indexOf(\"hidden\") === -1 &&\n                    isEnabled(c.dateObj) &&\n                    Math.abs(current.$i - i) >= Math.abs(delta))\n                    return focusOnDayElem(c);\n            }\n        }\n        self.changeMonth(loopDelta);\n        focusOnDay(getFirstAvailableDay(loopDelta), 0);\n        return undefined;\n    }\n    function focusOnDay(current, offset) {\n        var activeElement = getClosestActiveElement();\n        var dayFocused = isInView(activeElement || document.body);\n        var startElem = current !== undefined\n            ? current\n            : dayFocused\n                ? activeElement\n                : self.selectedDateElem !== undefined && isInView(self.selectedDateElem)\n                    ? self.selectedDateElem\n                    : self.todayDateElem !== undefined && isInView(self.todayDateElem)\n                        ? self.todayDateElem\n                        : getFirstAvailableDay(offset > 0 ? 1 : -1);\n        if (startElem === undefined) {\n            self._input.focus();\n        }\n        else if (!dayFocused) {\n            focusOnDayElem(startElem);\n        }\n        else {\n            getNextAvailableDay(startElem, offset);\n        }\n    }\n    function buildMonthDays(year, month) {\n        var firstOfMonth = (new Date(year, month, 1).getDay() - self.l10n.firstDayOfWeek + 7) % 7;\n        var prevMonthDays = self.utils.getDaysInMonth((month - 1 + 12) % 12, year);\n        var daysInMonth = self.utils.getDaysInMonth(month, year), days = window.document.createDocumentFragment(), isMultiMonth = self.config.showMonths > 1, prevMonthDayClass = isMultiMonth ? \"prevMonthDay hidden\" : \"prevMonthDay\", nextMonthDayClass = isMultiMonth ? \"nextMonthDay hidden\" : \"nextMonthDay\";\n        var dayNumber = prevMonthDays + 1 - firstOfMonth, dayIndex = 0;\n        for (; dayNumber <= prevMonthDays; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + prevMonthDayClass, new Date(year, month - 1, dayNumber), dayNumber, dayIndex));\n        }\n        for (dayNumber = 1; dayNumber <= daysInMonth; dayNumber++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day\", new Date(year, month, dayNumber), dayNumber, dayIndex));\n        }\n        for (var dayNum = daysInMonth + 1; dayNum <= 42 - firstOfMonth &&\n            (self.config.showMonths === 1 || dayIndex % 7 !== 0); dayNum++, dayIndex++) {\n            days.appendChild(createDay(\"flatpickr-day \" + nextMonthDayClass, new Date(year, month + 1, dayNum % daysInMonth), dayNum, dayIndex));\n        }\n        var dayContainer = createElement(\"div\", \"dayContainer\");\n        dayContainer.appendChild(days);\n        return dayContainer;\n    }\n    function buildDays() {\n        if (self.daysContainer === undefined) {\n            return;\n        }\n        clearNode(self.daysContainer);\n        if (self.weekNumbers)\n            clearNode(self.weekNumbers);\n        var frag = document.createDocumentFragment();\n        for (var i = 0; i < self.config.showMonths; i++) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            frag.appendChild(buildMonthDays(d.getFullYear(), d.getMonth()));\n        }\n        self.daysContainer.appendChild(frag);\n        self.days = self.daysContainer.firstChild;\n        if (self.config.mode === \"range\" && self.selectedDates.length === 1) {\n            onMouseOver();\n        }\n    }\n    function buildMonthSwitch() {\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType !== \"dropdown\")\n            return;\n        var shouldBuildMonth = function (month) {\n            if (self.config.minDate !== undefined &&\n                self.currentYear === self.config.minDate.getFullYear() &&\n                month < self.config.minDate.getMonth()) {\n                return false;\n            }\n            return !(self.config.maxDate !== undefined &&\n                self.currentYear === self.config.maxDate.getFullYear() &&\n                month > self.config.maxDate.getMonth());\n        };\n        self.monthsDropdownContainer.tabIndex = -1;\n        self.monthsDropdownContainer.innerHTML = \"\";\n        for (var i = 0; i < 12; i++) {\n            if (!shouldBuildMonth(i))\n                continue;\n            var month = createElement(\"option\", \"flatpickr-monthDropdown-month\");\n            month.value = new Date(self.currentYear, i).getMonth().toString();\n            month.textContent = monthToStr(i, self.config.shorthandCurrentMonth, self.l10n);\n            month.tabIndex = -1;\n            if (self.currentMonth === i) {\n                month.selected = true;\n            }\n            self.monthsDropdownContainer.appendChild(month);\n        }\n    }\n    function buildMonth() {\n        var container = createElement(\"div\", \"flatpickr-month\");\n        var monthNavFragment = window.document.createDocumentFragment();\n        var monthElement;\n        if (self.config.showMonths > 1 ||\n            self.config.monthSelectorType === \"static\") {\n            monthElement = createElement(\"span\", \"cur-month\");\n        }\n        else {\n            self.monthsDropdownContainer = createElement(\"select\", \"flatpickr-monthDropdown-months\");\n            self.monthsDropdownContainer.setAttribute(\"aria-label\", self.l10n.monthAriaLabel);\n            bind(self.monthsDropdownContainer, \"change\", function (e) {\n                var target = getEventTarget(e);\n                var selectedMonth = parseInt(target.value, 10);\n                self.changeMonth(selectedMonth - self.currentMonth);\n                triggerEvent(\"onMonthChange\");\n            });\n            buildMonthSwitch();\n            monthElement = self.monthsDropdownContainer;\n        }\n        var yearInput = createNumberInput(\"cur-year\", { tabindex: \"-1\" });\n        var yearElement = yearInput.getElementsByTagName(\"input\")[0];\n        yearElement.setAttribute(\"aria-label\", self.l10n.yearAriaLabel);\n        if (self.config.minDate) {\n            yearElement.setAttribute(\"min\", self.config.minDate.getFullYear().toString());\n        }\n        if (self.config.maxDate) {\n            yearElement.setAttribute(\"max\", self.config.maxDate.getFullYear().toString());\n            yearElement.disabled =\n                !!self.config.minDate &&\n                    self.config.minDate.getFullYear() === self.config.maxDate.getFullYear();\n        }\n        var currentMonth = createElement(\"div\", \"flatpickr-current-month\");\n        currentMonth.appendChild(monthElement);\n        currentMonth.appendChild(yearInput);\n        monthNavFragment.appendChild(currentMonth);\n        container.appendChild(monthNavFragment);\n        return {\n            container: container,\n            yearElement: yearElement,\n            monthElement: monthElement,\n        };\n    }\n    function buildMonths() {\n        clearNode(self.monthNav);\n        self.monthNav.appendChild(self.prevMonthNav);\n        if (self.config.showMonths) {\n            self.yearElements = [];\n            self.monthElements = [];\n        }\n        for (var m = self.config.showMonths; m--;) {\n            var month = buildMonth();\n            self.yearElements.push(month.yearElement);\n            self.monthElements.push(month.monthElement);\n            self.monthNav.appendChild(month.container);\n        }\n        self.monthNav.appendChild(self.nextMonthNav);\n    }\n    function buildMonthNav() {\n        self.monthNav = createElement(\"div\", \"flatpickr-months\");\n        self.yearElements = [];\n        self.monthElements = [];\n        self.prevMonthNav = createElement(\"span\", \"flatpickr-prev-month\");\n        self.prevMonthNav.innerHTML = self.config.prevArrow;\n        self.nextMonthNav = createElement(\"span\", \"flatpickr-next-month\");\n        self.nextMonthNav.innerHTML = self.config.nextArrow;\n        buildMonths();\n        Object.defineProperty(self, \"_hidePrevMonthArrow\", {\n            get: function () { return self.__hidePrevMonthArrow; },\n            set: function (bool) {\n                if (self.__hidePrevMonthArrow !== bool) {\n                    toggleClass(self.prevMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hidePrevMonthArrow = bool;\n                }\n            },\n        });\n        Object.defineProperty(self, \"_hideNextMonthArrow\", {\n            get: function () { return self.__hideNextMonthArrow; },\n            set: function (bool) {\n                if (self.__hideNextMonthArrow !== bool) {\n                    toggleClass(self.nextMonthNav, \"flatpickr-disabled\", bool);\n                    self.__hideNextMonthArrow = bool;\n                }\n            },\n        });\n        self.currentYearElement = self.yearElements[0];\n        updateNavigationCurrentMonth();\n        return self.monthNav;\n    }\n    function buildTime() {\n        self.calendarContainer.classList.add(\"hasTime\");\n        if (self.config.noCalendar)\n            self.calendarContainer.classList.add(\"noCalendar\");\n        var defaults = getDefaultHours(self.config);\n        self.timeContainer = createElement(\"div\", \"flatpickr-time\");\n        self.timeContainer.tabIndex = -1;\n        var separator = createElement(\"span\", \"flatpickr-time-separator\", \":\");\n        var hourInput = createNumberInput(\"flatpickr-hour\", {\n            \"aria-label\": self.l10n.hourAriaLabel,\n        });\n        self.hourElement = hourInput.getElementsByTagName(\"input\")[0];\n        var minuteInput = createNumberInput(\"flatpickr-minute\", {\n            \"aria-label\": self.l10n.minuteAriaLabel,\n        });\n        self.minuteElement = minuteInput.getElementsByTagName(\"input\")[0];\n        self.hourElement.tabIndex = self.minuteElement.tabIndex = -1;\n        self.hourElement.value = pad(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getHours()\n            : self.config.time_24hr\n                ? defaults.hours\n                : military2ampm(defaults.hours));\n        self.minuteElement.value = pad(self.latestSelectedDateObj\n            ? self.latestSelectedDateObj.getMinutes()\n            : defaults.minutes);\n        self.hourElement.setAttribute(\"step\", self.config.hourIncrement.toString());\n        self.minuteElement.setAttribute(\"step\", self.config.minuteIncrement.toString());\n        self.hourElement.setAttribute(\"min\", self.config.time_24hr ? \"0\" : \"1\");\n        self.hourElement.setAttribute(\"max\", self.config.time_24hr ? \"23\" : \"12\");\n        self.hourElement.setAttribute(\"maxlength\", \"2\");\n        self.minuteElement.setAttribute(\"min\", \"0\");\n        self.minuteElement.setAttribute(\"max\", \"59\");\n        self.minuteElement.setAttribute(\"maxlength\", \"2\");\n        self.timeContainer.appendChild(hourInput);\n        self.timeContainer.appendChild(separator);\n        self.timeContainer.appendChild(minuteInput);\n        if (self.config.time_24hr)\n            self.timeContainer.classList.add(\"time24hr\");\n        if (self.config.enableSeconds) {\n            self.timeContainer.classList.add(\"hasSeconds\");\n            var secondInput = createNumberInput(\"flatpickr-second\");\n            self.secondElement = secondInput.getElementsByTagName(\"input\")[0];\n            self.secondElement.value = pad(self.latestSelectedDateObj\n                ? self.latestSelectedDateObj.getSeconds()\n                : defaults.seconds);\n            self.secondElement.setAttribute(\"step\", self.minuteElement.getAttribute(\"step\"));\n            self.secondElement.setAttribute(\"min\", \"0\");\n            self.secondElement.setAttribute(\"max\", \"59\");\n            self.secondElement.setAttribute(\"maxlength\", \"2\");\n            self.timeContainer.appendChild(createElement(\"span\", \"flatpickr-time-separator\", \":\"));\n            self.timeContainer.appendChild(secondInput);\n        }\n        if (!self.config.time_24hr) {\n            self.amPM = createElement(\"span\", \"flatpickr-am-pm\", self.l10n.amPM[int((self.latestSelectedDateObj\n                ? self.hourElement.value\n                : self.config.defaultHour) > 11)]);\n            self.amPM.title = self.l10n.toggleTitle;\n            self.amPM.tabIndex = -1;\n            self.timeContainer.appendChild(self.amPM);\n        }\n        return self.timeContainer;\n    }\n    function buildWeekdays() {\n        if (!self.weekdayContainer)\n            self.weekdayContainer = createElement(\"div\", \"flatpickr-weekdays\");\n        else\n            clearNode(self.weekdayContainer);\n        for (var i = self.config.showMonths; i--;) {\n            var container = createElement(\"div\", \"flatpickr-weekdaycontainer\");\n            self.weekdayContainer.appendChild(container);\n        }\n        updateWeekdays();\n        return self.weekdayContainer;\n    }\n    function updateWeekdays() {\n        if (!self.weekdayContainer) {\n            return;\n        }\n        var firstDayOfWeek = self.l10n.firstDayOfWeek;\n        var weekdays = __spreadArrays(self.l10n.weekdays.shorthand);\n        if (firstDayOfWeek > 0 && firstDayOfWeek < weekdays.length) {\n            weekdays = __spreadArrays(weekdays.splice(firstDayOfWeek, weekdays.length), weekdays.splice(0, firstDayOfWeek));\n        }\n        for (var i = self.config.showMonths; i--;) {\n            self.weekdayContainer.children[i].innerHTML = \"\\n      <span class='flatpickr-weekday'>\\n        \" + weekdays.join(\"</span><span class='flatpickr-weekday'>\") + \"\\n      </span>\\n      \";\n        }\n    }\n    function buildWeeks() {\n        self.calendarContainer.classList.add(\"hasWeeks\");\n        var weekWrapper = createElement(\"div\", \"flatpickr-weekwrapper\");\n        weekWrapper.appendChild(createElement(\"span\", \"flatpickr-weekday\", self.l10n.weekAbbreviation));\n        var weekNumbers = createElement(\"div\", \"flatpickr-weeks\");\n        weekWrapper.appendChild(weekNumbers);\n        return {\n            weekWrapper: weekWrapper,\n            weekNumbers: weekNumbers,\n        };\n    }\n    function changeMonth(value, isOffset) {\n        if (isOffset === void 0) { isOffset = true; }\n        var delta = isOffset ? value : value - self.currentMonth;\n        if ((delta < 0 && self._hidePrevMonthArrow === true) ||\n            (delta > 0 && self._hideNextMonthArrow === true))\n            return;\n        self.currentMonth += delta;\n        if (self.currentMonth < 0 || self.currentMonth > 11) {\n            self.currentYear += self.currentMonth > 11 ? 1 : -1;\n            self.currentMonth = (self.currentMonth + 12) % 12;\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n        buildDays();\n        triggerEvent(\"onMonthChange\");\n        updateNavigationCurrentMonth();\n    }\n    function clear(triggerChangeEvent, toInitial) {\n        if (triggerChangeEvent === void 0) { triggerChangeEvent = true; }\n        if (toInitial === void 0) { toInitial = true; }\n        self.input.value = \"\";\n        if (self.altInput !== undefined)\n            self.altInput.value = \"\";\n        if (self.mobileInput !== undefined)\n            self.mobileInput.value = \"\";\n        self.selectedDates = [];\n        self.latestSelectedDateObj = undefined;\n        if (toInitial === true) {\n            self.currentYear = self._initialDate.getFullYear();\n            self.currentMonth = self._initialDate.getMonth();\n        }\n        if (self.config.enableTime === true) {\n            var _a = getDefaultHours(self.config), hours = _a.hours, minutes = _a.minutes, seconds = _a.seconds;\n            setHours(hours, minutes, seconds);\n        }\n        self.redraw();\n        if (triggerChangeEvent)\n            triggerEvent(\"onChange\");\n    }\n    function close() {\n        self.isOpen = false;\n        if (!self.isMobile) {\n            if (self.calendarContainer !== undefined) {\n                self.calendarContainer.classList.remove(\"open\");\n            }\n            if (self._input !== undefined) {\n                self._input.classList.remove(\"active\");\n            }\n        }\n        triggerEvent(\"onClose\");\n    }\n    function destroy() {\n        if (self.config !== undefined)\n            triggerEvent(\"onDestroy\");\n        for (var i = self._handlers.length; i--;) {\n            self._handlers[i].remove();\n        }\n        self._handlers = [];\n        if (self.mobileInput) {\n            if (self.mobileInput.parentNode)\n                self.mobileInput.parentNode.removeChild(self.mobileInput);\n            self.mobileInput = undefined;\n        }\n        else if (self.calendarContainer && self.calendarContainer.parentNode) {\n            if (self.config.static && self.calendarContainer.parentNode) {\n                var wrapper = self.calendarContainer.parentNode;\n                wrapper.lastChild && wrapper.removeChild(wrapper.lastChild);\n                if (wrapper.parentNode) {\n                    while (wrapper.firstChild)\n                        wrapper.parentNode.insertBefore(wrapper.firstChild, wrapper);\n                    wrapper.parentNode.removeChild(wrapper);\n                }\n            }\n            else\n                self.calendarContainer.parentNode.removeChild(self.calendarContainer);\n        }\n        if (self.altInput) {\n            self.input.type = \"text\";\n            if (self.altInput.parentNode)\n                self.altInput.parentNode.removeChild(self.altInput);\n            delete self.altInput;\n        }\n        if (self.input) {\n            self.input.type = self.input._type;\n            self.input.classList.remove(\"flatpickr-input\");\n            self.input.removeAttribute(\"readonly\");\n        }\n        [\n            \"_showTimeInput\",\n            \"latestSelectedDateObj\",\n            \"_hideNextMonthArrow\",\n            \"_hidePrevMonthArrow\",\n            \"__hideNextMonthArrow\",\n            \"__hidePrevMonthArrow\",\n            \"isMobile\",\n            \"isOpen\",\n            \"selectedDateElem\",\n            \"minDateHasTime\",\n            \"maxDateHasTime\",\n            \"days\",\n            \"daysContainer\",\n            \"_input\",\n            \"_positionElement\",\n            \"innerContainer\",\n            \"rContainer\",\n            \"monthNav\",\n            \"todayDateElem\",\n            \"calendarContainer\",\n            \"weekdayContainer\",\n            \"prevMonthNav\",\n            \"nextMonthNav\",\n            \"monthsDropdownContainer\",\n            \"currentMonthElement\",\n            \"currentYearElement\",\n            \"navigationCurrentMonth\",\n            \"selectedDateElem\",\n            \"config\",\n        ].forEach(function (k) {\n            try {\n                delete self[k];\n            }\n            catch (_) { }\n        });\n    }\n    function isCalendarElem(elem) {\n        return self.calendarContainer.contains(elem);\n    }\n    function documentClick(e) {\n        if (self.isOpen && !self.config.inline) {\n            var eventTarget_1 = getEventTarget(e);\n            var isCalendarElement = isCalendarElem(eventTarget_1);\n            var isInput = eventTarget_1 === self.input ||\n                eventTarget_1 === self.altInput ||\n                self.element.contains(eventTarget_1) ||\n                (e.path &&\n                    e.path.indexOf &&\n                    (~e.path.indexOf(self.input) ||\n                        ~e.path.indexOf(self.altInput)));\n            var lostFocus = !isInput &&\n                !isCalendarElement &&\n                !isCalendarElem(e.relatedTarget);\n            var isIgnored = !self.config.ignoredFocusElements.some(function (elem) {\n                return elem.contains(eventTarget_1);\n            });\n            if (lostFocus && isIgnored) {\n                if (self.config.allowInput) {\n                    self.setDate(self._input.value, false, self.config.altInput\n                        ? self.config.altFormat\n                        : self.config.dateFormat);\n                }\n                if (self.timeContainer !== undefined &&\n                    self.minuteElement !== undefined &&\n                    self.hourElement !== undefined &&\n                    self.input.value !== \"\" &&\n                    self.input.value !== undefined) {\n                    updateTime();\n                }\n                self.close();\n                if (self.config &&\n                    self.config.mode === \"range\" &&\n                    self.selectedDates.length === 1)\n                    self.clear(false);\n            }\n        }\n    }\n    function changeYear(newYear) {\n        if (!newYear ||\n            (self.config.minDate && newYear < self.config.minDate.getFullYear()) ||\n            (self.config.maxDate && newYear > self.config.maxDate.getFullYear()))\n            return;\n        var newYearNum = newYear, isNewYear = self.currentYear !== newYearNum;\n        self.currentYear = newYearNum || self.currentYear;\n        if (self.config.maxDate &&\n            self.currentYear === self.config.maxDate.getFullYear()) {\n            self.currentMonth = Math.min(self.config.maxDate.getMonth(), self.currentMonth);\n        }\n        else if (self.config.minDate &&\n            self.currentYear === self.config.minDate.getFullYear()) {\n            self.currentMonth = Math.max(self.config.minDate.getMonth(), self.currentMonth);\n        }\n        if (isNewYear) {\n            self.redraw();\n            triggerEvent(\"onYearChange\");\n            buildMonthSwitch();\n        }\n    }\n    function isEnabled(date, timeless) {\n        var _a;\n        if (timeless === void 0) { timeless = true; }\n        var dateToCheck = self.parseDate(date, undefined, timeless);\n        if ((self.config.minDate &&\n            dateToCheck &&\n            compareDates(dateToCheck, self.config.minDate, timeless !== undefined ? timeless : !self.minDateHasTime) < 0) ||\n            (self.config.maxDate &&\n                dateToCheck &&\n                compareDates(dateToCheck, self.config.maxDate, timeless !== undefined ? timeless : !self.maxDateHasTime) > 0))\n            return false;\n        if (!self.config.enable && self.config.disable.length === 0)\n            return true;\n        if (dateToCheck === undefined)\n            return false;\n        var bool = !!self.config.enable, array = (_a = self.config.enable) !== null && _a !== void 0 ? _a : self.config.disable;\n        for (var i = 0, d = void 0; i < array.length; i++) {\n            d = array[i];\n            if (typeof d === \"function\" &&\n                d(dateToCheck))\n                return bool;\n            else if (d instanceof Date &&\n                dateToCheck !== undefined &&\n                d.getTime() === dateToCheck.getTime())\n                return bool;\n            else if (typeof d === \"string\") {\n                var parsed = self.parseDate(d, undefined, true);\n                return parsed && parsed.getTime() === dateToCheck.getTime()\n                    ? bool\n                    : !bool;\n            }\n            else if (typeof d === \"object\" &&\n                dateToCheck !== undefined &&\n                d.from &&\n                d.to &&\n                dateToCheck.getTime() >= d.from.getTime() &&\n                dateToCheck.getTime() <= d.to.getTime())\n                return bool;\n        }\n        return !bool;\n    }\n    function isInView(elem) {\n        if (self.daysContainer !== undefined)\n            return (elem.className.indexOf(\"hidden\") === -1 &&\n                elem.className.indexOf(\"flatpickr-disabled\") === -1 &&\n                self.daysContainer.contains(elem));\n        return false;\n    }\n    function onBlur(e) {\n        var isInput = e.target === self._input;\n        var valueChanged = self._input.value.trimEnd() !== getDateStr();\n        if (isInput &&\n            valueChanged &&\n            !(e.relatedTarget && isCalendarElem(e.relatedTarget))) {\n            self.setDate(self._input.value, true, e.target === self.altInput\n                ? self.config.altFormat\n                : self.config.dateFormat);\n        }\n    }\n    function onKeyDown(e) {\n        var eventTarget = getEventTarget(e);\n        var isInput = self.config.wrap\n            ? element.contains(eventTarget)\n            : eventTarget === self._input;\n        var allowInput = self.config.allowInput;\n        var allowKeydown = self.isOpen && (!allowInput || !isInput);\n        var allowInlineKeydown = self.config.inline && isInput && !allowInput;\n        if (e.keyCode === 13 && isInput) {\n            if (allowInput) {\n                self.setDate(self._input.value, true, eventTarget === self.altInput\n                    ? self.config.altFormat\n                    : self.config.dateFormat);\n                self.close();\n                return eventTarget.blur();\n            }\n            else {\n                self.open();\n            }\n        }\n        else if (isCalendarElem(eventTarget) ||\n            allowKeydown ||\n            allowInlineKeydown) {\n            var isTimeObj = !!self.timeContainer &&\n                self.timeContainer.contains(eventTarget);\n            switch (e.keyCode) {\n                case 13:\n                    if (isTimeObj) {\n                        e.preventDefault();\n                        updateTime();\n                        focusAndClose();\n                    }\n                    else\n                        selectDate(e);\n                    break;\n                case 27:\n                    e.preventDefault();\n                    focusAndClose();\n                    break;\n                case 8:\n                case 46:\n                    if (isInput && !self.config.allowInput) {\n                        e.preventDefault();\n                        self.clear();\n                    }\n                    break;\n                case 37:\n                case 39:\n                    if (!isTimeObj && !isInput) {\n                        e.preventDefault();\n                        var activeElement = getClosestActiveElement();\n                        if (self.daysContainer !== undefined &&\n                            (allowInput === false ||\n                                (activeElement && isInView(activeElement)))) {\n                            var delta_1 = e.keyCode === 39 ? 1 : -1;\n                            if (!e.ctrlKey)\n                                focusOnDay(undefined, delta_1);\n                            else {\n                                e.stopPropagation();\n                                changeMonth(delta_1);\n                                focusOnDay(getFirstAvailableDay(1), 0);\n                            }\n                        }\n                    }\n                    else if (self.hourElement)\n                        self.hourElement.focus();\n                    break;\n                case 38:\n                case 40:\n                    e.preventDefault();\n                    var delta = e.keyCode === 40 ? 1 : -1;\n                    if ((self.daysContainer &&\n                        eventTarget.$i !== undefined) ||\n                        eventTarget === self.input ||\n                        eventTarget === self.altInput) {\n                        if (e.ctrlKey) {\n                            e.stopPropagation();\n                            changeYear(self.currentYear - delta);\n                            focusOnDay(getFirstAvailableDay(1), 0);\n                        }\n                        else if (!isTimeObj)\n                            focusOnDay(undefined, delta * 7);\n                    }\n                    else if (eventTarget === self.currentYearElement) {\n                        changeYear(self.currentYear - delta);\n                    }\n                    else if (self.config.enableTime) {\n                        if (!isTimeObj && self.hourElement)\n                            self.hourElement.focus();\n                        updateTime(e);\n                        self._debouncedChange();\n                    }\n                    break;\n                case 9:\n                    if (isTimeObj) {\n                        var elems = [\n                            self.hourElement,\n                            self.minuteElement,\n                            self.secondElement,\n                            self.amPM,\n                        ]\n                            .concat(self.pluginElements)\n                            .filter(function (x) { return x; });\n                        var i = elems.indexOf(eventTarget);\n                        if (i !== -1) {\n                            var target = elems[i + (e.shiftKey ? -1 : 1)];\n                            e.preventDefault();\n                            (target || self._input).focus();\n                        }\n                    }\n                    else if (!self.config.noCalendar &&\n                        self.daysContainer &&\n                        self.daysContainer.contains(eventTarget) &&\n                        e.shiftKey) {\n                        e.preventDefault();\n                        self._input.focus();\n                    }\n                    break;\n                default:\n                    break;\n            }\n        }\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            switch (e.key) {\n                case self.l10n.amPM[0].charAt(0):\n                case self.l10n.amPM[0].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[0];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n                case self.l10n.amPM[1].charAt(0):\n                case self.l10n.amPM[1].charAt(0).toLowerCase():\n                    self.amPM.textContent = self.l10n.amPM[1];\n                    setHoursFromInputs();\n                    updateValue();\n                    break;\n            }\n        }\n        if (isInput || isCalendarElem(eventTarget)) {\n            triggerEvent(\"onKeyDown\", e);\n        }\n    }\n    function onMouseOver(elem, cellClass) {\n        if (cellClass === void 0) { cellClass = \"flatpickr-day\"; }\n        if (self.selectedDates.length !== 1 ||\n            (elem &&\n                (!elem.classList.contains(cellClass) ||\n                    elem.classList.contains(\"flatpickr-disabled\"))))\n            return;\n        var hoverDate = elem\n            ? elem.dateObj.getTime()\n            : self.days.firstElementChild.dateObj.getTime(), initialDate = self.parseDate(self.selectedDates[0], undefined, true).getTime(), rangeStartDate = Math.min(hoverDate, self.selectedDates[0].getTime()), rangeEndDate = Math.max(hoverDate, self.selectedDates[0].getTime());\n        var containsDisabled = false;\n        var minRange = 0, maxRange = 0;\n        for (var t = rangeStartDate; t < rangeEndDate; t += duration.DAY) {\n            if (!isEnabled(new Date(t), true)) {\n                containsDisabled =\n                    containsDisabled || (t > rangeStartDate && t < rangeEndDate);\n                if (t < initialDate && (!minRange || t > minRange))\n                    minRange = t;\n                else if (t > initialDate && (!maxRange || t < maxRange))\n                    maxRange = t;\n            }\n        }\n        var hoverableCells = Array.from(self.rContainer.querySelectorAll(\"*:nth-child(-n+\" + self.config.showMonths + \") > .\" + cellClass));\n        hoverableCells.forEach(function (dayElem) {\n            var date = dayElem.dateObj;\n            var timestamp = date.getTime();\n            var outOfRange = (minRange > 0 && timestamp < minRange) ||\n                (maxRange > 0 && timestamp > maxRange);\n            if (outOfRange) {\n                dayElem.classList.add(\"notAllowed\");\n                [\"inRange\", \"startRange\", \"endRange\"].forEach(function (c) {\n                    dayElem.classList.remove(c);\n                });\n                return;\n            }\n            else if (containsDisabled && !outOfRange)\n                return;\n            [\"startRange\", \"inRange\", \"endRange\", \"notAllowed\"].forEach(function (c) {\n                dayElem.classList.remove(c);\n            });\n            if (elem !== undefined) {\n                elem.classList.add(hoverDate <= self.selectedDates[0].getTime()\n                    ? \"startRange\"\n                    : \"endRange\");\n                if (initialDate < hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"startRange\");\n                else if (initialDate > hoverDate && timestamp === initialDate)\n                    dayElem.classList.add(\"endRange\");\n                if (timestamp >= minRange &&\n                    (maxRange === 0 || timestamp <= maxRange) &&\n                    isBetween(timestamp, initialDate, hoverDate))\n                    dayElem.classList.add(\"inRange\");\n            }\n        });\n    }\n    function onResize() {\n        if (self.isOpen && !self.config.static && !self.config.inline)\n            positionCalendar();\n    }\n    function open(e, positionElement) {\n        if (positionElement === void 0) { positionElement = self._positionElement; }\n        if (self.isMobile === true) {\n            if (e) {\n                e.preventDefault();\n                var eventTarget = getEventTarget(e);\n                if (eventTarget) {\n                    eventTarget.blur();\n                }\n            }\n            if (self.mobileInput !== undefined) {\n                self.mobileInput.focus();\n                self.mobileInput.click();\n            }\n            triggerEvent(\"onOpen\");\n            return;\n        }\n        else if (self._input.disabled || self.config.inline) {\n            return;\n        }\n        var wasOpen = self.isOpen;\n        self.isOpen = true;\n        if (!wasOpen) {\n            self.calendarContainer.classList.add(\"open\");\n            self._input.classList.add(\"active\");\n            triggerEvent(\"onOpen\");\n            positionCalendar(positionElement);\n        }\n        if (self.config.enableTime === true && self.config.noCalendar === true) {\n            if (self.config.allowInput === false &&\n                (e === undefined ||\n                    !self.timeContainer.contains(e.relatedTarget))) {\n                setTimeout(function () { return self.hourElement.select(); }, 50);\n            }\n        }\n    }\n    function minMaxDateSetter(type) {\n        return function (date) {\n            var dateObj = (self.config[\"_\" + type + \"Date\"] = self.parseDate(date, self.config.dateFormat));\n            var inverseDateObj = self.config[\"_\" + (type === \"min\" ? \"max\" : \"min\") + \"Date\"];\n            if (dateObj !== undefined) {\n                self[type === \"min\" ? \"minDateHasTime\" : \"maxDateHasTime\"] =\n                    dateObj.getHours() > 0 ||\n                        dateObj.getMinutes() > 0 ||\n                        dateObj.getSeconds() > 0;\n            }\n            if (self.selectedDates) {\n                self.selectedDates = self.selectedDates.filter(function (d) { return isEnabled(d); });\n                if (!self.selectedDates.length && type === \"min\")\n                    setHoursFromDate(dateObj);\n                updateValue();\n            }\n            if (self.daysContainer) {\n                redraw();\n                if (dateObj !== undefined)\n                    self.currentYearElement[type] = dateObj.getFullYear().toString();\n                else\n                    self.currentYearElement.removeAttribute(type);\n                self.currentYearElement.disabled =\n                    !!inverseDateObj &&\n                        dateObj !== undefined &&\n                        inverseDateObj.getFullYear() === dateObj.getFullYear();\n            }\n        };\n    }\n    function parseConfig() {\n        var boolOpts = [\n            \"wrap\",\n            \"weekNumbers\",\n            \"allowInput\",\n            \"allowInvalidPreload\",\n            \"clickOpens\",\n            \"time_24hr\",\n            \"enableTime\",\n            \"noCalendar\",\n            \"altInput\",\n            \"shorthandCurrentMonth\",\n            \"inline\",\n            \"static\",\n            \"enableSeconds\",\n            \"disableMobile\",\n        ];\n        var userConfig = __assign(__assign({}, JSON.parse(JSON.stringify(element.dataset || {}))), instanceConfig);\n        var formats = {};\n        self.config.parseDate = userConfig.parseDate;\n        self.config.formatDate = userConfig.formatDate;\n        Object.defineProperty(self.config, \"enable\", {\n            get: function () { return self.config._enable; },\n            set: function (dates) {\n                self.config._enable = parseDateRules(dates);\n            },\n        });\n        Object.defineProperty(self.config, \"disable\", {\n            get: function () { return self.config._disable; },\n            set: function (dates) {\n                self.config._disable = parseDateRules(dates);\n            },\n        });\n        var timeMode = userConfig.mode === \"time\";\n        if (!userConfig.dateFormat && (userConfig.enableTime || timeMode)) {\n            var defaultDateFormat = flatpickr.defaultConfig.dateFormat || defaultOptions.dateFormat;\n            formats.dateFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"H:i\" + (userConfig.enableSeconds ? \":S\" : \"\")\n                    : defaultDateFormat + \" H:i\" + (userConfig.enableSeconds ? \":S\" : \"\");\n        }\n        if (userConfig.altInput &&\n            (userConfig.enableTime || timeMode) &&\n            !userConfig.altFormat) {\n            var defaultAltFormat = flatpickr.defaultConfig.altFormat || defaultOptions.altFormat;\n            formats.altFormat =\n                userConfig.noCalendar || timeMode\n                    ? \"h:i\" + (userConfig.enableSeconds ? \":S K\" : \" K\")\n                    : defaultAltFormat + (\" h:i\" + (userConfig.enableSeconds ? \":S\" : \"\") + \" K\");\n        }\n        Object.defineProperty(self.config, \"minDate\", {\n            get: function () { return self.config._minDate; },\n            set: minMaxDateSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxDate\", {\n            get: function () { return self.config._maxDate; },\n            set: minMaxDateSetter(\"max\"),\n        });\n        var minMaxTimeSetter = function (type) { return function (val) {\n            self.config[type === \"min\" ? \"_minTime\" : \"_maxTime\"] = self.parseDate(val, \"H:i:S\");\n        }; };\n        Object.defineProperty(self.config, \"minTime\", {\n            get: function () { return self.config._minTime; },\n            set: minMaxTimeSetter(\"min\"),\n        });\n        Object.defineProperty(self.config, \"maxTime\", {\n            get: function () { return self.config._maxTime; },\n            set: minMaxTimeSetter(\"max\"),\n        });\n        if (userConfig.mode === \"time\") {\n            self.config.noCalendar = true;\n            self.config.enableTime = true;\n        }\n        Object.assign(self.config, formats, userConfig);\n        for (var i = 0; i < boolOpts.length; i++)\n            self.config[boolOpts[i]] =\n                self.config[boolOpts[i]] === true ||\n                    self.config[boolOpts[i]] === \"true\";\n        HOOKS.filter(function (hook) { return self.config[hook] !== undefined; }).forEach(function (hook) {\n            self.config[hook] = arrayify(self.config[hook] || []).map(bindToInstance);\n        });\n        self.isMobile =\n            !self.config.disableMobile &&\n                !self.config.inline &&\n                self.config.mode === \"single\" &&\n                !self.config.disable.length &&\n                !self.config.enable &&\n                !self.config.weekNumbers &&\n                /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n        for (var i = 0; i < self.config.plugins.length; i++) {\n            var pluginConf = self.config.plugins[i](self) || {};\n            for (var key in pluginConf) {\n                if (HOOKS.indexOf(key) > -1) {\n                    self.config[key] = arrayify(pluginConf[key])\n                        .map(bindToInstance)\n                        .concat(self.config[key]);\n                }\n                else if (typeof userConfig[key] === \"undefined\")\n                    self.config[key] = pluginConf[key];\n            }\n        }\n        if (!userConfig.altInputClass) {\n            self.config.altInputClass =\n                getInputElem().className + \" \" + self.config.altInputClass;\n        }\n        triggerEvent(\"onParseConfig\");\n    }\n    function getInputElem() {\n        return self.config.wrap\n            ? element.querySelector(\"[data-input]\")\n            : element;\n    }\n    function setupLocale() {\n        if (typeof self.config.locale !== \"object\" &&\n            typeof flatpickr.l10ns[self.config.locale] === \"undefined\")\n            self.config.errorHandler(new Error(\"flatpickr: invalid locale \" + self.config.locale));\n        self.l10n = __assign(__assign({}, flatpickr.l10ns.default), (typeof self.config.locale === \"object\"\n            ? self.config.locale\n            : self.config.locale !== \"default\"\n                ? flatpickr.l10ns[self.config.locale]\n                : undefined));\n        tokenRegex.D = \"(\" + self.l10n.weekdays.shorthand.join(\"|\") + \")\";\n        tokenRegex.l = \"(\" + self.l10n.weekdays.longhand.join(\"|\") + \")\";\n        tokenRegex.M = \"(\" + self.l10n.months.shorthand.join(\"|\") + \")\";\n        tokenRegex.F = \"(\" + self.l10n.months.longhand.join(\"|\") + \")\";\n        tokenRegex.K = \"(\" + self.l10n.amPM[0] + \"|\" + self.l10n.amPM[1] + \"|\" + self.l10n.amPM[0].toLowerCase() + \"|\" + self.l10n.amPM[1].toLowerCase() + \")\";\n        var userConfig = __assign(__assign({}, instanceConfig), JSON.parse(JSON.stringify(element.dataset || {})));\n        if (userConfig.time_24hr === undefined &&\n            flatpickr.defaultConfig.time_24hr === undefined) {\n            self.config.time_24hr = self.l10n.time_24hr;\n        }\n        self.formatDate = createDateFormatter(self);\n        self.parseDate = createDateParser({ config: self.config, l10n: self.l10n });\n    }\n    function positionCalendar(customPositionElement) {\n        if (typeof self.config.position === \"function\") {\n            return void self.config.position(self, customPositionElement);\n        }\n        if (self.calendarContainer === undefined)\n            return;\n        triggerEvent(\"onPreCalendarPosition\");\n        var positionElement = customPositionElement || self._positionElement;\n        var calendarHeight = Array.prototype.reduce.call(self.calendarContainer.children, (function (acc, child) { return acc + child.offsetHeight; }), 0), calendarWidth = self.calendarContainer.offsetWidth, configPos = self.config.position.split(\" \"), configPosVertical = configPos[0], configPosHorizontal = configPos.length > 1 ? configPos[1] : null, inputBounds = positionElement.getBoundingClientRect(), distanceFromBottom = window.innerHeight - inputBounds.bottom, showOnTop = configPosVertical === \"above\" ||\n            (configPosVertical !== \"below\" &&\n                distanceFromBottom < calendarHeight &&\n                inputBounds.top > calendarHeight);\n        var top = window.pageYOffset +\n            inputBounds.top +\n            (!showOnTop ? positionElement.offsetHeight + 2 : -calendarHeight - 2);\n        toggleClass(self.calendarContainer, \"arrowTop\", !showOnTop);\n        toggleClass(self.calendarContainer, \"arrowBottom\", showOnTop);\n        if (self.config.inline)\n            return;\n        var left = window.pageXOffset + inputBounds.left;\n        var isCenter = false;\n        var isRight = false;\n        if (configPosHorizontal === \"center\") {\n            left -= (calendarWidth - inputBounds.width) / 2;\n            isCenter = true;\n        }\n        else if (configPosHorizontal === \"right\") {\n            left -= calendarWidth - inputBounds.width;\n            isRight = true;\n        }\n        toggleClass(self.calendarContainer, \"arrowLeft\", !isCenter && !isRight);\n        toggleClass(self.calendarContainer, \"arrowCenter\", isCenter);\n        toggleClass(self.calendarContainer, \"arrowRight\", isRight);\n        var right = window.document.body.offsetWidth -\n            (window.pageXOffset + inputBounds.right);\n        var rightMost = left + calendarWidth > window.document.body.offsetWidth;\n        var centerMost = right + calendarWidth > window.document.body.offsetWidth;\n        toggleClass(self.calendarContainer, \"rightMost\", rightMost);\n        if (self.config.static)\n            return;\n        self.calendarContainer.style.top = top + \"px\";\n        if (!rightMost) {\n            self.calendarContainer.style.left = left + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n        else if (!centerMost) {\n            self.calendarContainer.style.left = \"auto\";\n            self.calendarContainer.style.right = right + \"px\";\n        }\n        else {\n            var doc = getDocumentStyleSheet();\n            if (doc === undefined)\n                return;\n            var bodyWidth = window.document.body.offsetWidth;\n            var centerLeft = Math.max(0, bodyWidth / 2 - calendarWidth / 2);\n            var centerBefore = \".flatpickr-calendar.centerMost:before\";\n            var centerAfter = \".flatpickr-calendar.centerMost:after\";\n            var centerIndex = doc.cssRules.length;\n            var centerStyle = \"{left:\" + inputBounds.left + \"px;right:auto;}\";\n            toggleClass(self.calendarContainer, \"rightMost\", false);\n            toggleClass(self.calendarContainer, \"centerMost\", true);\n            doc.insertRule(centerBefore + \",\" + centerAfter + centerStyle, centerIndex);\n            self.calendarContainer.style.left = centerLeft + \"px\";\n            self.calendarContainer.style.right = \"auto\";\n        }\n    }\n    function getDocumentStyleSheet() {\n        var editableSheet = null;\n        for (var i = 0; i < document.styleSheets.length; i++) {\n            var sheet = document.styleSheets[i];\n            if (!sheet.cssRules)\n                continue;\n            try {\n                sheet.cssRules;\n            }\n            catch (err) {\n                continue;\n            }\n            editableSheet = sheet;\n            break;\n        }\n        return editableSheet != null ? editableSheet : createStyleSheet();\n    }\n    function createStyleSheet() {\n        var style = document.createElement(\"style\");\n        document.head.appendChild(style);\n        return style.sheet;\n    }\n    function redraw() {\n        if (self.config.noCalendar || self.isMobile)\n            return;\n        buildMonthSwitch();\n        updateNavigationCurrentMonth();\n        buildDays();\n    }\n    function focusAndClose() {\n        self._input.focus();\n        if (window.navigator.userAgent.indexOf(\"MSIE\") !== -1 ||\n            navigator.msMaxTouchPoints !== undefined) {\n            setTimeout(self.close, 0);\n        }\n        else {\n            self.close();\n        }\n    }\n    function selectDate(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        var isSelectable = function (day) {\n            return day.classList &&\n                day.classList.contains(\"flatpickr-day\") &&\n                !day.classList.contains(\"flatpickr-disabled\") &&\n                !day.classList.contains(\"notAllowed\");\n        };\n        var t = findParent(getEventTarget(e), isSelectable);\n        if (t === undefined)\n            return;\n        var target = t;\n        var selectedDate = (self.latestSelectedDateObj = new Date(target.dateObj.getTime()));\n        var shouldChangeMonth = (selectedDate.getMonth() < self.currentMonth ||\n            selectedDate.getMonth() >\n                self.currentMonth + self.config.showMonths - 1) &&\n            self.config.mode !== \"range\";\n        self.selectedDateElem = target;\n        if (self.config.mode === \"single\")\n            self.selectedDates = [selectedDate];\n        else if (self.config.mode === \"multiple\") {\n            var selectedIndex = isDateSelected(selectedDate);\n            if (selectedIndex)\n                self.selectedDates.splice(parseInt(selectedIndex), 1);\n            else\n                self.selectedDates.push(selectedDate);\n        }\n        else if (self.config.mode === \"range\") {\n            if (self.selectedDates.length === 2) {\n                self.clear(false, false);\n            }\n            self.latestSelectedDateObj = selectedDate;\n            self.selectedDates.push(selectedDate);\n            if (compareDates(selectedDate, self.selectedDates[0], true) !== 0)\n                self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n        }\n        setHoursFromInputs();\n        if (shouldChangeMonth) {\n            var isNewYear = self.currentYear !== selectedDate.getFullYear();\n            self.currentYear = selectedDate.getFullYear();\n            self.currentMonth = selectedDate.getMonth();\n            if (isNewYear) {\n                triggerEvent(\"onYearChange\");\n                buildMonthSwitch();\n            }\n            triggerEvent(\"onMonthChange\");\n        }\n        updateNavigationCurrentMonth();\n        buildDays();\n        updateValue();\n        if (!shouldChangeMonth &&\n            self.config.mode !== \"range\" &&\n            self.config.showMonths === 1)\n            focusOnDayElem(target);\n        else if (self.selectedDateElem !== undefined &&\n            self.hourElement === undefined) {\n            self.selectedDateElem && self.selectedDateElem.focus();\n        }\n        if (self.hourElement !== undefined)\n            self.hourElement !== undefined && self.hourElement.focus();\n        if (self.config.closeOnSelect) {\n            var single = self.config.mode === \"single\" && !self.config.enableTime;\n            var range = self.config.mode === \"range\" &&\n                self.selectedDates.length === 2 &&\n                !self.config.enableTime;\n            if (single || range) {\n                focusAndClose();\n            }\n        }\n        triggerChange();\n    }\n    var CALLBACKS = {\n        locale: [setupLocale, updateWeekdays],\n        showMonths: [buildMonths, setCalendarWidth, buildWeekdays],\n        minDate: [jumpToDate],\n        maxDate: [jumpToDate],\n        positionElement: [updatePositionElement],\n        clickOpens: [\n            function () {\n                if (self.config.clickOpens === true) {\n                    bind(self._input, \"focus\", self.open);\n                    bind(self._input, \"click\", self.open);\n                }\n                else {\n                    self._input.removeEventListener(\"focus\", self.open);\n                    self._input.removeEventListener(\"click\", self.open);\n                }\n            },\n        ],\n    };\n    function set(option, value) {\n        if (option !== null && typeof option === \"object\") {\n            Object.assign(self.config, option);\n            for (var key in option) {\n                if (CALLBACKS[key] !== undefined)\n                    CALLBACKS[key].forEach(function (x) { return x(); });\n            }\n        }\n        else {\n            self.config[option] = value;\n            if (CALLBACKS[option] !== undefined)\n                CALLBACKS[option].forEach(function (x) { return x(); });\n            else if (HOOKS.indexOf(option) > -1)\n                self.config[option] = arrayify(value);\n        }\n        self.redraw();\n        updateValue(true);\n    }\n    function setSelectedDate(inputDate, format) {\n        var dates = [];\n        if (inputDate instanceof Array)\n            dates = inputDate.map(function (d) { return self.parseDate(d, format); });\n        else if (inputDate instanceof Date || typeof inputDate === \"number\")\n            dates = [self.parseDate(inputDate, format)];\n        else if (typeof inputDate === \"string\") {\n            switch (self.config.mode) {\n                case \"single\":\n                case \"time\":\n                    dates = [self.parseDate(inputDate, format)];\n                    break;\n                case \"multiple\":\n                    dates = inputDate\n                        .split(self.config.conjunction)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                case \"range\":\n                    dates = inputDate\n                        .split(self.l10n.rangeSeparator)\n                        .map(function (date) { return self.parseDate(date, format); });\n                    break;\n                default:\n                    break;\n            }\n        }\n        else\n            self.config.errorHandler(new Error(\"Invalid date supplied: \" + JSON.stringify(inputDate)));\n        self.selectedDates = (self.config.allowInvalidPreload\n            ? dates\n            : dates.filter(function (d) { return d instanceof Date && isEnabled(d, false); }));\n        if (self.config.mode === \"range\")\n            self.selectedDates.sort(function (a, b) { return a.getTime() - b.getTime(); });\n    }\n    function setDate(date, triggerChange, format) {\n        if (triggerChange === void 0) { triggerChange = false; }\n        if (format === void 0) { format = self.config.dateFormat; }\n        if ((date !== 0 && !date) || (date instanceof Array && date.length === 0))\n            return self.clear(triggerChange);\n        setSelectedDate(date, format);\n        self.latestSelectedDateObj =\n            self.selectedDates[self.selectedDates.length - 1];\n        self.redraw();\n        jumpToDate(undefined, triggerChange);\n        setHoursFromDate();\n        if (self.selectedDates.length === 0) {\n            self.clear(false);\n        }\n        updateValue(triggerChange);\n        if (triggerChange)\n            triggerEvent(\"onChange\");\n    }\n    function parseDateRules(arr) {\n        return arr\n            .slice()\n            .map(function (rule) {\n            if (typeof rule === \"string\" ||\n                typeof rule === \"number\" ||\n                rule instanceof Date) {\n                return self.parseDate(rule, undefined, true);\n            }\n            else if (rule &&\n                typeof rule === \"object\" &&\n                rule.from &&\n                rule.to)\n                return {\n                    from: self.parseDate(rule.from, undefined),\n                    to: self.parseDate(rule.to, undefined),\n                };\n            return rule;\n        })\n            .filter(function (x) { return x; });\n    }\n    function setupDates() {\n        self.selectedDates = [];\n        self.now = self.parseDate(self.config.now) || new Date();\n        var preloadedDate = self.config.defaultDate ||\n            ((self.input.nodeName === \"INPUT\" ||\n                self.input.nodeName === \"TEXTAREA\") &&\n                self.input.placeholder &&\n                self.input.value === self.input.placeholder\n                ? null\n                : self.input.value);\n        if (preloadedDate)\n            setSelectedDate(preloadedDate, self.config.dateFormat);\n        self._initialDate =\n            self.selectedDates.length > 0\n                ? self.selectedDates[0]\n                : self.config.minDate &&\n                    self.config.minDate.getTime() > self.now.getTime()\n                    ? self.config.minDate\n                    : self.config.maxDate &&\n                        self.config.maxDate.getTime() < self.now.getTime()\n                        ? self.config.maxDate\n                        : self.now;\n        self.currentYear = self._initialDate.getFullYear();\n        self.currentMonth = self._initialDate.getMonth();\n        if (self.selectedDates.length > 0)\n            self.latestSelectedDateObj = self.selectedDates[0];\n        if (self.config.minTime !== undefined)\n            self.config.minTime = self.parseDate(self.config.minTime, \"H:i\");\n        if (self.config.maxTime !== undefined)\n            self.config.maxTime = self.parseDate(self.config.maxTime, \"H:i\");\n        self.minDateHasTime =\n            !!self.config.minDate &&\n                (self.config.minDate.getHours() > 0 ||\n                    self.config.minDate.getMinutes() > 0 ||\n                    self.config.minDate.getSeconds() > 0);\n        self.maxDateHasTime =\n            !!self.config.maxDate &&\n                (self.config.maxDate.getHours() > 0 ||\n                    self.config.maxDate.getMinutes() > 0 ||\n                    self.config.maxDate.getSeconds() > 0);\n    }\n    function setupInputs() {\n        self.input = getInputElem();\n        if (!self.input) {\n            self.config.errorHandler(new Error(\"Invalid input element specified\"));\n            return;\n        }\n        self.input._type = self.input.type;\n        self.input.type = \"text\";\n        self.input.classList.add(\"flatpickr-input\");\n        self._input = self.input;\n        if (self.config.altInput) {\n            self.altInput = createElement(self.input.nodeName, self.config.altInputClass);\n            self._input = self.altInput;\n            self.altInput.placeholder = self.input.placeholder;\n            self.altInput.disabled = self.input.disabled;\n            self.altInput.required = self.input.required;\n            self.altInput.tabIndex = self.input.tabIndex;\n            self.altInput.type = \"text\";\n            self.input.setAttribute(\"type\", \"hidden\");\n            if (!self.config.static && self.input.parentNode)\n                self.input.parentNode.insertBefore(self.altInput, self.input.nextSibling);\n        }\n        if (!self.config.allowInput)\n            self._input.setAttribute(\"readonly\", \"readonly\");\n        updatePositionElement();\n    }\n    function updatePositionElement() {\n        self._positionElement = self.config.positionElement || self._input;\n    }\n    function setupMobile() {\n        var inputType = self.config.enableTime\n            ? self.config.noCalendar\n                ? \"time\"\n                : \"datetime-local\"\n            : \"date\";\n        self.mobileInput = createElement(\"input\", self.input.className + \" flatpickr-mobile\");\n        self.mobileInput.tabIndex = 1;\n        self.mobileInput.type = inputType;\n        self.mobileInput.disabled = self.input.disabled;\n        self.mobileInput.required = self.input.required;\n        self.mobileInput.placeholder = self.input.placeholder;\n        self.mobileFormatStr =\n            inputType === \"datetime-local\"\n                ? \"Y-m-d\\\\TH:i:S\"\n                : inputType === \"date\"\n                    ? \"Y-m-d\"\n                    : \"H:i:S\";\n        if (self.selectedDates.length > 0) {\n            self.mobileInput.defaultValue = self.mobileInput.value = self.formatDate(self.selectedDates[0], self.mobileFormatStr);\n        }\n        if (self.config.minDate)\n            self.mobileInput.min = self.formatDate(self.config.minDate, \"Y-m-d\");\n        if (self.config.maxDate)\n            self.mobileInput.max = self.formatDate(self.config.maxDate, \"Y-m-d\");\n        if (self.input.getAttribute(\"step\"))\n            self.mobileInput.step = String(self.input.getAttribute(\"step\"));\n        self.input.type = \"hidden\";\n        if (self.altInput !== undefined)\n            self.altInput.type = \"hidden\";\n        try {\n            if (self.input.parentNode)\n                self.input.parentNode.insertBefore(self.mobileInput, self.input.nextSibling);\n        }\n        catch (_a) { }\n        bind(self.mobileInput, \"change\", function (e) {\n            self.setDate(getEventTarget(e).value, false, self.mobileFormatStr);\n            triggerEvent(\"onChange\");\n            triggerEvent(\"onClose\");\n        });\n    }\n    function toggle(e) {\n        if (self.isOpen === true)\n            return self.close();\n        self.open(e);\n    }\n    function triggerEvent(event, data) {\n        if (self.config === undefined)\n            return;\n        var hooks = self.config[event];\n        if (hooks !== undefined && hooks.length > 0) {\n            for (var i = 0; hooks[i] && i < hooks.length; i++)\n                hooks[i](self.selectedDates, self.input.value, self, data);\n        }\n        if (event === \"onChange\") {\n            self.input.dispatchEvent(createEvent(\"change\"));\n            self.input.dispatchEvent(createEvent(\"input\"));\n        }\n    }\n    function createEvent(name) {\n        var e = document.createEvent(\"Event\");\n        e.initEvent(name, true, true);\n        return e;\n    }\n    function isDateSelected(date) {\n        for (var i = 0; i < self.selectedDates.length; i++) {\n            var selectedDate = self.selectedDates[i];\n            if (selectedDate instanceof Date &&\n                compareDates(selectedDate, date) === 0)\n                return \"\" + i;\n        }\n        return false;\n    }\n    function isDateInRange(date) {\n        if (self.config.mode !== \"range\" || self.selectedDates.length < 2)\n            return false;\n        return (compareDates(date, self.selectedDates[0]) >= 0 &&\n            compareDates(date, self.selectedDates[1]) <= 0);\n    }\n    function updateNavigationCurrentMonth() {\n        if (self.config.noCalendar || self.isMobile || !self.monthNav)\n            return;\n        self.yearElements.forEach(function (yearElement, i) {\n            var d = new Date(self.currentYear, self.currentMonth, 1);\n            d.setMonth(self.currentMonth + i);\n            if (self.config.showMonths > 1 ||\n                self.config.monthSelectorType === \"static\") {\n                self.monthElements[i].textContent =\n                    monthToStr(d.getMonth(), self.config.shorthandCurrentMonth, self.l10n) + \" \";\n            }\n            else {\n                self.monthsDropdownContainer.value = d.getMonth().toString();\n            }\n            yearElement.value = d.getFullYear().toString();\n        });\n        self._hidePrevMonthArrow =\n            self.config.minDate !== undefined &&\n                (self.currentYear === self.config.minDate.getFullYear()\n                    ? self.currentMonth <= self.config.minDate.getMonth()\n                    : self.currentYear < self.config.minDate.getFullYear());\n        self._hideNextMonthArrow =\n            self.config.maxDate !== undefined &&\n                (self.currentYear === self.config.maxDate.getFullYear()\n                    ? self.currentMonth + 1 > self.config.maxDate.getMonth()\n                    : self.currentYear > self.config.maxDate.getFullYear());\n    }\n    function getDateStr(specificFormat) {\n        var format = specificFormat ||\n            (self.config.altInput ? self.config.altFormat : self.config.dateFormat);\n        return self.selectedDates\n            .map(function (dObj) { return self.formatDate(dObj, format); })\n            .filter(function (d, i, arr) {\n            return self.config.mode !== \"range\" ||\n                self.config.enableTime ||\n                arr.indexOf(d) === i;\n        })\n            .join(self.config.mode !== \"range\"\n            ? self.config.conjunction\n            : self.l10n.rangeSeparator);\n    }\n    function updateValue(triggerChange) {\n        if (triggerChange === void 0) { triggerChange = true; }\n        if (self.mobileInput !== undefined && self.mobileFormatStr) {\n            self.mobileInput.value =\n                self.latestSelectedDateObj !== undefined\n                    ? self.formatDate(self.latestSelectedDateObj, self.mobileFormatStr)\n                    : \"\";\n        }\n        self.input.value = getDateStr(self.config.dateFormat);\n        if (self.altInput !== undefined) {\n            self.altInput.value = getDateStr(self.config.altFormat);\n        }\n        if (triggerChange !== false)\n            triggerEvent(\"onValueUpdate\");\n    }\n    function onMonthNavClick(e) {\n        var eventTarget = getEventTarget(e);\n        var isPrevMonth = self.prevMonthNav.contains(eventTarget);\n        var isNextMonth = self.nextMonthNav.contains(eventTarget);\n        if (isPrevMonth || isNextMonth) {\n            changeMonth(isPrevMonth ? -1 : 1);\n        }\n        else if (self.yearElements.indexOf(eventTarget) >= 0) {\n            eventTarget.select();\n        }\n        else if (eventTarget.classList.contains(\"arrowUp\")) {\n            self.changeYear(self.currentYear + 1);\n        }\n        else if (eventTarget.classList.contains(\"arrowDown\")) {\n            self.changeYear(self.currentYear - 1);\n        }\n    }\n    function timeWrapper(e) {\n        e.preventDefault();\n        var isKeyDown = e.type === \"keydown\", eventTarget = getEventTarget(e), input = eventTarget;\n        if (self.amPM !== undefined && eventTarget === self.amPM) {\n            self.amPM.textContent =\n                self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n        }\n        var min = parseFloat(input.getAttribute(\"min\")), max = parseFloat(input.getAttribute(\"max\")), step = parseFloat(input.getAttribute(\"step\")), curValue = parseInt(input.value, 10), delta = e.delta ||\n            (isKeyDown ? (e.which === 38 ? 1 : -1) : 0);\n        var newValue = curValue + step * delta;\n        if (typeof input.value !== \"undefined\" && input.value.length === 2) {\n            var isHourElem = input === self.hourElement, isMinuteElem = input === self.minuteElement;\n            if (newValue < min) {\n                newValue =\n                    max +\n                        newValue +\n                        int(!isHourElem) +\n                        (int(isHourElem) && int(!self.amPM));\n                if (isMinuteElem)\n                    incrementNumInput(undefined, -1, self.hourElement);\n            }\n            else if (newValue > max) {\n                newValue =\n                    input === self.hourElement ? newValue - max - int(!self.amPM) : min;\n                if (isMinuteElem)\n                    incrementNumInput(undefined, 1, self.hourElement);\n            }\n            if (self.amPM &&\n                isHourElem &&\n                (step === 1\n                    ? newValue + curValue === 23\n                    : Math.abs(newValue - curValue) > step)) {\n                self.amPM.textContent =\n                    self.l10n.amPM[int(self.amPM.textContent === self.l10n.amPM[0])];\n            }\n            input.value = pad(newValue);\n        }\n    }\n    init();\n    return self;\n}\nfunction _flatpickr(nodeList, config) {\n    var nodes = Array.prototype.slice\n        .call(nodeList)\n        .filter(function (x) { return x instanceof HTMLElement; });\n    var instances = [];\n    for (var i = 0; i < nodes.length; i++) {\n        var node = nodes[i];\n        try {\n            if (node.getAttribute(\"data-fp-omit\") !== null)\n                continue;\n            if (node._flatpickr !== undefined) {\n                node._flatpickr.destroy();\n                node._flatpickr = undefined;\n            }\n            node._flatpickr = FlatpickrInstance(node, config || {});\n            instances.push(node._flatpickr);\n        }\n        catch (e) {\n            console.error(e);\n        }\n    }\n    return instances.length === 1 ? instances[0] : instances;\n}\nif (typeof HTMLElement !== \"undefined\" &&\n    typeof HTMLCollection !== \"undefined\" &&\n    typeof NodeList !== \"undefined\") {\n    HTMLCollection.prototype.flatpickr = NodeList.prototype.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n    HTMLElement.prototype.flatpickr = function (config) {\n        return _flatpickr([this], config);\n    };\n}\nvar flatpickr = function (selector, config) {\n    if (typeof selector === \"string\") {\n        return _flatpickr(window.document.querySelectorAll(selector), config);\n    }\n    else if (selector instanceof Node) {\n        return _flatpickr([selector], config);\n    }\n    else {\n        return _flatpickr(selector, config);\n    }\n};\nflatpickr.defaultConfig = {};\nflatpickr.l10ns = {\n    en: __assign({}, English),\n    default: __assign({}, English),\n};\nflatpickr.localize = function (l10n) {\n    flatpickr.l10ns.default = __assign(__assign({}, flatpickr.l10ns.default), l10n);\n};\nflatpickr.setDefaults = function (config) {\n    flatpickr.defaultConfig = __assign(__assign({}, flatpickr.defaultConfig), config);\n};\nflatpickr.parseDate = createDateParser({});\nflatpickr.formatDate = createDateFormatter({});\nflatpickr.compareDates = compareDates;\nif (typeof jQuery !== \"undefined\" && typeof jQuery.fn !== \"undefined\") {\n    jQuery.fn.flatpickr = function (config) {\n        return _flatpickr(this, config);\n    };\n}\nDate.prototype.fp_incr = function (days) {\n    return new Date(this.getFullYear(), this.getMonth(), this.getDate() + (typeof days === \"string\" ? parseInt(days, 10) : days));\n};\nif (typeof window !== \"undefined\") {\n    window.flatpickr = flatpickr;\n}\nexport default flatpickr;\n", "import flatpickr from 'flatpickr';\n\nexport function initDateSelector(): void {\n  flatpickr('.date-picker', { allowInput: true });\n  flatpickr('.datetime-picker', {\n    allowInput: true,\n    enableSeconds: true,\n    enableTime: true,\n    time_24hr: true,\n  });\n  flatpickr('.time-picker', {\n    allowInput: true,\n    enableSeconds: true,\n    enableTime: true,\n    noCalendar: true,\n    time_24hr: true,\n  });\n}\n", "import { createToast } from './bs';\nimport { getElements, apiPatch, hasError, getSelectedOptions } from './util';\n\n/**\n * Add columns to the table config select element.\n */\nfunction addColumns(event: Event): void {\n  for (const selectedOption of getElements<HTMLOptionElement>('#id_available_columns > option')) {\n    if (selectedOption.selected) {\n      for (const selected of getElements<HTMLSelectElement>('#id_columns')) {\n        selected.appendChild(selectedOption.cloneNode(true));\n      }\n      selectedOption.remove();\n    }\n  }\n  event.preventDefault();\n}\n\n/**\n * Remove columns from the table config select element.\n */\nfunction removeColumns(event: Event): void {\n  for (const selectedOption of getElements<HTMLOptionElement>('#id_columns > option')) {\n    if (selectedOption.selected) {\n      for (const available of getElements<HTMLSelectElement>('#id_available_columns')) {\n        available.appendChild(selectedOption.cloneNode(true));\n      }\n      selectedOption.remove();\n    }\n  }\n  event.preventDefault();\n}\n\n/**\n * Submit form configuration to the NetBox API.\n */\nasync function submitFormConfig(\n  url: string,\n  formConfig: Dict<Dict>,\n): Promise<APIResponse<APIUserConfig>> {\n  return await apiPatch<APIUserConfig>(url, formConfig);\n}\n\n/**\n * Handle table config form submission. Sends the selected columns to the NetBox API to update\n * the user's table configuration preferences.\n */\nfunction handleSubmit(event: Event): void {\n  event.preventDefault();\n\n  const element = event.currentTarget as HTMLFormElement;\n\n  // Get the API URL for submitting the form\n  const url = element.getAttribute('data-url');\n  if (url == null) {\n    const toast = createToast(\n      'danger',\n      'Error Updating Table Configuration',\n      'No API path defined for configuration form.',\n    );\n    toast.show();\n    return;\n  }\n\n  // Determine if the form action is to reset the table config.\n  const reset = document.activeElement?.getAttribute('value') === 'Reset';\n\n  // Create an array from the dot-separated config path. E.g. tables.DevicePowerOutletTable becomes\n  // ['tables', 'DevicePowerOutletTable']\n  const path = element.getAttribute('data-config-root')?.split('.') ?? [];\n\n  if (reset) {\n    // If we're resetting the table config, create an empty object for this table. E.g.\n    // tables.PlatformTable becomes {tables: PlatformTable: {}}\n    const data = path.reduceRight<Dict<Dict>>((value, key) => ({ [key]: value }), {});\n\n    // Submit the reset for configuration to the API.\n    submitFormConfig(url, data).then(res => {\n      if (hasError(res)) {\n        const toast = createToast('danger', 'Error Resetting Table Configuration', res.error);\n        toast.show();\n      } else {\n        // Strip any URL query parameters & reload the page\n        window.location.href = window.location.origin + window.location.pathname;\n      }\n    });\n    return;\n  }\n\n  // Get all the selected options from any select element in the form.\n  const options = getSelectedOptions(element, 'select[name=columns]');\n\n  // Create an object mapping the select element's name to all selected options for that element.\n  const formData: Dict<Dict<string>> = Object.assign(\n    {},\n    ...options.map(opt => ({ [opt.name]: opt.options })),\n  );\n\n  // Create an object mapping the configuration path to the select element names, which contain the\n  // selection options. E.g. {tables: {DevicePowerOutletTable: {columns: ['label', 'type']}}}\n  const data = path.reduceRight<Dict<Dict>>((value, key) => ({ [key]: value }), formData);\n\n  // Submit the resulting object to the API to update the user's preferences for this table.\n  submitFormConfig(url, data).then(res => {\n    if (hasError(res)) {\n      const toast = createToast('danger', 'Error Updating Table Configuration', res.error);\n      toast.show();\n    } else {\n      location.reload();\n    }\n  });\n}\n\n/**\n * Initialize table configuration elements.\n */\nexport function initTableConfig(): void {\n  for (const element of getElements<HTMLButtonElement>('#add_columns')) {\n    element.addEventListener('click', addColumns);\n  }\n  for (const element of getElements<HTMLButtonElement>('#remove_columns')) {\n    element.addEventListener('click', removeColumns);\n  }\n  for (const element of getElements<HTMLFormElement>('form.userconfigform')) {\n    element.addEventListener('submit', handleSubmit);\n  }\n}\n", "import { getElements, replaceAll, findFirstAdjacent } from '../util';\n\ntype ShowHide = 'show' | 'hide';\n\nfunction isShowHide(value: unknown): value is ShowHide {\n  return typeof value === 'string' && ['show', 'hide'].includes(value);\n}\n\n/**\n * When this error is thrown, it's an indication that we don't need to manage this table, because\n * it doesn't contain the required elements.\n */\nclass TableStateError extends Error {\n  table: HTMLTableElement;\n  constructor(message: string, table: HTMLTableElement) {\n    super(message);\n    this.table = table;\n  }\n}\n\n/**\n * Manage the display text of a button element as well as the visibility of its corresponding rows.\n */\nclass ButtonState {\n  /**\n   * Underlying Button DOM Element\n   */\n  public button: HTMLButtonElement;\n\n  /**\n   * Table rows provided in constructor\n   */\n  private rows: NodeListOf<HTMLTableRowElement>;\n\n  constructor(button: HTMLButtonElement, rows: NodeListOf<HTMLTableRowElement>) {\n    this.button = button;\n    this.rows = rows;\n  }\n\n  /**\n   * Remove visibility of button state rows.\n   */\n  private hideRows(): void {\n    for (const row of this.rows) {\n      row.classList.add('d-none');\n    }\n  }\n\n  /**\n   * Update the DOM element's `data-state` attribute.\n   */\n  public set buttonState(state: Nullable<ShowHide>) {\n    if (isShowHide(state)) {\n      this.button.setAttribute('data-state', state);\n    }\n  }\n\n  /**\n   * Get the DOM element's `data-state` attribute.\n   */\n  public get buttonState(): Nullable<ShowHide> {\n    const state = this.button.getAttribute('data-state');\n    if (isShowHide(state)) {\n      return state;\n    }\n    return null;\n  }\n\n  /**\n   * Update the DOM element's display text to reflect the action opposite the current state. For\n   * example, if the current state is to hide enabled interfaces, the DOM text should say\n   * \"Show Enabled Interfaces\".\n   */\n  private toggleButton(): void {\n    if (this.buttonState === 'show') {\n      this.button.innerText = replaceAll(this.button.innerText, 'Show', 'Hide');\n    } else if (this.buttonState === 'hide') {\n      this.button.innerText = replaceAll(this.button.innerHTML, 'Hide', 'Show');\n    }\n  }\n\n  /**\n   * Toggle the DOM element's `data-state` attribute.\n   */\n  private toggleState(): void {\n    if (this.buttonState === 'show') {\n      this.buttonState = 'hide';\n    } else if (this.buttonState === 'hide') {\n      this.buttonState = 'show';\n    }\n  }\n\n  /**\n   * Toggle all controlled elements.\n   */\n  private toggle(): void {\n    this.toggleState();\n    this.toggleButton();\n  }\n\n  /**\n   * When the button is clicked, toggle all controlled elements and hide rows based on\n   * buttonstate.\n   */\n  public handleClick(event: Event): void {\n    const button = event.currentTarget as HTMLButtonElement;\n    if (button.isEqualNode(this.button)) {\n      this.toggle();\n    }\n    if (this.buttonState === 'hide') {\n      this.hideRows();\n    }\n  }\n}\n\n/**\n * Manage the state of a table and its elements.\n */\nclass TableState {\n  /**\n   * Underlying DOM Table Element.\n   */\n\n  private table: HTMLTableElement;\n  /**\n   * Instance of ButtonState for the 'show/hide enabled rows' button.\n   */\n  // @ts-expect-error null handling is performed in the constructor\n  private enabledButton: ButtonState;\n\n  /**\n   * Instance of ButtonState for the 'show/hide disabled rows' button.\n   */\n  // @ts-expect-error null handling is performed in the constructor\n  private disabledButton: ButtonState;\n\n  /**\n   * Instance of ButtonState for the 'show/hide virtual rows' button.\n   */\n  // @ts-expect-error null handling is performed in the constructor\n  private virtualButton: ButtonState;\n\n  /**\n   * Instance of ButtonState for the 'show/hide virtual rows' button.\n   */\n  // @ts-expect-error null handling is performed in the constructor\n  private disconnectedButton: ButtonState;\n\n  /**\n   * All table rows in table\n   */\n  private rows: NodeListOf<HTMLTableRowElement>;\n\n  constructor(table: HTMLTableElement) {\n    this.table = table;\n    this.rows = this.table.querySelectorAll('tr');\n    try {\n      const toggleEnabledButton = findFirstAdjacent<HTMLButtonElement>(\n        this.table,\n        'button.toggle-enabled',\n      );\n      const toggleDisabledButton = findFirstAdjacent<HTMLButtonElement>(\n        this.table,\n        'button.toggle-disabled',\n      );\n      const toggleVirtualButton = findFirstAdjacent<HTMLButtonElement>(\n        this.table,\n        'button.toggle-virtual',\n      );\n      const toggleDisconnectedButton = findFirstAdjacent<HTMLButtonElement>(\n        this.table,\n        'button.toggle-disconnected',\n      );\n\n      if (toggleEnabledButton === null) {\n        throw new TableStateError(\"Table is missing a 'toggle-enabled' button.\", table);\n      }\n\n      if (toggleDisabledButton === null) {\n        throw new TableStateError(\"Table is missing a 'toggle-disabled' button.\", table);\n      }\n\n      if (toggleVirtualButton === null) {\n        throw new TableStateError(\"Table is missing a 'toggle-virtual' button.\", table);\n      }\n\n      if (toggleDisconnectedButton === null) {\n        throw new TableStateError(\"Table is missing a 'toggle-disconnected' button.\", table);\n      }\n\n      // Attach event listeners to the buttons elements.\n      toggleEnabledButton.addEventListener('click', event => this.handleClick(event, this));\n      toggleDisabledButton.addEventListener('click', event => this.handleClick(event, this));\n      toggleVirtualButton.addEventListener('click', event => this.handleClick(event, this));\n      toggleDisconnectedButton.addEventListener('click', event => this.handleClick(event, this));\n\n      // Instantiate ButtonState for each button for state management.\n      this.enabledButton = new ButtonState(\n        toggleEnabledButton,\n        table.querySelectorAll<HTMLTableRowElement>('tr[data-enabled=\"enabled\"]'),\n      );\n      this.disabledButton = new ButtonState(\n        toggleDisabledButton,\n        table.querySelectorAll<HTMLTableRowElement>('tr[data-enabled=\"disabled\"]'),\n      );\n      this.virtualButton = new ButtonState(\n        toggleVirtualButton,\n        table.querySelectorAll<HTMLTableRowElement>('tr[data-type=\"virtual\"]'),\n      );\n      this.disconnectedButton = new ButtonState(\n        toggleDisconnectedButton,\n        table.querySelectorAll<HTMLTableRowElement>('tr[data-connected=\"disconnected\"]'),\n      );\n    } catch (err) {\n      if (err instanceof TableStateError) {\n        // This class is useless for tables that don't have toggle buttons.\n        console.debug('Table does not contain enable/disable toggle buttons');\n        return;\n      } else {\n        throw err;\n      }\n    }\n  }\n\n  /**\n   * When toggle buttons are clicked, reapply visability all rows and\n   * pass the event to all button handlers\n   *\n   * @param event onClick event for toggle buttons.\n   * @param instance Instance of TableState (`this` cannot be used since that's context-specific).\n   */\n  public handleClick(event: Event, instance: TableState): void {\n    for (const row of this.rows) {\n      row.classList.remove('d-none');\n    }\n\n    instance.enabledButton.handleClick(event);\n    instance.disabledButton.handleClick(event);\n    instance.virtualButton.handleClick(event);\n    instance.disconnectedButton.handleClick(event);\n  }\n}\n\n/**\n * Initialize table states.\n */\nexport function initInterfaceTable(): void {\n  for (const element of getElements<HTMLTableElement>('table')) {\n    new TableState(element);\n  }\n}\n", "import { Collapse } from 'bootstrap';\nimport { StateManager } from './state';\nimport { getElements, isElement } from './util';\n\ntype NavState = { pinned: boolean };\ntype BodyAttr = 'show' | 'hide' | 'hidden' | 'pinned';\ntype Section = [HTMLAnchorElement, InstanceType<typeof Collapse>];\n\nclass SideNav {\n  /**\n   * Sidenav container element.\n   */\n  private base: HTMLDivElement;\n\n  /**\n   * SideNav internal state manager.\n   */\n  private state: StateManager<NavState>;\n\n  /**\n   * The currently active parent nav-link controlling a section.\n   */\n  private activeLink: Nullable<HTMLAnchorElement> = null;\n\n  /**\n   * All collapsible sections and their controlling nav-links.\n   */\n  private sections: Section[] = [];\n\n  constructor(base: HTMLDivElement) {\n    this.base = base;\n    this.state = new StateManager<NavState>(\n      { pinned: true },\n      { persist: true, key: 'netbox-sidenav' },\n    );\n\n    this.init();\n    this.initSectionLinks();\n    this.initLinks();\n  }\n\n  /**\n   * Determine if `document.body` has a sidenav attribute.\n   */\n  private bodyHas(attr: BodyAttr): boolean {\n    return document.body.hasAttribute(`data-sidenav-${attr}`);\n  }\n\n  /**\n   * Remove sidenav attributes from `document.body`.\n   */\n  private bodyRemove(...attrs: BodyAttr[]): void {\n    for (const attr of attrs) {\n      document.body.removeAttribute(`data-sidenav-${attr}`);\n    }\n  }\n\n  /**\n   * Add sidenav attributes to `document.body`.\n   */\n  private bodyAdd(...attrs: BodyAttr[]): void {\n    for (const attr of attrs) {\n      document.body.setAttribute(`data-sidenav-${attr}`, '');\n    }\n  }\n\n  /**\n   * Set initial values & add event listeners.\n   */\n  private init() {\n    for (const toggler of this.base.querySelectorAll('.sidenav-toggle')) {\n      toggler.addEventListener('click', event => this.onToggle(event));\n    }\n\n    for (const toggler of getElements<HTMLButtonElement>('.sidenav-toggle-mobile')) {\n      toggler.addEventListener('click', event => this.onMobileToggle(event));\n    }\n\n    if (window.innerWidth > 1200) {\n      if (this.state.get('pinned')) {\n        this.pin();\n      }\n\n      if (!this.state.get('pinned')) {\n        this.unpin();\n      }\n      window.addEventListener('resize', () => this.onResize());\n    }\n\n    if (window.innerWidth < 1200) {\n      this.bodyRemove('hide');\n      this.bodyAdd('hidden');\n      window.addEventListener('resize', () => this.onResize());\n    }\n\n    this.base.addEventListener('mouseenter', () => this.onEnter());\n    this.base.addEventListener('mouseleave', () => this.onLeave());\n  }\n\n  /**\n   * If the sidenav is shown, expand active nav links. Otherwise, collapse them.\n   */\n  private initLinks(): void {\n    for (const link of this.getActiveLinks()) {\n      if (this.bodyHas('show')) {\n        this.activateLink(link, 'expand');\n      } else if (this.bodyHas('hidden')) {\n        this.activateLink(link, 'collapse');\n      }\n    }\n  }\n\n  /**\n   * Show the sidenav.\n   */\n  private show(): void {\n    this.bodyAdd('show');\n    this.bodyRemove('hidden', 'hide');\n  }\n\n  /**\n   * Hide the sidenav and collapse all active nav sections.\n   */\n  private hide(): void {\n    this.bodyAdd('hidden');\n    this.bodyRemove('pinned', 'show');\n    for (const collapse of this.base.querySelectorAll('.collapse')) {\n      collapse.classList.remove('show');\n    }\n  }\n\n  /**\n   * Pin the sidenav.\n   */\n  private pin(): void {\n    this.bodyAdd('show', 'pinned');\n    this.bodyRemove('hidden');\n    this.state.set('pinned', true);\n  }\n\n  /**\n   * Unpin the sidenav.\n   */\n  private unpin(): void {\n    this.bodyRemove('pinned', 'show');\n    this.bodyAdd('hidden');\n    for (const collapse of this.base.querySelectorAll('.collapse')) {\n      collapse.classList.remove('show');\n    }\n    this.state.set('pinned', false);\n  }\n\n  /**\n   * When a section's controlling nav-link is clicked, update this instance's `activeLink`\n   * attribute and close all other sections.\n   */\n  private handleSectionClick(event: Event): void {\n    event.preventDefault();\n    const element = event.target as HTMLAnchorElement;\n    this.activeLink = element;\n    this.closeInactiveSections();\n  }\n\n  /**\n   * Close all sections that are not associated with the currently active link (`activeLink`).\n   */\n  private closeInactiveSections(): void {\n    for (const [link, collapse] of this.sections) {\n      if (link !== this.activeLink) {\n        link.classList.add('collapsed');\n        link.setAttribute('aria-expanded', 'false');\n        collapse.hide();\n      }\n    }\n  }\n\n  /**\n   * Initialize `bootstrap.Collapse` instances on all section collapse elements and add event\n   * listeners to the controlling nav-links.\n   */\n  private initSectionLinks(): void {\n    for (const section of getElements<HTMLAnchorElement>(\n      '.navbar-nav .nav-item .nav-link[data-bs-toggle]',\n    )) {\n      if (section.parentElement !== null) {\n        const collapse = section.parentElement.querySelector<HTMLDivElement>('.collapse');\n        if (collapse !== null) {\n          const collapseInstance = new Collapse(collapse, {\n            toggle: false, // Don't automatically open the collapse element on invocation.\n          });\n          this.sections.push([section, collapseInstance]);\n          section.addEventListener('click', event => this.handleSectionClick(event));\n        }\n      }\n    }\n  }\n\n  /**\n   * Starting from the bottom-most active link in the element tree, work backwards to determine the\n   * link's containing `.collapse` element and the `.collapse` element's containing `.nav-link`\n   * element. Once found, expand (or collapse) the `.collapse` element and add (or remove) the\n   * `.active` class to the the parent `.nav-link` element.\n   *\n   * @param link Active nav link\n   * @param action Expand or Collapse\n   */\n  private activateLink(link: HTMLDivElement, action: 'expand' | 'collapse'): void {\n    // Find the closest .dropdown-menu element, which should contain `link`.\n    const dropdownMenu = link.closest('.dropdown-menu') as Nullable<HTMLDivElement>;\n    if (isElement(dropdownMenu)) {\n      // Find the closest `.nav-link`, which should be adjacent to the `.dropdown-menu` element.\n      const groupItem = dropdownMenu.parentElement;\n      const groupLink = dropdownMenu.parentElement?.querySelector('.nav-link');\n      if (isElement(groupLink) && isElement(groupItem)) {\n        switch (action) {\n          case 'expand':\n            groupLink.setAttribute('aria-expanded', 'true');\n            groupItem.classList.add('active');\n            dropdownMenu.classList.add('show');\n            link.classList.add('active');\n            break;\n          case 'collapse':\n            groupLink.setAttribute('aria-expanded', 'false');\n            groupItem.classList.remove('active');\n            dropdownMenu.classList.remove('show');\n            link.classList.remove('active');\n            break;\n        }\n      }\n    }\n  }\n\n  /**\n   * Find any nav links with `href` attributes matching the current path, to determine which nav\n   * link should be considered active.\n   */\n  private *getActiveLinks(): Generator<HTMLDivElement> {\n    for (const menuitem of this.base.querySelectorAll<HTMLDivElement>(\n      'ul.navbar-nav .nav-item .dropdown-item',\n    )) {\n      const link = menuitem.querySelector<HTMLAnchorElement>('a')\n      if (link) {\n        const href = new RegExp(link.href, 'gi');\n        if (window.location.href.match(href)) {\n          yield menuitem;\n        }\n      }\n    }\n  }\n\n  /**\n   * Show the sidenav and expand any active sections.\n   */\n  private onEnter(): void {\n    if (!this.bodyHas('pinned')) {\n      this.bodyRemove('hide', 'hidden');\n      this.bodyAdd('show');\n      for (const link of this.getActiveLinks()) {\n        this.activateLink(link, 'expand');\n      }\n    }\n  }\n\n  /**\n   * Hide the sidenav and collapse any active sections.\n   */\n  private onLeave(): void {\n    if (!this.bodyHas('pinned')) {\n      this.bodyRemove('show');\n      this.bodyAdd('hide');\n      for (const link of this.getActiveLinks()) {\n        this.activateLink(link, 'collapse');\n      }\n      this.bodyRemove('hide');\n      this.bodyAdd('hidden');\n    }\n  }\n\n  /**\n   * Close the (unpinned) sidenav when the window is resized.\n   */\n  private onResize(): void {\n    if (this.bodyHas('show') && !this.bodyHas('pinned')) {\n      this.bodyRemove('show');\n      this.bodyAdd('hidden');\n    }\n  }\n\n  /**\n   * Pin & unpin the sidenav when the pin button is toggled.\n   */\n  private onToggle(event: Event): void {\n    event.preventDefault();\n\n    if (this.state.get('pinned')) {\n      this.unpin();\n    } else {\n      this.pin();\n    }\n  }\n\n  /**\n   * Handle sidenav visibility state for small screens. On small screens, there is no pinned state,\n   * only open/closed.\n   */\n  private onMobileToggle(event: Event): void {\n    event.preventDefault();\n    if (this.bodyHas('hidden')) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n}\n\nexport function initSideNav(): void {\n  for (const sidenav of getElements<HTMLDivElement>('.navbar')) {\n    new SideNav(sidenav);\n  }\n}\n", "/**\r\n * utils.ts 12.1.1\r\n * Copyright (c) 2021-2024 Alain Dumesny - see GridStack root license\r\n */\r\n\r\nimport { GridStackElement, GridStackNode, GridStackOptions, numberOrString, GridStackPosition, GridStackWidget } from './types';\r\n\r\nexport interface HeightData {\r\n  h: number;\r\n  unit: string;\r\n}\r\n\r\nexport interface DragTransform {\r\n  xScale: number;\r\n  yScale: number;\r\n  xOffset: number;\r\n  yOffset: number;\r\n}\r\n\r\n/** checks for obsolete method names */\r\n// eslint-disable-next-line\r\nexport function obsolete(self, f, oldName: string, newName: string, rev: string): (...args: any[]) => any {\r\n  const wrapper = (...args) => {\r\n    console.warn('gridstack.js: Function `' + oldName + '` is deprecated in ' + rev + ' and has been replaced ' +\r\n    'with `' + newName + '`. It will be **removed** in a future release');\r\n    return f.apply(self, args);\r\n  }\r\n  wrapper.prototype = f.prototype;\r\n  return wrapper;\r\n}\r\n\r\n/** checks for obsolete grid options (can be used for any fields, but msg is about options) */\r\nexport function obsoleteOpts(opts: GridStackOptions, oldName: string, newName: string, rev: string): void {\r\n  if (opts[oldName] !== undefined) {\r\n    opts[newName] = opts[oldName];\r\n    console.warn('gridstack.js: Option `' + oldName + '` is deprecated in ' + rev + ' and has been replaced with `' +\r\n      newName + '`. It will be **removed** in a future release');\r\n  }\r\n}\r\n\r\n/** checks for obsolete grid options which are gone */\r\nexport function obsoleteOptsDel(opts: GridStackOptions, oldName: string, rev: string, info: string): void {\r\n  if (opts[oldName] !== undefined) {\r\n    console.warn('gridstack.js: Option `' + oldName + '` is deprecated in ' + rev + info);\r\n  }\r\n}\r\n\r\n/** checks for obsolete Jquery element attributes */\r\nexport function obsoleteAttr(el: HTMLElement, oldName: string, newName: string, rev: string): void {\r\n  const oldAttr = el.getAttribute(oldName);\r\n  if (oldAttr !== null) {\r\n    el.setAttribute(newName, oldAttr);\r\n    console.warn('gridstack.js: attribute `' + oldName + '`=' + oldAttr + ' is deprecated on this object in ' + rev + ' and has been replaced with `' +\r\n      newName + '`. It will be **removed** in a future release');\r\n  }\r\n}\r\n\r\n/**\r\n * Utility methods\r\n */\r\nexport class Utils {\r\n\r\n  /** convert a potential selector into actual list of html elements. optional root which defaults to document (for shadow dom) */\r\n  static getElements(els: GridStackElement, root: HTMLElement | Document = document): HTMLElement[] {\r\n    if (typeof els === 'string') {\r\n      const doc = ('getElementById' in root) ? root as Document : undefined;\r\n\r\n      // Note: very common for people use to id='1,2,3' which is only legal as HTML5 id, but not CSS selectors\r\n      // so if we start with a number, assume it's an id and just return that one item...\r\n      // see https://github.com/gridstack/gridstack.js/issues/2234#issuecomment-1523796562\r\n      if (doc && !isNaN(+els[0])) { // start with digit\r\n        const el = doc.getElementById(els);\r\n        return el ? [el] : [];\r\n      }\r\n\r\n      let list = root.querySelectorAll(els);\r\n      if (!list.length && els[0] !== '.' && els[0] !== '#') {\r\n        list = root.querySelectorAll('.' + els);\r\n        if (!list.length) { list = root.querySelectorAll('#' + els) }\r\n      }\r\n      return Array.from(list) as HTMLElement[];\r\n    }\r\n    return [els];\r\n  }\r\n\r\n  /** convert a potential selector into actual single element. optional root which defaults to document (for shadow dom) */\r\n  static getElement(els: GridStackElement, root: HTMLElement | Document = document): HTMLElement {\r\n    if (typeof els === 'string') {\r\n      const doc = ('getElementById' in root) ? root as Document : undefined;\r\n      if (!els.length) return null;\r\n      if (doc && els[0] === '#') {\r\n        return doc.getElementById(els.substring(1));\r\n      }\r\n      if (els[0] === '#' || els[0] === '.' || els[0] === '[') {\r\n        return root.querySelector(els);\r\n      }\r\n\r\n      // if we start with a digit, assume it's an id (error calling querySelector('#1')) as class are not valid CSS\r\n      if (doc && !isNaN(+els[0])) { // start with digit\r\n        return doc.getElementById(els);\r\n      }\r\n\r\n      // finally try string, then id, then class\r\n      let el = root.querySelector(els);\r\n      if (doc && !el) { el = doc.getElementById(els) }\r\n      if (!el) { el = root.querySelector('.' + els) }\r\n      return el as HTMLElement;\r\n    }\r\n    return els;\r\n  }\r\n\r\n  /** true if widget (or grid) makes this item lazyLoad */\r\n  static lazyLoad(n: GridStackNode): boolean {\r\n    return n.lazyLoad || n.grid?.opts?.lazyLoad && n.lazyLoad !== false;\r\n  }\r\n\r\n  /** create a div with the given classes */\r\n  static createDiv(classes: string[], parent?: HTMLElement): HTMLElement {\r\n    const el = document.createElement('div');\r\n    classes.forEach(c => {if (c) el.classList.add(c)});\r\n    parent?.appendChild(el);\r\n    return el;\r\n  }\r\n\r\n  /** true if we should resize to content. strict=true when only 'sizeToContent:true' and not a number which lets user adjust */\r\n  static shouldSizeToContent(n: GridStackNode | undefined, strict = false): boolean {\r\n    return n?.grid && (strict ?\r\n      (n.sizeToContent === true || (n.grid.opts.sizeToContent === true && n.sizeToContent === undefined)) :\r\n      (!!n.sizeToContent || (n.grid.opts.sizeToContent && n.sizeToContent !== false)));\r\n  }\r\n\r\n  /** returns true if a and b overlap */\r\n  static isIntercepted(a: GridStackPosition, b: GridStackPosition): boolean {\r\n    return !(a.y >= b.y + b.h || a.y + a.h <= b.y || a.x + a.w <= b.x || a.x >= b.x + b.w);\r\n  }\r\n\r\n  /** returns true if a and b touch edges or corners */\r\n  static isTouching(a: GridStackPosition, b: GridStackPosition): boolean {\r\n    return Utils.isIntercepted(a, {x: b.x-0.5, y: b.y-0.5, w: b.w+1, h: b.h+1})\r\n  }\r\n\r\n  /** returns the area a and b overlap */\r\n  static areaIntercept(a: GridStackPosition, b: GridStackPosition): number {\r\n    const x0 = (a.x > b.x) ? a.x : b.x;\r\n    const x1 = (a.x+a.w < b.x+b.w) ? a.x+a.w : b.x+b.w;\r\n    if (x1 <= x0) return 0; // no overlap\r\n    const y0 = (a.y > b.y) ? a.y : b.y;\r\n    const y1 = (a.y+a.h < b.y+b.h) ? a.y+a.h : b.y+b.h;\r\n    if (y1 <= y0) return 0; // no overlap\r\n    return (x1-x0) * (y1-y0);\r\n  }\r\n\r\n  /** returns the area */\r\n  static area(a: GridStackPosition): number {\r\n    return a.w * a.h;\r\n  }\r\n\r\n  /**\r\n   * Sorts array of nodes\r\n   * @param nodes array to sort\r\n   * @param dir 1 for ascending, -1 for descending (optional)\r\n   **/\r\n  static sort(nodes: GridStackNode[], dir: 1 | -1 = 1): GridStackNode[] {\r\n    const und = 10000;\r\n    return nodes.sort((a, b) => {\r\n      const diffY = dir * ((a.y ?? und) - (b.y ?? und));\r\n      if (diffY === 0) return dir * ((a.x ?? und) - (b.x ?? und));\r\n      return diffY;\r\n    });\r\n  }\r\n\r\n  /** find an item by id */\r\n  static find(nodes: GridStackNode[], id: string): GridStackNode | undefined {\r\n    return id ? nodes.find(n => n.id === id) : undefined;\r\n  }\r\n\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  static toBool(v: unknown): boolean {\r\n    if (typeof v === 'boolean') {\r\n      return v;\r\n    }\r\n    if (typeof v === 'string') {\r\n      v = v.toLowerCase();\r\n      return !(v === '' || v === 'no' || v === 'false' || v === '0');\r\n    }\r\n    return Boolean(v);\r\n  }\r\n\r\n  static toNumber(value: null | string): number {\r\n    return (value === null || value.length === 0) ? undefined : Number(value);\r\n  }\r\n\r\n  static parseHeight(val: numberOrString): HeightData {\r\n    let h: number;\r\n    let unit = 'px';\r\n    if (typeof val === 'string') {\r\n      if (val === 'auto' || val === '') h = 0;\r\n      else {\r\n        const match = val.match(/^(-[0-9]+\\.[0-9]+|[0-9]*\\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);\r\n        if (!match) {\r\n          throw new Error(`Invalid height val = ${val}`);\r\n        }\r\n        unit = match[2] || 'px';\r\n        h = parseFloat(match[1]);\r\n      }\r\n    } else {\r\n      h = val;\r\n    }\r\n    return { h, unit };\r\n  }\r\n\r\n  /** copies unset fields in target to use the given default sources values */\r\n  // eslint-disable-next-line\r\n  static defaults(target, ...sources): {} {\r\n\r\n    sources.forEach(source => {\r\n      for (const key in source) {\r\n        if (!source.hasOwnProperty(key)) return;\r\n        if (target[key] === null || target[key] === undefined) {\r\n          target[key] = source[key];\r\n        } else if (typeof source[key] === 'object' && typeof target[key] === 'object') {\r\n          // property is an object, recursively add it's field over... #1373\r\n          this.defaults(target[key], source[key]);\r\n        }\r\n      }\r\n    });\r\n\r\n    return target;\r\n  }\r\n\r\n  /** given 2 objects return true if they have the same values. Checks for Object {} having same fields and values (just 1 level down) */\r\n  static same(a: unknown, b: unknown): boolean {\r\n    if (typeof a !== 'object')  return a == b;\r\n    if (typeof a !== typeof b) return false;\r\n    // else we have object, check just 1 level deep for being same things...\r\n    if (Object.keys(a).length !== Object.keys(b).length) return false;\r\n    for (const key in a) {\r\n      if (a[key] !== b[key]) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /** copies over b size & position (GridStackPosition), and optionally min/max as well */\r\n  static copyPos(a: GridStackWidget, b: GridStackWidget, doMinMax = false): GridStackWidget {\r\n    if (b.x !== undefined) a.x = b.x;\r\n    if (b.y !== undefined) a.y = b.y;\r\n    if (b.w !== undefined) a.w = b.w;\r\n    if (b.h !== undefined) a.h = b.h;\r\n    if (doMinMax) {\r\n      if (b.minW) a.minW = b.minW;\r\n      if (b.minH) a.minH = b.minH;\r\n      if (b.maxW) a.maxW = b.maxW;\r\n      if (b.maxH) a.maxH = b.maxH;\r\n    }\r\n    return a;\r\n  }\r\n\r\n  /** true if a and b has same size & position */\r\n  static samePos(a: GridStackPosition, b: GridStackPosition): boolean {\r\n    return a && b && a.x === b.x && a.y === b.y && (a.w || 1) === (b.w || 1) && (a.h || 1) === (b.h || 1);\r\n  }\r\n\r\n  /** given a node, makes sure it's min/max are valid */\r\n  static sanitizeMinMax(node: GridStackNode) {\r\n    // remove 0, undefine, null\r\n    if (!node.minW) { delete node.minW; }\r\n    if (!node.minH) { delete node.minH; }\r\n    if (!node.maxW) { delete node.maxW; }\r\n    if (!node.maxH) { delete node.maxH; }\r\n  }\r\n\r\n  /** removes field from the first object if same as the second objects (like diffing) and internal '_' for saving */\r\n  static removeInternalAndSame(a: unknown, b: unknown):void {\r\n    if (typeof a !== 'object' || typeof b !== 'object') return;\r\n    for (let key in a) {\r\n      const aVal = a[key];\r\n      const bVal = b[key];\r\n      if (key[0] === '_' || aVal === bVal) {\r\n        delete a[key]\r\n      } else if (aVal && typeof aVal === 'object' && bVal !== undefined) {\r\n        Utils.removeInternalAndSame(aVal, bVal);\r\n        if (!Object.keys(aVal).length) { delete a[key] }\r\n      }\r\n    }\r\n  }\r\n\r\n  /** removes internal fields '_' and default values for saving */\r\n  static removeInternalForSave(n: GridStackNode, removeEl = true): void {\r\n    for (let key in n) { if (key[0] === '_' || n[key] === null || n[key] === undefined ) delete n[key]; }\r\n    delete n.grid;\r\n    if (removeEl) delete n.el;\r\n    // delete default values (will be re-created on read)\r\n    if (!n.autoPosition) delete n.autoPosition;\r\n    if (!n.noResize) delete n.noResize;\r\n    if (!n.noMove) delete n.noMove;\r\n    if (!n.locked) delete n.locked;\r\n    if (n.w === 1 || n.w === n.minW) delete n.w;\r\n    if (n.h === 1 || n.h === n.minH) delete n.h;\r\n  }\r\n\r\n  /** return the closest parent (or itself) matching the given class */\r\n  // static closestUpByClass(el: HTMLElement, name: string): HTMLElement {\r\n  //   while (el) {\r\n  //     if (el.classList.contains(name)) return el;\r\n  //     el = el.parentElement\r\n  //   }\r\n  //   return null;\r\n  // }\r\n\r\n  /** delay calling the given function for given delay, preventing new calls from happening while waiting */\r\n  static throttle(func: () => void, delay: number): () => void {\r\n    let isWaiting = false;\r\n    return (...args) => {\r\n      if (!isWaiting) {\r\n        isWaiting = true;\r\n        setTimeout(() => { func(...args); isWaiting = false; }, delay);\r\n      }\r\n    }\r\n  }\r\n\r\n  static removePositioningStyles(el: HTMLElement): void {\r\n    const style = el.style;\r\n    if (style.position) {\r\n      style.removeProperty('position');\r\n    }\r\n    if (style.left) {\r\n      style.removeProperty('left');\r\n    }\r\n    if (style.top) {\r\n      style.removeProperty('top');\r\n    }\r\n    if (style.width) {\r\n      style.removeProperty('width');\r\n    }\r\n    if (style.height) {\r\n      style.removeProperty('height');\r\n    }\r\n  }\r\n\r\n  /** @internal returns the passed element if scrollable, else the closest parent that will, up to the entire document scrolling element */\r\n  static getScrollElement(el?: HTMLElement): HTMLElement {\r\n    if (!el) return document.scrollingElement as HTMLElement || document.documentElement; // IE support\r\n    const style = getComputedStyle(el);\r\n    const overflowRegex = /(auto|scroll)/;\r\n\r\n    if (overflowRegex.test(style.overflow + style.overflowY)) {\r\n      return el;\r\n    } else {\r\n      return this.getScrollElement(el.parentElement);\r\n    }\r\n  }\r\n\r\n  /** @internal */\r\n  static updateScrollPosition(el: HTMLElement, position: {top: number}, distance: number): void {\r\n    // is widget in view?\r\n    const rect = el.getBoundingClientRect();\r\n    const innerHeightOrClientHeight = (window.innerHeight || document.documentElement.clientHeight);\r\n    if (rect.top < 0 ||\r\n      rect.bottom > innerHeightOrClientHeight\r\n    ) {\r\n      // set scrollTop of first parent that scrolls\r\n      // if parent is larger than el, set as low as possible\r\n      // to get entire widget on screen\r\n      const offsetDiffDown = rect.bottom - innerHeightOrClientHeight;\r\n      const offsetDiffUp = rect.top;\r\n      const scrollEl = this.getScrollElement(el);\r\n      if (scrollEl !== null) {\r\n        const prevScroll = scrollEl.scrollTop;\r\n        if (rect.top < 0 && distance < 0) {\r\n          // moving up\r\n          if (el.offsetHeight > innerHeightOrClientHeight) {\r\n            scrollEl.scrollTop += distance;\r\n          } else {\r\n            scrollEl.scrollTop += Math.abs(offsetDiffUp) > Math.abs(distance) ? distance : offsetDiffUp;\r\n          }\r\n        } else if (distance > 0) {\r\n          // moving down\r\n          if (el.offsetHeight > innerHeightOrClientHeight) {\r\n            scrollEl.scrollTop += distance;\r\n          } else {\r\n            scrollEl.scrollTop += offsetDiffDown > distance ? distance : offsetDiffDown;\r\n          }\r\n        }\r\n        // move widget y by amount scrolled\r\n        position.top += scrollEl.scrollTop - prevScroll;\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @internal Function used to scroll the page.\r\n   *\r\n   * @param event `MouseEvent` that triggers the resize\r\n   * @param el `HTMLElement` that's being resized\r\n   * @param distance Distance from the V edges to start scrolling\r\n   */\r\n  static updateScrollResize(event: MouseEvent, el: HTMLElement, distance: number): void {\r\n    const scrollEl = this.getScrollElement(el);\r\n    const height = scrollEl.clientHeight;\r\n    // #1727 event.clientY is relative to viewport, so must compare this against position of scrollEl getBoundingClientRect().top\r\n    // #1745 Special situation if scrollEl is document 'html': here browser spec states that\r\n    // clientHeight is height of viewport, but getBoundingClientRect() is rectangle of html element;\r\n    // this discrepancy arises because in reality scrollbar is attached to viewport, not html element itself.\r\n    const offsetTop = (scrollEl === this.getScrollElement()) ? 0 : scrollEl.getBoundingClientRect().top;\r\n    const pointerPosY = event.clientY - offsetTop;\r\n    const top = pointerPosY < distance;\r\n    const bottom = pointerPosY > height - distance;\r\n\r\n    if (top) {\r\n      // This also can be done with a timeout to keep scrolling while the mouse is\r\n      // in the scrolling zone. (will have smoother behavior)\r\n      scrollEl.scrollBy({ behavior: 'smooth', top: pointerPosY - distance});\r\n    } else if (bottom) {\r\n      scrollEl.scrollBy({ behavior: 'smooth', top: distance - (height - pointerPosY)});\r\n    }\r\n  }\r\n\r\n  /** single level clone, returning a new object with same top fields. This will share sub objects and arrays */\r\n  static clone<T>(obj: T): T {\r\n    if (obj === null || obj === undefined || typeof(obj) !== 'object') {\r\n      return obj;\r\n    }\r\n    // return Object.assign({}, obj);\r\n    if (obj instanceof Array) {\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      return [...obj] as any;\r\n    }\r\n    return {...obj};\r\n  }\r\n\r\n  /**\r\n   * Recursive clone version that returns a full copy, checking for nested objects and arrays ONLY.\r\n   * Note: this will use as-is any key starting with double __ (and not copy inside) some lib have circular dependencies.\r\n   */\r\n  static cloneDeep<T>(obj: T): T {\r\n    // list of fields we will skip during cloneDeep (nested objects, other internal)\r\n    const skipFields = ['parentGrid', 'el', 'grid', 'subGrid', 'engine'];\r\n    // return JSON.parse(JSON.stringify(obj)); // doesn't work with date format ?\r\n    const ret = Utils.clone(obj);\r\n    for (const key in ret) {\r\n      // NOTE: we don't support function/circular dependencies so skip those properties for now...\r\n      if (ret.hasOwnProperty(key) && typeof(ret[key]) === 'object' && key.substring(0, 2) !== '__' && !skipFields.find(k => k === key)) {\r\n        ret[key] = Utils.cloneDeep(obj[key]);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  /** deep clone the given HTML node, removing teh unique id field */\r\n  public static cloneNode(el: HTMLElement): HTMLElement {\r\n    const node = el.cloneNode(true) as HTMLElement;\r\n    node.removeAttribute('id');\r\n    return node;\r\n  }\r\n\r\n  public static appendTo(el: HTMLElement, parent: string | HTMLElement): void {\r\n    let parentNode: HTMLElement;\r\n    if (typeof parent === 'string') {\r\n      parentNode = Utils.getElement(parent);\r\n    } else {\r\n      parentNode = parent;\r\n    }\r\n    if (parentNode) {\r\n      parentNode.appendChild(el);\r\n    }\r\n  }\r\n\r\n  // public static setPositionRelative(el: HTMLElement): void {\r\n  //   if (!(/^(?:r|a|f)/).test(getComputedStyle(el).position)) {\r\n  //     el.style.position = \"relative\";\r\n  //   }\r\n  // }\r\n\r\n  public static addElStyles(el: HTMLElement, styles: { [prop: string]: string | string[] }): void {\r\n    if (styles instanceof Object) {\r\n      for (const s in styles) {\r\n        if (styles.hasOwnProperty(s)) {\r\n          if (Array.isArray(styles[s])) {\r\n            // support fallback value\r\n            (styles[s] as string[]).forEach(val => {\r\n              el.style[s] = val;\r\n            });\r\n          } else {\r\n            el.style[s] = styles[s];\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  public static initEvent<T>(e: DragEvent | MouseEvent, info: { type: string; target?: EventTarget }): T {\r\n    const evt = { type: info.type };\r\n    const obj = {\r\n      button: 0,\r\n      which: 0,\r\n      buttons: 1,\r\n      bubbles: true,\r\n      cancelable: true,\r\n      target: info.target ? info.target : e.target\r\n    };\r\n    ['altKey','ctrlKey','metaKey','shiftKey'].forEach(p => evt[p] = e[p]); // keys\r\n    ['pageX','pageY','clientX','clientY','screenX','screenY'].forEach(p => evt[p] = e[p]); // point info\r\n    return {...evt, ...obj} as unknown as T;\r\n  }\r\n\r\n  /** copies the MouseEvent (or convert Touch) properties and sends it as another event to the given target */\r\n  public static simulateMouseEvent(e: MouseEvent | Touch, simulatedType: string, target?: EventTarget): void {\r\n    const me = e as MouseEvent;\r\n    const simulatedEvent = new MouseEvent(simulatedType, {\r\n      bubbles: true,\r\n      composed: true,\r\n      cancelable: true,\r\n      view: window,\r\n      detail: 1,\r\n      screenX: e.screenX,\r\n      screenY: e.screenY,\r\n      clientX: e.clientX,\r\n      clientY: e.clientY,\r\n      ctrlKey: me.ctrlKey??false,\r\n      altKey: me.altKey??false,\r\n      shiftKey: me.shiftKey??false,\r\n      metaKey: me.metaKey??false,\r\n      button: 0,\r\n      relatedTarget: e.target\r\n    });\r\n\r\n    (target || e.target).dispatchEvent(simulatedEvent);\r\n  }\r\n\r\n  /**\r\n   * defines an element that is used to get the offset and scale from grid transforms\r\n   * returns the scale and offsets from said element\r\n  */\r\n  public static getValuesFromTransformedElement(parent: HTMLElement): DragTransform {\r\n    const transformReference = document.createElement('div');\r\n    Utils.addElStyles(transformReference, {\r\n      opacity: '0',\r\n      position: 'fixed',\r\n      top: 0 + 'px',\r\n      left: 0 + 'px',\r\n      width: '1px',\r\n      height: '1px',\r\n      zIndex: '-999999',\r\n    });\r\n    parent.appendChild(transformReference);\r\n    const transformValues = transformReference.getBoundingClientRect();\r\n    parent.removeChild(transformReference);\r\n    transformReference.remove();\r\n    return {\r\n      xScale: 1 / transformValues.width,\r\n      yScale: 1 / transformValues.height,\r\n      xOffset: transformValues.left,\r\n      yOffset: transformValues.top,\r\n    }\r\n  }\r\n\r\n  /** swap the given object 2 field values */\r\n  public static swap(o: unknown, a: string, b: string): void {\r\n    if (!o) return;\r\n    const tmp = o[a]; o[a] = o[b]; o[b] = tmp;\r\n  }\r\n\r\n  /** returns true if event is inside the given element rectangle */\r\n  // Note: Safari Mac has null event.relatedTarget which causes #1684 so check if DragEvent is inside the coordinates instead\r\n  //    this.el.contains(event.relatedTarget as HTMLElement)\r\n  // public static inside(e: MouseEvent, el: HTMLElement): boolean {\r\n  //   // srcElement, toElement, target: all set to placeholder when leaving simple grid, so we can't use that (Chrome)\r\n  //   const target: HTMLElement = e.relatedTarget || (e as any).fromElement;\r\n  //   if (!target) {\r\n  //     const { bottom, left, right, top } = el.getBoundingClientRect();\r\n  //     return (e.x < right && e.x > left && e.y < bottom && e.y > top);\r\n  //   }\r\n  //   return el.contains(target);\r\n  // }\r\n\r\n  /** true if the item can be rotated (checking for prop, not space available) */\r\n  public static canBeRotated(n: GridStackNode): boolean {\r\n    return !(!n || n.w === n.h || n.locked || n.noResize || n.grid?.opts.disableResize || (n.minW && n.minW === n.maxW) || (n.minH && n.minH === n.maxH));\r\n  }\r\n}", "/**\n * gridstack-engine.ts 12.1.1\n * Copyright (c) 2021-2024  Alain Dumesny - see GridStack root license\n */\n\nimport { Utils } from './utils';\nimport { GridStackNode, ColumnOptions, GridStackPosition, GridStackMoveOpts, SaveFcn, CompactOptions } from './types';\n\n/** callback to update the DOM attributes since this class is generic (no HTML or other info) for items that changed - see _notify() */\ntype OnChangeCB = (nodes: GridStackNode[]) => void;\n\n/** options used during creation - similar to GridStackOptions */\nexport interface GridStackEngineOptions {\n  column?: number;\n  maxRow?: number;\n  float?: boolean;\n  nodes?: GridStackNode[];\n  onChange?: OnChangeCB;\n}\n\n/**\n * Defines the GridStack engine that does most no DOM grid manipulation.\n * See GridStack methods and vars for descriptions.\n *\n * NOTE: values should not be modified directly - call the main GridStack API instead\n */\nexport class GridStackEngine {\n  public column: number;\n  public maxRow: number;\n  public nodes: GridStackNode[];\n  public addedNodes: GridStackNode[] = [];\n  public removedNodes: GridStackNode[] = [];\n  public batchMode: boolean;\n  public defaultColumn = 12;\n  /** @internal callback to update the DOM attributes */\n  protected onChange: OnChangeCB;\n  /** @internal */\n  protected _float: boolean;\n  /** @internal */\n  protected _prevFloat: boolean;\n  /** @internal cached layouts of difference column count so we can restore back (eg 12 -> 1 -> 12) */\n  protected _layouts?: GridStackNode[][]; // maps column # to array of values nodes\n  /** @internal set during loading (which is sorted) so item gets added AFTER collision nodes */\n  public _loading?: boolean\n  /** @internal true while we are resizing widgets during column resize to skip certain parts */\n  protected _inColumnResize?: boolean;\n  /** true when grid.load() already cached the layout and can skip out of bound caching info */\n  public skipCacheUpdate?: boolean;\n  /** @internal true if we have some items locked */\n  protected _hasLocked: boolean;\n  /** @internal unique global internal _id counter */\n  public static _idSeq = 0;\n\n  public constructor(opts: GridStackEngineOptions = {}) {\n    this.column = opts.column || this.defaultColumn;\n    if (this.column > this.defaultColumn) this.defaultColumn = this.column;\n    this.maxRow = opts.maxRow;\n    this._float = opts.float;\n    this.nodes = opts.nodes || [];\n    this.onChange = opts.onChange;\n  }\n\n  public batchUpdate(flag = true, doPack = true): GridStackEngine {\n    if (!!this.batchMode === flag) return this;\n    this.batchMode = flag;\n    if (flag) {\n      this._prevFloat = this._float;\n      this._float = true; // let things go anywhere for now... will restore and possibly reposition later\n      this.cleanNodes();\n      this.saveInitial(); // since begin update (which is called multiple times) won't do this\n    } else {\n      this._float = this._prevFloat;\n      delete this._prevFloat;\n      if (doPack) this._packNodes();\n      this._notify();\n    }\n    return this;\n  }\n\n  // use entire row for hitting area (will use bottom reverse sorted first) if we not actively moving DOWN and didn't already skip\n  protected _useEntireRowArea(node: GridStackNode, nn: GridStackPosition): boolean {\n    return (!this.float || this.batchMode && !this._prevFloat) && !this._hasLocked && (!node._moving || node._skipDown || nn.y <= node.y);\n  }\n\n  /** @internal fix collision on given 'node', going to given new location 'nn', with optional 'collide' node already found.\n   * return true if we moved. */\n  protected _fixCollisions(node: GridStackNode, nn = node, collide?: GridStackNode, opt: GridStackMoveOpts = {}): boolean {\n    this.sortNodes(-1); // from last to first, so recursive collision move items in the right order\n\n    collide = collide || this.collide(node, nn); // REAL area collide for swap and skip if none...\n    if (!collide) return false;\n\n    // swap check: if we're actively moving in gravity mode, see if we collide with an object the same size\n    if (node._moving && !opt.nested && !this.float) {\n      if (this.swap(node, collide)) return true;\n    }\n\n    // during while() collisions MAKE SURE to check entire row so larger items don't leap frog small ones (push them all down starting last in grid)\n    let area = nn;\n    if (!this._loading && this._useEntireRowArea(node, nn)) {\n      area = {x: 0, w: this.column, y: nn.y, h: nn.h};\n      collide = this.collide(node, area, opt.skip); // force new hit\n    }\n\n    let didMove = false;\n    const newOpt: GridStackMoveOpts = {nested: true, pack: false};\n    let counter = 0;\n    while (collide = collide || this.collide(node, area, opt.skip)) { // could collide with more than 1 item... so repeat for each\n      if (counter++ > this.nodes.length * 2) {\n        throw new Error(\"Infinite collide check\");\n      }\n      let moved: boolean;\n      // if colliding with a locked item OR loading (move after) OR moving down with top gravity (and collide could move up) -> skip past the collide,\n      // but remember that skip down so we only do this once (and push others otherwise).\n      if (collide.locked || this._loading || node._moving && !node._skipDown && nn.y > node.y && !this.float &&\n        // can take space we had, or before where we're going\n        (!this.collide(collide, {...collide, y: node.y}, node) || !this.collide(collide, {...collide, y: nn.y - collide.h}, node))) {\n\n        node._skipDown = (node._skipDown || nn.y > node.y);\n        const newNN = {...nn, y: collide.y + collide.h, ...newOpt};\n        // pretent we moved to where we are now so we can continue any collision checks #2492\n        moved = this._loading && Utils.samePos(node, newNN) ? true : this.moveNode(node, newNN);\n\n        if ((collide.locked || this._loading) && moved) {\n          Utils.copyPos(nn, node); // moving after lock become our new desired location\n        } else if (!collide.locked && moved && opt.pack) {\n          // we moved after and will pack: do it now and keep the original drop location, but past the old collide to see what else we might push way\n          this._packNodes();\n          nn.y = collide.y + collide.h;\n          Utils.copyPos(node, nn);\n        }\n        didMove = didMove || moved;\n      } else {\n        // move collide down *after* where we will be, ignoring where we are now (don't collide with us)\n        moved = this.moveNode(collide, {...collide, y: nn.y + nn.h, skip: node, ...newOpt});\n      }\n\n      if (!moved) return didMove; // break inf loop if we couldn't move after all (ex: maxRow, fixed)\n\n      collide = undefined;\n    }\n    return didMove;\n  }\n\n  /** return the nodes that intercept the given node. Optionally a different area can be used, as well as a second node to skip */\n  public collide(skip: GridStackNode, area = skip, skip2?: GridStackNode): GridStackNode | undefined {\n    const skipId = skip._id;\n    const skip2Id = skip2?._id;\n    return this.nodes.find(n => n._id !== skipId && n._id !== skip2Id && Utils.isIntercepted(n, area));\n  }\n  public collideAll(skip: GridStackNode, area = skip, skip2?: GridStackNode): GridStackNode[] {\n    const skipId = skip._id;\n    const skip2Id = skip2?._id;\n    return this.nodes.filter(n => n._id !== skipId && n._id !== skip2Id && Utils.isIntercepted(n, area));\n  }\n\n  /** does a pixel coverage collision based on where we started, returning the node that has the most coverage that is >50% mid line */\n  protected directionCollideCoverage(node: GridStackNode, o: GridStackMoveOpts, collides: GridStackNode[]): GridStackNode | undefined {\n    if (!o.rect || !node._rect) return;\n    const r0 = node._rect; // where started\n    const r = {...o.rect}; // where we are\n\n    // update dragged rect to show where it's coming from (above or below, etc...)\n    if (r.y > r0.y) {\n      r.h += r.y - r0.y;\n      r.y = r0.y;\n    } else {\n      r.h += r0.y - r.y;\n    }\n    if (r.x > r0.x) {\n      r.w += r.x - r0.x;\n      r.x = r0.x;\n    } else {\n      r.w += r0.x - r.x;\n    }\n\n    let collide: GridStackNode;\n    let overMax = 0.5; // need >50%\n    for (let n of collides) {\n      if (n.locked || !n._rect) {\n        break;\n      }\n      const r2 = n._rect; // overlapping target\n      let yOver = Number.MAX_VALUE, xOver = Number.MAX_VALUE;\n      // depending on which side we started from, compute the overlap % of coverage\n      // (ex: from above/below we only compute the max horizontal line coverage)\n      if (r0.y < r2.y) { // from above\n        yOver = ((r.y + r.h) - r2.y) / r2.h;\n      } else if (r0.y + r0.h > r2.y + r2.h) { // from below\n        yOver = ((r2.y + r2.h) - r.y) / r2.h;\n      }\n      if (r0.x < r2.x) { // from the left\n        xOver = ((r.x + r.w) - r2.x) / r2.w;\n      } else if (r0.x + r0.w > r2.x + r2.w) { // from the right\n        xOver = ((r2.x + r2.w) - r.x) / r2.w;\n      }\n      const over = Math.min(xOver, yOver);\n      if (over > overMax) {\n        overMax = over;\n        collide = n;\n      }\n    }\n    o.collide = collide; // save it so we don't have to find it again\n    return collide;\n  }\n\n  /** does a pixel coverage returning the node that has the most coverage by area */\n  /*\n  protected collideCoverage(r: GridStackPosition, collides: GridStackNode[]): {collide: GridStackNode, over: number} {\n    const collide: GridStackNode;\n    const overMax = 0;\n    collides.forEach(n => {\n      if (n.locked || !n._rect) return;\n      const over = Utils.areaIntercept(r, n._rect);\n      if (over > overMax) {\n        overMax = over;\n        collide = n;\n      }\n    });\n    return {collide, over: overMax};\n  }\n  */\n\n  /** called to cache the nodes pixel rectangles used for collision detection during drag */\n  public cacheRects(w: number, h: number, top: number, right: number, bottom: number, left: number): GridStackEngine\n  {\n    this.nodes.forEach(n =>\n      n._rect = {\n        y: n.y * h + top,\n        x: n.x * w + left,\n        w: n.w * w - left - right,\n        h: n.h * h - top - bottom\n      }\n    );\n    return this;\n  }\n\n  /** called to possibly swap between 2 nodes (same size or column, not locked, touching), returning true if successful */\n  public swap(a: GridStackNode, b: GridStackNode): boolean | undefined {\n    if (!b || b.locked || !a || a.locked) return false;\n\n    function _doSwap(): true { // assumes a is before b IFF they have different height (put after rather than exact swap)\n      const x = b.x, y = b.y;\n      b.x = a.x; b.y = a.y; // b -> a position\n      if (a.h != b.h) {\n        a.x = x; a.y = b.y + b.h; // a -> goes after b\n      } else if (a.w != b.w) {\n        a.x = b.x + b.w; a.y = y; // a -> goes after b\n      } else {\n        a.x = x; a.y = y; // a -> old b position\n      }\n      a._dirty = b._dirty = true;\n      return true;\n    }\n    let touching: boolean; // remember if we called it (vs undefined)\n\n    // same size and same row or column, and touching\n    if (a.w === b.w && a.h === b.h && (a.x === b.x || a.y === b.y) && (touching = Utils.isTouching(a, b)))\n      return _doSwap();\n    if (touching === false) return; // IFF ran test and fail, bail out\n\n    // check for taking same columns (but different height) and touching\n    if (a.w === b.w && a.x === b.x && (touching || (touching = Utils.isTouching(a, b)))) {\n      if (b.y < a.y) { const t = a; a = b; b = t; } // swap a <-> b vars so a is first\n      return _doSwap();\n    }\n    if (touching === false) return;\n\n    // check if taking same row (but different width) and touching\n    if (a.h === b.h && a.y === b.y && (touching || (touching = Utils.isTouching(a, b)))) {\n      if (b.x < a.x) { const t = a; a = b; b = t; } // swap a <-> b vars so a is first\n      return _doSwap();\n    }\n    return false;\n  }\n\n  public isAreaEmpty(x: number, y: number, w: number, h: number): boolean {\n    const nn: GridStackNode = {x: x || 0, y: y || 0, w: w || 1, h: h || 1};\n    return !this.collide(nn);\n  }\n\n  /** re-layout grid items to reclaim any empty space - optionally keeping the sort order exactly the same ('list' mode) vs truly finding an empty spaces */\n  public compact(layout: CompactOptions = 'compact', doSort = true): GridStackEngine {\n    if (this.nodes.length === 0) return this;\n    if (doSort) this.sortNodes();\n    const wasBatch = this.batchMode;\n    if (!wasBatch) this.batchUpdate();\n    const wasColumnResize = this._inColumnResize;\n    if (!wasColumnResize) this._inColumnResize = true; // faster addNode()\n    const copyNodes = this.nodes;\n    this.nodes = []; // pretend we have no nodes to conflict layout to start with...\n    copyNodes.forEach((n, index, list) => {\n      let after: GridStackNode;\n      if (!n.locked) {\n        n.autoPosition = true;\n        if (layout === 'list' && index) after = list[index - 1];\n      }\n      this.addNode(n, false, after); // 'false' for add event trigger\n    });\n    if (!wasColumnResize) delete this._inColumnResize;\n    if (!wasBatch) this.batchUpdate(false);\n    return this;\n  }\n\n  /** enable/disable floating widgets (default: `false`) See [example](http://gridstackjs.com/demo/float.html) */\n  public set float(val: boolean) {\n    if (this._float === val) return;\n    this._float = val || false;\n    if (!val) {\n      this._packNodes()._notify();\n    }\n  }\n\n  /** float getter method */\n  public get float(): boolean { return this._float || false; }\n\n  /** sort the nodes array from first to last, or reverse. Called during collision/placement to force an order */\n  public sortNodes(dir: 1 | -1 = 1): GridStackEngine {\n    this.nodes = Utils.sort(this.nodes, dir);\n    return this;\n  }\n\n  /** @internal called to top gravity pack the items back OR revert back to original Y positions when floating */\n  protected _packNodes(): GridStackEngine {\n    if (this.batchMode) { return this; }\n    this.sortNodes(); // first to last\n\n    if (this.float) {\n      // restore original Y pos\n      this.nodes.forEach(n => {\n        if (n._updating || n._orig === undefined || n.y === n._orig.y) return;\n        let newY = n.y;\n        while (newY > n._orig.y) {\n          --newY;\n          const collide = this.collide(n, {x: n.x, y: newY, w: n.w, h: n.h});\n          if (!collide) {\n            n._dirty = true;\n            n.y = newY;\n          }\n        }\n      });\n    } else {\n      // top gravity pack\n      this.nodes.forEach((n, i) => {\n        if (n.locked) return;\n        while (n.y > 0) {\n          const newY = i === 0 ? 0 : n.y - 1;\n          const canBeMoved = i === 0 || !this.collide(n, {x: n.x, y: newY, w: n.w, h: n.h});\n          if (!canBeMoved) break;\n          // Note: must be dirty (from last position) for GridStack::OnChange CB to update positions\n          // and move items back. The user 'change' CB should detect changes from the original\n          // starting position instead.\n          n._dirty = (n.y !== newY);\n          n.y = newY;\n        }\n      });\n    }\n    return this;\n  }\n\n  /**\n   * given a random node, makes sure it's coordinates/values are valid in the current grid\n   * @param node to adjust\n   * @param resizing if out of bound, resize down or move into the grid to fit ?\n   */\n  public prepareNode(node: GridStackNode, resizing?: boolean): GridStackNode {\n    node._id = node._id ?? GridStackEngine._idSeq++;\n\n    // make sure USER supplied id are unique in our list, else assign a new one as it will create issues during load/update/etc...\n    const id = node.id;\n    if (id) {\n      let count = 1; // append nice _n rather than some random number\n      while (this.nodes.find(n => n.id === node.id && n !== node)) {\n        node.id = id + '_' + (count++);\n      }\n    }\n\n    // if we're missing position, have the grid position us automatically (before we set them to 0,0)\n    if (node.x === undefined || node.y === undefined || node.x === null || node.y === null) {\n      node.autoPosition = true;\n    }\n\n    // assign defaults for missing required fields\n    const defaults: GridStackNode = { x: 0, y: 0, w: 1, h: 1};\n    Utils.defaults(node, defaults);\n\n    if (!node.autoPosition) { delete node.autoPosition; }\n    if (!node.noResize) { delete node.noResize; }\n    if (!node.noMove) { delete node.noMove; }\n    Utils.sanitizeMinMax(node);\n\n    // check for NaN (in case messed up strings were passed. can't do parseInt() || defaults.x above as 0 is valid #)\n    if (typeof node.x == 'string') { node.x = Number(node.x); }\n    if (typeof node.y == 'string') { node.y = Number(node.y); }\n    if (typeof node.w == 'string') { node.w = Number(node.w); }\n    if (typeof node.h == 'string') { node.h = Number(node.h); }\n    if (isNaN(node.x)) { node.x = defaults.x; node.autoPosition = true; }\n    if (isNaN(node.y)) { node.y = defaults.y; node.autoPosition = true; }\n    if (isNaN(node.w)) { node.w = defaults.w; }\n    if (isNaN(node.h)) { node.h = defaults.h; }\n\n    this.nodeBoundFix(node, resizing);\n    return node;\n  }\n\n  /** part2 of preparing a node to fit inside our grid - checks for x,y,w from grid dimensions */\n  public nodeBoundFix(node: GridStackNode, resizing?: boolean): GridStackEngine {\n\n    const before = node._orig || Utils.copyPos({}, node);\n\n    if (node.maxW) { node.w = Math.min(node.w || 1, node.maxW); }\n    if (node.maxH) { node.h = Math.min(node.h || 1, node.maxH); }\n    if (node.minW) { node.w = Math.max(node.w || 1, node.minW); }\n    if (node.minH) { node.h = Math.max(node.h || 1, node.minH); }\n\n    // if user loaded a larger than allowed widget for current # of columns,\n    // remember it's position & width so we can restore back (1 -> 12 column) #1655 #1985\n    // IFF we're not in the middle of column resizing!\n    const saveOrig = (node.x || 0) + (node.w || 1) > this.column;\n    if (saveOrig && this.column < this.defaultColumn && !this._inColumnResize && !this.skipCacheUpdate && node._id && this.findCacheLayout(node, this.defaultColumn) === -1) {\n      const copy = {...node}; // need _id + positions\n      if (copy.autoPosition || copy.x === undefined) { delete copy.x; delete copy.y; }\n      else copy.x = Math.min(this.defaultColumn - 1, copy.x);\n      copy.w = Math.min(this.defaultColumn, copy.w || 1);\n      this.cacheOneLayout(copy, this.defaultColumn);\n    }\n\n    if (node.w > this.column) {\n      node.w = this.column;\n    } else if (node.w < 1) {\n      node.w = 1;\n    }\n\n    if (this.maxRow && node.h > this.maxRow) {\n      node.h = this.maxRow;\n    } else if (node.h < 1) {\n      node.h = 1;\n    }\n\n    if (node.x < 0) {\n      node.x = 0;\n    }\n    if (node.y < 0) {\n      node.y = 0;\n    }\n\n    if (node.x + node.w > this.column) {\n      if (resizing) {\n        node.w = this.column - node.x;\n      } else {\n        node.x = this.column - node.w;\n      }\n    }\n    if (this.maxRow && node.y + node.h > this.maxRow) {\n      if (resizing) {\n        node.h = this.maxRow - node.y;\n      } else {\n        node.y = this.maxRow - node.h;\n      }\n    }\n\n    if (!Utils.samePos(node, before)) {\n      node._dirty = true;\n    }\n\n    return this;\n  }\n\n  /** returns a list of modified nodes from their original values */\n  public getDirtyNodes(verify?: boolean): GridStackNode[] {\n    // compare original x,y,w,h instead as _dirty can be a temporary state\n    if (verify) {\n      return this.nodes.filter(n => n._dirty && !Utils.samePos(n, n._orig));\n    }\n    return this.nodes.filter(n => n._dirty);\n  }\n\n  /** @internal call this to call onChange callback with dirty nodes so DOM can be updated */\n  protected _notify(removedNodes?: GridStackNode[]): GridStackEngine {\n    if (this.batchMode || !this.onChange) return this;\n    const dirtyNodes = (removedNodes || []).concat(this.getDirtyNodes());\n    this.onChange(dirtyNodes);\n    return this;\n  }\n\n  /** @internal remove dirty and last tried info */\n  public cleanNodes(): GridStackEngine {\n    if (this.batchMode) return this;\n    this.nodes.forEach(n => {\n      delete n._dirty;\n      delete n._lastTried;\n    });\n    return this;\n  }\n\n  /** @internal called to save initial position/size to track real dirty state.\n   * Note: should be called right after we call change event (so next API is can detect changes)\n   * as well as right before we start move/resize/enter (so we can restore items to prev values) */\n  public saveInitial(): GridStackEngine {\n    this.nodes.forEach(n => {\n      n._orig = Utils.copyPos({}, n);\n      delete n._dirty;\n    });\n    this._hasLocked = this.nodes.some(n => n.locked);\n    return this;\n  }\n\n  /** @internal restore all the nodes back to initial values (called when we leave) */\n  public restoreInitial(): GridStackEngine {\n    this.nodes.forEach(n => {\n      if (!n._orig || Utils.samePos(n, n._orig)) return;\n      Utils.copyPos(n, n._orig);\n      n._dirty = true;\n    });\n    this._notify();\n    return this;\n  }\n\n  /** find the first available empty spot for the given node width/height, updating the x,y attributes. return true if found.\n   * optionally you can pass your own existing node list and column count, otherwise defaults to that engine data.\n   * Optionally pass a widget to start search AFTER, meaning the order will remain the same but possibly have empty slots we skipped\n   */\n  public findEmptyPosition(node: GridStackNode, nodeList = this.nodes, column = this.column, after?: GridStackNode): boolean {\n    const start = after ? after.y * column + (after.x + after.w) : 0;\n    let found = false;\n    for (let i = start; !found; ++i) {\n      const x = i % column;\n      const y = Math.floor(i / column);\n      if (x + node.w > column) {\n        continue;\n      }\n      const box = {x, y, w: node.w, h: node.h};\n      if (!nodeList.find(n => Utils.isIntercepted(box, n))) {\n        if (node.x !== x || node.y !== y) node._dirty = true;\n        node.x = x;\n        node.y = y;\n        delete node.autoPosition;\n        found = true;\n      }\n    }\n    return found;\n  }\n\n  /** call to add the given node to our list, fixing collision and re-packing */\n  public addNode(node: GridStackNode, triggerAddEvent = false, after?: GridStackNode): GridStackNode {\n    const dup = this.nodes.find(n => n._id === node._id);\n    if (dup) return dup; // prevent inserting twice! return it instead.\n\n    // skip prepareNode if we're in middle of column resize (not new) but do check for bounds!\n    this._inColumnResize ? this.nodeBoundFix(node) : this.prepareNode(node);\n    delete node._temporaryRemoved;\n    delete node._removeDOM;\n\n    let skipCollision: boolean;\n    if (node.autoPosition && this.findEmptyPosition(node, this.nodes, this.column, after)) {\n      delete node.autoPosition; // found our slot\n      skipCollision = true;\n    }\n\n    this.nodes.push(node);\n    if (triggerAddEvent) { this.addedNodes.push(node); }\n\n    if (!skipCollision) this._fixCollisions(node);\n    if (!this.batchMode) { this._packNodes()._notify(); }\n    return node;\n  }\n\n  public removeNode(node: GridStackNode, removeDOM = true, triggerEvent = false): GridStackEngine {\n    if (!this.nodes.find(n => n._id === node._id)) {\n      // TEST console.log(`Error: GridStackEngine.removeNode() node._id=${node._id} not found!`)\n      return this;\n    }\n    if (triggerEvent) { // we wait until final drop to manually track removed items (rather than during drag)\n      this.removedNodes.push(node);\n    }\n    if (removeDOM) node._removeDOM = true; // let CB remove actual HTML (used to set _id to null, but then we loose layout info)\n    // don't use 'faster' .splice(findIndex(),1) in case node isn't in our list, or in multiple times.\n    this.nodes = this.nodes.filter(n => n._id !== node._id);\n    if (!node._isAboutToRemove) this._packNodes(); // if dragged out, no need to relayout as already done...\n    this._notify([node]);\n    return this;\n  }\n\n  public removeAll(removeDOM = true, triggerEvent = true): GridStackEngine {\n    delete this._layouts;\n    if (!this.nodes.length) return this;\n    removeDOM && this.nodes.forEach(n => n._removeDOM = true); // let CB remove actual HTML (used to set _id to null, but then we loose layout info)\n    const removedNodes = this.nodes;\n    this.removedNodes = triggerEvent ? removedNodes : [];\n    this.nodes = [];\n    return this._notify(removedNodes);\n  }\n\n  /** checks if item can be moved (layout constrain) vs moveNode(), returning true if was able to move.\n   * In more complicated cases (maxRow) it will attempt at moving the item and fixing\n   * others in a clone first, then apply those changes if still within specs. */\n  public moveNodeCheck(node: GridStackNode, o: GridStackMoveOpts): boolean {\n    // if (node.locked) return false;\n    if (!this.changedPosConstrain(node, o)) return false;\n    o.pack = true;\n\n    // simpler case: move item directly...\n    if (!this.maxRow) {\n      return this.moveNode(node, o);\n    }\n\n    // complex case: create a clone with NO maxRow (will check for out of bounds at the end)\n    let clonedNode: GridStackNode;\n    const clone = new GridStackEngine({\n      column: this.column,\n      float: this.float,\n      nodes: this.nodes.map(n => {\n        if (n._id === node._id) {\n          clonedNode = {...n};\n          return clonedNode;\n        }\n        return {...n};\n      })\n    });\n    if (!clonedNode) return false;\n\n    // check if we're covering 50% collision and could move, while still being under maxRow or at least not making it worse\n    // (case where widget was somehow added past our max #2449)\n    const canMove = clone.moveNode(clonedNode, o) && clone.getRow() <= Math.max(this.getRow(), this.maxRow);\n    // else check if we can force a swap (float=true, or different shapes) on non-resize\n    if (!canMove && !o.resizing && o.collide) {\n      const collide = o.collide.el.gridstackNode; // find the source node the clone collided with at 50%\n      if (this.swap(node, collide)) { // swaps and mark dirty\n        this._notify();\n        return true;\n      }\n    }\n    if (!canMove) return false;\n\n    // if clone was able to move, copy those mods over to us now instead of caller trying to do this all over!\n    // Note: we can't use the list directly as elements and other parts point to actual node, so copy content\n    clone.nodes.filter(n => n._dirty).forEach(c => {\n      const n = this.nodes.find(a => a._id === c._id);\n      if (!n) return;\n      Utils.copyPos(n, c);\n      n._dirty = true;\n    });\n    this._notify();\n    return true;\n  }\n\n  /** return true if can fit in grid height constrain only (always true if no maxRow) */\n  public willItFit(node: GridStackNode): boolean {\n    delete node._willFitPos;\n    if (!this.maxRow) return true;\n    // create a clone with NO maxRow and check if still within size\n    const clone = new GridStackEngine({\n      column: this.column,\n      float: this.float,\n      nodes: this.nodes.map(n => {return {...n}})\n    });\n    const n = {...node}; // clone node so we don't mod any settings on it but have full autoPosition and min/max as well! #1687\n    this.cleanupNode(n);\n    delete n.el; delete n._id; delete n.content; delete n.grid;\n    clone.addNode(n);\n    if (clone.getRow() <= this.maxRow) {\n      node._willFitPos = Utils.copyPos({}, n);\n      return true;\n    }\n    return false;\n  }\n\n  /** true if x,y or w,h are different after clamping to min/max */\n  public changedPosConstrain(node: GridStackNode, p: GridStackPosition): boolean {\n    // first make sure w,h are set for caller\n    p.w = p.w || node.w;\n    p.h = p.h || node.h;\n    if (node.x !== p.x || node.y !== p.y) return true;\n    // check constrained w,h\n    if (node.maxW) { p.w = Math.min(p.w, node.maxW); }\n    if (node.maxH) { p.h = Math.min(p.h, node.maxH); }\n    if (node.minW) { p.w = Math.max(p.w, node.minW); }\n    if (node.minH) { p.h = Math.max(p.h, node.minH); }\n    return (node.w !== p.w || node.h !== p.h);\n  }\n\n  /** return true if the passed in node was actually moved (checks for no-op and locked) */\n  public moveNode(node: GridStackNode, o: GridStackMoveOpts): boolean {\n    if (!node || /*node.locked ||*/ !o) return false;\n    let wasUndefinedPack: boolean;\n    if (o.pack === undefined && !this.batchMode) {\n      wasUndefinedPack = o.pack = true;\n    }\n\n    // constrain the passed in values and check if we're still changing our node\n    if (typeof o.x !== 'number') { o.x = node.x; }\n    if (typeof o.y !== 'number') { o.y = node.y; }\n    if (typeof o.w !== 'number') { o.w = node.w; }\n    if (typeof o.h !== 'number') { o.h = node.h; }\n    const resizing = (node.w !== o.w || node.h !== o.h);\n    const nn: GridStackNode = Utils.copyPos({}, node, true); // get min/max out first, then opt positions next\n    Utils.copyPos(nn, o);\n    this.nodeBoundFix(nn, resizing);\n    Utils.copyPos(o, nn);\n\n    if (!o.forceCollide && Utils.samePos(node, o)) return false;\n    const prevPos: GridStackPosition = Utils.copyPos({}, node);\n\n    // check if we will need to fix collision at our new location\n    const collides = this.collideAll(node, nn, o.skip);\n    let needToMove = true;\n    if (collides.length) {\n      const activeDrag = node._moving && !o.nested;\n      // check to make sure we actually collided over 50% surface area while dragging\n      let collide = activeDrag ? this.directionCollideCoverage(node, o, collides) : collides[0];\n      // if we're enabling creation of sub-grids on the fly, see if we're covering 80% of either one, if we didn't already do that\n      if (activeDrag && collide && node.grid?.opts?.subGridDynamic && !node.grid._isTemp) {\n        const over = Utils.areaIntercept(o.rect, collide._rect);\n        const a1 = Utils.area(o.rect);\n        const a2 = Utils.area(collide._rect);\n        const perc = over / (a1 < a2 ? a1 : a2);\n        if (perc > .8) {\n          collide.grid.makeSubGrid(collide.el, undefined, node);\n          collide = undefined;\n        }\n      }\n\n      if (collide) {\n        needToMove = !this._fixCollisions(node, nn, collide, o); // check if already moved...\n      } else {\n        needToMove = false; // we didn't cover >50% for a move, skip...\n        if (wasUndefinedPack) delete o.pack;\n      }\n    }\n\n    // now move (to the original ask vs the collision version which might differ) and repack things\n    if (needToMove && !Utils.samePos(node, nn)) {\n      node._dirty = true;\n      Utils.copyPos(node, nn);\n    }\n    if (o.pack) {\n      this._packNodes()\n        ._notify();\n    }\n    return !Utils.samePos(node, prevPos); // pack might have moved things back\n  }\n\n  public getRow(): number {\n    return this.nodes.reduce((row, n) => Math.max(row, n.y + n.h), 0);\n  }\n\n  public beginUpdate(node: GridStackNode): GridStackEngine {\n    if (!node._updating) {\n      node._updating = true;\n      delete node._skipDown;\n      if (!this.batchMode) this.saveInitial();\n    }\n    return this;\n  }\n\n  public endUpdate(): GridStackEngine {\n    const n = this.nodes.find(n => n._updating);\n    if (n) {\n      delete n._updating;\n      delete n._skipDown;\n    }\n    return this;\n  }\n\n  /** saves a copy of the largest column layout (eg 12 even when rendering oneColumnMode) so we don't loose orig layout,\n   * returning a list of widgets for serialization */\n  public save(saveElement = true, saveCB?: SaveFcn): GridStackNode[] {\n    // use the highest layout for any saved info so we can have full detail on reload #1849\n    const len = this._layouts?.length;\n    const layout = len && this.column !== (len - 1) ? this._layouts[len - 1] : null;\n    const list: GridStackNode[] = [];\n    this.sortNodes();\n    this.nodes.forEach(n => {\n      const wl = layout?.find(l => l._id === n._id);\n      // use layout info fields instead if set\n      const w: GridStackNode = {...n, ...(wl || {})};\n      Utils.removeInternalForSave(w, !saveElement);\n      if (saveCB) saveCB(n, w);\n      list.push(w);\n    });\n    return list;\n  }\n\n  /** @internal called whenever a node is added or moved - updates the cached layouts */\n  public layoutsNodesChange(nodes: GridStackNode[]): GridStackEngine {\n    if (!this._layouts || this._inColumnResize) return this;\n    // remove smaller layouts - we will re-generate those on the fly... larger ones need to update\n    this._layouts.forEach((layout, column) => {\n      if (!layout || column === this.column) return this;\n      if (column < this.column) {\n        this._layouts[column] = undefined;\n      }\n      else {\n        // we save the original x,y,w (h isn't cached) to see what actually changed to propagate better.\n        // NOTE: we don't need to check against out of bound scaling/moving as that will be done when using those cache values. #1785\n        const ratio = column / this.column;\n        nodes.forEach(node => {\n          if (!node._orig) return; // didn't change (newly added ?)\n          const n = layout.find(l => l._id === node._id);\n          if (!n) return; // no cache for new nodes. Will use those values.\n          // Y changed, push down same amount\n          // TODO: detect doing item 'swaps' will help instead of move (especially in 1 column mode)\n          if (n.y >= 0 && node.y !== node._orig.y) {\n            n.y += (node.y - node._orig.y);\n          }\n          // X changed, scale from new position\n          if (node.x !== node._orig.x) {\n            n.x = Math.round(node.x * ratio);\n          }\n          // width changed, scale from new width\n          if (node.w !== node._orig.w) {\n            n.w = Math.round(node.w * ratio);\n          }\n          // ...height always carries over from cache\n        });\n      }\n    });\n    return this;\n  }\n\n  /**\n   * @internal Called to scale the widget width & position up/down based on the column change.\n   * Note we store previous layouts (especially original ones) to make it possible to go\n   * from say 12 -> 1 -> 12 and get back to where we were.\n   *\n   * @param prevColumn previous number of columns\n   * @param column  new column number\n   * @param layout specify the type of re-layout that will happen (position, size, etc...).\n   * Note: items will never be outside of the current column boundaries. default (moveScale). Ignored for 1 column\n   */\n  public columnChanged(prevColumn: number, column: number, layout: ColumnOptions = 'moveScale'): GridStackEngine {\n    if (!this.nodes.length || !column || prevColumn === column) return this;\n\n    // simpler shortcuts layouts\n    const doCompact = layout === 'compact' || layout === 'list';\n    if (doCompact) {\n      this.sortNodes(1); // sort with original layout once and only once (new column will affect order otherwise)\n    }\n\n    // cache the current layout in case they want to go back (like 12 -> 1 -> 12) as it requires original data IFF we're sizing down (see below)\n    if (column < prevColumn) this.cacheLayout(this.nodes, prevColumn);\n    this.batchUpdate(); // do this EARLY as it will call saveInitial() so we can detect where we started for _dirty and collision\n    let newNodes: GridStackNode[] = [];\n    let nodes = doCompact ? this.nodes : Utils.sort(this.nodes, -1); // current column reverse sorting so we can insert last to front (limit collision)\n\n    // see if we have cached previous layout IFF we are going up in size (restore) otherwise always\n    // generate next size down from where we are (looks more natural as you gradually size down).\n    if (column > prevColumn && this._layouts) {\n      const cacheNodes = this._layouts[column] || [];\n      // ...if not, start with the largest layout (if not already there) as down-scaling is more accurate\n      // by pretending we came from that larger column by assigning those values as starting point\n      const lastIndex = this._layouts.length - 1;\n      if (!cacheNodes.length && prevColumn !== lastIndex && this._layouts[lastIndex]?.length) {\n        prevColumn = lastIndex;\n        this._layouts[lastIndex].forEach(cacheNode => {\n          const n = nodes.find(n => n._id === cacheNode._id);\n          if (n) {\n            // still current, use cache info positions\n            if (!doCompact && !cacheNode.autoPosition) {\n              n.x = cacheNode.x ?? n.x;\n              n.y = cacheNode.y ?? n.y;\n            }\n            n.w = cacheNode.w ?? n.w;\n            if (cacheNode.x == undefined || cacheNode.y === undefined) n.autoPosition = true;\n          }\n        });\n      }\n\n      // if we found cache re-use those nodes that are still current\n      cacheNodes.forEach(cacheNode => {\n        const j = nodes.findIndex(n => n._id === cacheNode._id);\n        if (j !== -1) {\n          const n = nodes[j];\n          // still current, use cache info positions\n          if (doCompact) {\n            n.w = cacheNode.w; // only w is used, and don't trim the list\n            return;\n          }\n          if (cacheNode.autoPosition || isNaN(cacheNode.x) || isNaN(cacheNode.y)) {\n            this.findEmptyPosition(cacheNode, newNodes);\n          }\n          if (!cacheNode.autoPosition) {\n            n.x = cacheNode.x ?? n.x;\n            n.y = cacheNode.y ?? n.y;\n            n.w = cacheNode.w ?? n.w;\n            newNodes.push(n);\n          }\n          nodes.splice(j, 1);\n        }\n      });\n    }\n\n    // much simpler layout that just compacts\n    if (doCompact) {\n      this.compact(layout, false);\n    } else {\n      // ...and add any extra non-cached ones\n      if (nodes.length) {\n        if (typeof layout === 'function') {\n          layout(column, prevColumn, newNodes, nodes);\n        } else {\n          const ratio = (doCompact || layout === 'none') ? 1 : column / prevColumn;\n          const move = (layout === 'move' || layout === 'moveScale');\n          const scale = (layout === 'scale' || layout === 'moveScale');\n          nodes.forEach(node => {\n            // NOTE: x + w could be outside of the grid, but addNode() below will handle that\n            node.x = (column === 1 ? 0 : (move ? Math.round(node.x * ratio) : Math.min(node.x, column - 1)));\n            node.w = ((column === 1 || prevColumn === 1) ? 1 : scale ? (Math.round(node.w * ratio) || 1) : (Math.min(node.w, column)));\n            newNodes.push(node);\n          });\n          nodes = [];\n        }\n      }\n\n      // finally re-layout them in reverse order (to get correct placement)\n      newNodes = Utils.sort(newNodes, -1);\n      this._inColumnResize = true; // prevent cache update\n      this.nodes = []; // pretend we have no nodes to start with (add() will use same structures) to simplify layout\n      newNodes.forEach(node => {\n        this.addNode(node, false); // 'false' for add event trigger\n        delete node._orig; // make sure the commit doesn't try to restore things back to original\n      });\n    }\n\n    this.nodes.forEach(n => delete n._orig); // clear _orig before batch=false so it doesn't handle float=true restore\n    this.batchUpdate(false, !doCompact);\n    delete this._inColumnResize;\n    return this;\n  }\n\n  /**\n   * call to cache the given layout internally to the given location so we can restore back when column changes size\n   * @param nodes list of nodes\n   * @param column corresponding column index to save it under\n   * @param clear if true, will force other caches to be removed (default false)\n   */\n  public cacheLayout(nodes: GridStackNode[], column: number, clear = false): GridStackEngine {\n    const copy: GridStackNode[] = [];\n    nodes.forEach((n, i) => {\n      // make sure we have an id in case this is new layout, else re-use id already set\n      if (n._id === undefined) {\n        const existing = n.id ? this.nodes.find(n2 => n2.id === n.id) : undefined; // find existing node using users id\n        n._id = existing?._id ?? GridStackEngine._idSeq++;\n      }\n      copy[i] = {x: n.x, y: n.y, w: n.w, _id: n._id} // only thing we change is x,y,w and id to find it back\n    });\n    this._layouts = clear ? [] : this._layouts || []; // use array to find larger quick\n    this._layouts[column] = copy;\n    return this;\n  }\n\n  /**\n   * call to cache the given node layout internally to the given location so we can restore back when column changes size\n   * @param node single node to cache\n   * @param column corresponding column index to save it under\n   */\n  public cacheOneLayout(n: GridStackNode, column: number): GridStackEngine {\n    n._id = n._id ?? GridStackEngine._idSeq++;\n    const l: GridStackNode = {x: n.x, y: n.y, w: n.w, _id: n._id}\n    if (n.autoPosition || n.x === undefined) { delete l.x; delete l.y; if (n.autoPosition) l.autoPosition = true; }\n    this._layouts = this._layouts || [];\n    this._layouts[column] = this._layouts[column] || [];\n    const index = this.findCacheLayout(n, column);\n    if (index === -1)\n      this._layouts[column].push(l);\n    else\n      this._layouts[column][index] = l;\n    return this;\n  }\n\n  protected findCacheLayout(n: GridStackNode, column: number): number | undefined {\n    return this._layouts?.[column]?.findIndex(l => l._id === n._id) ?? -1;\n  }\n\n  public removeNodeFromLayoutCache(n: GridStackNode) {\n    if (!this._layouts) {\n      return;\n    }\n    for (let i = 0; i < this._layouts.length; i++) {\n      const index = this.findCacheLayout(n, i);\n      if (index !== -1) {\n        this._layouts[i].splice(index, 1);\n      }\n    }\n  }\n\n  /** called to remove all internal values but the _id */\n  public cleanupNode(node: GridStackNode): GridStackEngine {\n    for (const prop in node) {\n      if (prop[0] === '_' && prop !== '_id') delete node[prop];\n    }\n    return this;\n  }\n}\n", "/**\r\n * types.ts 12.1.1\r\n * Copyright (c) 2021-2024 Alain Dumesny - see GridStack root license\r\n */\r\n\r\nimport { GridStack } from './gridstack';\r\nimport { GridStackEngine } from './gridstack-engine';\r\n\r\n// default values for grid options - used during init and when saving out\r\nexport const gridDefaults: GridStackOptions = {\r\n  alwaysShowResizeHandle: 'mobile',\r\n  animate: true,\r\n  auto: true,\r\n  cellHeight: 'auto',\r\n  cellHeightThrottle: 100,\r\n  cellHeightUnit: 'px',\r\n  column: 12,\r\n  draggable: { handle: '.grid-stack-item-content', appendTo: 'body', scroll: true },\r\n  handle: '.grid-stack-item-content',\r\n  itemClass: 'grid-stack-item',\r\n  margin: 10,\r\n  marginUnit: 'px',\r\n  maxRow: 0,\r\n  minRow: 0,\r\n  placeholderClass: 'grid-stack-placeholder',\r\n  placeholderText: '',\r\n  removableOptions: { accept: 'grid-stack-item', decline: 'grid-stack-non-removable'},\r\n  resizable: { handles: 'se' },\r\n  rtl: 'auto',\r\n\r\n  // **** same as not being set ****\r\n  // disableDrag: false,\r\n  // disableResize: false,\r\n  // float: false,\r\n  // handleClass: null,\r\n  // removable: false,\r\n  // staticGrid: false,\r\n  //removable\r\n};\r\n\r\n/**\r\n * different layout options when changing # of columns, including a custom function that takes new/old column count, and array of new/old positions\r\n * Note: new list may be partially already filled if we have a cache of the layout at that size and new items were added later.\r\n * Options are:\r\n * 'list' - treat items as sorted list, keeping items (un-sized unless too big for column count) sequentially reflowing them\r\n * 'compact' - similar to list, but using compact() method which will possibly re-order items if an empty slots are available due to a larger item needing to be pushed to next row\r\n * 'moveScale' - will scale and move items by the ratio new newColumnCount / oldColumnCount\r\n * 'move' | 'scale' - will only size or move items\r\n * 'none' will leave items unchanged, unless they don't fit in column count\r\n */\r\nexport type ColumnOptions = 'list' | 'compact' | 'moveScale' | 'move' | 'scale' | 'none' |\r\n  ((column: number, oldColumn: number, nodes: GridStackNode[], oldNodes: GridStackNode[]) => void);\r\nexport type CompactOptions = 'list' | 'compact';\r\nexport type numberOrString = number | string;\r\nexport interface GridItemHTMLElement extends HTMLElement {\r\n  /** pointer to grid node instance */\r\n  gridstackNode?: GridStackNode;\r\n  /** @internal */\r\n  _gridstackNodeOrig?: GridStackNode;\r\n}\r\n\r\nexport type GridStackElement = string | HTMLElement | GridItemHTMLElement;\r\n\r\n/** specific and general event handlers for the .on() method */\r\nexport type GridStackEventHandler = (event: Event) => void;\r\nexport type GridStackElementHandler = (event: Event, el: GridItemHTMLElement) => void;\r\nexport type GridStackNodesHandler = (event: Event, nodes: GridStackNode[]) => void;\r\nexport type GridStackDroppedHandler = (event: Event, previousNode: GridStackNode, newNode: GridStackNode) => void;\r\nexport type GridStackEventHandlerCallback = GridStackEventHandler | GridStackElementHandler | GridStackNodesHandler | GridStackDroppedHandler;\r\n\r\n/** optional function called during load() to callback the user on new added/remove grid items | grids */\r\nexport type AddRemoveFcn = (parent: HTMLElement, w: GridStackWidget, add: boolean, grid: boolean) => HTMLElement | undefined;\r\n\r\n/** optional function called during save() to let the caller add additional custom data to the GridStackWidget structure that will get returned */\r\nexport type SaveFcn = (node: GridStackNode, w: GridStackWidget) => void;\r\n\r\n/** optional function called during load()/addWidget() to let the caller create custom content other than plan text */\r\nexport type RenderFcn = (el: HTMLElement, w: GridStackWidget) => void;\r\n\r\nexport type ResizeToContentFcn = (el: GridItemHTMLElement) => void;\r\n\r\n/** describes the responsive nature of the grid. NOTE: make sure to have correct extra CSS to support this. */\r\nexport interface Responsive {\r\n  /** wanted width to maintain (+-50%) to dynamically pick a column count. NOTE: make sure to have correct extra CSS to support this. */\r\n  columnWidth?: number;\r\n  /** maximum number of columns allowed (default: 12). NOTE: make sure to have correct extra CSS to support this. */\r\n  columnMax?: number;\r\n  /** explicit width:column breakpoints instead of automatic 'columnWidth'. NOTE: make sure to have correct extra CSS to support this. */\r\n  breakpoints?: Breakpoint[];\r\n  /** specify if breakpoints are for window size or grid size (default:false = grid) */\r\n  breakpointForWindow?: boolean;\r\n  /** global re-layout mode when changing columns */\r\n  layout?: ColumnOptions;\r\n}\r\n\r\nexport interface Breakpoint {\r\n  /** <= width for the breakpoint to trigger */\r\n  w?: number;\r\n  /** column count */\r\n  c: number;\r\n  /** re-layout mode if different from global one */\r\n  layout?: ColumnOptions;\r\n  /** TODO: children layout, which spells out exact locations and could omit/add some children */\r\n  // children?: GridStackWidget[];\r\n}\r\n\r\n/**\r\n * Defines the options for a Grid\r\n */\r\nexport interface GridStackOptions {\r\n  /**\r\n   * accept widgets dragged from other grids or from outside (default: `false`). Can be:\r\n   * `true` (uses `'.grid-stack-item'` class filter) or `false`,\r\n   * string for explicit class name,\r\n   * function returning a boolean. See [example](http://gridstack.github.io/gridstack.js/demo/two.html)\r\n   */\r\n  acceptWidgets?: boolean | string | ((element: Element) => boolean);\r\n\r\n  /** possible values (default: `mobile`) - does not apply to non-resizable widgets\r\n    * `false` the resizing handles are only shown while hovering over a widget\r\n    * `true` the resizing handles are always shown\r\n    * 'mobile' if running on a mobile device, default to `true` (since there is no hovering per say), else `false`.\r\n    See [example](http://gridstack.github.io/gridstack.js/demo/mobile.html) */\r\n  alwaysShowResizeHandle?: true | false | 'mobile';\r\n\r\n  /** turns animation on (default?: true) */\r\n  animate?: boolean;\r\n\r\n  /** if false gridstack will not initialize existing items (default?: true) */\r\n  auto?: boolean;\r\n\r\n  /**\r\n   * one cell height (default?: 'auto'). Can be:\r\n   *  an integer (px)\r\n   *  a string (ex: '100px', '10em', '10rem'). Note: % doesn't work right - see demo/cell-height.html\r\n   *  0, in which case the library will not generate styles for rows. Everything must be defined in your own CSS files.\r\n   *  'auto' - height will be calculated for square cells (width / column) and updated live as you resize the window - also see `cellHeightThrottle`\r\n   *  'initial' - similar to 'auto' (start at square cells) but stay that size during window resizing.\r\n   */\r\n  cellHeight?: numberOrString;\r\n\r\n  /** throttle time delay (in ms) used when cellHeight='auto' to improve performance vs usability (default?: 100).\r\n   * A value of 0 will make it instant at a cost of re-creating the CSS file at ever window resize event!\r\n   * */\r\n  cellHeightThrottle?: number;\r\n\r\n  /** (internal) unit for cellHeight (default? 'px') which is set when a string cellHeight with a unit is passed (ex: '10rem') */\r\n  cellHeightUnit?: string;\r\n\r\n  /** list of children item to create when calling load() or addGrid() */\r\n  children?: GridStackWidget[];\r\n\r\n  /** number of columns (default?: 12). Note: IF you change this, CSS also have to change. See https://github.com/gridstack/gridstack.js#change-grid-columns.\r\n   * Note: for nested grids, it is recommended to use 'auto' which will always match the container grid-item current width (in column) to keep inside and outside\r\n   * items always the same. flag is NOT supported for regular non-nested grids.\r\n   */\r\n  column?: number | 'auto';\r\n\r\n  /** responsive column layout for width:column behavior */\r\n  columnOpts?: Responsive;\r\n\r\n  /** additional class on top of '.grid-stack' (which is required for our CSS) to differentiate this instance.\r\n  Note: only used by addGrid(), else your element should have the needed class */\r\n  class?: string;\r\n\r\n  /** disallows dragging of widgets (default?: false) */\r\n  disableDrag?: boolean;\r\n\r\n  /** disallows resizing of widgets (default?: false). */\r\n  disableResize?: boolean;\r\n\r\n  /** allows to override UI draggable options. (default?: { handle?: '.grid-stack-item-content', appendTo?: 'body' }) */\r\n  draggable?: DDDragOpt;\r\n\r\n  /** let user drag nested grid items out of a parent or not (default true - not supported yet) */\r\n  //dragOut?: boolean;\r\n\r\n  /** the type of engine to create (so you can subclass) default to GridStackEngine */\r\n  engineClass?: typeof GridStackEngine;\r\n\r\n  /** enable floating widgets (default?: false) See example (http://gridstack.github.io/gridstack.js/demo/float.html) */\r\n  float?: boolean;\r\n\r\n  /** draggable handle selector (default?: '.grid-stack-item-content') */\r\n  handle?: string;\r\n\r\n  /** draggable handle class (e.g. 'grid-stack-item-content'). If set 'handle' is ignored (default?: null) */\r\n  handleClass?: string;\r\n\r\n  /** additional widget class (default?: 'grid-stack-item') */\r\n  itemClass?: string;\r\n\r\n  /** re-layout mode when we're a subgrid and we are being resized. default to 'list' */\r\n  layout?: ColumnOptions;\r\n\r\n  /** true when widgets are only created when they scroll into view (visible) */\r\n  lazyLoad?: boolean;\r\n\r\n  /**\r\n   * gap between grid item and content (default?: 10). This will set all 4 sides and support the CSS formats below\r\n   *  an integer (px)\r\n   *  a string with possible units (ex: '2em', '20px', '2rem')\r\n   *  string with space separated values (ex: '5px 10px 0 20px' for all 4 sides, or '5em 10em' for top/bottom and left/right pairs like CSS).\r\n   * Note: all sides must have same units (last one wins, default px)\r\n   */\r\n  margin?: numberOrString;\r\n\r\n  /** OLD way to optionally set each side - use margin: '5px 10px 0 20px' instead. Used internally to store each side. */\r\n  marginTop?: numberOrString;\r\n  marginRight?: numberOrString;\r\n  marginBottom?: numberOrString;\r\n  marginLeft?: numberOrString;\r\n\r\n  /** (internal) unit for margin (default? 'px') set when `margin` is set as string with unit (ex: 2rem') */\r\n  marginUnit?: string;\r\n\r\n  /** maximum rows amount. Default? is 0 which means no maximum rows */\r\n  maxRow?: number;\r\n\r\n  /** minimum rows amount. Default is `0`. You can also do this with `min-height` CSS attribute\r\n   * on the grid div in pixels, which will round to the closest row.\r\n   */\r\n  minRow?: number;\r\n\r\n  /** If you are using a nonce-based Content Security Policy, pass your nonce here and\r\n   * GridStack will add it to the <style> elements it creates. */\r\n  nonce?: string;\r\n\r\n  /** class for placeholder (default?: 'grid-stack-placeholder') */\r\n  placeholderClass?: string;\r\n\r\n  /** placeholder default content (default?: '') */\r\n  placeholderText?: string;\r\n\r\n  /** allows to override UI resizable options. (default?: { handles: 'se' }) */\r\n  resizable?: DDResizeOpt;\r\n\r\n  /**\r\n   * if true widgets could be removed by dragging outside of the grid. It could also be a selector string (ex: \".trash\"),\r\n   * in this case widgets will be removed by dropping them there (default?: false)\r\n   * See example (http://gridstack.github.io/gridstack.js/demo/two.html)\r\n   */\r\n  removable?: boolean | string;\r\n\r\n  /** allows to override UI removable options. (default?: { accept: '.grid-stack-item' }) */\r\n  removableOptions?: DDRemoveOpt;\r\n\r\n  /** fix grid number of rows. This is a shortcut of writing `minRow:N, maxRow:N`. (default `0` no constrain) */\r\n  row?: number;\r\n\r\n  /**\r\n   * if true turns grid to RTL. Possible values are true, false, 'auto' (default?: 'auto')\r\n   * See [example](http://gridstack.github.io/gridstack.js/demo/right-to-left(rtl).html)\r\n   */\r\n  rtl?: boolean | 'auto';\r\n\r\n  /** set to true if all grid items (by default, but item can also override) height should be based on content size instead of WidgetItem.h to avoid v-scrollbars.\r\n   * Note: this is still row based, not pixels, so it will use ceil(getBoundingClientRect().height / getCellHeight())\r\n   */\r\n  sizeToContent?: boolean;\r\n\r\n  /**\r\n   * makes grid static (default?: false). If `true` widgets are not movable/resizable.\r\n   * You don't even need draggable/resizable. A CSS class\r\n   * 'grid-stack-static' is also added to the element.\r\n   */\r\n  staticGrid?: boolean;\r\n\r\n  /**\r\n   * @deprecated Not used anymore, styles are now implemented with local CSS variables\r\n   */\r\n  styleInHead?: boolean;\r\n\r\n  /** list of differences in options for automatically created sub-grids under us (inside our grid-items) */\r\n  subGridOpts?: GridStackOptions;\r\n\r\n  /** enable/disable the creation of sub-grids on the fly by dragging items completely\r\n   * over others (nest) vs partially (push). Forces `DDDragOpt.pause=true` to accomplish that. */\r\n  subGridDynamic?: boolean;\r\n}\r\n\r\n/** options used during GridStackEngine.moveNode() */\r\nexport interface GridStackMoveOpts extends GridStackPosition {\r\n  /** node to skip collision */\r\n  skip?: GridStackNode;\r\n  /** do we pack (default true) */\r\n  pack?: boolean;\r\n  /** true if we are calling this recursively to prevent simple swap or coverage collision - default false*/\r\n  nested?: boolean;\r\n  /** vars to calculate other cells coordinates */\r\n  cellWidth?: number;\r\n  cellHeight?: number;\r\n  marginTop?: number;\r\n  marginBottom?: number;\r\n  marginLeft?: number;\r\n  marginRight?: number;\r\n  /** position in pixels of the currently dragged items (for overlap check) */\r\n  rect?: GridStackPosition;\r\n  /** true if we're live resizing */\r\n  resizing?: boolean;\r\n  /** best node (most coverage) we collied with */\r\n  collide?: GridStackNode;\r\n  /** for collision check even if we don't move */\r\n  forceCollide?: boolean;\r\n}\r\n\r\nexport interface GridStackPosition {\r\n  /** widget position x (default?: 0) */\r\n  x?: number;\r\n  /** widget position y (default?: 0) */\r\n  y?: number;\r\n  /** widget dimension width (default?: 1) */\r\n  w?: number;\r\n  /** widget dimension height (default?: 1) */\r\n  h?: number;\r\n}\r\n\r\n/**\r\n * GridStack Widget creation options\r\n */\r\nexport interface GridStackWidget extends GridStackPosition {\r\n  /** if true then x, y parameters will be ignored and widget will be places on the first available position (default?: false) */\r\n  autoPosition?: boolean;\r\n  /** minimum width allowed during resize/creation (default?: undefined = un-constrained) */\r\n  minW?: number;\r\n  /** maximum width allowed during resize/creation (default?: undefined = un-constrained) */\r\n  maxW?: number;\r\n  /** minimum height allowed during resize/creation (default?: undefined = un-constrained) */\r\n  minH?: number;\r\n  /** maximum height allowed during resize/creation (default?: undefined = un-constrained) */\r\n  maxH?: number;\r\n  /** prevent direct resizing by the user (default?: undefined = un-constrained) */\r\n  noResize?: boolean;\r\n  /** prevents direct moving by the user (default?: undefined = un-constrained) */\r\n  noMove?: boolean;\r\n  /** prevents being pushed by other widgets or api (default?: undefined = un-constrained), which is different from `noMove` (user action only) */\r\n  locked?: boolean;\r\n  /** value for `gs-id` stored on the widget (default?: undefined) */\r\n  id?: string;\r\n  /** html to append inside as content */\r\n  content?: string;\r\n  /** true when widgets are only created when they scroll into view (visible) */\r\n  lazyLoad?: boolean;\r\n  /** local (vs grid) override - see GridStackOptions.\r\n   * Note: This also allow you to set a maximum h value (but user changeable during normal resizing) to prevent unlimited content from taking too much space (get scrollbar) */\r\n  sizeToContent?: boolean | number;\r\n  /** local override of GridStack.resizeToContentParent that specify the class to use for the parent (actual) vs child (wanted) height */\r\n  resizeToContentParent?: string;\r\n  /** optional nested grid options and list of children, which then turns into actual instance at runtime to get options from */\r\n  subGridOpts?: GridStackOptions;\r\n}\r\n\r\n/** Drag&Drop resize options */\r\nexport interface DDResizeOpt {\r\n  /** do resize handle hide by default until mouse over ? - default: true on desktop, false on mobile*/\r\n  autoHide?: boolean;\r\n  /**\r\n   * sides where you can resize from (ex: 'e, se, s, sw, w') - default 'se' (south-east)\r\n   * Note: it is not recommended to resize from the top sides as weird side effect may occur.\r\n  */\r\n  handles?: string;\r\n}\r\n\r\n/** Drag&Drop remove options */\r\nexport interface DDRemoveOpt {\r\n  /** class that can be removed (default?: opts.itemClass) */\r\n  accept?: string;\r\n  /** class that cannot be removed (default: 'grid-stack-non-removable') */\r\n  decline?: string;\r\n}\r\n\r\n/** Drag&Drop dragging options */\r\nexport interface DDDragOpt {\r\n  /** class selector of items that can be dragged. default to '.grid-stack-item-content' */\r\n  handle?: string;\r\n  /** default to 'body' */\r\n  appendTo?: string;\r\n  /** if set (true | msec), dragging placement (collision) will only happen after a pause by the user. Note: this is Global */\r\n  pause?: boolean | number;\r\n  /** default to `true` */\r\n  scroll?: boolean;\r\n  /** prevents dragging from starting on specified elements, listed as comma separated selectors (eg: '.no-drag'). default built in is 'input,textarea,button,select,option' */\r\n  cancel?: string;\r\n  /** helper function when dropping: 'clone' or your own method */\r\n  helper?: 'clone' | ((el: HTMLElement) => HTMLElement);\r\n  /** callbacks */\r\n  start?: (event: Event, ui: DDUIData) => void;\r\n  stop?: (event: Event) => void;\r\n  drag?: (event: Event, ui: DDUIData) => void;\r\n}\r\nexport interface Size {\r\n  width: number;\r\n  height: number;\r\n}\r\nexport interface Position {\r\n  top: number;\r\n  left: number;\r\n}\r\nexport interface Rect extends Size, Position {}\r\n\r\n/** data that is passed during drag and resizing callbacks */\r\nexport interface DDUIData {\r\n  position?: Position;\r\n  size?: Size;\r\n  draggable?: HTMLElement;\r\n  /* fields not used by GridStack but sent by jq ? leave in case we go back to them...\r\n  originalPosition? : Position;\r\n  offset?: Position;\r\n  originalSize?: Size;\r\n  element?: HTMLElement[];\r\n  helper?: HTMLElement[];\r\n  originalElement?: HTMLElement[];\r\n  */\r\n}\r\n\r\n/**\r\n * internal runtime descriptions describing the widgets in the grid\r\n */\r\nexport interface GridStackNode extends GridStackWidget {\r\n  /** pointer back to HTML element */\r\n  el?: GridItemHTMLElement;\r\n  /** pointer back to parent Grid instance */\r\n  grid?: GridStack;\r\n  /** actual sub-grid instance */\r\n  subGrid?: GridStack;\r\n  /** allow delay creation when visible */\r\n  visibleObservable?: IntersectionObserver;\r\n  /** @internal internal id used to match when cloning engines or saving column layouts */\r\n  _id?: number;\r\n  /** @internal does the node attr ned to be updated due to changed x,y,w,h values */\r\n  _dirty?: boolean;\r\n  /** @internal */\r\n  _updating?: boolean;\r\n  /** @internal true when over trash/another grid so we don't bother removing drag CSS style that would animate back to old position */\r\n  _isAboutToRemove?: boolean;\r\n  /** @internal true if item came from outside of the grid -> actual item need to be moved over */\r\n  _isExternal?: boolean;\r\n  /** @internal Mouse event that's causing moving|resizing */\r\n  _event?: MouseEvent;\r\n  /** @internal moving vs resizing */\r\n  _moving?: boolean;\r\n  /** @internal is resizing? */\r\n  _resizing?: boolean;\r\n  /** @internal true if we jumped down past item below (one time jump so we don't have to totally pass it) */\r\n  _skipDown?: boolean;\r\n  /** @internal original values before a drag/size */\r\n  _orig?: GridStackPosition;\r\n  /** @internal position in pixels used during collision check  */\r\n  _rect?: GridStackPosition;\r\n  /** @internal top/left pixel location before a drag so we can detect direction of move from last position*/\r\n  _lastUiPosition?: Position;\r\n  /** @internal set on the item being dragged/resized remember the last positions we've tried (but failed) so we don't try again during drag/resize */\r\n  _lastTried?: GridStackPosition;\r\n  /** @internal position willItFit() will use to position the item */\r\n  _willFitPos?: GridStackPosition;\r\n  /** @internal last drag Y pixel position used to incrementally update V scroll bar */\r\n  _prevYPix?: number;\r\n  /** @internal true if we've remove the item from ourself (dragging out) but might revert it back (release on nothing -> goes back) */\r\n  _temporaryRemoved?: boolean;\r\n  /** @internal true if we should remove DOM element on _notify() rather than clearing _id (old way) */\r\n  _removeDOM?: boolean;\r\n  /** @internal original position/size of item if dragged from sidebar */\r\n  _sidebarOrig?: GridStackPosition;\r\n  /** @internal had drag&drop been initialized */\r\n  _initDD?: boolean;\r\n}\r\n", "/**\n * dd-manager.ts 12.1.1\n * Copyright (c) 2021-2024 Alain Dumesny - see GridStack root license\n */\n\nimport { DDDraggable } from './dd-draggable';\nimport { DDDroppable } from './dd-droppable';\nimport { DDResizable } from './dd-resizable';\n\n/**\n * globals that are shared across Drag & Drop instances\n */\nexport class DDManager {\n  /** if set (true | in msec), dragging placement (collision) will only happen after a pause by the user*/\n  public static pauseDrag: boolean | number;\n\n  /** true if a mouse down event was handled */\n  public static mouseHandled: boolean;\n\n  /** item being dragged */\n  public static dragElement: DDDraggable;\n\n  /** item we are currently over as drop target */\n  public static dropElement: DDDroppable;\n\n  /** current item we're over for resizing purpose (ignore nested grid resize handles) */\n  public static overResizeElement: DDResizable;\n\n}\n", "/**\n * touch.ts 12.1.1\n * Copyright (c) 2021-2024 Alain Dumesny - see GridStack root license\n */\n\nimport { DDManager } from './dd-manager';\nimport { Utils } from './utils';\n\n/**\n * Detect touch support - Windows Surface devices and other touch devices\n * should we use this instead ? (what we had for always showing resize handles)\n * /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)\n */\nexport const isTouch: boolean = typeof window !== 'undefined' && typeof document !== 'undefined' &&\n  ( 'ontouchstart' in document\n    || 'ontouchstart' in window\n    // || !!window.TouchEvent // true on Windows 10 Chrome desktop so don't use this\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    || ((window as any).DocumentTouch && document instanceof (window as any).DocumentTouch)\n    || navigator.maxTouchPoints > 0\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    || (navigator as any).msMaxTouchPoints > 0\n  );\n\n// interface TouchCoord {x: number, y: number};\n\nclass DDTouch {\n  public static touchHandled: boolean;\n  public static pointerLeaveTimeout: number;\n}\n\n/**\n* Get the x,y position of a touch event\n*/\n// function getTouchCoords(e: TouchEvent): TouchCoord {\n//   return {\n//     x: e.changedTouches[0].pageX,\n//     y: e.changedTouches[0].pageY\n//   };\n// }\n\n/**\n * Simulate a mouse event based on a corresponding touch event\n * @param {Object} e A touch event\n * @param {String} simulatedType The corresponding mouse event\n */\nfunction simulateMouseEvent(e: TouchEvent, simulatedType: string) {\n\n  // Ignore multi-touch events\n  if (e.touches.length > 1) return;\n\n  // Prevent \"Ignored attempt to cancel a touchmove event with cancelable=false\" errors\n  if (e.cancelable) e.preventDefault();\n\n  // Dispatch the simulated event to the target element\n  Utils.simulateMouseEvent(e.changedTouches[0], simulatedType);\n}\n\n/**\n * Simulate a mouse event based on a corresponding Pointer event\n * @param {Object} e A pointer event\n * @param {String} simulatedType The corresponding mouse event\n */\nfunction simulatePointerMouseEvent(e: PointerEvent, simulatedType: string) {\n\n  // Prevent \"Ignored attempt to cancel a touchmove event with cancelable=false\" errors\n  if (e.cancelable) e.preventDefault();\n\n  // Dispatch the simulated event to the target element\n  Utils.simulateMouseEvent(e, simulatedType);\n}\n\n\n/**\n * Handle the touchstart events\n * @param {Object} e The widget element's touchstart event\n */\nexport function touchstart(e: TouchEvent): void {\n  // Ignore the event if another widget is already being handled\n  if (DDTouch.touchHandled) return;\n  DDTouch.touchHandled = true;\n\n  // Simulate the mouse events\n  // simulateMouseEvent(e, 'mouseover');\n  // simulateMouseEvent(e, 'mousemove');\n  simulateMouseEvent(e, 'mousedown');\n}\n\n/**\n * Handle the touchmove events\n * @param {Object} e The document's touchmove event\n */\nexport function touchmove(e: TouchEvent): void {\n  // Ignore event if not handled by us\n  if (!DDTouch.touchHandled) return;\n\n  simulateMouseEvent(e, 'mousemove');\n}\n\n/**\n * Handle the touchend events\n * @param {Object} e The document's touchend event\n */\nexport function touchend(e: TouchEvent): void {\n\n  // Ignore event if not handled\n  if (!DDTouch.touchHandled) return;\n\n  // cancel delayed leave event when we release on ourself which happens BEFORE we get this!\n  if (DDTouch.pointerLeaveTimeout) {\n    window.clearTimeout(DDTouch.pointerLeaveTimeout);\n    delete DDTouch.pointerLeaveTimeout;\n  }\n\n  const wasDragging = !!DDManager.dragElement;\n\n  // Simulate the mouseup event\n  simulateMouseEvent(e, 'mouseup');\n  // simulateMouseEvent(event, 'mouseout');\n\n  // If the touch interaction did not move, it should trigger a click\n  if (!wasDragging) {\n    simulateMouseEvent(e, 'click');\n  }\n\n  // Unset the flag to allow other widgets to inherit the touch event\n  DDTouch.touchHandled = false;\n}\n\n/**\n * Note we don't get touchenter/touchleave (which are deprecated)\n * see https://stackoverflow.com/questions/27908339/js-touch-equivalent-for-mouseenter\n * so instead of PointerEvent to still get enter/leave and send the matching mouse event.\n */\nexport function pointerdown(e: PointerEvent): void {\n  // console.log(\"pointer down\")\n  if (e.pointerType === 'mouse') return;\n  (e.target as HTMLElement).releasePointerCapture(e.pointerId) // <- Important!\n}\n\nexport function pointerenter(e: PointerEvent): void {\n  // ignore the initial one we get on pointerdown on ourself\n  if (!DDManager.dragElement) {\n    // console.log('pointerenter ignored');\n    return;\n  }\n  // console.log('pointerenter');\n  if (e.pointerType === 'mouse') return;\n  simulatePointerMouseEvent(e, 'mouseenter');\n}\n\nexport function pointerleave(e: PointerEvent): void {\n  // ignore the leave on ourself we get before releasing the mouse over ourself\n  // by delaying sending the event and having the up event cancel us\n  if (!DDManager.dragElement) {\n    // console.log('pointerleave ignored');\n    return;\n  }\n  if (e.pointerType === 'mouse') return;\n  DDTouch.pointerLeaveTimeout = window.setTimeout(() => {\n    delete DDTouch.pointerLeaveTimeout;\n    // console.log('pointerleave delayed');\n    simulatePointerMouseEvent(e, 'mouseleave');\n  }, 10);\n}\n\n", "/**\n * dd-resizable-handle.ts 12.1.1\n * Copyright (c) 2021-2024  Alain Dumesny - see GridStack root license\n */\n\nimport { isTouch, pointerdown, touchend, touchmove, touchstart } from './dd-touch';\nimport { GridItemHTMLElement } from './gridstack';\n\nexport interface DDResizableHandleOpt {\n  start?: (event) => void;\n  move?: (event) => void;\n  stop?: (event) => void;\n}\n\nexport class DDResizableHandle {\n  /** @internal */\n  protected el: HTMLElement;\n  /** @internal true after we've moved enough pixels to start a resize */\n  protected moving = false;\n  /** @internal */\n  protected mouseDownEvent: MouseEvent;\n  /** @internal */\n  protected static prefix = 'ui-resizable-';\n\n  constructor(protected host: GridItemHTMLElement, protected dir: string, protected option: DDResizableHandleOpt) {\n    // create var event binding so we can easily remove and still look like TS methods (unlike anonymous functions)\n    this._mouseDown = this._mouseDown.bind(this);\n    this._mouseMove = this._mouseMove.bind(this);\n    this._mouseUp = this._mouseUp.bind(this);\n    this._keyEvent = this._keyEvent.bind(this);\n\n    this._init();\n  }\n\n  /** @internal */\n  protected _init(): DDResizableHandle {\n    const el = this.el = document.createElement('div');\n    el.classList.add('ui-resizable-handle');\n    el.classList.add(`${DDResizableHandle.prefix}${this.dir}`);\n    el.style.zIndex = '100';\n    el.style.userSelect = 'none';\n    this.host.appendChild(this.el);\n    this.el.addEventListener('mousedown', this._mouseDown);\n    if (isTouch) {\n      this.el.addEventListener('touchstart', touchstart);\n      this.el.addEventListener('pointerdown', pointerdown);\n      // this.el.style.touchAction = 'none'; // not needed unlike pointerdown doc comment\n    }\n    return this;\n  }\n\n  /** call this when resize handle needs to be removed and cleaned up */\n  public destroy(): DDResizableHandle {\n    if (this.moving) this._mouseUp(this.mouseDownEvent);\n    this.el.removeEventListener('mousedown', this._mouseDown);\n    if (isTouch) {\n      this.el.removeEventListener('touchstart', touchstart);\n      this.el.removeEventListener('pointerdown', pointerdown);\n    }\n    this.host.removeChild(this.el);\n    delete this.el;\n    delete this.host;\n    return this;\n  }\n\n  /** @internal called on mouse down on us: capture move on the entire document (mouse might not stay on us) until we release the mouse */\n  protected _mouseDown(e: MouseEvent): void {\n    this.mouseDownEvent = e;\n    document.addEventListener('mousemove', this._mouseMove, { capture: true, passive: true}); // capture, not bubble\n    document.addEventListener('mouseup', this._mouseUp, true);\n    if (isTouch) {\n      this.el.addEventListener('touchmove', touchmove);\n      this.el.addEventListener('touchend', touchend);\n    }\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  /** @internal */\n  protected _mouseMove(e: MouseEvent): void {\n    const s = this.mouseDownEvent;\n    if (this.moving) {\n      this._triggerEvent('move', e);\n    } else if (Math.abs(e.x - s.x) + Math.abs(e.y - s.y) > 2) {\n      // don't start unless we've moved at least 3 pixels\n      this.moving = true;\n      this._triggerEvent('start', this.mouseDownEvent);\n      this._triggerEvent('move', e);\n      // now track keyboard events to cancel\n      document.addEventListener('keydown', this._keyEvent);\n    }\n    e.stopPropagation();\n    // e.preventDefault(); passive = true\n  }\n\n  /** @internal */\n  protected _mouseUp(e: MouseEvent): void {\n    if (this.moving) {\n      this._triggerEvent('stop', e);\n      document.removeEventListener('keydown', this._keyEvent);\n    }\n    document.removeEventListener('mousemove', this._mouseMove, true);\n    document.removeEventListener('mouseup', this._mouseUp, true);\n    if (isTouch) {\n      this.el.removeEventListener('touchmove', touchmove);\n      this.el.removeEventListener('touchend', touchend);\n    }\n    delete this.moving;\n    delete this.mouseDownEvent;\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  /** @internal call when keys are being pressed - use Esc to cancel */\n  protected _keyEvent(e: KeyboardEvent): void {\n    if (e.key === 'Escape') {\n      this.host.gridstackNode?.grid?.engine.restoreInitial();\n      this._mouseUp(this.mouseDownEvent);\n    }\n  }\n\n\n\n  /** @internal */\n  protected _triggerEvent(name: string, event: MouseEvent): DDResizableHandle {\n    if (this.option[name]) this.option[name](event);\n    return this;\n  }\n}\n", "/**\n * dd-base-impl.ts 12.1.1\n * Copyright (c) 2021-2024  Alain Dumesny - see GridStack root license\n */\n\nexport type EventCallback = (event: Event) => boolean|void;\nexport abstract class DDBaseImplement {\n  /** returns the enable state, but you have to call enable()/disable() to change (as other things need to happen) */\n  public get disabled(): boolean   { return this._disabled; }\n\n  /** @internal */\n  protected _disabled: boolean; // initial state to differentiate from false\n  /** @internal */\n  protected _eventRegister: {\n    [eventName: string]: EventCallback;\n  } = {};\n\n  public on(event: string, callback: EventCallback): void {\n    this._eventRegister[event] = callback;\n  }\n\n  public off(event: string): void {\n    delete this._eventRegister[event];\n  }\n\n  public enable(): void {\n    this._disabled = false;\n  }\n\n  public disable(): void {\n    this._disabled = true;\n  }\n\n  public destroy(): void {\n    delete this._eventRegister;\n  }\n\n  public triggerEvent(eventName: string, event: Event): boolean|void {\n    if (!this.disabled && this._eventRegister && this._eventRegister[eventName])\n      return this._eventRegister[eventName](event);\n  }\n}\n\nexport interface HTMLElementExtendOpt<T> {\n  el: HTMLElement;\n  option: T;\n  updateOption(T): DDBaseImplement;\n}\n", "/**\n * dd-resizable.ts 12.1.1\n * Copyright (c) 2021-2024  Alain Dumesny - see GridStack root license\n */\n\nimport { DDResizableHandle } from './dd-resizable-handle';\nimport { DDBaseImplement, HTMLElementExtendOpt } from './dd-base-impl';\nimport { Utils } from './utils';\nimport { DDUIData, GridItemHTMLElement, Rect, Size } from './types';\nimport { DDManager } from './dd-manager';\n\n// import { GridItemHTMLElement } from './types'; let count = 0; // TEST\n\n// TODO: merge with DDDragOpt\nexport interface DDResizableOpt {\n  autoHide?: boolean;\n  handles?: string;\n  maxHeight?: number;\n  maxHeightMoveUp?: number;\n  maxWidth?: number;\n  maxWidthMoveLeft?: number;\n  minHeight?: number;\n  minWidth?: number;\n  start?: (event: Event, ui: DDUIData) => void;\n  stop?: (event: Event) => void;\n  resize?: (event: Event, ui: DDUIData) => void;\n}\n\ninterface RectScaleReciprocal {\n  x: number;\n  y: number;\n}\n\nexport class DDResizable extends DDBaseImplement implements HTMLElementExtendOpt<DDResizableOpt> {\n  /** @internal */\n  protected handlers: DDResizableHandle[];\n  /** @internal */\n  protected originalRect: Rect;\n  /** @internal */\n  protected rectScale: RectScaleReciprocal = { x: 1, y: 1 };\n  /** @internal */\n  protected temporalRect: Rect;\n  /** @internal */\n  protected scrollY: number;\n  /** @internal */\n  protected scrolled: number;\n  /** @internal */\n  protected scrollEl: HTMLElement;\n  /** @internal */\n  protected startEvent: MouseEvent;\n  /** @internal value saved in the same order as _originStyleProp[] */\n  protected elOriginStyleVal: string[];\n  /** @internal */\n  protected parentOriginStylePosition: string;\n  /** @internal */\n  protected static _originStyleProp = ['width', 'height', 'position', 'left', 'top', 'opacity', 'zIndex'];\n  /** @internal */\n  protected sizeToContent: boolean;\n\n  // have to be public else complains for HTMLElementExtendOpt ?\n  constructor(public el: GridItemHTMLElement, public option: DDResizableOpt = {}) {\n    super();\n    // create var event binding so we can easily remove and still look like TS methods (unlike anonymous functions)\n    this._mouseOver = this._mouseOver.bind(this);\n    this._mouseOut = this._mouseOut.bind(this);\n    this.enable();\n    this._setupAutoHide(this.option.autoHide);\n    this._setupHandlers();\n  }\n\n  public on(event: 'resizestart' | 'resize' | 'resizestop', callback: (event: DragEvent) => void): void {\n    super.on(event, callback);\n  }\n\n  public off(event: 'resizestart' | 'resize' | 'resizestop'): void {\n    super.off(event);\n  }\n\n  public enable(): void {\n    super.enable();\n    this.el.classList.remove('ui-resizable-disabled');\n    this._setupAutoHide(this.option.autoHide);\n  }\n\n  public disable(): void {\n    super.disable();\n    this.el.classList.add('ui-resizable-disabled');\n    this._setupAutoHide(false);\n  }\n\n  public destroy(): void {\n    this._removeHandlers();\n    this._setupAutoHide(false);\n    delete this.el;\n    super.destroy();\n  }\n\n  public updateOption(opts: DDResizableOpt): DDResizable {\n    const updateHandles = (opts.handles && opts.handles !== this.option.handles);\n    const updateAutoHide = (opts.autoHide && opts.autoHide !== this.option.autoHide);\n    Object.keys(opts).forEach(key => this.option[key] = opts[key]);\n    if (updateHandles) {\n      this._removeHandlers();\n      this._setupHandlers();\n    }\n    if (updateAutoHide) {\n      this._setupAutoHide(this.option.autoHide);\n    }\n    return this;\n  }\n\n  /** @internal turns auto hide on/off */\n  protected _setupAutoHide(auto: boolean): DDResizable {\n    if (auto) {\n      this.el.classList.add('ui-resizable-autohide');\n      // use mouseover and not mouseenter to get better performance and track for nested cases\n      this.el.addEventListener('mouseover', this._mouseOver);\n      this.el.addEventListener('mouseout', this._mouseOut);\n    } else {\n      this.el.classList.remove('ui-resizable-autohide');\n      this.el.removeEventListener('mouseover', this._mouseOver);\n      this.el.removeEventListener('mouseout', this._mouseOut);\n      if (DDManager.overResizeElement === this) {\n        delete DDManager.overResizeElement;\n      }\n    }\n    return this;\n  }\n\n  /** @internal */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected _mouseOver(e: Event): void {\n    // console.log(`${count++} pre-enter ${(this.el as GridItemHTMLElement).gridstackNode._id}`)\n    // already over a child, ignore. Ideally we just call e.stopPropagation() but see https://github.com/gridstack/gridstack.js/issues/2018\n    if (DDManager.overResizeElement || DDManager.dragElement) return;\n    DDManager.overResizeElement = this;\n    // console.log(`${count++} enter ${(this.el as GridItemHTMLElement).gridstackNode._id}`)\n    this.el.classList.remove('ui-resizable-autohide');\n  }\n\n  /** @internal */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  protected _mouseOut(e: Event): void {\n    // console.log(`${count++} pre-leave ${(this.el as GridItemHTMLElement).gridstackNode._id}`)\n    if (DDManager.overResizeElement !== this) return;\n    delete DDManager.overResizeElement;\n    // console.log(`${count++} leave ${(this.el as GridItemHTMLElement).gridstackNode._id}`)\n    this.el.classList.add('ui-resizable-autohide');\n  }\n\n  /** @internal */\n  protected _setupHandlers(): DDResizable {\n    this.handlers = this.option.handles.split(',')\n      .map(dir => dir.trim())\n      .map(dir => new DDResizableHandle(this.el, dir, {\n        start: (event: MouseEvent) => {\n          this._resizeStart(event);\n        },\n        stop: (event: MouseEvent) => {\n          this._resizeStop(event);\n        },\n        move: (event: MouseEvent) => {\n          this._resizing(event, dir);\n        }\n      }));\n    return this;\n  }\n\n  /** @internal */\n  protected _resizeStart(event: MouseEvent): DDResizable {\n    this.sizeToContent = Utils.shouldSizeToContent(this.el.gridstackNode, true); // strick true only and not number\n    this.originalRect = this.el.getBoundingClientRect();\n    this.scrollEl = Utils.getScrollElement(this.el);\n    this.scrollY = this.scrollEl.scrollTop;\n    this.scrolled = 0;\n    this.startEvent = event;\n    this._setupHelper();\n    this._applyChange();\n    const ev = Utils.initEvent<MouseEvent>(event, { type: 'resizestart', target: this.el });\n    if (this.option.start) {\n      this.option.start(ev, this._ui());\n    }\n    this.el.classList.add('ui-resizable-resizing');\n    this.triggerEvent('resizestart', ev);\n    return this;\n  }\n\n  /** @internal */\n  protected _resizing(event: MouseEvent, dir: string): DDResizable {\n    this.scrolled = this.scrollEl.scrollTop - this.scrollY;\n    this.temporalRect = this._getChange(event, dir);\n    this._applyChange();\n    const ev = Utils.initEvent<MouseEvent>(event, { type: 'resize', target: this.el });\n    if (this.option.resize) {\n      this.option.resize(ev, this._ui());\n    }\n    this.triggerEvent('resize', ev);\n    return this;\n  }\n\n  /** @internal */\n  protected _resizeStop(event: MouseEvent): DDResizable {\n    const ev = Utils.initEvent<MouseEvent>(event, { type: 'resizestop', target: this.el });\n    // Remove style attr now, so the stop handler can rebuild style attrs\n    this._cleanHelper();\n    if (this.option.stop) {\n      this.option.stop(ev); // Note: ui() not used by gridstack so don't pass\n    }\n    this.el.classList.remove('ui-resizable-resizing');\n    this.triggerEvent('resizestop', ev);\n    delete this.startEvent;\n    delete this.originalRect;\n    delete this.temporalRect;\n    delete this.scrollY;\n    delete this.scrolled;\n    return this;\n  }\n\n  /** @internal */\n  protected _setupHelper(): DDResizable {\n    this.elOriginStyleVal = DDResizable._originStyleProp.map(prop => this.el.style[prop]);\n    this.parentOriginStylePosition = this.el.parentElement.style.position;\n\n    const parent = this.el.parentElement;\n    const dragTransform = Utils.getValuesFromTransformedElement(parent);\n    this.rectScale = {\n      x: dragTransform.xScale,\n      y: dragTransform.yScale\n    };\n\n    if (getComputedStyle(this.el.parentElement).position.match(/static/)) {\n      this.el.parentElement.style.position = 'relative';\n    }\n    this.el.style.position = 'absolute';\n    this.el.style.opacity = '0.8';\n    return this;\n  }\n\n  /** @internal */\n  protected _cleanHelper(): DDResizable {\n    DDResizable._originStyleProp.forEach((prop, i) => {\n      this.el.style[prop] = this.elOriginStyleVal[i] || null;\n    });\n    this.el.parentElement.style.position = this.parentOriginStylePosition || null;\n    return this;\n  }\n\n  /** @internal */\n  protected _getChange(event: MouseEvent, dir: string): Rect {\n    const oEvent = this.startEvent;\n    const newRect = { // Note: originalRect is a complex object, not a simple Rect, so copy out.\n      width: this.originalRect.width,\n      height: this.originalRect.height + this.scrolled,\n      left: this.originalRect.left,\n      top: this.originalRect.top - this.scrolled\n    };\n\n    const offsetX = event.clientX - oEvent.clientX;\n    const offsetY = this.sizeToContent ? 0 : event.clientY - oEvent.clientY; // prevent vert resize\n    let moveLeft: boolean;\n    let moveUp: boolean;\n\n    if (dir.indexOf('e') > -1) {\n      newRect.width += offsetX;\n    } else if (dir.indexOf('w') > -1) {\n      newRect.width -= offsetX;\n      newRect.left += offsetX;\n      moveLeft = true;\n    }\n    if (dir.indexOf('s') > -1) {\n      newRect.height += offsetY;\n    } else if (dir.indexOf('n') > -1) {\n      newRect.height -= offsetY;\n      newRect.top += offsetY\n      moveUp = true;\n    }\n    const constrain = this._constrainSize(newRect.width, newRect.height, moveLeft, moveUp);\n    if (Math.round(newRect.width) !== Math.round(constrain.width)) { // round to ignore slight round-off errors\n      if (dir.indexOf('w') > -1) {\n        newRect.left += newRect.width - constrain.width;\n      }\n      newRect.width = constrain.width;\n    }\n    if (Math.round(newRect.height) !== Math.round(constrain.height)) {\n      if (dir.indexOf('n') > -1) {\n        newRect.top += newRect.height - constrain.height;\n      }\n      newRect.height = constrain.height;\n    }\n    return newRect;\n  }\n\n  /** @internal constrain the size to the set min/max values */\n  protected _constrainSize(oWidth: number, oHeight: number, moveLeft: boolean, moveUp: boolean): Size {\n    const o = this.option;\n    const maxWidth = (moveLeft ? o.maxWidthMoveLeft : o.maxWidth) || Number.MAX_SAFE_INTEGER;\n    const minWidth = o.minWidth / this.rectScale.x || oWidth;\n    const maxHeight = (moveUp ? o.maxHeightMoveUp : o.maxHeight) || Number.MAX_SAFE_INTEGER;\n    const minHeight = o.minHeight / this.rectScale.y || oHeight;\n    const width = Math.min(maxWidth, Math.max(minWidth, oWidth));\n    const height = Math.min(maxHeight, Math.max(minHeight, oHeight));\n    return { width, height };\n  }\n\n  /** @internal */\n  protected _applyChange(): DDResizable {\n    let containmentRect = { left: 0, top: 0, width: 0, height: 0 };\n    if (this.el.style.position === 'absolute') {\n      const containmentEl = this.el.parentElement;\n      const { left, top } = containmentEl.getBoundingClientRect();\n      containmentRect = { left, top, width: 0, height: 0 };\n    }\n    if (!this.temporalRect) return this;\n    Object.keys(this.temporalRect).forEach(key => {\n      const value = this.temporalRect[key];\n      const scaleReciprocal = key === 'width' || key === 'left' ? this.rectScale.x : key === 'height' || key === 'top' ? this.rectScale.y : 1;\n      this.el.style[key] = (value - containmentRect[key]) * scaleReciprocal + 'px';\n    });\n    return this;\n  }\n\n  /** @internal */\n  protected _removeHandlers(): DDResizable {\n    this.handlers.forEach(handle => handle.destroy());\n    delete this.handlers;\n    return this;\n  }\n\n  /** @internal */\n  protected _ui = (): DDUIData => {\n    const containmentEl = this.el.parentElement;\n    const containmentRect = containmentEl.getBoundingClientRect();\n    const newRect = { // Note: originalRect is a complex object, not a simple Rect, so copy out.\n      width: this.originalRect.width,\n      height: this.originalRect.height + this.scrolled,\n      left: this.originalRect.left,\n      top: this.originalRect.top - this.scrolled\n    };\n    const rect = this.temporalRect || newRect;\n    return {\n      position: {\n        left: (rect.left - containmentRect.left) * this.rectScale.x,\n        top: (rect.top - containmentRect.top) * this.rectScale.y\n      },\n      size: {\n        width: rect.width * this.rectScale.x,\n        height: rect.height * this.rectScale.y\n      }\n      /* Gridstack ONLY needs position set above... keep around in case.\n      element: [this.el], // The object representing the element to be resized\n      helper: [], // TODO: not support yet - The object representing the helper that's being resized\n      originalElement: [this.el],// we don't wrap here, so simplify as this.el //The object representing the original element before it is wrapped\n      originalPosition: { // The position represented as { left, top } before the resizable is resized\n        left: this.originalRect.left - containmentRect.left,\n        top: this.originalRect.top - containmentRect.top\n      },\n      originalSize: { // The size represented as { width, height } before the resizable is resized\n        width: this.originalRect.width,\n        height: this.originalRect.height\n      }\n      */\n    };\n  }\n}\n", "/**\n * dd-draggable.ts 12.1.1\n * Copyright (c) 2021-2024  Alain Dumesny - see GridStack root license\n */\n\nimport { DDManager } from './dd-manager';\nimport { DragTransform, Utils } from './utils';\nimport { DDBaseImplement, HTMLElementExtendOpt } from './dd-base-impl';\nimport { GridItemHTMLElement, DDUIData, GridStackNode, GridStackPosition, DDDragOpt } from './types';\nimport { DDElementHost } from './dd-element';\nimport { isTouch, touchend, touchmove, touchstart, pointerdown } from './dd-touch';\nimport { GridHTMLElement } from './gridstack';\n\ninterface DragOffset {\n  left: number;\n  top: number;\n  width: number;\n  height: number;\n  offsetLeft: number;\n  offsetTop: number;\n}\n\ninterface GridStackNodeRotate extends GridStackNode {\n  _origRotate?: GridStackPosition;\n}\n\ntype DDDragEvent = 'drag' | 'dragstart' | 'dragstop';\n\n// make sure we are not clicking on known object that handles mouseDown\nconst skipMouseDown = 'input,textarea,button,select,option,[contenteditable=\"true\"],.ui-resizable-handle';\n\n// let count = 0; // TEST\n\nexport class DDDraggable extends DDBaseImplement implements HTMLElementExtendOpt<DDDragOpt> {\n  public helper: HTMLElement; // used by GridStackDDNative\n\n  /** @internal */\n  protected mouseDownEvent: MouseEvent;\n  /** @internal */\n  protected dragOffset: DragOffset;\n  /** @internal */\n  protected dragElementOriginStyle: Array<string>;\n  /** @internal */\n  protected dragEls: HTMLElement[];\n  /** @internal true while we are dragging an item around */\n  protected dragging: boolean;\n  /** @internal last drag event */\n  protected lastDrag: DragEvent;\n  /** @internal */\n  protected parentOriginStylePosition: string;\n  /** @internal */\n  protected helperContainment: HTMLElement;\n  /** @internal properties we change during dragging, and restore back */\n  protected static originStyleProp = ['width', 'height', 'transform', 'transform-origin', 'transition', 'pointerEvents', 'position', 'left', 'top', 'minWidth', 'willChange'];\n  /** @internal pause before we call the actual drag hit collision code */\n  protected dragTimeout: number;\n  /** @internal */\n  protected dragTransform: DragTransform = {\n    xScale: 1,\n    yScale: 1,\n    xOffset: 0,\n    yOffset: 0\n  };\n\n  constructor(public el: GridItemHTMLElement, public option: DDDragOpt = {}) {\n    super();\n\n    // get the element that is actually supposed to be dragged by\n    const handleName = option?.handle?.substring(1);\n    const n = el.gridstackNode;\n    this.dragEls = !handleName || el.classList.contains(handleName) ? [el] : (n?.subGrid ? [el.querySelector(option.handle) || el] : Array.from(el.querySelectorAll(option.handle)));\n    if (this.dragEls.length === 0) {\n      this.dragEls = [el];\n    }\n    // create var event binding so we can easily remove and still look like TS methods (unlike anonymous functions)\n    this._mouseDown = this._mouseDown.bind(this);\n    this._mouseMove = this._mouseMove.bind(this);\n    this._mouseUp = this._mouseUp.bind(this);\n    this._keyEvent = this._keyEvent.bind(this);\n    this.enable();\n  }\n\n  public on(event: DDDragEvent, callback: (event: DragEvent) => void): void {\n    super.on(event, callback);\n  }\n\n  public off(event: DDDragEvent): void {\n    super.off(event);\n  }\n\n  public enable(): void {\n    if (this.disabled === false) return;\n    super.enable();\n    this.dragEls.forEach(dragEl => {\n      dragEl.addEventListener('mousedown', this._mouseDown);\n      if (isTouch) {\n        dragEl.addEventListener('touchstart', touchstart);\n        dragEl.addEventListener('pointerdown', pointerdown);\n        // dragEl.style.touchAction = 'none'; // not needed unlike pointerdown doc comment\n      }\n    });\n    this.el.classList.remove('ui-draggable-disabled');\n  }\n\n  public disable(forDestroy = false): void {\n    if (this.disabled === true) return;\n    super.disable();\n    this.dragEls.forEach(dragEl => {\n      dragEl.removeEventListener('mousedown', this._mouseDown);\n      if (isTouch) {\n        dragEl.removeEventListener('touchstart', touchstart);\n        dragEl.removeEventListener('pointerdown', pointerdown);\n      }\n    });\n    if (!forDestroy) this.el.classList.add('ui-draggable-disabled');\n  }\n\n  public destroy(): void {\n    if (this.dragTimeout) window.clearTimeout(this.dragTimeout);\n    delete this.dragTimeout;\n    if (this.mouseDownEvent) this._mouseUp(this.mouseDownEvent);\n    this.disable(true);\n    delete this.el;\n    delete this.helper;\n    delete this.option;\n    super.destroy();\n  }\n\n  public updateOption(opts: DDDragOpt): DDDraggable {\n    Object.keys(opts).forEach(key => this.option[key] = opts[key]);\n    return this;\n  }\n\n  /** @internal call when mouse goes down before a dragstart happens */\n  protected _mouseDown(e: MouseEvent): boolean {\n    // don't let more than one widget handle mouseStart\n    if (DDManager.mouseHandled) return;\n    if (e.button !== 0) return true; // only left click\n\n    // make sure we are not clicking on known object that handles mouseDown, or ones supplied by the user\n    if (!this.dragEls.find(el => el === e.target) && (e.target as HTMLElement).closest(skipMouseDown)) return true;\n    if (this.option.cancel) {\n      if ((e.target as HTMLElement).closest(this.option.cancel)) return true;\n    }\n\n    this.mouseDownEvent = e;\n    delete this.dragging;\n    delete DDManager.dragElement;\n    delete DDManager.dropElement;\n    // document handler so we can continue receiving moves as the item is 'fixed' position, and capture=true so WE get a first crack\n    document.addEventListener('mousemove', this._mouseMove, { capture: true, passive: true }); // true=capture, not bubble\n    document.addEventListener('mouseup', this._mouseUp, true);\n    if (isTouch) {\n      e.currentTarget.addEventListener('touchmove', touchmove);\n      e.currentTarget.addEventListener('touchend', touchend);\n    }\n\n    e.preventDefault();\n    // preventDefault() prevents blur event which occurs just after mousedown event.\n    // if an editable content has focus, then blur must be call\n    if (document.activeElement) (document.activeElement as HTMLElement).blur();\n\n    DDManager.mouseHandled = true;\n    return true;\n  }\n\n  /** @internal method to call actual drag event */\n  protected _callDrag(e: DragEvent): void {\n    if (!this.dragging) return;\n    const ev = Utils.initEvent<DragEvent>(e, { target: this.el, type: 'drag' });\n    if (this.option.drag) {\n      this.option.drag(ev, this.ui());\n    }\n    this.triggerEvent('drag', ev);\n  }\n\n  /** @internal called when the main page (after successful mousedown) receives a move event to drag the item around the screen */\n  protected _mouseMove(e: DragEvent): boolean {\n    // console.log(`${count++} move ${e.x},${e.y}`)\n    const s = this.mouseDownEvent;\n    this.lastDrag = e;\n\n    if (this.dragging) {\n      this._dragFollow(e);\n      // delay actual grid handling drag until we pause for a while if set\n      if (DDManager.pauseDrag) {\n        const pause = Number.isInteger(DDManager.pauseDrag) ? DDManager.pauseDrag as number : 100;\n        if (this.dragTimeout) window.clearTimeout(this.dragTimeout);\n        this.dragTimeout = window.setTimeout(() => this._callDrag(e), pause);\n      } else {\n        this._callDrag(e);\n      }\n    } else if (Math.abs(e.x - s.x) + Math.abs(e.y - s.y) > 3) {\n      /**\n       * don't start unless we've moved at least 3 pixels\n       */\n      this.dragging = true;\n      DDManager.dragElement = this;\n      // if we're dragging an actual grid item, set the current drop as the grid (to detect enter/leave)\n      const grid = this.el.gridstackNode?.grid;\n      if (grid) {\n        DDManager.dropElement = (grid.el as DDElementHost).ddElement.ddDroppable;\n      } else {\n        delete DDManager.dropElement;\n      }\n      this.helper = this._createHelper();\n      this._setupHelperContainmentStyle();\n      this.dragTransform = Utils.getValuesFromTransformedElement(this.helperContainment);\n      this.dragOffset = this._getDragOffset(e, this.el, this.helperContainment);\n      this._setupHelperStyle(e);\n\n      const ev = Utils.initEvent<DragEvent>(e, { target: this.el, type: 'dragstart' });\n      if (this.option.start) {\n        this.option.start(ev, this.ui());\n      }\n      this.triggerEvent('dragstart', ev);\n      // now track keyboard events to cancel or rotate\n      document.addEventListener('keydown', this._keyEvent);\n    }\n    // e.preventDefault(); // passive = true. OLD: was needed otherwise we get text sweep text selection as we drag around\n    return true;\n  }\n\n  /** @internal call when the mouse gets released to drop the item at current location */\n  protected _mouseUp(e: MouseEvent): void {\n    document.removeEventListener('mousemove', this._mouseMove, true);\n    document.removeEventListener('mouseup', this._mouseUp, true);\n    if (isTouch && e.currentTarget) { // destroy() during nested grid call us again wit fake _mouseUp\n      e.currentTarget.removeEventListener('touchmove', touchmove, true);\n      e.currentTarget.removeEventListener('touchend', touchend, true);\n    }\n    if (this.dragging) {\n      delete this.dragging;\n      delete (this.el.gridstackNode as GridStackNodeRotate)?._origRotate;\n      document.removeEventListener('keydown', this._keyEvent);\n\n      // reset the drop target if dragging over ourself (already parented, just moving during stop callback below)\n      if (DDManager.dropElement?.el === this.el.parentElement) {\n        delete DDManager.dropElement;\n      }\n\n      this.helperContainment.style.position = this.parentOriginStylePosition || null;\n      if (this.helper !== this.el) this.helper.remove(); // hide now\n      this._removeHelperStyle();\n\n      const ev = Utils.initEvent<DragEvent>(e, { target: this.el, type: 'dragstop' });\n      if (this.option.stop) {\n        this.option.stop(ev); // NOTE: destroy() will be called when removing item, so expect NULL ptr after!\n      }\n      this.triggerEvent('dragstop', ev);\n\n      // call the droppable method to receive the item\n      if (DDManager.dropElement) {\n        DDManager.dropElement.drop(e);\n      }\n    }\n    delete this.helper;\n    delete this.mouseDownEvent;\n    delete DDManager.dragElement;\n    delete DDManager.dropElement;\n    delete DDManager.mouseHandled;\n    e.preventDefault();\n  }\n\n  /** @internal call when keys are being pressed - use Esc to cancel, R to rotate */\n  protected _keyEvent(e: KeyboardEvent): void {\n    const n = this.el.gridstackNode as GridStackNodeRotate;\n    const grid = n?.grid || (DDManager.dropElement?.el as GridHTMLElement)?.gridstack;\n\n    if (e.key === 'Escape') {\n      if (n && n._origRotate) {\n        n._orig = n._origRotate;\n        delete n._origRotate;\n      }\n      grid?.cancelDrag();\n      this._mouseUp(this.mouseDownEvent);\n    } else if (n && grid && (e.key === 'r' || e.key === 'R')) {\n      if (!Utils.canBeRotated(n)) return;\n      n._origRotate = n._origRotate || { ...n._orig }; // store the real orig size in case we Esc after doing rotation\n      delete n._moving; // force rotate to happen (move waits for >50% coverage otherwise)\n      grid.setAnimation(false) // immediate rotate so _getDragOffset() gets the right dom size below\n        .rotate(n.el, { top: -this.dragOffset.offsetTop, left: -this.dragOffset.offsetLeft })\n        .setAnimation();\n      n._moving = true;\n      this.dragOffset = this._getDragOffset(this.lastDrag, n.el, this.helperContainment);\n      this.helper.style.width = this.dragOffset.width + 'px';\n      this.helper.style.height = this.dragOffset.height + 'px';\n      Utils.swap(n._orig, 'w', 'h');\n      delete n._rect;\n      this._mouseMove(this.lastDrag);\n    }\n  }\n\n  /** @internal create a clone copy (or user defined method) of the original drag item if set */\n  protected _createHelper(): HTMLElement {\n    let helper = this.el;\n    if (typeof this.option.helper === 'function') {\n      helper = this.option.helper(this.el);\n    } else if (this.option.helper === 'clone') {\n      helper = Utils.cloneNode(this.el);\n    }\n    if (!helper.parentElement) {\n      Utils.appendTo(helper, this.option.appendTo === 'parent' ? this.el.parentElement : this.option.appendTo);\n    }\n    this.dragElementOriginStyle = DDDraggable.originStyleProp.map(prop => this.el.style[prop]);\n    return helper;\n  }\n\n  /** @internal set the fix position of the dragged item */\n  protected _setupHelperStyle(e: DragEvent): DDDraggable {\n    this.helper.classList.add('ui-draggable-dragging');\n    // TODO: set all at once with style.cssText += ... ? https://stackoverflow.com/questions/3968593\n    const style = this.helper.style;\n    style.pointerEvents = 'none'; // needed for over items to get enter/leave\n    // style.cursor = 'move'; //  TODO: can't set with pointerEvents=none ! (done in CSS as well)\n    style.width = this.dragOffset.width + 'px';\n    style.height = this.dragOffset.height + 'px';\n    style.willChange = 'left, top';\n    style.position = 'fixed'; // let us drag between grids by not clipping as parent .grid-stack is position: 'relative'\n    this._dragFollow(e); // now position it\n    style.transition = 'none'; // show up instantly\n    setTimeout(() => {\n      if (this.helper) {\n        style.transition = null; // recover animation\n      }\n    }, 0);\n    return this;\n  }\n\n  /** @internal restore back the original style before dragging */\n  protected _removeHelperStyle(): DDDraggable {\n    this.helper.classList.remove('ui-draggable-dragging');\n    const node = (this.helper as GridItemHTMLElement)?.gridstackNode;\n    // don't bother restoring styles if we're gonna remove anyway...\n    if (!node?._isAboutToRemove && this.dragElementOriginStyle) {\n      const helper = this.helper;\n      // don't animate, otherwise we animate offseted when switching back to 'absolute' from 'fixed'.\n      // TODO: this also removes resizing animation which doesn't have this issue, but others.\n      // Ideally both would animate ('move' would immediately restore 'absolute' and adjust coordinate to match,\n      // then trigger a delay (repaint) to restore to final dest with animate) but then we need to make sure 'resizestop'\n      // is called AFTER 'transitionend' event is received (see https://github.com/gridstack/gridstack.js/issues/2033)\n      const transition = this.dragElementOriginStyle['transition'] || null;\n      helper.style.transition = this.dragElementOriginStyle['transition'] = 'none'; // can't be NULL #1973\n      DDDraggable.originStyleProp.forEach(prop => helper.style[prop] = this.dragElementOriginStyle[prop] || null);\n      setTimeout(() => helper.style.transition = transition, 50); // recover animation from saved vars after a pause (0 isn't enough #1973)\n    }\n    delete this.dragElementOriginStyle;\n    return this;\n  }\n\n  /** @internal updates the top/left position to follow the mouse */\n  protected _dragFollow(e: DragEvent): void {\n    const containmentRect = { left: 0, top: 0 };\n    // if (this.helper.style.position === 'absolute') { // we use 'fixed'\n    //   const { left, top } = this.helperContainment.getBoundingClientRect();\n    //   containmentRect = { left, top };\n    // }\n    const style = this.helper.style;\n    const offset = this.dragOffset;\n    style.left = (e.clientX + offset.offsetLeft - containmentRect.left) * this.dragTransform.xScale + 'px';\n    style.top = (e.clientY + offset.offsetTop - containmentRect.top) * this.dragTransform.yScale + 'px';\n  }\n\n  /** @internal */\n  protected _setupHelperContainmentStyle(): DDDraggable {\n    this.helperContainment = this.helper.parentElement;\n    if (this.helper.style.position !== 'fixed') {\n      this.parentOriginStylePosition = this.helperContainment.style.position;\n      if (getComputedStyle(this.helperContainment).position.match(/static/)) {\n        this.helperContainment.style.position = 'relative';\n      }\n    }\n    return this;\n  }\n\n  /** @internal */\n  protected _getDragOffset(event: DragEvent, el: HTMLElement, parent: HTMLElement): DragOffset {\n\n    // in case ancestor has transform/perspective css properties that change the viewpoint\n    let xformOffsetX = 0;\n    let xformOffsetY = 0;\n    if (parent) {\n      xformOffsetX = this.dragTransform.xOffset;\n      xformOffsetY = this.dragTransform.yOffset;\n    }\n\n    const targetOffset = el.getBoundingClientRect();\n    return {\n      left: targetOffset.left,\n      top: targetOffset.top,\n      offsetLeft: - event.clientX + targetOffset.left - xformOffsetX,\n      offsetTop: - event.clientY + targetOffset.top - xformOffsetY,\n      width: targetOffset.width * this.dragTransform.xScale,\n      height: targetOffset.height * this.dragTransform.yScale\n    };\n  }\n\n  /** @internal TODO: set to public as called by DDDroppable! */\n  public ui(): DDUIData {\n    const containmentEl = this.el.parentElement;\n    const containmentRect = containmentEl.getBoundingClientRect();\n    const offset = this.helper.getBoundingClientRect();\n    return {\n      position: { //Current CSS position of the helper as { top, left } object\n        top: (offset.top - containmentRect.top) * this.dragTransform.yScale,\n        left: (offset.left - containmentRect.left) * this.dragTransform.xScale\n      }\n      /* not used by GridStack for now...\n      helper: [this.helper], //The object arr representing the helper that's being dragged.\n      offset: { top: offset.top, left: offset.left } // Current offset position of the helper as { top, left } object.\n      */\n    };\n  }\n}\n", "/**\n * dd-droppable.ts 12.1.1\n * Copyright (c) 2021-2024  Alain Dumesny - see GridStack root license\n */\n\nimport { DDDraggable } from './dd-draggable';\nimport { DDManager } from './dd-manager';\nimport { DDBaseImplement, HTMLElementExtendOpt } from './dd-base-impl';\nimport { Utils } from './utils';\nimport { DDElementHost } from './dd-element';\nimport { isTouch, pointerenter, pointerleave } from './dd-touch';\nimport { DDUIData } from './types';\n\nexport interface DDDroppableOpt {\n  accept?: string | ((el: HTMLElement) => boolean);\n  drop?: (event: DragEvent, ui: DDUIData) => void;\n  over?: (event: DragEvent, ui: DDUIData) => void;\n  out?: (event: DragEvent, ui: DDUIData) => void;\n}\n\n// let count = 0; // TEST\n\nexport class DDDroppable extends DDBaseImplement implements HTMLElementExtendOpt<DDDroppableOpt> {\n\n  public accept: (el: HTMLElement) => boolean;\n\n  constructor(public el: HTMLElement, public option: DDDroppableOpt = {}) {\n    super();\n    // create var event binding so we can easily remove and still look like TS methods (unlike anonymous functions)\n    this._mouseEnter = this._mouseEnter.bind(this);\n    this._mouseLeave = this._mouseLeave.bind(this);\n    this.enable();\n    this._setupAccept();\n  }\n\n  public on(event: 'drop' | 'dropover' | 'dropout', callback: (event: DragEvent) => void): void {\n    super.on(event, callback);\n  }\n\n  public off(event: 'drop' | 'dropover' | 'dropout'): void {\n    super.off(event);\n  }\n\n  public enable(): void {\n    if (this.disabled === false) return;\n    super.enable();\n    this.el.classList.add('ui-droppable');\n    this.el.classList.remove('ui-droppable-disabled');\n    this.el.addEventListener('mouseenter', this._mouseEnter);\n    this.el.addEventListener('mouseleave', this._mouseLeave);\n    if (isTouch) {\n      this.el.addEventListener('pointerenter', pointerenter);\n      this.el.addEventListener('pointerleave', pointerleave);\n    }\n  }\n\n  public disable(forDestroy = false): void {\n    if (this.disabled === true) return;\n    super.disable();\n    this.el.classList.remove('ui-droppable');\n    if (!forDestroy) this.el.classList.add('ui-droppable-disabled');\n    this.el.removeEventListener('mouseenter', this._mouseEnter);\n    this.el.removeEventListener('mouseleave', this._mouseLeave);\n    if (isTouch) {\n      this.el.removeEventListener('pointerenter', pointerenter);\n      this.el.removeEventListener('pointerleave', pointerleave);\n    }\n  }\n\n  public destroy(): void {\n    this.disable(true);\n    this.el.classList.remove('ui-droppable');\n    this.el.classList.remove('ui-droppable-disabled');\n    super.destroy();\n  }\n\n  public updateOption(opts: DDDroppableOpt): DDDroppable {\n    Object.keys(opts).forEach(key => this.option[key] = opts[key]);\n    this._setupAccept();\n    return this;\n  }\n\n  /** @internal called when the cursor enters our area - prepare for a possible drop and track leaving */\n  protected _mouseEnter(e: MouseEvent): void {\n    // console.log(`${count++} Enter ${this.el.id || (this.el as GridHTMLElement).gridstack.opts.id}`); // TEST\n    if (!DDManager.dragElement) return;\n    if (!this._canDrop(DDManager.dragElement.el)) return;\n    e.preventDefault();\n    e.stopPropagation();\n\n    // make sure when we enter this, that the last one gets a leave FIRST to correctly cleanup as we don't always do\n    if (DDManager.dropElement && DDManager.dropElement !== this) {\n      DDManager.dropElement._mouseLeave(e as DragEvent, true); // calledByEnter = true\n    }\n    DDManager.dropElement = this;\n\n    const ev = Utils.initEvent<DragEvent>(e, { target: this.el, type: 'dropover' });\n    if (this.option.over) {\n      this.option.over(ev, this._ui(DDManager.dragElement))\n    }\n    this.triggerEvent('dropover', ev);\n    this.el.classList.add('ui-droppable-over');\n    // console.log('tracking'); // TEST\n  }\n\n  /** @internal called when the item is leaving our area, stop tracking if we had moving item */\n  protected _mouseLeave(e: MouseEvent, calledByEnter = false): void {\n    // console.log(`${count++} Leave ${this.el.id || (this.el as GridHTMLElement).gridstack.opts.id}`); // TEST\n    if (!DDManager.dragElement || DDManager.dropElement !== this) return;\n    e.preventDefault();\n    e.stopPropagation();\n\n    const ev = Utils.initEvent<DragEvent>(e, { target: this.el, type: 'dropout' });\n    if (this.option.out) {\n      this.option.out(ev, this._ui(DDManager.dragElement))\n    }\n    this.triggerEvent('dropout', ev);\n\n    if (DDManager.dropElement === this) {\n      delete DDManager.dropElement;\n      // console.log('not tracking'); // TEST\n\n      // if we're still over a parent droppable, send it an enter as we don't get one from leaving nested children\n      if (!calledByEnter) {\n        let parentDrop: DDDroppable;\n        let parent: DDElementHost = this.el.parentElement;\n        while (!parentDrop && parent) {\n          parentDrop = parent.ddElement?.ddDroppable;\n          parent = parent.parentElement;\n        }\n        if (parentDrop) {\n          parentDrop._mouseEnter(e);\n        }\n      }\n    }\n  }\n\n  /** item is being dropped on us - called by the drag mouseup handler - this calls the client drop event */\n  public drop(e: MouseEvent): void {\n    e.preventDefault();\n    const ev = Utils.initEvent<DragEvent>(e, { target: this.el, type: 'drop' });\n    if (this.option.drop) {\n      this.option.drop(ev, this._ui(DDManager.dragElement))\n    }\n    this.triggerEvent('drop', ev);\n  }\n\n  /** @internal true if element matches the string/method accept option */\n  protected _canDrop(el: HTMLElement): boolean {\n    return el && (!this.accept || this.accept(el));\n  }\n\n  /** @internal */\n  protected _setupAccept(): DDDroppable {\n    if (!this.option.accept) return this;\n    if (typeof this.option.accept === 'string') {\n      this.accept = (el: HTMLElement) => el.classList.contains(this.option.accept as string) || el.matches(this.option.accept as string);\n    } else {\n      this.accept = this.option.accept;\n    }\n    return this;\n  }\n\n  /** @internal */\n  protected _ui(drag: DDDraggable): DDUIData {\n    return {\n      draggable: drag.el,\n      ...drag.ui()\n    };\n  }\n}\n\n", "/**\n * dd-elements.ts 12.1.1\n * Copyright (c) 2021-2024 Alain Dumesny - see GridStack root license\n */\n\nimport { DDResizable, DDResizableOpt } from './dd-resizable';\nimport { DDDragOpt, GridItemHTMLElement } from './types';\nimport { DDDraggable } from './dd-draggable';\nimport { DDDroppable, DDDroppableOpt } from './dd-droppable';\n\nexport interface DDElementHost extends GridItemHTMLElement {\n  ddElement?: DDElement;\n}\n\nexport class DDElement {\n\n  static init(el: DDElementHost): DDElement {\n    if (!el.ddElement) { el.ddElement = new DDElement(el); }\n    return el.ddElement;\n  }\n\n  public ddDraggable?: DDDraggable;\n  public ddDroppable?: DDDroppable;\n  public ddResizable?: DDResizable;\n\n  constructor(public el: DDElementHost) {}\n\n  public on(eventName: string, callback: (event: MouseEvent) => void): DDElement {\n    if (this.ddDraggable && ['drag', 'dragstart', 'dragstop'].indexOf(eventName) > -1) {\n      this.ddDraggable.on(eventName as 'drag' | 'dragstart' | 'dragstop', callback);\n    } else if (this.ddDroppable && ['drop', 'dropover', 'dropout'].indexOf(eventName) > -1) {\n      this.ddDroppable.on(eventName as 'drop' | 'dropover' | 'dropout', callback);\n    } else if (this.ddResizable && ['resizestart', 'resize', 'resizestop'].indexOf(eventName) > -1) {\n      this.ddResizable.on(eventName as 'resizestart' | 'resize' | 'resizestop', callback);\n    }\n    return this;\n  }\n\n  public off(eventName: string): DDElement {\n    if (this.ddDraggable && ['drag', 'dragstart', 'dragstop'].indexOf(eventName) > -1) {\n      this.ddDraggable.off(eventName as 'drag' | 'dragstart' | 'dragstop');\n    } else if (this.ddDroppable && ['drop', 'dropover', 'dropout'].indexOf(eventName) > -1) {\n      this.ddDroppable.off(eventName as 'drop' | 'dropover' | 'dropout');\n    } else if (this.ddResizable && ['resizestart', 'resize', 'resizestop'].indexOf(eventName) > -1) {\n      this.ddResizable.off(eventName as 'resizestart' | 'resize' | 'resizestop');\n    }\n    return this;\n  }\n\n  public setupDraggable(opts: DDDragOpt): DDElement {\n    if (!this.ddDraggable) {\n      this.ddDraggable = new DDDraggable(this.el, opts);\n    } else {\n      this.ddDraggable.updateOption(opts);\n    }\n    return this;\n  }\n\n  public cleanDraggable(): DDElement {\n    if (this.ddDraggable) {\n      this.ddDraggable.destroy();\n      delete this.ddDraggable;\n    }\n    return this;\n  }\n\n  public setupResizable(opts: DDResizableOpt): DDElement {\n    if (!this.ddResizable) {\n      this.ddResizable = new DDResizable(this.el, opts);\n    } else {\n      this.ddResizable.updateOption(opts);\n    }\n    return this;\n  }\n\n  public cleanResizable(): DDElement {\n    if (this.ddResizable) {\n      this.ddResizable.destroy();\n      delete this.ddResizable;\n    }\n    return this;\n  }\n\n  public setupDroppable(opts: DDDroppableOpt): DDElement {\n    if (!this.ddDroppable) {\n      this.ddDroppable = new DDDroppable(this.el, opts);\n    } else {\n      this.ddDroppable.updateOption(opts);\n    }\n    return this;\n  }\n\n  public cleanDroppable(): DDElement {\n    if (this.ddDroppable) {\n      this.ddDroppable.destroy();\n      delete this.ddDroppable;\n    }\n    return this;\n  }\n}\n", "/**\r\n * dd-gridstack.ts 12.1.1\r\n * Copyright (c) 2021-2024 Alain Dumesny - see GridStack root license\r\n */\r\n\r\n/* eslint-disable @typescript-eslint/no-unused-vars */\r\nimport { GridItemHTMLElement, GridStackElement, DDDragOpt } from './types';\r\nimport { Utils } from './utils';\r\nimport { DDManager } from './dd-manager';\r\nimport { DDElement, DDElementHost } from './dd-element';\r\nimport { GridHTMLElement } from './gridstack';\r\n\r\n/** Drag&Drop drop options */\r\nexport type DDDropOpt = {\r\n  /** function or class type that this grid will accept as dropped items (see GridStackOptions.acceptWidgets) */\r\n  accept?: (el: GridItemHTMLElement) => boolean;\r\n}\r\n\r\n/** drag&drop options currently called from the main code, but others can be passed in grid options */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport type DDOpts = 'enable' | 'disable' | 'destroy' | 'option' | string | any;\r\nexport type DDKey = 'minWidth' | 'minHeight' | 'maxWidth' | 'maxHeight' | 'maxHeightMoveUp' | 'maxWidthMoveLeft';\r\nexport type DDValue = number | string;\r\n\r\n/** drag&drop events callbacks */\r\nexport type DDCallback = (event: Event, arg2: GridItemHTMLElement, helper?: GridItemHTMLElement) => void;\r\n\r\n// let count = 0; // TEST\r\n\r\n/**\r\n * HTML Native Mouse and Touch Events Drag and Drop functionality.\r\n */\r\nexport class DDGridStack {\r\n\r\n  public resizable(el: GridItemHTMLElement, opts: DDOpts, key?: DDKey, value?: DDValue): DDGridStack {\r\n    this._getDDElements(el, opts).forEach(dEl => {\r\n      if (opts === 'disable' || opts === 'enable') {\r\n        dEl.ddResizable && dEl.ddResizable[opts](); // can't create DD as it requires options for setupResizable()\r\n      } else if (opts === 'destroy') {\r\n        dEl.ddResizable && dEl.cleanResizable();\r\n      } else if (opts === 'option') {\r\n        dEl.setupResizable({ [key]: value });\r\n      } else {\r\n        const n = dEl.el.gridstackNode;\r\n        const grid = n.grid;\r\n        let handles = dEl.el.getAttribute('gs-resize-handles') || grid.opts.resizable.handles || 'e,s,se';\r\n        if (handles === 'all') handles = 'n,e,s,w,se,sw,ne,nw';\r\n        // NOTE: keep the resize handles as e,w don't have enough space (10px) to show resize corners anyway. limit during drag instead\r\n        // restrict vertical resize if height is done to match content anyway... odd to have it spring back\r\n        // if (Utils.shouldSizeToContent(n, true)) {\r\n        //   const doE = handles.indexOf('e') !== -1;\r\n        //   const doW = handles.indexOf('w') !== -1;\r\n        //   handles = doE ? (doW ? 'e,w' : 'e') : (doW ? 'w' : '');\r\n        // }\r\n        const autoHide = !grid.opts.alwaysShowResizeHandle;\r\n        dEl.setupResizable({\r\n          ...grid.opts.resizable,\r\n          ...{ handles, autoHide },\r\n          ...{\r\n            start: opts.start,\r\n            stop: opts.stop,\r\n            resize: opts.resize\r\n          }\r\n        });\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  public draggable(el: GridItemHTMLElement, opts: DDOpts, key?: DDKey, value?: DDValue): DDGridStack {\r\n    this._getDDElements(el, opts).forEach(dEl => {\r\n      if (opts === 'disable' || opts === 'enable') {\r\n        dEl.ddDraggable && dEl.ddDraggable[opts](); // can't create DD as it requires options for setupDraggable()\r\n      } else if (opts === 'destroy') {\r\n        dEl.ddDraggable && dEl.cleanDraggable();\r\n      } else if (opts === 'option') {\r\n        dEl.setupDraggable({ [key]: value });\r\n      } else {\r\n        const grid = dEl.el.gridstackNode.grid;\r\n        dEl.setupDraggable({\r\n          ...grid.opts.draggable,\r\n          ...{\r\n            // containment: (grid.parentGridNode && grid.opts.dragOut === false) ? grid.el.parentElement : (grid.opts.draggable.containment || null),\r\n            start: opts.start,\r\n            stop: opts.stop,\r\n            drag: opts.drag\r\n          }\r\n        });\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  public dragIn(el: GridStackElement, opts: DDDragOpt): DDGridStack {\r\n    this._getDDElements(el).forEach(dEl => dEl.setupDraggable(opts));\r\n    return this;\r\n  }\r\n\r\n  public droppable(el: GridItemHTMLElement, opts: DDOpts | DDDropOpt, key?: DDKey, value?: DDValue): DDGridStack {\r\n    if (typeof opts.accept === 'function' && !opts._accept) {\r\n      opts._accept = opts.accept;\r\n      opts.accept = (el) => opts._accept(el);\r\n    }\r\n    this._getDDElements(el, opts).forEach(dEl => {\r\n      if (opts === 'disable' || opts === 'enable') {\r\n        dEl.ddDroppable && dEl.ddDroppable[opts]();\r\n      } else if (opts === 'destroy') {\r\n        dEl.ddDroppable && dEl.cleanDroppable();\r\n      } else if (opts === 'option') {\r\n        dEl.setupDroppable({ [key]: value });\r\n      } else {\r\n        dEl.setupDroppable(opts);\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /** true if element is droppable */\r\n  public isDroppable(el: DDElementHost): boolean {\r\n    return !!(el?.ddElement?.ddDroppable && !el.ddElement.ddDroppable.disabled);\r\n  }\r\n\r\n  /** true if element is draggable */\r\n  public isDraggable(el: DDElementHost): boolean {\r\n    return !!(el?.ddElement?.ddDraggable && !el.ddElement.ddDraggable.disabled);\r\n  }\r\n\r\n  /** true if element is draggable */\r\n  public isResizable(el: DDElementHost): boolean {\r\n    return !!(el?.ddElement?.ddResizable && !el.ddElement.ddResizable.disabled);\r\n  }\r\n\r\n  public on(el: GridItemHTMLElement, name: string, callback: DDCallback): DDGridStack {\r\n    this._getDDElements(el).forEach(dEl =>\r\n      dEl.on(name, (event: Event) => {\r\n        callback(\r\n          event,\r\n          DDManager.dragElement ? DDManager.dragElement.el : event.target as GridItemHTMLElement,\r\n          DDManager.dragElement ? DDManager.dragElement.helper : null)\r\n      })\r\n    );\r\n    return this;\r\n  }\r\n\r\n  public off(el: GridItemHTMLElement, name: string): DDGridStack {\r\n    this._getDDElements(el).forEach(dEl => dEl.off(name));\r\n    return this;\r\n  }\r\n\r\n  /** @internal returns a list of DD elements, creating them on the fly by default unless option is to destroy or disable */\r\n  protected _getDDElements(els: GridStackElement, opts?: DDOpts): DDElement[] {\r\n    // don't force create if we're going to destroy it, unless it's a grid which is used as drop target for it's children\r\n    const create = (els as GridHTMLElement).gridstack ||  opts !== 'destroy' && opts !== 'disable';\r\n    const hosts = Utils.getElements(els) as DDElementHost[];\r\n    if (!hosts.length) return [];\r\n    const list = hosts.map(e => e.ddElement || (create ? DDElement.init(e) : null)).filter(d => d); // remove nulls\r\n    return list;\r\n  }\r\n}\r\n", "/*!\r\n * GridStack 12.1.1\r\n * https://gridstackjs.com/\r\n *\r\n * Copyright (c) 2021-2024  Alain Dumesny\r\n * see root license https://github.com/gridstack/gridstack.js/tree/master/LICENSE\r\n */\r\nimport { GridStackEngine } from './gridstack-engine';\r\nimport { Utils, HeightData, obsolete, DragTransform } from './utils';\r\nimport {\r\n  gridDefaults, ColumnOptions, GridItemHTMLElement, GridStackElement, GridStackEventHandlerCallback,\r\n  GridStackNode, GridStackWidget, numberOrString, DDUIData, DDDragOpt, GridStackPosition, GridStackOptions,\r\n  GridStackEventHandler, GridStackNodesHandler, AddRemoveFcn, SaveFcn, CompactOptions, GridStackMoveOpts, ResizeToContentFcn, GridStackDroppedHandler, GridStackElementHandler,\r\n  Position, RenderFcn\r\n} from './types';\r\n\r\n/*\r\n * and include D&D by default\r\n * TODO: while we could generate a gridstack-static.js at smaller size - saves about 31k (41k -> 72k)\r\n * I don't know how to generate the DD only code at the remaining 31k to delay load as code depends on Gridstack.ts\r\n * also it caused loading issues in prod - see https://github.com/gridstack/gridstack.js/issues/2039\r\n */\r\nimport { DDGridStack } from './dd-gridstack';\r\nimport { isTouch } from './dd-touch';\r\nimport { DDManager } from './dd-manager';\r\nimport { DDElementHost } from './dd-element';/** global instance */\r\nconst dd = new DDGridStack;\r\n\r\n// export all dependent file as well to make it easier for users to just import the main file\r\nexport * from './types';\r\nexport * from './utils';\r\nexport * from './gridstack-engine';\r\nexport * from './dd-gridstack';\r\n\r\nexport interface GridHTMLElement extends HTMLElement {\r\n  gridstack?: GridStack; // grid's parent DOM element points back to grid class\r\n}\r\n/** list of possible events, or space separated list of them */\r\nexport type GridStackEvent = 'added' | 'change' | 'disable' | 'drag' | 'dragstart' | 'dragstop' | 'dropped' |\r\n  'enable' | 'removed' | 'resize' | 'resizestart' | 'resizestop' | 'resizecontent';\r\n\r\n/** Defines the coordinates of an object */\r\nexport interface MousePosition {\r\n  top: number;\r\n  left: number;\r\n}\r\n\r\n/** Defines the position of a cell inside the grid*/\r\nexport interface CellPosition {\r\n  x: number;\r\n  y: number;\r\n}\r\n\r\n// extend with internal fields we need - TODO: move other items in here\r\ninterface InternalGridStackOptions extends GridStackOptions {\r\n  _alwaysShowResizeHandle?: true | false | 'mobile'; // so we can restore for save\r\n}\r\n\r\n/**\r\n * Main gridstack class - you will need to call `GridStack.init()` first to initialize your grid.\r\n * Note: your grid elements MUST have the following classes for the CSS layout to work:\r\n * @example\r\n * <div class=\"grid-stack\">\r\n *   <div class=\"grid-stack-item\">\r\n *     <div class=\"grid-stack-item-content\">Item 1</div>\r\n *   </div>\r\n * </div>\r\n */\r\nexport class GridStack {\r\n\r\n  /**\r\n   * initializing the HTML element, or selector string, into a grid will return the grid. Calling it again will\r\n   * simply return the existing instance (ignore any passed options). There is also an initAll() version that support\r\n   * multiple grids initialization at once. Or you can use addGrid() to create the entire grid from JSON.\r\n   * @param options grid options (optional)\r\n   * @param elOrString element or CSS selector (first one used) to convert to a grid (default to '.grid-stack' class selector)\r\n   *\r\n   * @example\r\n   * const grid = GridStack.init();\r\n   *\r\n   * Note: the HTMLElement (of type GridHTMLElement) will store a `gridstack: GridStack` value that can be retrieve later\r\n   * const grid = document.querySelector('.grid-stack').gridstack;\r\n   */\r\n  public static init(options: GridStackOptions = {}, elOrString: GridStackElement = '.grid-stack'): GridStack {\r\n    if (typeof document === 'undefined') return null; // temp workaround SSR\r\n    const el = GridStack.getGridElement(elOrString);\r\n    if (!el) {\r\n      if (typeof elOrString === 'string') {\r\n        console.error('GridStack.initAll() no grid was found with selector \"' + elOrString + '\" - element missing or wrong selector ?' +\r\n          '\\nNote: \".grid-stack\" is required for proper CSS styling and drag/drop, and is the default selector.');\r\n      } else {\r\n        console.error('GridStack.init() no grid element was passed.');\r\n      }\r\n      return null;\r\n    }\r\n    if (!el.gridstack) {\r\n      el.gridstack = new GridStack(el, Utils.cloneDeep(options));\r\n    }\r\n    return el.gridstack\r\n  }\r\n\r\n  /**\r\n   * Will initialize a list of elements (given a selector) and return an array of grids.\r\n   * @param options grid options (optional)\r\n   * @param selector elements selector to convert to grids (default to '.grid-stack' class selector)\r\n   *\r\n   * @example\r\n   * const grids = GridStack.initAll();\r\n   * grids.forEach(...)\r\n   */\r\n  public static initAll(options: GridStackOptions = {}, selector = '.grid-stack'): GridStack[] {\r\n    const grids: GridStack[] = [];\r\n    if (typeof document === 'undefined') return grids; // temp workaround SSR\r\n    GridStack.getGridElements(selector).forEach(el => {\r\n      if (!el.gridstack) {\r\n        el.gridstack = new GridStack(el, Utils.cloneDeep(options));\r\n      }\r\n      grids.push(el.gridstack);\r\n    });\r\n    if (grids.length === 0) {\r\n      console.error('GridStack.initAll() no grid was found with selector \"' + selector + '\" - element missing or wrong selector ?' +\r\n        '\\nNote: \".grid-stack\" is required for proper CSS styling and drag/drop, and is the default selector.');\r\n    }\r\n    return grids;\r\n  }\r\n\r\n  /**\r\n   * call to create a grid with the given options, including loading any children from JSON structure. This will call GridStack.init(), then\r\n   * grid.load() on any passed children (recursively). Great alternative to calling init() if you want entire grid to come from\r\n   * JSON serialized data, including options.\r\n   * @param parent HTML element parent to the grid\r\n   * @param opt grids options used to initialize the grid, and list of children\r\n   */\r\n  public static addGrid(parent: HTMLElement, opt: GridStackOptions = {}): GridStack {\r\n    if (!parent) return null;\r\n\r\n    let el = parent as GridHTMLElement;\r\n    if (el.gridstack) {\r\n      // already a grid - set option and load data\r\n      const grid = el.gridstack;\r\n      if (opt) grid.opts = { ...grid.opts, ...opt };\r\n      if (opt.children !== undefined) grid.load(opt.children);\r\n      return grid;\r\n    }\r\n\r\n    // create the grid element, but check if the passed 'parent' already has grid styling and should be used instead\r\n    const parentIsGrid = parent.classList.contains('grid-stack');\r\n    if (!parentIsGrid || GridStack.addRemoveCB) {\r\n      if (GridStack.addRemoveCB) {\r\n        el = GridStack.addRemoveCB(parent, opt, true, true);\r\n      } else {\r\n        el = Utils.createDiv(['grid-stack', opt.class], parent);\r\n      }\r\n    }\r\n\r\n    // create grid class and load any children\r\n    const grid = GridStack.init(opt, el);\r\n    return grid;\r\n  }\r\n\r\n  /** call this method to register your engine instead of the default one.\r\n   * See instead `GridStackOptions.engineClass` if you only need to\r\n   * replace just one instance.\r\n   */\r\n  static registerEngine(engineClass: typeof GridStackEngine): void {\r\n    GridStack.engineClass = engineClass;\r\n  }\r\n\r\n  /**\r\n   * callback method use when new items|grids needs to be created or deleted, instead of the default\r\n   * item: <div class=\"grid-stack-item\"><div class=\"grid-stack-item-content\">w.content</div></div>\r\n   * grid: <div class=\"grid-stack\">grid content...</div>\r\n   * add = true: the returned DOM element will then be converted to a GridItemHTMLElement using makeWidget()|GridStack:init().\r\n   * add = false: the item will be removed from DOM (if not already done)\r\n   * grid = true|false for grid vs grid-items\r\n   */\r\n  public static addRemoveCB?: AddRemoveFcn;\r\n\r\n  /**\r\n   * callback during saving to application can inject extra data for each widget, on top of the grid layout properties\r\n   */\r\n  public static saveCB?: SaveFcn;\r\n\r\n  /**\r\n   * callback to create the content of widgets so the app can control how to store and restore it\r\n   * By default this lib will do 'el.textContent = w.content' forcing text only support for avoiding potential XSS issues.\r\n   */\r\n  public static renderCB?: RenderFcn = (el: HTMLElement, w: GridStackNode) => { if (el && w?.content) el.textContent = w.content; };\r\n\r\n  /** callback to use for resizeToContent instead of the built in one */\r\n  public static resizeToContentCB?: ResizeToContentFcn;\r\n  /** parent class for sizing content. defaults to '.grid-stack-item-content' */\r\n  public static resizeToContentParent = '.grid-stack-item-content';\r\n\r\n  /** scoping so users can call GridStack.Utils.sort() for example */\r\n  public static Utils = Utils;\r\n\r\n  /** scoping so users can call new GridStack.Engine(12) for example */\r\n  public static Engine = GridStackEngine;\r\n\r\n  /** engine used to implement non DOM grid functionality */\r\n  public engine: GridStackEngine;\r\n\r\n  /** point to a parent grid item if we're nested (inside a grid-item in between 2 Grids) */\r\n  public parentGridNode?: GridStackNode;\r\n\r\n  /** time to wait for animation (if enabled) to be done so content sizing can happen */\r\n  public animationDelay = 300 + 10;\r\n\r\n  protected static engineClass: typeof GridStackEngine;\r\n  protected resizeObserver: ResizeObserver;\r\n\r\n  /** @internal true if we got created by drag over gesture, so we can removed on drag out (temporary) */\r\n  public _isTemp?: boolean;\r\n\r\n  /** @internal create placeholder DIV as needed */\r\n  public get placeholder(): GridItemHTMLElement {\r\n    if (!this._placeholder) {\r\n      this._placeholder = Utils.createDiv([this.opts.placeholderClass, gridDefaults.itemClass, this.opts.itemClass]);\r\n      const placeholderChild = Utils.createDiv(['placeholder-content'], this._placeholder);\r\n      if (this.opts.placeholderText) {\r\n        placeholderChild.textContent = this.opts.placeholderText;\r\n      }\r\n    }\r\n    return this._placeholder;\r\n  }\r\n  /** @internal */\r\n  protected _placeholder: GridItemHTMLElement;\r\n  /** @internal prevent cached layouts from being updated when loading into small column layouts */\r\n  protected _ignoreLayoutsNodeChange: boolean;\r\n  /** @internal */\r\n  public _gsEventHandler = {};\r\n  /** @internal flag to keep cells square during resize */\r\n  protected _isAutoCellHeight: boolean;\r\n  /** @internal limit auto cell resizing method */\r\n  protected _sizeThrottle: () => void;\r\n  /** @internal limit auto cell resizing method */\r\n  protected prevWidth: number;\r\n  /** @internal extra row added when dragging at the bottom of the grid */\r\n  protected _extraDragRow = 0;\r\n  /** @internal true if nested grid should get column count from our width */\r\n  protected _autoColumn?: boolean;\r\n  /** @internal meant to store the scale of the active grid */\r\n  protected dragTransform: DragTransform = { xScale: 1, yScale: 1, xOffset: 0, yOffset: 0 };\r\n  protected responseLayout: ColumnOptions;\r\n  private _skipInitialResize: boolean;\r\n\r\n  /**\r\n   * Construct a grid item from the given element and options\r\n   * @param el the HTML element tied to this grid after it's been initialized\r\n   * @param opts grid options - public for classes to access, but use methods to modify!\r\n   */\r\n  public constructor(public el: GridHTMLElement, public opts: GridStackOptions = {}) {\r\n    el.gridstack = this;\r\n    this.opts = opts = opts || {}; // handles null/undefined/0\r\n\r\n    if (!el.classList.contains('grid-stack')) {\r\n      this.el.classList.add('grid-stack');\r\n    }\r\n\r\n    // if row property exists, replace minRow and maxRow instead\r\n    if (opts.row) {\r\n      opts.minRow = opts.maxRow = opts.row;\r\n      delete opts.row;\r\n    }\r\n    const rowAttr = Utils.toNumber(el.getAttribute('gs-row'));\r\n\r\n    // flag only valid in sub-grids (handled by parent, not here)\r\n    if (opts.column === 'auto') {\r\n      delete opts.column;\r\n    }\r\n    // save original setting so we can restore on save\r\n    if (opts.alwaysShowResizeHandle !== undefined) {\r\n      (opts as InternalGridStackOptions)._alwaysShowResizeHandle = opts.alwaysShowResizeHandle;\r\n    }\r\n\r\n    // cleanup responsive opts (must have columnWidth | breakpoints) then sort breakpoints by size (so we can match during resize)\r\n    const resp = opts.columnOpts;\r\n    if (resp) {\r\n      const bk = resp.breakpoints;\r\n      if (!resp.columnWidth && !bk?.length) {\r\n        delete opts.columnOpts;\r\n      } else {\r\n        resp.columnMax = resp.columnMax || 12;\r\n        if (bk?.length > 1) bk.sort((a, b) => (b.w || 0) - (a.w || 0));\r\n      }\r\n    }\r\n\r\n    // elements DOM attributes override any passed options (like CSS style) - merge the two together\r\n    const defaults: GridStackOptions = {\r\n      ...Utils.cloneDeep(gridDefaults),\r\n      column: Utils.toNumber(el.getAttribute('gs-column')) || gridDefaults.column,\r\n      minRow: rowAttr ? rowAttr : Utils.toNumber(el.getAttribute('gs-min-row')) || gridDefaults.minRow,\r\n      maxRow: rowAttr ? rowAttr : Utils.toNumber(el.getAttribute('gs-max-row')) || gridDefaults.maxRow,\r\n      staticGrid: Utils.toBool(el.getAttribute('gs-static')) || gridDefaults.staticGrid,\r\n      sizeToContent: Utils.toBool(el.getAttribute('gs-size-to-content')) || undefined,\r\n      draggable: {\r\n        handle: (opts.handleClass ? '.' + opts.handleClass : (opts.handle ? opts.handle : '')) || gridDefaults.draggable.handle,\r\n      },\r\n      removableOptions: {\r\n        accept: opts.itemClass || gridDefaults.removableOptions.accept,\r\n        decline: gridDefaults.removableOptions.decline\r\n      },\r\n    };\r\n    if (el.getAttribute('gs-animate')) { // default to true, but if set to false use that instead\r\n      defaults.animate = Utils.toBool(el.getAttribute('gs-animate'))\r\n    }\r\n\r\n    opts = Utils.defaults(opts, defaults);\r\n    this._initMargin(); // part of settings defaults...\r\n\r\n    // Now check if we're loading into !12 column mode FIRST so we don't do un-necessary work (like cellHeight = width / 12 then go 1 column)\r\n    this.checkDynamicColumn();\r\n    this._updateColumnVar(opts);\r\n\r\n    if (opts.rtl === 'auto') {\r\n      opts.rtl = (el.style.direction === 'rtl');\r\n    }\r\n    if (opts.rtl) {\r\n      this.el.classList.add('grid-stack-rtl');\r\n    }\r\n\r\n    // check if we're been nested, and if so update our style and keep pointer around (used during save)\r\n    const parentGridItem: GridItemHTMLElement = this.el.closest('.' + gridDefaults.itemClass);\r\n    const parentNode = parentGridItem?.gridstackNode;\r\n    if (parentNode) {\r\n      parentNode.subGrid = this;\r\n      this.parentGridNode = parentNode;\r\n      this.el.classList.add('grid-stack-nested');\r\n      parentNode.el.classList.add('grid-stack-sub-grid');\r\n    }\r\n\r\n    this._isAutoCellHeight = (opts.cellHeight === 'auto');\r\n    if (this._isAutoCellHeight || opts.cellHeight === 'initial') {\r\n      // make the cell content square initially (will use resize/column event to keep it square)\r\n      this.cellHeight(undefined);\r\n    } else {\r\n      // append unit if any are set\r\n      if (typeof opts.cellHeight == 'number' && opts.cellHeightUnit && opts.cellHeightUnit !== gridDefaults.cellHeightUnit) {\r\n        opts.cellHeight = opts.cellHeight + opts.cellHeightUnit;\r\n        delete opts.cellHeightUnit;\r\n      }\r\n      const val = opts.cellHeight;\r\n      delete opts.cellHeight; // force initial cellHeight() call to set the value\r\n      this.cellHeight(val);\r\n    }\r\n\r\n    // see if we need to adjust auto-hide\r\n    if (opts.alwaysShowResizeHandle === 'mobile') {\r\n      opts.alwaysShowResizeHandle = isTouch;\r\n    }\r\n\r\n    this._setStaticClass();\r\n\r\n    const engineClass = opts.engineClass || GridStack.engineClass || GridStackEngine;\r\n    this.engine = new engineClass({\r\n      column: this.getColumn(),\r\n      float: opts.float,\r\n      maxRow: opts.maxRow,\r\n      onChange: (cbNodes) => {\r\n        cbNodes.forEach(n => {\r\n          const el = n.el;\r\n          if (!el) return;\r\n          if (n._removeDOM) {\r\n            if (el) el.remove();\r\n            delete n._removeDOM;\r\n          } else {\r\n            this._writePosAttr(el, n);\r\n          }\r\n        });\r\n        this._updateContainerHeight();\r\n      }\r\n    });\r\n\r\n    if (opts.auto) {\r\n      this.batchUpdate(); // prevent in between re-layout #1535 TODO: this only set float=true, need to prevent collision check...\r\n      this.engine._loading = true; // loading collision check\r\n      this.getGridItems().forEach(el => this._prepareElement(el));\r\n      delete this.engine._loading;\r\n      this.batchUpdate(false);\r\n    }\r\n\r\n    // load any passed in children as well, which overrides any DOM layout done above\r\n    if (opts.children) {\r\n      const children = opts.children;\r\n      delete opts.children;\r\n      if (children.length) this.load(children); // don't load empty\r\n    }\r\n\r\n    this.setAnimation();\r\n\r\n    // dynamic grids require pausing during drag to detect over to nest vs push\r\n    if (opts.subGridDynamic && !DDManager.pauseDrag) DDManager.pauseDrag = true;\r\n    if (opts.draggable?.pause !== undefined) DDManager.pauseDrag = opts.draggable.pause;\r\n\r\n    this._setupRemoveDrop();\r\n    this._setupAcceptWidget();\r\n    this._updateResizeEvent();\r\n  }\r\n\r\n  private _updateColumnVar(opts: GridStackOptions = this.opts): void {\r\n    this.el.classList.add('gs-' + opts.column);\r\n    if (typeof opts.column === 'number') this.el.style.setProperty('--gs-column-width', `${100/opts.column}%`);\r\n  }\r\n\r\n  /**\r\n   * add a new widget and returns it.\r\n   *\r\n   * Widget will be always placed even if result height is more than actual grid height.\r\n   * You need to use `willItFit()` before calling addWidget for additional check.\r\n   * See also `makeWidget(el)` for DOM element.\r\n   *\r\n   * @example\r\n   * const grid = GridStack.init();\r\n   * grid.addWidget({w: 3, content: 'hello'});\r\n   *\r\n   * @param w GridStackWidget definition. used MakeWidget(el) if you have dom element instead.\r\n   */\r\n  public addWidget(w: GridStackWidget): GridItemHTMLElement {\r\n    if (typeof w === 'string') { console.error('V11: GridStack.addWidget() does not support string anymore. see #2736'); return; }\r\n    if ((w as HTMLElement).ELEMENT_NODE) { console.error('V11: GridStack.addWidget() does not support HTMLElement anymore. use makeWidget()'); return this.makeWidget(w as HTMLElement); }\r\n\r\n    let el: GridItemHTMLElement;\r\n    let node: GridStackNode = w;\r\n    node.grid = this;\r\n    if (node?.el) {\r\n      el = node.el; // re-use element stored in the node\r\n    } else if (GridStack.addRemoveCB) {\r\n      el = GridStack.addRemoveCB(this.el, w, true, false);\r\n    } else {\r\n      el = this.createWidgetDivs(node);\r\n    }\r\n\r\n    if (!el) return;\r\n\r\n    // if the caller ended up initializing the widget in addRemoveCB, or we stared with one already, skip the rest\r\n    node = el.gridstackNode;\r\n    if (node && el.parentElement === this.el && this.engine.nodes.find(n => n._id === node._id)) return el;\r\n\r\n    // Tempting to initialize the passed in opt with default and valid values, but this break knockout demos\r\n    // as the actual value are filled in when _prepareElement() calls el.getAttribute('gs-xyz') before adding the node.\r\n    // So make sure we load any DOM attributes that are not specified in passed in options (which override)\r\n    const domAttr = this._readAttr(el);\r\n    Utils.defaults(w, domAttr);\r\n    this.engine.prepareNode(w);\r\n    // this._writeAttr(el, w); why write possibly incorrect values back when makeWidget() will ?\r\n\r\n    this.el.appendChild(el);\r\n\r\n    this.makeWidget(el, w);\r\n\r\n    return el;\r\n  }\r\n\r\n  /** create the default grid item divs, and content (possibly lazy loaded) by using GridStack.renderCB() */\r\n  public createWidgetDivs(n: GridStackNode): HTMLElement {\r\n    const el = Utils.createDiv(['grid-stack-item', this.opts.itemClass]);\r\n    const cont = Utils.createDiv(['grid-stack-item-content'], el);\r\n\r\n    if (Utils.lazyLoad(n)) {\r\n      if (!n.visibleObservable) {\r\n        n.visibleObservable = new IntersectionObserver(([entry]) => { if (entry.isIntersecting) {\r\n          n.visibleObservable?.disconnect();\r\n          delete n.visibleObservable;\r\n          GridStack.renderCB(cont, n);\r\n          n.grid?.prepareDragDrop(n.el);\r\n        }});\r\n        window.setTimeout(() => n.visibleObservable?.observe(el)); // wait until callee sets position attributes\r\n      }\r\n    } else GridStack.renderCB(cont, n);\r\n\r\n    return el;\r\n  }\r\n\r\n  /**\r\n   * Convert an existing gridItem element into a sub-grid with the given (optional) options, else inherit them\r\n   * from the parent's subGrid options.\r\n   * @param el gridItem element to convert\r\n   * @param ops (optional) sub-grid options, else default to node, then parent settings, else defaults\r\n   * @param nodeToAdd (optional) node to add to the newly created sub grid (used when dragging over existing regular item)\r\n   * @param saveContent if true (default) the html inside .grid-stack-content will be saved to child widget\r\n   * @returns newly created grid\r\n   */\r\n  public makeSubGrid(el: GridItemHTMLElement, ops?: GridStackOptions, nodeToAdd?: GridStackNode, saveContent = true): GridStack {\r\n    let node = el.gridstackNode;\r\n    if (!node) {\r\n      node = this.makeWidget(el).gridstackNode;\r\n    }\r\n    if (node.subGrid?.el) return node.subGrid; // already done\r\n\r\n    // find the template subGrid stored on a parent as fallback...\r\n    let subGridTemplate: GridStackOptions; // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n    let grid: GridStack = this;\r\n    while (grid && !subGridTemplate) {\r\n      subGridTemplate = grid.opts?.subGridOpts;\r\n      grid = grid.parentGridNode?.grid;\r\n    }\r\n    //... and set the create options\r\n    ops = Utils.cloneDeep({\r\n      // by default sub-grid inherit from us | parent, other than id, children, etc...\r\n      ...this.opts, id: undefined, children: undefined, column: 'auto', columnOpts: undefined, layout: 'list', subGridOpts: undefined,\r\n      ...(subGridTemplate || {}),\r\n      ...(ops || node.subGridOpts || {})\r\n    });\r\n    node.subGridOpts = ops;\r\n\r\n    // if column special case it set, remember that flag and set default\r\n    let autoColumn: boolean;\r\n    if (ops.column === 'auto') {\r\n      autoColumn = true;\r\n      ops.column = Math.max(node.w || 1, nodeToAdd?.w || 1);\r\n      delete ops.columnOpts; // driven by parent\r\n    }\r\n\r\n    // if we're converting an existing full item, move over the content to be the first sub item in the new grid\r\n    let content = node.el.querySelector('.grid-stack-item-content') as HTMLElement;\r\n    let newItem: HTMLElement;\r\n    let newItemOpt: GridStackNode;\r\n    if (saveContent) {\r\n      this._removeDD(node.el); // remove D&D since it's set on content div\r\n      newItemOpt = { ...node, x: 0, y: 0 };\r\n      Utils.removeInternalForSave(newItemOpt);\r\n      delete newItemOpt.subGridOpts;\r\n      if (node.content) {\r\n        newItemOpt.content = node.content;\r\n        delete node.content;\r\n      }\r\n      if (GridStack.addRemoveCB) {\r\n        newItem = GridStack.addRemoveCB(this.el, newItemOpt, true, false);\r\n      } else {\r\n        newItem = Utils.createDiv(['grid-stack-item']);\r\n        newItem.appendChild(content);\r\n        content = Utils.createDiv(['grid-stack-item-content'], node.el);\r\n      }\r\n      this.prepareDragDrop(node.el); // ... and restore original D&D\r\n    }\r\n\r\n    // if we're adding an additional item, make the container large enough to have them both\r\n    if (nodeToAdd) {\r\n      const w = autoColumn ? ops.column : node.w;\r\n      const h = node.h + nodeToAdd.h;\r\n      const style = node.el.style;\r\n      style.transition = 'none'; // show up instantly so we don't see scrollbar with nodeToAdd\r\n      this.update(node.el, { w, h });\r\n      setTimeout(() => style.transition = null); // recover animation\r\n    }\r\n\r\n    const subGrid = node.subGrid = GridStack.addGrid(content, ops);\r\n    if (nodeToAdd?._moving) subGrid._isTemp = true; // prevent re-nesting as we add over\r\n    if (autoColumn) subGrid._autoColumn = true;\r\n\r\n    // add the original content back as a child of hte newly created grid\r\n    if (saveContent) {\r\n      subGrid.makeWidget(newItem, newItemOpt);\r\n    }\r\n\r\n    // now add any additional node\r\n    if (nodeToAdd) {\r\n      if (nodeToAdd._moving) {\r\n        // create an artificial event even for the just created grid to receive this item\r\n        window.setTimeout(() => Utils.simulateMouseEvent(nodeToAdd._event, 'mouseenter', subGrid.el), 0);\r\n      } else {\r\n        subGrid.makeWidget(node.el, node);\r\n      }\r\n    }\r\n\r\n    // if sizedToContent, we need to re-calc the size of ourself\r\n    this.resizeToContentCheck(false, node);\r\n\r\n    return subGrid;\r\n  }\r\n\r\n  /**\r\n   * called when an item was converted into a nested grid to accommodate a dragged over item, but then item leaves - return back\r\n   * to the original grid-item. Also called to remove empty sub-grids when last item is dragged out (since re-creating is simple)\r\n   */\r\n  public removeAsSubGrid(nodeThatRemoved?: GridStackNode): void {\r\n    const pGrid = this.parentGridNode?.grid;\r\n    if (!pGrid) return;\r\n\r\n    pGrid.batchUpdate();\r\n    pGrid.removeWidget(this.parentGridNode.el, true, true);\r\n    this.engine.nodes.forEach(n => {\r\n      // migrate any children over and offsetting by our location\r\n      n.x += this.parentGridNode.x;\r\n      n.y += this.parentGridNode.y;\r\n      pGrid.makeWidget(n.el, n);\r\n    });\r\n    pGrid.batchUpdate(false);\r\n    if (this.parentGridNode) delete this.parentGridNode.subGrid;\r\n    delete this.parentGridNode;\r\n\r\n    // create an artificial event for the original grid now that this one is gone (got a leave, but won't get enter)\r\n    if (nodeThatRemoved) {\r\n      window.setTimeout(() => Utils.simulateMouseEvent(nodeThatRemoved._event, 'mouseenter', pGrid.el), 0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * saves the current layout returning a list of widgets for serialization which might include any nested grids.\r\n   * @param saveContent if true (default) the latest html inside .grid-stack-content will be saved to GridStackWidget.content field, else it will\r\n   * be removed.\r\n   * @param saveGridOpt if true (default false), save the grid options itself, so you can call the new GridStack.addGrid()\r\n   * to recreate everything from scratch. GridStackOptions.children would then contain the widget list instead.\r\n   * @param saveCB callback for each node -> widget, so application can insert additional data to be saved into the widget data structure.\r\n   * @returns list of widgets or full grid option, including .children list of widgets\r\n   */\r\n  public save(saveContent = true, saveGridOpt = false, saveCB = GridStack.saveCB): GridStackWidget[] | GridStackOptions {\r\n    // return copied GridStackWidget (with optionally .el) we can modify at will...\r\n    const list = this.engine.save(saveContent, saveCB);\r\n\r\n    // check for HTML content and nested grids\r\n    list.forEach(n => {\r\n      if (saveContent && n.el && !n.subGrid && !saveCB) { // sub-grid are saved differently, not plain content\r\n        const itemContent = n.el.querySelector('.grid-stack-item-content');\r\n        n.content = itemContent?.innerHTML;\r\n        if (!n.content) delete n.content;\r\n      } else {\r\n        if (!saveContent && !saveCB) { delete n.content; }\r\n        // check for nested grid\r\n        if (n.subGrid?.el) {\r\n          const listOrOpt = n.subGrid.save(saveContent, saveGridOpt, saveCB);\r\n          n.subGridOpts = (saveGridOpt ? listOrOpt : { children: listOrOpt }) as GridStackOptions;\r\n          delete n.subGrid;\r\n        }\r\n      }\r\n      delete n.el;\r\n    });\r\n\r\n    // check if save entire grid options (needed for recursive) + children...\r\n    if (saveGridOpt) {\r\n      const o: InternalGridStackOptions = Utils.cloneDeep(this.opts);\r\n      // delete default values that will be recreated on launch\r\n      if (o.marginBottom === o.marginTop && o.marginRight === o.marginLeft && o.marginTop === o.marginRight) {\r\n        o.margin = o.marginTop;\r\n        delete o.marginTop; delete o.marginRight; delete o.marginBottom; delete o.marginLeft;\r\n      }\r\n      if (o.rtl === (this.el.style.direction === 'rtl')) { o.rtl = 'auto' }\r\n      if (this._isAutoCellHeight) {\r\n        o.cellHeight = 'auto'\r\n      }\r\n      if (this._autoColumn) {\r\n        o.column = 'auto';\r\n      }\r\n      const origShow = o._alwaysShowResizeHandle;\r\n      delete o._alwaysShowResizeHandle;\r\n      if (origShow !== undefined) {\r\n        o.alwaysShowResizeHandle = origShow;\r\n      } else {\r\n        delete o.alwaysShowResizeHandle;\r\n      }\r\n      Utils.removeInternalAndSame(o, gridDefaults);\r\n      o.children = list;\r\n      return o;\r\n    }\r\n\r\n    return list;\r\n  }\r\n\r\n  /**\r\n   * load the widgets from a list. This will call update() on each (matching by id) or add/remove widgets that are not there.\r\n   *\r\n   * @param items list of widgets definition to update/create\r\n   * @param addRemove boolean (default true) or callback method can be passed to control if and how missing widgets can be added/removed, giving\r\n   * the user control of insertion.\r\n   *\r\n   * @example\r\n   * see http://gridstackjs.com/demo/serialization.html\r\n   */\r\n  public load(items: GridStackWidget[], addRemove: boolean | AddRemoveFcn = GridStack.addRemoveCB || true): GridStack {\r\n    items = Utils.cloneDeep(items); // so we can mod\r\n    const column = this.getColumn();\r\n\r\n    // make sure size 1x1 (default) is present as it may need to override current sizes\r\n    items.forEach(n => { n.w = n.w || 1; n.h = n.h || 1 });\r\n\r\n    // sort items. those without coord will be appended last\r\n    items = Utils.sort(items);\r\n\r\n    this.engine.skipCacheUpdate = this._ignoreLayoutsNodeChange = true; // skip layout update\r\n\r\n    // if we're loading a layout into for example 1 column and items don't fit, make sure to save\r\n    // the original wanted layout so we can scale back up correctly #1471\r\n    let maxColumn = 0;\r\n    items.forEach(n => { maxColumn = Math.max(maxColumn, (n.x || 0) + n.w) });\r\n    if (maxColumn > this.engine.defaultColumn) this.engine.defaultColumn = maxColumn;\r\n    if (maxColumn > column) {\r\n      // if we're loading (from empty) into a smaller column, check for special responsive layout\r\n      if (this.engine.nodes.length === 0 && this.responseLayout) {\r\n        this.engine.nodes = items;\r\n        this.engine.columnChanged(maxColumn, column, this.responseLayout);\r\n        items = this.engine.nodes;\r\n        this.engine.nodes = [];\r\n        delete this.responseLayout;\r\n      } else this.engine.cacheLayout(items, maxColumn, true);\r\n    }\r\n\r\n    // if given a different callback, temporally set it as global option so creating will use it\r\n    const prevCB = GridStack.addRemoveCB;\r\n    if (typeof (addRemove) === 'function') GridStack.addRemoveCB = addRemove as AddRemoveFcn;\r\n\r\n    const removed: GridStackNode[] = [];\r\n    this.batchUpdate();\r\n\r\n    // if we are loading from empty temporarily remove animation\r\n    const blank = !this.engine.nodes.length;\r\n    if (blank) this.setAnimation(false);\r\n\r\n    // see if any items are missing from new layout and need to be removed first\r\n    if (!blank && addRemove) {\r\n      const copyNodes = [...this.engine.nodes]; // don't loop through array you modify\r\n      copyNodes.forEach(n => {\r\n        if (!n.id) return;\r\n        const item = Utils.find(items, n.id);\r\n        if (!item) {\r\n          if (GridStack.addRemoveCB) GridStack.addRemoveCB(this.el, n, false, false);\r\n          removed.push(n); // batch keep track\r\n          this.removeWidget(n.el, true, false);\r\n        }\r\n      });\r\n    }\r\n\r\n    // now add/update the widgets - starting with removing items in the new layout we will reposition\r\n    // to reduce collision and add no-coord ones at next available spot\r\n    this.engine._loading = true; // help with collision\r\n    const updateNodes: GridStackWidget[] = [];\r\n    this.engine.nodes = this.engine.nodes.filter(n => {\r\n      if (Utils.find(items, n.id)) { updateNodes.push(n); return false; } // remove if found from list\r\n      return true;\r\n    });\r\n    items.forEach(w => {\r\n      const item = Utils.find(updateNodes, w.id);\r\n      if (item) {\r\n        // if item sizes to content, re-use the exiting height so it's a better guess at the final size (same if width doesn't change)\r\n        if (Utils.shouldSizeToContent(item)) w.h = item.h;\r\n        // check if missing coord, in which case find next empty slot with new (or old if missing) sizes\r\n        this.engine.nodeBoundFix(w);\r\n        if (w.autoPosition || w.x === undefined || w.y === undefined) {\r\n          w.w = w.w || item.w;\r\n          w.h = w.h || item.h;\r\n          this.engine.findEmptyPosition(w);\r\n        }\r\n\r\n        // add back to current list BUT force a collision check if it 'appears' we didn't change to make sure we don't overlap others now\r\n        this.engine.nodes.push(item);\r\n        if (Utils.samePos(item, w) && this.engine.nodes.length > 1) {\r\n          this.moveNode(item, { ...w, forceCollide: true });\r\n          Utils.copyPos(w, item); // use possily updated values before update() is called next (no-op since already moved)\r\n        }\r\n\r\n        this.update(item.el, w);\r\n\r\n        if (w.subGridOpts?.children) { // update any sub grid as well\r\n          const sub = item.el.querySelector('.grid-stack') as GridHTMLElement;\r\n          if (sub && sub.gridstack) {\r\n            sub.gridstack.load(w.subGridOpts.children); // TODO: support updating grid options ?\r\n          }\r\n        }\r\n      } else if (addRemove) {\r\n        this.addWidget(w);\r\n      }\r\n    });\r\n\r\n    delete this.engine._loading; // done loading\r\n    this.engine.removedNodes = removed;\r\n    this.batchUpdate(false);\r\n\r\n    // after commit, clear that flag\r\n    delete this._ignoreLayoutsNodeChange;\r\n    delete this.engine.skipCacheUpdate;\r\n    prevCB ? GridStack.addRemoveCB = prevCB : delete GridStack.addRemoveCB;\r\n    // delay adding animation back\r\n    if (blank && this.opts?.animate) this.setAnimation(this.opts.animate, true);\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * use before calling a bunch of `addWidget()` to prevent un-necessary relayouts in between (more efficient)\r\n   * and get a single event callback. You will see no changes until `batchUpdate(false)` is called.\r\n   */\r\n  public batchUpdate(flag = true): GridStack {\r\n    this.engine.batchUpdate(flag);\r\n    if (!flag) {\r\n      this._updateContainerHeight();\r\n      this._triggerRemoveEvent();\r\n      this._triggerAddEvent();\r\n      this._triggerChangeEvent();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Gets current cell height.\r\n   */\r\n  public getCellHeight(forcePixel = false): number {\r\n    if (this.opts.cellHeight && this.opts.cellHeight !== 'auto' &&\r\n      (!forcePixel || !this.opts.cellHeightUnit || this.opts.cellHeightUnit === 'px')) {\r\n      return this.opts.cellHeight as number;\r\n    }\r\n    // do rem/em/cm/mm to px conversion\r\n    if (this.opts.cellHeightUnit === 'rem') {\r\n      return (this.opts.cellHeight as number) * parseFloat(getComputedStyle(document.documentElement).fontSize);\r\n    }\r\n    if (this.opts.cellHeightUnit === 'em') {\r\n      return (this.opts.cellHeight as number) * parseFloat(getComputedStyle(this.el).fontSize);\r\n    }\r\n    if (this.opts.cellHeightUnit === 'cm') {\r\n      // 1cm = 96px/2.54. See https://www.w3.org/TR/css-values-3/#absolute-lengths\r\n      return (this.opts.cellHeight as number) * (96 / 2.54);\r\n    }\r\n    if (this.opts.cellHeightUnit === 'mm') {\r\n      return (this.opts.cellHeight as number) * (96 / 2.54) / 10;\r\n    }\r\n    // else get first cell height\r\n    const el = this.el.querySelector('.' + this.opts.itemClass) as HTMLElement;\r\n    if (el) {\r\n      const h = Utils.toNumber(el.getAttribute('gs-h')) || 1; // since we don't write 1 anymore\r\n      return Math.round(el.offsetHeight / h);\r\n    }\r\n    // else do entire grid and # of rows (but doesn't work if min-height is the actual constrain)\r\n    const rows = parseInt(this.el.getAttribute('gs-current-row'));\r\n    return rows ? Math.round(this.el.getBoundingClientRect().height / rows) : this.opts.cellHeight as number;\r\n  }\r\n\r\n  /**\r\n   * Update current cell height - see `GridStackOptions.cellHeight` for format.\r\n   * This method rebuilds an internal CSS style sheet.\r\n   * Note: You can expect performance issues if call this method too often.\r\n   *\r\n   * @param val the cell height. If not passed (undefined), cells content will be made square (match width minus margin),\r\n   * if pass 0 the CSS will be generated by the application instead.\r\n   *\r\n   * @example\r\n   * grid.cellHeight(100); // same as 100px\r\n   * grid.cellHeight('70px');\r\n   * grid.cellHeight(grid.cellWidth() * 1.2);\r\n   */\r\n  public cellHeight(val?: numberOrString): GridStack {\r\n\r\n    // if not called internally, check if we're changing mode\r\n    if (val !== undefined) {\r\n      if (this._isAutoCellHeight !== (val === 'auto')) {\r\n        this._isAutoCellHeight = (val === 'auto');\r\n        this._updateResizeEvent();\r\n      }\r\n    }\r\n    if (val === 'initial' || val === 'auto') { val = undefined; }\r\n\r\n    // make item content be square\r\n    if (val === undefined) {\r\n      const marginDiff = - (this.opts.marginRight as number) - (this.opts.marginLeft as number)\r\n        + (this.opts.marginTop as number) + (this.opts.marginBottom as number);\r\n      val = this.cellWidth() + marginDiff;\r\n    }\r\n\r\n    const data = Utils.parseHeight(val);\r\n    if (this.opts.cellHeightUnit === data.unit && this.opts.cellHeight === data.h) {\r\n      return this;\r\n    }\r\n    this.opts.cellHeightUnit = data.unit;\r\n    this.opts.cellHeight = data.h;\r\n\r\n    // finally update var and container\r\n    this.el.style.setProperty('--gs-cell-height', `${this.opts.cellHeight}${this.opts.cellHeightUnit}`);\r\n    this._updateContainerHeight();\r\n    this.resizeToContentCheck();\r\n\r\n    return this;\r\n  }\r\n\r\n  /** Gets current cell width. */\r\n  public cellWidth(): number {\r\n    return this._widthOrContainer() / this.getColumn();\r\n  }\r\n  /** return our expected width (or parent) , and optionally of window for dynamic column check */\r\n  protected _widthOrContainer(forBreakpoint = false): number {\r\n    // use `offsetWidth` or `clientWidth` (no scrollbar) ?\r\n    // https://stackoverflow.com/questions/21064101/understanding-offsetwidth-clientwidth-scrollwidth-and-height-respectively\r\n    return forBreakpoint && this.opts.columnOpts?.breakpointForWindow ? window.innerWidth : (this.el.clientWidth || this.el.parentElement.clientWidth || window.innerWidth);\r\n  }\r\n  /** checks for dynamic column count for our current size, returning true if changed */\r\n  protected checkDynamicColumn(): boolean {\r\n    const resp = this.opts.columnOpts;\r\n    if (!resp || (!resp.columnWidth && !resp.breakpoints?.length)) return false;\r\n    const column = this.getColumn();\r\n    let newColumn = column;\r\n    const w = this._widthOrContainer(true);\r\n    if (resp.columnWidth) {\r\n      newColumn = Math.min(Math.round(w / resp.columnWidth) || 1, resp.columnMax);\r\n    } else {\r\n      // find the closest breakpoint (already sorted big to small) that matches\r\n      newColumn = resp.columnMax;\r\n      let i = 0;\r\n      while (i < resp.breakpoints.length && w <= resp.breakpoints[i].w) {\r\n        newColumn = resp.breakpoints[i++].c || column;\r\n      }\r\n    }\r\n    if (newColumn !== column) {\r\n      const bk = resp.breakpoints?.find(b => b.c === newColumn);\r\n      this.column(newColumn, bk?.layout || resp.layout);\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * re-layout grid items to reclaim any empty space. Options are:\r\n   * 'list' keep the widget left->right order the same, even if that means leaving an empty slot if things don't fit\r\n   * 'compact' might re-order items to fill any empty space\r\n   *\r\n   * doSort - 'false' to let you do your own sorting ahead in case you need to control a different order. (default to sort)\r\n   */\r\n  public compact(layout: CompactOptions = 'compact', doSort = true): GridStack {\r\n    this.engine.compact(layout, doSort);\r\n    this._triggerChangeEvent();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * set the number of columns in the grid. Will update existing widgets to conform to new number of columns,\r\n   * as well as cache the original layout so you can revert back to previous positions without loss.\r\n   * @param column - Integer > 0 (default 12).\r\n   * @param layout specify the type of re-layout that will happen (position, size, etc...).\r\n   * Note: items will never be outside of the current column boundaries. default ('moveScale'). Ignored for 1 column\r\n   */\r\n  public column(column: number, layout: ColumnOptions = 'moveScale'): GridStack {\r\n    if (!column || column < 1 || this.opts.column === column) return this;\r\n\r\n    const oldColumn = this.getColumn();\r\n    this.opts.column = column;\r\n    if (!this.engine) {\r\n      // called in constructor, noting else to do but remember that breakpoint layout\r\n      this.responseLayout = layout;\r\n      return this;\r\n    }\r\n\r\n    this.engine.column = column;\r\n    this.el.classList.remove('gs-' + oldColumn);\r\n    this._updateColumnVar();\r\n\r\n    // update the items now\r\n    this.engine.columnChanged(oldColumn, column, layout);\r\n    if (this._isAutoCellHeight) this.cellHeight();\r\n\r\n    this.resizeToContentCheck(true); // wait for width resizing\r\n\r\n    // and trigger our event last...\r\n    this._ignoreLayoutsNodeChange = true; // skip layout update\r\n    this._triggerChangeEvent();\r\n    delete this._ignoreLayoutsNodeChange;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * get the number of columns in the grid (default 12)\r\n   */\r\n  public getColumn(): number { return this.opts.column as number; }\r\n\r\n  /** returns an array of grid HTML elements (no placeholder) - used to iterate through our children in DOM order */\r\n  public getGridItems(): GridItemHTMLElement[] {\r\n    return Array.from(this.el.children)\r\n      .filter((el: HTMLElement) => el.matches('.' + this.opts.itemClass) && !el.matches('.' + this.opts.placeholderClass)) as GridItemHTMLElement[];\r\n  }\r\n\r\n  /** true if changeCB should be ignored due to column change, sizeToContent, loading, etc... which caller can ignore for dirty flag case */\r\n  public isIgnoreChangeCB(): boolean { return this._ignoreLayoutsNodeChange; }\r\n\r\n  /**\r\n   * Destroys a grid instance. DO NOT CALL any methods or access any vars after this as it will free up members.\r\n   * @param removeDOM if `false` grid and items HTML elements will not be removed from the DOM (Optional. Default `true`).\r\n   */\r\n  public destroy(removeDOM = true): GridStack {\r\n    if (!this.el) return; // prevent multiple calls\r\n    this.offAll();\r\n    this._updateResizeEvent(true);\r\n    this.setStatic(true, false); // permanently removes DD but don't set CSS class (we're going away)\r\n    this.setAnimation(false);\r\n    if (!removeDOM) {\r\n      this.removeAll(removeDOM);\r\n      this.el.removeAttribute('gs-current-row');\r\n    } else {\r\n      this.el.parentNode.removeChild(this.el);\r\n    }\r\n    if (this.parentGridNode) delete this.parentGridNode.subGrid;\r\n    delete this.parentGridNode;\r\n    delete this.opts;\r\n    delete this._placeholder?.gridstackNode;\r\n    delete this._placeholder;\r\n    delete this.engine;\r\n    delete this.el.gridstack; // remove circular dependency that would prevent a freeing\r\n    delete this.el;\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * enable/disable floating widgets (default: `false`) See [example](http://gridstackjs.com/demo/float.html)\r\n   */\r\n  public float(val: boolean): GridStack {\r\n    if (this.opts.float !== val) {\r\n      this.opts.float = this.engine.float = val;\r\n      this._triggerChangeEvent();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * get the current float mode\r\n   */\r\n  public getFloat(): boolean {\r\n    return this.engine.float;\r\n  }\r\n\r\n  /**\r\n   * Get the position of the cell under a pixel on screen.\r\n   * @param position the position of the pixel to resolve in\r\n   * absolute coordinates, as an object with top and left properties\r\n   * @param useDocRelative if true, value will be based on document position vs parent position (Optional. Default false).\r\n   * Useful when grid is within `position: relative` element\r\n   *\r\n   * Returns an object with properties `x` and `y` i.e. the column and row in the grid.\r\n   */\r\n  public getCellFromPixel(position: MousePosition, useDocRelative = false): CellPosition {\r\n    const box = this.el.getBoundingClientRect();\r\n    // console.log(`getBoundingClientRect left: ${box.left} top: ${box.top} w: ${box.w} h: ${box.h}`)\r\n    let containerPos: { top: number, left: number };\r\n    if (useDocRelative) {\r\n      containerPos = { top: box.top + document.documentElement.scrollTop, left: box.left };\r\n      // console.log(`getCellFromPixel scrollTop: ${document.documentElement.scrollTop}`)\r\n    } else {\r\n      containerPos = { top: this.el.offsetTop, left: this.el.offsetLeft }\r\n      // console.log(`getCellFromPixel offsetTop: ${containerPos.left} offsetLeft: ${containerPos.top}`)\r\n    }\r\n    const relativeLeft = position.left - containerPos.left;\r\n    const relativeTop = position.top - containerPos.top;\r\n\r\n    const columnWidth = (box.width / this.getColumn());\r\n    const rowHeight = (box.height / parseInt(this.el.getAttribute('gs-current-row')));\r\n\r\n    return { x: Math.floor(relativeLeft / columnWidth), y: Math.floor(relativeTop / rowHeight) };\r\n  }\r\n\r\n  /** returns the current number of rows, which will be at least `minRow` if set */\r\n  public getRow(): number {\r\n    return Math.max(this.engine.getRow(), this.opts.minRow || 0);\r\n  }\r\n\r\n  /**\r\n   * Checks if specified area is empty.\r\n   * @param x the position x.\r\n   * @param y the position y.\r\n   * @param w the width of to check\r\n   * @param h the height of to check\r\n   */\r\n  public isAreaEmpty(x: number, y: number, w: number, h: number): boolean {\r\n    return this.engine.isAreaEmpty(x, y, w, h);\r\n  }\r\n\r\n  /**\r\n   * If you add elements to your grid by hand (or have some framework creating DOM), you have to tell gridstack afterwards to make them widgets.\r\n   * If you want gridstack to add the elements for you, use `addWidget()` instead.\r\n   * Makes the given element a widget and returns it.\r\n   * @param els widget or single selector to convert.\r\n   * @param options widget definition to use instead of reading attributes or using default sizing values\r\n   *\r\n   * @example\r\n   * const grid = GridStack.init();\r\n   * grid.el.innerHtml = '<div id=\"1\" gs-w=\"3\"></div><div id=\"2\"></div>';\r\n   * grid.makeWidget('1');\r\n   * grid.makeWidget('2', {w:2, content: 'hello'});\r\n   */\r\n  public makeWidget(els: GridStackElement, options?: GridStackWidget): GridItemHTMLElement {\r\n    const el = GridStack.getElement(els);\r\n    if (!el || el.gridstackNode) return el;\r\n    if (!el.parentElement) this.el.appendChild(el);\r\n    this._prepareElement(el, true, options);\r\n    const node = el.gridstackNode;\r\n\r\n    this._updateContainerHeight();\r\n\r\n    // see if there is a sub-grid to create\r\n    if (node.subGridOpts) {\r\n      this.makeSubGrid(el, node.subGridOpts, undefined, false); // node.subGrid will be used as option in method, no need to pass\r\n    }\r\n\r\n    // if we're adding an item into 1 column make sure\r\n    // we don't override the larger 12 column layout that was already saved. #1985\r\n    let resetIgnoreLayoutsNodeChange: boolean;\r\n    if (this.opts.column === 1 && !this._ignoreLayoutsNodeChange) {\r\n      resetIgnoreLayoutsNodeChange = this._ignoreLayoutsNodeChange = true;\r\n    }\r\n    this._triggerAddEvent();\r\n    this._triggerChangeEvent();\r\n    if (resetIgnoreLayoutsNodeChange) delete this._ignoreLayoutsNodeChange;\r\n\r\n    return el;\r\n  }\r\n\r\n  /**\r\n   * Event handler that extracts our CustomEvent data out automatically for receiving custom\r\n   * notifications (see doc for supported events)\r\n   * @param name of the event (see possible values) or list of names space separated\r\n   * @param callback function called with event and optional second/third param\r\n   * (see README documentation for each signature).\r\n   *\r\n   * @example\r\n   * grid.on('added', function(e, items) { log('added ', items)} );\r\n   * or\r\n   * grid.on('added removed change', function(e, items) { log(e.type, items)} );\r\n   *\r\n   * Note: in some cases it is the same as calling native handler and parsing the event.\r\n   * grid.el.addEventListener('added', function(event) { log('added ', event.detail)} );\r\n   *\r\n   */\r\n  public on(name: 'dropped', callback: GridStackDroppedHandler): GridStack\r\n  public on(name: 'enable' | 'disable', callback: GridStackEventHandler): GridStack\r\n  public on(name: 'change' | 'added' | 'removed' | 'resizecontent', callback: GridStackNodesHandler): GridStack\r\n  public on(name: 'resizestart' | 'resize' | 'resizestop' | 'dragstart' | 'drag' | 'dragstop', callback: GridStackElementHandler): GridStack\r\n  public on(name: string, callback: GridStackEventHandlerCallback): GridStack\r\n  public on(name: GridStackEvent | string, callback: GridStackEventHandlerCallback): GridStack {\r\n    // check for array of names being passed instead\r\n    if (name.indexOf(' ') !== -1) {\r\n      const names = name.split(' ') as GridStackEvent[];\r\n      names.forEach(name => this.on(name, callback));\r\n      return this;\r\n    }\r\n\r\n    // native CustomEvent handlers - cash the generic handlers so we can easily remove\r\n    if (name === 'change' || name === 'added' || name === 'removed' || name === 'enable' || name === 'disable') {\r\n      const noData = (name === 'enable' || name === 'disable');\r\n      if (noData) {\r\n        this._gsEventHandler[name] = (event: Event) => (callback as GridStackEventHandler)(event);\r\n      } else {\r\n        this._gsEventHandler[name] = (event: CustomEvent) => {if (event.detail) (callback as GridStackNodesHandler)(event, event.detail)};\r\n      }\r\n      this.el.addEventListener(name, this._gsEventHandler[name]);\r\n    } else if (name === 'drag' || name === 'dragstart' || name === 'dragstop' || name === 'resizestart' || name === 'resize'\r\n      || name === 'resizestop' || name === 'dropped' || name === 'resizecontent') {\r\n      // drag&drop stop events NEED to be call them AFTER we update node attributes so handle them ourself.\r\n      // do same for start event to make it easier...\r\n      this._gsEventHandler[name] = callback;\r\n    } else {\r\n      console.error('GridStack.on(' + name + ') event not supported');\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * unsubscribe from the 'on' event GridStackEvent\r\n   * @param name of the event (see possible values) or list of names space separated\r\n   */\r\n  public off(name: GridStackEvent | string): GridStack {\r\n    // check for array of names being passed instead\r\n    if (name.indexOf(' ') !== -1) {\r\n      const names = name.split(' ') as GridStackEvent[];\r\n      names.forEach(name => this.off(name));\r\n      return this;\r\n    }\r\n\r\n    if (name === 'change' || name === 'added' || name === 'removed' || name === 'enable' || name === 'disable') {\r\n      // remove native CustomEvent handlers\r\n      if (this._gsEventHandler[name]) {\r\n        this.el.removeEventListener(name, this._gsEventHandler[name]);\r\n      }\r\n    }\r\n    delete this._gsEventHandler[name];\r\n\r\n    return this;\r\n  }\r\n\r\n  /** remove all event handlers */\r\n  public offAll(): GridStack {\r\n    Object.keys(this._gsEventHandler).forEach((key: GridStackEvent) => this.off(key));\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes widget from the grid.\r\n   * @param el  widget or selector to modify\r\n   * @param removeDOM if `false` DOM element won't be removed from the tree (Default? true).\r\n   * @param triggerEvent if `false` (quiet mode) element will not be added to removed list and no 'removed' callbacks will be called (Default? true).\r\n   */\r\n  public removeWidget(els: GridStackElement, removeDOM = true, triggerEvent = true): GridStack {\r\n    if (!els) { console.error('Error: GridStack.removeWidget(undefined) called'); return this; }\r\n\r\n    GridStack.getElements(els).forEach(el => {\r\n      if (el.parentElement && el.parentElement !== this.el) return; // not our child!\r\n      let node = el.gridstackNode;\r\n      // For Meteor support: https://github.com/gridstack/gridstack.js/pull/272\r\n      if (!node) {\r\n        node = this.engine.nodes.find(n => el === n.el);\r\n      }\r\n      if (!node) return;\r\n\r\n      if (removeDOM && GridStack.addRemoveCB) {\r\n        GridStack.addRemoveCB(this.el, node, false, false);\r\n      }\r\n\r\n      // remove our DOM data (circular link) and drag&drop permanently\r\n      delete el.gridstackNode;\r\n      this._removeDD(el);\r\n\r\n      this.engine.removeNode(node, removeDOM, triggerEvent);\r\n\r\n      if (removeDOM && el.parentElement) {\r\n        el.remove(); // in batch mode engine.removeNode doesn't call back to remove DOM\r\n      }\r\n    });\r\n    if (triggerEvent) {\r\n      this._triggerRemoveEvent();\r\n      this._triggerChangeEvent();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Removes all widgets from the grid.\r\n   * @param removeDOM if `false` DOM elements won't be removed from the tree (Default? `true`).\r\n   * @param triggerEvent if `false` (quiet mode) element will not be added to removed list and no 'removed' callbacks will be called (Default? true).\r\n   */\r\n  public removeAll(removeDOM = true, triggerEvent = true): GridStack {\r\n    // always remove our DOM data (circular link) before list gets emptied and drag&drop permanently\r\n    this.engine.nodes.forEach(n => {\r\n      if (removeDOM && GridStack.addRemoveCB) {\r\n        GridStack.addRemoveCB(this.el, n, false, false);\r\n      }\r\n      delete n.el.gridstackNode;\r\n      if (!this.opts.staticGrid) this._removeDD(n.el);\r\n    });\r\n    this.engine.removeAll(removeDOM, triggerEvent);\r\n    if (triggerEvent) this._triggerRemoveEvent();\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Toggle the grid animation state.  Toggles the `grid-stack-animate` class.\r\n   * @param doAnimate if true the grid will animate.\r\n   * @param delay if true setting will be set on next event loop.\r\n   */\r\n  public setAnimation(doAnimate = this.opts.animate, delay?: boolean): GridStack {\r\n    if (delay) {\r\n      // delay, but check to make sure grid (opt) is still around\r\n      setTimeout(() => { if (this.opts) this.setAnimation(doAnimate) });\r\n    } else if (doAnimate) {\r\n      this.el.classList.add('grid-stack-animate');\r\n    } else {\r\n      this.el.classList.remove('grid-stack-animate');\r\n    }\r\n    this.opts.animate = doAnimate;\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  private hasAnimationCSS(): boolean { return this.el.classList.contains('grid-stack-animate') }\r\n\r\n  /**\r\n   * Toggle the grid static state, which permanently removes/add Drag&Drop support, unlike disable()/enable() that just turns it off/on.\r\n   * Also toggle the grid-stack-static class.\r\n   * @param val if true the grid become static.\r\n   * @param updateClass true (default) if css class gets updated\r\n   * @param recurse true (default) if sub-grids also get updated\r\n   */\r\n  public setStatic(val: boolean, updateClass = true, recurse = true): GridStack {\r\n    if (!!this.opts.staticGrid === val) return this;\r\n    val ? this.opts.staticGrid = true : delete this.opts.staticGrid;\r\n    this._setupRemoveDrop();\r\n    this._setupAcceptWidget();\r\n    this.engine.nodes.forEach(n => {\r\n      this.prepareDragDrop(n.el); // either delete or init Drag&drop\r\n      if (n.subGrid && recurse) n.subGrid.setStatic(val, updateClass, recurse);\r\n    });\r\n    if (updateClass) { this._setStaticClass(); }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Updates the passed in options on the grid (similar to update(widget) for for the grid options).\r\n   * @param options PARTIAL grid options to update - only items specified will be updated.\r\n   * NOTE: not all options updating are currently supported (lot of code, unlikely to change)\r\n   */\r\n  public updateOptions(o: GridStackOptions): GridStack {\r\n    const opts = this.opts;\r\n    if (o === opts) return this; // nothing to do\r\n    if (o.acceptWidgets !== undefined) { opts.acceptWidgets = o.acceptWidgets; this._setupAcceptWidget(); }\r\n    if (o.animate !== undefined) this.setAnimation(o.animate);\r\n    if (o.cellHeight) this.cellHeight(o.cellHeight);\r\n    if (o.class !== undefined && o.class !== opts.class) { if (opts.class) this.el.classList.remove(opts.class); if (o.class) this.el.classList.add(o.class); }\r\n    // responsive column take over actual count (keep what we have now)\r\n    if (o.columnOpts) {\r\n      this.opts.columnOpts = o.columnOpts;\r\n      this.checkDynamicColumn();\r\n    } else if (o.columnOpts === null && this.opts.columnOpts) {\r\n      delete this.opts.columnOpts;\r\n      this._updateResizeEvent();\r\n    } else if (typeof(o.column) === 'number') this.column(o.column);\r\n    if (o.margin !== undefined) this.margin(o.margin);\r\n    if (o.staticGrid !== undefined) this.setStatic(o.staticGrid);\r\n    if (o.disableDrag !== undefined && !o.staticGrid) this.enableMove(!o.disableDrag);\r\n    if (o.disableResize !== undefined && !o.staticGrid) this.enableResize(!o.disableResize);\r\n    if (o.float !== undefined) this.float(o.float);\r\n    if (o.row !== undefined) { opts.minRow = opts.maxRow = opts.row = o.row; }\r\n    else {\r\n      if (o.minRow !== undefined) opts.minRow = o.minRow;\r\n      if (o.maxRow !== undefined) opts.maxRow = o.maxRow;\r\n    }\r\n    if (o.children?.length) this.load(o.children);\r\n    // TBD if we have a real need for these (more complex code)\r\n    // alwaysShowResizeHandle, draggable, handle, handleClass, itemClass, layout, placeholderClass, placeholderText, resizable, removable, row,...\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Updates widget position/size and other info. Note: if you need to call this on all nodes, use load() instead which will update what changed.\r\n   * @param els  widget or selector of objects to modify (note: setting the same x,y for multiple items will be indeterministic and likely unwanted)\r\n   * @param opt new widget options (x,y,w,h, etc..). Only those set will be updated.\r\n   */\r\n  public update(els: GridStackElement, opt: GridStackWidget): GridStack {\r\n\r\n    GridStack.getElements(els).forEach(el => {\r\n      const n = el?.gridstackNode;\r\n      if (!n) return;\r\n      const w = {...Utils.copyPos({}, n), ...Utils.cloneDeep(opt)}; // make a copy we can modify in case they re-use it or multiple items\r\n      this.engine.nodeBoundFix(w);\r\n      delete w.autoPosition;\r\n\r\n      // move/resize widget if anything changed\r\n      const keys = ['x', 'y', 'w', 'h'];\r\n      let m: GridStackWidget;\r\n      if (keys.some(k => w[k] !== undefined && w[k] !== n[k])) {\r\n        m = {};\r\n        keys.forEach(k => {\r\n          m[k] = (w[k] !== undefined) ? w[k] : n[k];\r\n          delete w[k];\r\n        });\r\n      }\r\n      // for a move as well IFF there is any min/max fields set\r\n      if (!m && (w.minW || w.minH || w.maxW || w.maxH)) {\r\n        m = {}; // will use node position but validate values\r\n      }\r\n\r\n      // check for content changing\r\n      if (w.content !== undefined) {\r\n        const itemContent = el.querySelector('.grid-stack-item-content') as HTMLElement;\r\n        if (itemContent && itemContent.textContent !== w.content) {\r\n          n.content = w.content;\r\n          GridStack.renderCB(itemContent, w);\r\n          // restore any sub-grid back\r\n          if (n.subGrid?.el) {\r\n            itemContent.appendChild(n.subGrid.el);\r\n            n.subGrid._updateContainerHeight();\r\n          }\r\n        }\r\n        delete w.content;\r\n      }\r\n\r\n      // any remaining fields are assigned, but check for dragging changes, resize constrain\r\n      let changed = false;\r\n      let ddChanged = false;\r\n      for (const key in w) {\r\n        if (key[0] !== '_' && n[key] !== w[key]) {\r\n          n[key] = w[key];\r\n          changed = true;\r\n          ddChanged = ddChanged || (!this.opts.staticGrid && (key === 'noResize' || key === 'noMove' || key === 'locked'));\r\n        }\r\n      }\r\n      Utils.sanitizeMinMax(n);\r\n\r\n      // finally move the widget and update attr\r\n      if (m) {\r\n        const widthChanged = (m.w !== undefined && m.w !== n.w);\r\n        this.moveNode(n, m);\r\n        if (widthChanged && n.subGrid) {\r\n          // if we're animating the client size hasn't changed yet, so force a change (not exact size)\r\n          n.subGrid.onResize(this.hasAnimationCSS() ? n.w : undefined);\r\n        } else {\r\n          this.resizeToContentCheck(widthChanged, n);\r\n        }\r\n        delete n._orig; // clear out original position now that we moved #2669\r\n      }\r\n      if (m || changed) {\r\n        this._writeAttr(el, n);\r\n      }\r\n      if (ddChanged) {\r\n        this.prepareDragDrop(n.el);\r\n      }\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  private moveNode(n: GridStackNode, m: GridStackMoveOpts) {\r\n    const wasUpdating = n._updating;\r\n    if (!wasUpdating) this.engine.cleanNodes().beginUpdate(n);\r\n    this.engine.moveNode(n, m);\r\n    this._updateContainerHeight();\r\n    if (!wasUpdating) {\r\n      this._triggerChangeEvent();\r\n      this.engine.endUpdate();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Updates widget height to match the content height to avoid v-scrollbar or dead space.\r\n   * Note: this assumes only 1 child under resizeToContentParent='.grid-stack-item-content' (sized to gridItem minus padding) that is at the entire content size wanted.\r\n   * @param el grid item element\r\n   * @param useNodeH set to true if GridStackNode.h should be used instead of actual container height when we don't need to wait for animation to finish to get actual DOM heights\r\n   */\r\n  public resizeToContent(el: GridItemHTMLElement) {\r\n    if (!el) return;\r\n    el.classList.remove('size-to-content-max');\r\n    if (!el.clientHeight) return; // 0 when hidden, skip\r\n    const n = el.gridstackNode;\r\n    if (!n) return;\r\n    const grid = n.grid;\r\n    if (!grid || el.parentElement !== grid.el) return; // skip if we are not inside a grid\r\n    const cell = grid.getCellHeight(true);\r\n    if (!cell) return;\r\n    let height = n.h ? n.h * cell : el.clientHeight; // getBoundingClientRect().height seem to flicker back and forth\r\n    let item: Element;\r\n    if (n.resizeToContentParent) item = el.querySelector(n.resizeToContentParent);\r\n    if (!item) item = el.querySelector(GridStack.resizeToContentParent);\r\n    if (!item) return;\r\n    const padding = el.clientHeight - item.clientHeight; // full - available height to our child (minus border, padding...)\r\n    const itemH = n.h ? n.h * cell - padding : item.clientHeight; // calculated to what cellHeight is or will become (rather than actual to prevent waiting for animation to finish)\r\n    let wantedH: number;\r\n    if (n.subGrid) {\r\n      // sub-grid - use their actual row count * their cell height, BUT append any content outside of the grid (eg: above text)\r\n      wantedH = n.subGrid.getRow() * n.subGrid.getCellHeight(true);\r\n      const subRec = n.subGrid.el.getBoundingClientRect();\r\n      const parentRec = el.getBoundingClientRect();\r\n      wantedH += subRec.top - parentRec.top;\r\n    } else if (n.subGridOpts?.children?.length) {\r\n      // not sub-grid just yet (case above) wait until we do\r\n      return;\r\n    } else {\r\n      // NOTE: clientHeight & getBoundingClientRect() is undefined for text and other leaf nodes. use <div> container!\r\n      const child = item.firstElementChild;\r\n      if (!child) {\r\n        console.error(`Error: GridStack.resizeToContent() widget id:${n.id} '${GridStack.resizeToContentParent}'.firstElementChild is null, make sure to have a div like container. Skipping sizing.`);\r\n        return;\r\n      }\r\n      wantedH = child.getBoundingClientRect().height || itemH;\r\n    }\r\n    if (itemH === wantedH) return;\r\n    height += wantedH - itemH;\r\n    let h = Math.ceil(height / cell);\r\n    // check for min/max and special sizing\r\n    const softMax = Number.isInteger(n.sizeToContent) ? n.sizeToContent as number : 0;\r\n    if (softMax && h > softMax) {\r\n      h = softMax;\r\n      el.classList.add('size-to-content-max');  // get v-scroll back\r\n    }\r\n    if (n.minH && h < n.minH) h = n.minH;\r\n    else if (n.maxH && h > n.maxH) h = n.maxH;\r\n    if (h !== n.h) {\r\n      grid._ignoreLayoutsNodeChange = true;\r\n      grid.moveNode(n, { h });\r\n      delete grid._ignoreLayoutsNodeChange;\r\n    }\r\n  }\r\n\r\n  /** call the user resize (so they can do extra work) else our build in version */\r\n  private resizeToContentCBCheck(el: GridItemHTMLElement) {\r\n    if (GridStack.resizeToContentCB) GridStack.resizeToContentCB(el);\r\n    else this.resizeToContent(el);\r\n  }\r\n\r\n  /** rotate (by swapping w & h) the passed in node - called when user press 'r' during dragging\r\n   * @param els  widget or selector of objects to modify\r\n   * @param relative optional pixel coord relative to upper/left corner to rotate around (will keep that cell under cursor)\r\n   */\r\n  public rotate(els: GridStackElement, relative?: Position): GridStack {\r\n    GridStack.getElements(els).forEach(el => {\r\n      const n = el.gridstackNode;\r\n      if (!Utils.canBeRotated(n)) return;\r\n      const rot: GridStackWidget = { w: n.h, h: n.w, minH: n.minW, minW: n.minH, maxH: n.maxW, maxW: n.maxH };\r\n      // if given an offset, adjust x/y by column/row bounds when user presses 'r' during dragging\r\n      if (relative) {\r\n        const pivotX = relative.left > 0 ? Math.floor(relative.left / this.cellWidth()) : 0;\r\n        const pivotY = relative.top > 0 ? Math.floor(relative.top / (this.opts.cellHeight as number)) : 0;\r\n        rot.x = n.x + pivotX - (n.h - (pivotY+1));\r\n        rot.y = (n.y + pivotY) - pivotX;\r\n      }\r\n      Object.keys(rot).forEach(k => { if (rot[k] === undefined) delete rot[k]; });\r\n      const _orig = n._orig;\r\n      this.update(el, rot);\r\n      n._orig = _orig; // restore as move() will delete it\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Updates the margins which will set all 4 sides at once - see `GridStackOptions.margin` for format options (CSS string format of 1,2,4 values or single number).\r\n   * @param value margin value\r\n   */\r\n  public margin(value: numberOrString): GridStack {\r\n    const isMultiValue = (typeof value === 'string' && value.split(' ').length > 1);\r\n    // check if we can skip... won't check if multi values (too much hassle)\r\n    if (!isMultiValue) {\r\n      const data = Utils.parseHeight(value);\r\n      if (this.opts.marginUnit === data.unit && this.opts.margin === data.h) return;\r\n    }\r\n    // re-use existing margin handling\r\n    this.opts.margin = value;\r\n    this.opts.marginTop = this.opts.marginBottom = this.opts.marginLeft = this.opts.marginRight = undefined;\r\n    this._initMargin();\r\n\r\n    return this;\r\n  }\r\n\r\n  /** returns current margin number value (undefined if 4 sides don't match) */\r\n  public getMargin(): number { return this.opts.margin as number; }\r\n\r\n  /**\r\n   * Returns true if the height of the grid will be less than the vertical\r\n   * constraint. Always returns true if grid doesn't have height constraint.\r\n   * @param node contains x,y,w,h,auto-position options\r\n   *\r\n   * @example\r\n   * if (grid.willItFit(newWidget)) {\r\n   *   grid.addWidget(newWidget);\r\n   * } else {\r\n   *   alert('Not enough free space to place the widget');\r\n   * }\r\n   */\r\n  public willItFit(node: GridStackWidget): boolean {\r\n    // support legacy call for now\r\n    if (arguments.length > 1) {\r\n      console.warn('gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon');\r\n      // eslint-disable-next-line prefer-rest-params\r\n      const a = arguments; let i = 0,\r\n        w: GridStackWidget = { x: a[i++], y: a[i++], w: a[i++], h: a[i++], autoPosition: a[i++] };\r\n      return this.willItFit(w);\r\n    }\r\n    return this.engine.willItFit(node);\r\n  }\r\n\r\n  /** @internal */\r\n  protected _triggerChangeEvent(): GridStack {\r\n    if (this.engine.batchMode) return this;\r\n    const elements = this.engine.getDirtyNodes(true); // verify they really changed\r\n    if (elements && elements.length) {\r\n      if (!this._ignoreLayoutsNodeChange) {\r\n        this.engine.layoutsNodesChange(elements);\r\n      }\r\n      this._triggerEvent('change', elements);\r\n    }\r\n    this.engine.saveInitial(); // we called, now reset initial values & dirty flags\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _triggerAddEvent(): GridStack {\r\n    if (this.engine.batchMode) return this;\r\n    if (this.engine.addedNodes?.length) {\r\n      if (!this._ignoreLayoutsNodeChange) {\r\n        this.engine.layoutsNodesChange(this.engine.addedNodes);\r\n      }\r\n      // prevent added nodes from also triggering 'change' event (which is called next)\r\n      this.engine.addedNodes.forEach(n => { delete n._dirty; });\r\n      const addedNodes = [...this.engine.addedNodes];\r\n      this.engine.addedNodes = [];\r\n      this._triggerEvent('added', addedNodes);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  public _triggerRemoveEvent(): GridStack {\r\n    if (this.engine.batchMode) return this;\r\n    if (this.engine.removedNodes?.length) {\r\n      const removedNodes = [...this.engine.removedNodes];\r\n      this.engine.removedNodes = [];\r\n      this._triggerEvent('removed', removedNodes);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _triggerEvent(type: string, data?: GridStackNode[]): GridStack {\r\n    const event = data ? new CustomEvent(type, { bubbles: false, detail: data }) : new Event(type);\r\n    // check if we're nested, and if so call the outermost grid to trigger the event\r\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n    let grid: GridStack = this;\r\n    while (grid.parentGridNode) grid = grid.parentGridNode.grid;\r\n    grid.el.dispatchEvent(event);\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _updateContainerHeight(): GridStack {\r\n    if (!this.engine || this.engine.batchMode) return this;\r\n    const parent = this.parentGridNode;\r\n    let row = this.getRow() + this._extraDragRow; // this checks for minRow already\r\n    const cellHeight = this.opts.cellHeight as number;\r\n    const unit = this.opts.cellHeightUnit;\r\n    if (!cellHeight) return this;\r\n\r\n    // check for css min height (non nested grid). TODO: support mismatch, say: min % while unit is px.\r\n    if (!parent) {\r\n      const cssMinHeight = Utils.parseHeight(getComputedStyle(this.el)['minHeight']);\r\n      if (cssMinHeight.h > 0 && cssMinHeight.unit === unit) {\r\n        const minRow = Math.floor(cssMinHeight.h / cellHeight);\r\n        if (row < minRow) {\r\n          row = minRow;\r\n        }\r\n      }\r\n    }\r\n\r\n    this.el.setAttribute('gs-current-row', String(row));\r\n    this.el.style.removeProperty('min-height');\r\n    this.el.style.removeProperty('height');\r\n    if (row) {\r\n      // nested grids have 'insert:0' to fill the space of parent by default, but we may be taller so use min-height for possible scrollbars\r\n      this.el.style[parent ? 'minHeight' : 'height'] = row * cellHeight + unit;\r\n    }\r\n\r\n    // if we're a nested grid inside an sizeToContent item, tell it to resize itself too\r\n    if (parent && !parent.grid.engine.batchMode && Utils.shouldSizeToContent(parent)) {\r\n      parent.grid.resizeToContentCBCheck(parent.el);\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _prepareElement(el: GridItemHTMLElement, triggerAddEvent = false, node?: GridStackNode): GridStack {\r\n    node = node || this._readAttr(el);\r\n    el.gridstackNode = node;\r\n    node.el = el;\r\n    node.grid = this;\r\n    node = this.engine.addNode(node, triggerAddEvent);\r\n\r\n    // write the dom sizes and class\r\n    this._writeAttr(el, node);\r\n    el.classList.add(gridDefaults.itemClass, this.opts.itemClass);\r\n    const sizeToContent = Utils.shouldSizeToContent(node);\r\n    sizeToContent ? el.classList.add('size-to-content') : el.classList.remove('size-to-content');\r\n    if (sizeToContent) this.resizeToContentCheck(false, node);\r\n\r\n    if (!Utils.lazyLoad(node)) this.prepareDragDrop(node.el);\r\n\r\n    return this;\r\n  }\r\n\r\n  /** @internal write position CSS vars and x,y,w,h attributes (not used for CSS but by users) back to element */\r\n  protected _writePosAttr(el: HTMLElement, n: GridStackNode): GridStack {\r\n    // Avoid overwriting the inline style of the element during drag/resize, but always update the placeholder\r\n    if ((!n._moving && !n._resizing) || this._placeholder === el) {\r\n      // width/height:1 x/y:0 is set by default in the main CSS, so no need to set inlined vars\r\n      el.style.top = n.y ? (n.y === 1 ? `var(--gs-cell-height)` : `calc(${n.y} * var(--gs-cell-height))`) : null;\r\n      el.style.left = n.x ? (n.x === 1 ? `var(--gs-column-width)` : `calc(${n.x} * var(--gs-column-width))`) : null;\r\n      el.style.width = n.w > 1 ? `calc(${n.w} * var(--gs-column-width))` : null;\r\n      el.style.height = n.h > 1 ? `calc(${n.h} * var(--gs-cell-height))` : null;\r\n    }\r\n    // NOTE: those are technically not needed anymore (v12+) as we have CSS vars for everything, but some users depends on them to render item size using CSS\r\n    n.x > 0 ? el.setAttribute('gs-x', String(n.x)) : el.removeAttribute('gs-x');\r\n    n.y > 0 ? el.setAttribute('gs-y', String(n.y)) : el.removeAttribute('gs-y');\r\n    n.w > 1 ? el.setAttribute('gs-w', String(n.w)) : el.removeAttribute('gs-w');\r\n    n.h > 1 ? el.setAttribute('gs-h', String(n.h)) : el.removeAttribute('gs-h');\r\n    return this;\r\n  }\r\n\r\n  /** @internal call to write any default attributes back to element */\r\n  protected _writeAttr(el: HTMLElement, node: GridStackNode): GridStack {\r\n    if (!node) return this;\r\n    this._writePosAttr(el, node);\r\n\r\n    const attrs /*: GridStackWidget but strings */ = { // remaining attributes\r\n      // autoPosition: 'gs-auto-position', // no need to write out as already in node and doesn't affect CSS\r\n      noResize: 'gs-no-resize',\r\n      noMove: 'gs-no-move',\r\n      locked: 'gs-locked',\r\n      id: 'gs-id',\r\n      sizeToContent: 'gs-size-to-content',\r\n    };\r\n    for (const key in attrs) {\r\n      if (node[key]) { // 0 is valid for x,y only but done above already and not in list anyway\r\n        el.setAttribute(attrs[key], String(node[key]));\r\n      } else {\r\n        el.removeAttribute(attrs[key]);\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /** @internal call to read any default attributes from element */\r\n  protected _readAttr(el: HTMLElement, clearDefaultAttr = true): GridStackWidget {\r\n    const n: GridStackNode = {};\r\n    n.x = Utils.toNumber(el.getAttribute('gs-x'));\r\n    n.y = Utils.toNumber(el.getAttribute('gs-y'));\r\n    n.w = Utils.toNumber(el.getAttribute('gs-w'));\r\n    n.h = Utils.toNumber(el.getAttribute('gs-h'));\r\n    n.autoPosition = Utils.toBool(el.getAttribute('gs-auto-position'));\r\n    n.noResize = Utils.toBool(el.getAttribute('gs-no-resize'));\r\n    n.noMove = Utils.toBool(el.getAttribute('gs-no-move'));\r\n    n.locked = Utils.toBool(el.getAttribute('gs-locked'));\r\n    const attr = el.getAttribute('gs-size-to-content');\r\n    if (attr) {\r\n      if (attr === 'true' || attr === 'false') n.sizeToContent = Utils.toBool(attr);\r\n      else n.sizeToContent = parseInt(attr, 10);\r\n    }\r\n    n.id = el.getAttribute('gs-id');\r\n\r\n    // read but never written out\r\n    n.maxW = Utils.toNumber(el.getAttribute('gs-max-w'));\r\n    n.minW = Utils.toNumber(el.getAttribute('gs-min-w'));\r\n    n.maxH = Utils.toNumber(el.getAttribute('gs-max-h'));\r\n    n.minH = Utils.toNumber(el.getAttribute('gs-min-h'));\r\n\r\n    // v8.x optimization to reduce un-needed attr that don't render or are default CSS\r\n    if (clearDefaultAttr) {\r\n      if (n.w === 1) el.removeAttribute('gs-w');\r\n      if (n.h === 1) el.removeAttribute('gs-h');\r\n      if (n.maxW) el.removeAttribute('gs-max-w');\r\n      if (n.minW) el.removeAttribute('gs-min-w');\r\n      if (n.maxH) el.removeAttribute('gs-max-h');\r\n      if (n.minH) el.removeAttribute('gs-min-h');\r\n    }\r\n\r\n    // remove any key not found (null or false which is default, unless sizeToContent=false override)\r\n    for (const key in n) {\r\n      if (!n.hasOwnProperty(key)) return;\r\n      if (!n[key] && n[key] !== 0 && key !== 'gs-size-to-content') { // 0 can be valid value (x,y only really)\r\n        delete n[key];\r\n      }\r\n    }\r\n\r\n    return n;\r\n  }\r\n\r\n  /** @internal */\r\n  protected _setStaticClass(): GridStack {\r\n    const classes = ['grid-stack-static'];\r\n\r\n    if (this.opts.staticGrid) {\r\n      this.el.classList.add(...classes);\r\n      this.el.setAttribute('gs-static', 'true');\r\n    } else {\r\n      this.el.classList.remove(...classes);\r\n      this.el.removeAttribute('gs-static');\r\n\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * called when we are being resized - check if the one Column Mode needs to be turned on/off\r\n   * and remember the prev columns we used, or get our count from parent, as well as check for cellHeight==='auto' (square)\r\n   * or `sizeToContent` gridItem options.\r\n   */\r\n  public onResize(clientWidth = this.el?.clientWidth): GridStack {\r\n    if (!clientWidth) return; // return if we're gone or no size yet (will get called again)\r\n    if (this.prevWidth === clientWidth) return; // no-op\r\n    this.prevWidth = clientWidth\r\n    // console.log('onResize ', clientWidth);\r\n\r\n    this.batchUpdate();\r\n\r\n    // see if we're nested and take our column count from our parent....\r\n    let columnChanged = false;\r\n    if (this._autoColumn && this.parentGridNode) {\r\n      if (this.opts.column !== this.parentGridNode.w) {\r\n        this.column(this.parentGridNode.w, this.opts.layout || 'list');\r\n        columnChanged = true;\r\n      }\r\n    } else {\r\n      // else check for dynamic column\r\n      columnChanged = this.checkDynamicColumn();\r\n    }\r\n\r\n    // make the cells content square again\r\n    if (this._isAutoCellHeight) this.cellHeight();\r\n\r\n    // update any nested grids, or items size\r\n    this.engine.nodes.forEach(n => {\r\n      if (n.subGrid) n.subGrid.onResize()\r\n    });\r\n\r\n    if (!this._skipInitialResize) this.resizeToContentCheck(columnChanged); // wait for anim of column changed (DOM reflow before we can size correctly)\r\n    delete this._skipInitialResize;\r\n\r\n    this.batchUpdate(false);\r\n\r\n    return this;\r\n  }\r\n\r\n  /** resizes content for given node (or all) if shouldSizeToContent() is true */\r\n  private resizeToContentCheck(delay = false, n: GridStackNode = undefined) {\r\n    if (!this.engine) return; // we've been deleted in between!\r\n\r\n    // update any gridItem height with sizeToContent, but wait for DOM $animation_speed to settle if we changed column count\r\n    // TODO: is there a way to know what the final (post animation) size of the content will be so we can animate the column width and height together rather than sequentially ?\r\n    if (delay && this.hasAnimationCSS()) return setTimeout(() => this.resizeToContentCheck(false, n), this.animationDelay);\r\n\r\n    if (n) {\r\n      if (Utils.shouldSizeToContent(n)) this.resizeToContentCBCheck(n.el);\r\n    } else if (this.engine.nodes.some(n => Utils.shouldSizeToContent(n))) {\r\n      const nodes = [...this.engine.nodes]; // in case order changes while resizing one\r\n      this.batchUpdate();\r\n      nodes.forEach(n => {\r\n        if (Utils.shouldSizeToContent(n)) this.resizeToContentCBCheck(n.el);\r\n      });\r\n      this._ignoreLayoutsNodeChange = true; // loop through each node will set/reset around each move, so set it here again\r\n      this.batchUpdate(false);\r\n      this._ignoreLayoutsNodeChange = false;\r\n    }\r\n    // call this regardless of shouldSizeToContent because widget might need to stretch to take available space after a resize\r\n    if (this._gsEventHandler['resizecontent']) this._gsEventHandler['resizecontent'](null, n ? [n] : this.engine.nodes);\r\n  }\r\n\r\n  /** add or remove the grid element size event handler */\r\n  protected _updateResizeEvent(forceRemove = false): GridStack {\r\n    // only add event if we're not nested (parent will call us) and we're auto sizing cells or supporting dynamic column (i.e. doing work)\r\n    // or supporting new sizeToContent option.\r\n    const trackSize = !this.parentGridNode && (this._isAutoCellHeight || this.opts.sizeToContent || this.opts.columnOpts\r\n      || this.engine.nodes.find(n => n.sizeToContent));\r\n\r\n    if (!forceRemove && trackSize && !this.resizeObserver) {\r\n      this._sizeThrottle = Utils.throttle(() => this.onResize(), this.opts.cellHeightThrottle);\r\n      this.resizeObserver = new ResizeObserver(() => this._sizeThrottle());\r\n      this.resizeObserver.observe(this.el);\r\n      this._skipInitialResize = true; // makeWidget will originally have called on startup\r\n    } else if ((forceRemove || !trackSize) && this.resizeObserver) {\r\n      this.resizeObserver.disconnect();\r\n      delete this.resizeObserver;\r\n      delete this._sizeThrottle;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /** @internal convert a potential selector into actual element */\r\n  public static getElement(els: GridStackElement = '.grid-stack-item'): GridItemHTMLElement { return Utils.getElement(els) }\r\n  /** @internal */\r\n  public static getElements(els: GridStackElement = '.grid-stack-item'): GridItemHTMLElement[] { return Utils.getElements(els) }\r\n  /** @internal */\r\n  public static getGridElement(els: GridStackElement): GridHTMLElement { return GridStack.getElement(els) }\r\n  /** @internal */\r\n  public static getGridElements(els: string): GridHTMLElement[] { return Utils.getElements(els) }\r\n\r\n  /** @internal initialize margin top/bottom/left/right and units */\r\n  protected _initMargin(): GridStack {\r\n    let data: HeightData;\r\n    let margin = 0;\r\n\r\n    // support passing multiple values like CSS (ex: '5px 10px 0 20px')\r\n    let margins: string[] = [];\r\n    if (typeof this.opts.margin === 'string') {\r\n      margins = this.opts.margin.split(' ')\r\n    }\r\n    if (margins.length === 2) { // top/bot, left/right like CSS\r\n      this.opts.marginTop = this.opts.marginBottom = margins[0];\r\n      this.opts.marginLeft = this.opts.marginRight = margins[1];\r\n    } else if (margins.length === 4) { // Clockwise like CSS\r\n      this.opts.marginTop = margins[0];\r\n      this.opts.marginRight = margins[1];\r\n      this.opts.marginBottom = margins[2];\r\n      this.opts.marginLeft = margins[3];\r\n    } else {\r\n      data = Utils.parseHeight(this.opts.margin);\r\n      this.opts.marginUnit = data.unit;\r\n      margin = this.opts.margin = data.h;\r\n    }\r\n\r\n    // see if top/bottom/left/right need to be set as well\r\n    const keys = ['marginTop', 'marginRight', 'marginBottom', 'marginLeft'];\r\n    keys.forEach(k => {\r\n      if (this.opts[k] === undefined) {\r\n        this.opts[k] = margin;\r\n      } else {\r\n        data = Utils.parseHeight(this.opts[k]);\r\n        this.opts[k] = data.h;\r\n        delete this.opts.margin;\r\n      }\r\n    });\r\n    this.opts.marginUnit = data.unit; // in case side were spelled out, use those units instead...\r\n    if (this.opts.marginTop === this.opts.marginBottom && this.opts.marginLeft === this.opts.marginRight && this.opts.marginTop === this.opts.marginRight) {\r\n      this.opts.margin = this.opts.marginTop; // makes it easier to check for no-ops in setMargin()\r\n    }\r\n\r\n    // finally Update the CSS margin variables (inside the cell height) */\r\n    const style = this.el.style;\r\n    style.setProperty('--gs-item-margin-top', `${this.opts.marginTop}${this.opts.marginUnit}`);\r\n    style.setProperty('--gs-item-margin-bottom', `${this.opts.marginBottom}${this.opts.marginUnit}`);\r\n    style.setProperty('--gs-item-margin-right', `${this.opts.marginRight}${this.opts.marginUnit}`);\r\n    style.setProperty('--gs-item-margin-left', `${this.opts.marginLeft}${this.opts.marginUnit}`);\r\n\r\n    return this;\r\n  }\r\n\r\n  static GDRev = '12.1.1';\r\n\r\n  /* ===========================================================================================\r\n   * drag&drop methods that used to be stubbed out and implemented in dd-gridstack.ts\r\n   * but caused loading issues in prod - see https://github.com/gridstack/gridstack.js/issues/2039\r\n   * ===========================================================================================\r\n   */\r\n\r\n  /** get the global (but static to this code) DD implementation */\r\n  public static getDD(): DDGridStack {\r\n    return dd;\r\n  }\r\n\r\n  /**\r\n   * call to setup dragging in from the outside (say toolbar), by specifying the class selection and options.\r\n   * Called during GridStack.init() as options, but can also be called directly (last param are used) in case the toolbar\r\n   * is dynamically create and needs to be set later.\r\n   * @param dragIn string selector (ex: '.sidebar-item') or list of dom elements\r\n   * @param dragInOptions options - see DDDragOpt. (default: {handle: '.grid-stack-item-content', appendTo: 'body'}\r\n   * @param widgets GridStackWidget def to assign to each element which defines what to create on drop\r\n   * @param root optional root which defaults to document (for shadow dom pass the parent HTMLDocument)\r\n   */\r\n  public static setupDragIn(dragIn?: string | HTMLElement[], dragInOptions?: DDDragOpt, widgets?: GridStackWidget[], root: HTMLElement | Document = document): void {\r\n    if (dragInOptions?.pause !== undefined) {\r\n      DDManager.pauseDrag = dragInOptions.pause;\r\n    }\r\n\r\n    dragInOptions = { appendTo: 'body', helper: 'clone', ...(dragInOptions || {}) }; // default to handle:undefined = drag by the whole item\r\n    const els = (typeof dragIn === 'string') ? Utils.getElements(dragIn, root) : dragIn;\r\n    els.forEach((el, i) => {\r\n      if (!dd.isDraggable(el)) dd.dragIn(el, dragInOptions);\r\n      if (widgets?.[i]) (el as GridItemHTMLElement).gridstackNode = widgets[i];\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Enables/Disables dragging by the user of specific grid element. If you want all items, and have it affect future items, use enableMove() instead. No-op for static grids.\r\n   * IF you are looking to prevent an item from moving (due to being pushed around by another during collision) use locked property instead.\r\n   * @param els widget or selector to modify.\r\n   * @param val if true widget will be draggable, assuming the parent grid isn't noMove or static.\r\n   */\r\n  public movable(els: GridStackElement, val: boolean): GridStack {\r\n    if (this.opts.staticGrid) return this; // can't move a static grid!\r\n    GridStack.getElements(els).forEach(el => {\r\n      const n = el.gridstackNode;\r\n      if (!n) return;\r\n      val ? delete n.noMove : n.noMove = true;\r\n      this.prepareDragDrop(n.el); // init DD if need be, and adjust\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Enables/Disables user resizing of specific grid element. If you want all items, and have it affect future items, use enableResize() instead. No-op for static grids.\r\n   * @param els  widget or selector to modify\r\n   * @param val  if true widget will be resizable, assuming the parent grid isn't noResize or static.\r\n   */\r\n  public resizable(els: GridStackElement, val: boolean): GridStack {\r\n    if (this.opts.staticGrid) return this; // can't resize a static grid!\r\n    GridStack.getElements(els).forEach(el => {\r\n      const n = el.gridstackNode;\r\n      if (!n) return;\r\n      val ? delete n.noResize : n.noResize = true;\r\n      this.prepareDragDrop(n.el); // init DD if need be, and adjust\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Temporarily disables widgets moving/resizing.\r\n   * If you want a more permanent way (which freezes up resources) use `setStatic(true)` instead.\r\n   * Note: no-op for static grid\r\n   * This is a shortcut for:\r\n   * @example\r\n   *  grid.enableMove(false);\r\n   *  grid.enableResize(false);\r\n   * @param recurse true (default) if sub-grids also get updated\r\n   */\r\n  public disable(recurse = true): GridStack {\r\n    if (this.opts.staticGrid) return;\r\n    this.enableMove(false, recurse);\r\n    this.enableResize(false, recurse);\r\n    this._triggerEvent('disable');\r\n    return this;\r\n  }\r\n  /**\r\n   * Re-enables widgets moving/resizing - see disable().\r\n   * Note: no-op for static grid.\r\n   * This is a shortcut for:\r\n   * @example\r\n   *  grid.enableMove(true);\r\n   *  grid.enableResize(true);\r\n   * @param recurse true (default) if sub-grids also get updated\r\n   */\r\n  public enable(recurse = true): GridStack {\r\n    if (this.opts.staticGrid) return;\r\n    this.enableMove(true, recurse);\r\n    this.enableResize(true, recurse);\r\n    this._triggerEvent('enable');\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Enables/disables widget moving. No-op for static grids, and locally defined items still overrule\r\n   * @param recurse true (default) if sub-grids also get updated\r\n   */\r\n  public enableMove(doEnable: boolean, recurse = true): GridStack {\r\n    if (this.opts.staticGrid) return this; // can't move a static grid!\r\n    doEnable ? delete this.opts.disableDrag : this.opts.disableDrag = true; // FIRST before we update children as grid overrides #1658\r\n    this.engine.nodes.forEach(n => {\r\n      this.prepareDragDrop(n.el);\r\n      if (n.subGrid && recurse) n.subGrid.enableMove(doEnable, recurse);\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Enables/disables widget resizing. No-op for static grids.\r\n   * @param recurse true (default) if sub-grids also get updated\r\n   */\r\n  public enableResize(doEnable: boolean, recurse = true): GridStack {\r\n    if (this.opts.staticGrid) return this; // can't size a static grid!\r\n    doEnable ? delete this.opts.disableResize : this.opts.disableResize = true; // FIRST before we update children as grid overrides #1658\r\n    this.engine.nodes.forEach(n => {\r\n      this.prepareDragDrop(n.el);\r\n      if (n.subGrid && recurse) n.subGrid.enableResize(doEnable, recurse);\r\n    });\r\n    return this;\r\n  }\r\n\r\n  /** @internal call when drag (and drop) needs to be cancelled (Esc key) */\r\n  public cancelDrag() {\r\n    const n = this._placeholder?.gridstackNode;\r\n    if (!n) return;\r\n    if (n._isExternal) {\r\n      // remove any newly inserted nodes (from outside)\r\n      n._isAboutToRemove = true;\r\n      this.engine.removeNode(n);\r\n    } else if (n._isAboutToRemove) {\r\n      // restore any temp removed (dragged over trash)\r\n      GridStack._itemRemoving(n.el, false);\r\n    }\r\n\r\n    this.engine.restoreInitial();\r\n  }\r\n\r\n  /** @internal removes any drag&drop present (called during destroy) */\r\n  protected _removeDD(el: DDElementHost): GridStack {\r\n    dd.draggable(el, 'destroy').resizable(el, 'destroy');\r\n    if (el.gridstackNode) {\r\n      delete el.gridstackNode._initDD; // reset our DD init flag\r\n    }\r\n    delete el.ddElement;\r\n    return this;\r\n  }\r\n\r\n  /** @internal called to add drag over to support widgets being added externally */\r\n  protected _setupAcceptWidget(): GridStack {\r\n\r\n    // check if we need to disable things\r\n    if (this.opts.staticGrid || (!this.opts.acceptWidgets && !this.opts.removable)) {\r\n      dd.droppable(this.el, 'destroy');\r\n      return this;\r\n    }\r\n\r\n    // vars shared across all methods\r\n    let cellHeight: number, cellWidth: number;\r\n\r\n    const onDrag = (event: DragEvent, el: GridItemHTMLElement, helper: GridItemHTMLElement) => {\r\n      helper = helper || el;\r\n      const node = helper.gridstackNode;\r\n      if (!node) return;\r\n\r\n      // if the element is being dragged from outside, scale it down to match the grid's scale\r\n      // and slightly adjust its position relative to the mouse\r\n      if (!node.grid?.el) {\r\n        // this scales the helper down\r\n        helper.style.transform = `scale(${1 / this.dragTransform.xScale},${1 / this.dragTransform.yScale})`;\r\n        // this makes it so that the helper is well positioned relative to the mouse after scaling\r\n        const helperRect = helper.getBoundingClientRect();\r\n        helper.style.left = helperRect.x + (this.dragTransform.xScale - 1) * (event.clientX - helperRect.x) / this.dragTransform.xScale + 'px';\r\n        helper.style.top = helperRect.y + (this.dragTransform.yScale - 1) * (event.clientY - helperRect.y) / this.dragTransform.yScale + 'px';\r\n        helper.style.transformOrigin = `0px 0px`\r\n      }\r\n\r\n      let { top, left } = helper.getBoundingClientRect();\r\n      const rect = this.el.getBoundingClientRect();\r\n      left -= rect.left;\r\n      top -= rect.top;\r\n      const ui: DDUIData = {\r\n        position: {\r\n          top: top * this.dragTransform.xScale,\r\n          left: left * this.dragTransform.yScale\r\n        }\r\n      };\r\n\r\n      if (node._temporaryRemoved) {\r\n        node.x = Math.max(0, Math.round(left / cellWidth));\r\n        node.y = Math.max(0, Math.round(top / cellHeight));\r\n        delete node.autoPosition;\r\n        this.engine.nodeBoundFix(node);\r\n\r\n        // don't accept *initial* location if doesn't fit #1419 (locked drop region, or can't grow), but maybe try if it will go somewhere\r\n        if (!this.engine.willItFit(node)) {\r\n          node.autoPosition = true; // ignore x,y and try for any slot...\r\n          if (!this.engine.willItFit(node)) {\r\n            dd.off(el, 'drag'); // stop calling us\r\n            return; // full grid or can't grow\r\n          }\r\n          if (node._willFitPos) {\r\n            // use the auto position instead #1687\r\n            Utils.copyPos(node, node._willFitPos);\r\n            delete node._willFitPos;\r\n          }\r\n        }\r\n\r\n        // re-use the existing node dragging method\r\n        this._onStartMoving(helper, event, ui, node, cellWidth, cellHeight);\r\n      } else {\r\n        // re-use the existing node dragging that does so much of the collision detection\r\n        this._dragOrResize(helper, event, ui, node, cellWidth, cellHeight);\r\n      }\r\n    }\r\n\r\n    dd.droppable(this.el, {\r\n      accept: (el: GridItemHTMLElement) => {\r\n        const node: GridStackNode = el.gridstackNode || this._readAttr(el, false);\r\n        // set accept drop to true on ourself (which we ignore) so we don't get \"can't drop\" icon in HTML5 mode while moving\r\n        if (node?.grid === this) return true;\r\n        if (!this.opts.acceptWidgets) return false;\r\n        // check for accept method or class matching\r\n        let canAccept = true;\r\n        if (typeof this.opts.acceptWidgets === 'function') {\r\n          canAccept = this.opts.acceptWidgets(el);\r\n        } else {\r\n          const selector = (this.opts.acceptWidgets === true ? '.grid-stack-item' : this.opts.acceptWidgets as string);\r\n          canAccept = el.matches(selector);\r\n        }\r\n        // finally check to make sure we actually have space left #1571 #2633\r\n        if (canAccept && node && this.opts.maxRow) {\r\n          const n = { w: node.w, h: node.h, minW: node.minW, minH: node.minH }; // only width/height matters and autoPosition\r\n          canAccept = this.engine.willItFit(n);\r\n        }\r\n        return canAccept;\r\n      }\r\n    })\r\n      /**\r\n       * entering our grid area\r\n       */\r\n      .on(this.el, 'dropover', (event: Event, el: GridItemHTMLElement, helper: GridItemHTMLElement) => {\r\n        // console.log(`over ${this.el.gridstack.opts.id} ${count++}`); // TEST\r\n        let node = helper?.gridstackNode || el.gridstackNode;\r\n        // ignore drop enter on ourself (unless we temporarily removed) which happens on a simple drag of our item\r\n        if (node?.grid === this && !node._temporaryRemoved) {\r\n          // delete node._added; // reset this to track placeholder again in case we were over other grid #1484 (dropout doesn't always clear)\r\n          return false; // prevent parent from receiving msg (which may be a grid as well)\r\n        }\r\n\r\n        // If sidebar item, restore the sidebar node size to ensure consistent behavior when dragging between grids\r\n        if (node?._sidebarOrig) {\r\n          node.w = node._sidebarOrig.w;\r\n          node.h = node._sidebarOrig.h;\r\n        }\r\n\r\n        // fix #1578 when dragging fast, we may not get a leave on the previous grid so force one now\r\n        if (node?.grid && node.grid !== this && !node._temporaryRemoved) {\r\n          // console.log('dropover without leave'); // TEST\r\n          const otherGrid = node.grid;\r\n          otherGrid._leave(el, helper);\r\n        }\r\n        helper = helper || el;\r\n\r\n        // cache cell dimensions (which don't change), position can animate if we removed an item in otherGrid that affects us...\r\n        cellWidth = this.cellWidth();\r\n        cellHeight = this.getCellHeight(true);\r\n\r\n        // sidebar items: load any element attributes if we don't have a node on first enter from the sidebar\r\n        if (!node) {\r\n          const attr = helper.getAttribute('data-gs-widget') || helper.getAttribute('gridstacknode'); // TBD: temp support for old V11.0.0 attribute\r\n          if (attr) {\r\n            try {\r\n              node = JSON.parse(attr);\r\n            } catch (error) {\r\n              console.error(\"Gridstack dropover: Bad JSON format: \", attr);\r\n            }\r\n            helper.removeAttribute('data-gs-widget');\r\n            helper.removeAttribute('gridstacknode');\r\n          }\r\n          if (!node) node = this._readAttr(helper); // used to pass false for #2354, but now we clone top level node\r\n          // On first grid enter from sidebar, set the initial sidebar item size properties for the node\r\n          node._sidebarOrig = { w: node.w, h: node.h }\r\n        }\r\n        if (!node.grid) { // sidebar item\r\n          if (!node.el) node = {...node}; // clone first time we're coming from sidebar (since 'clone' doesn't copy vars)\r\n          node._isExternal = true;\r\n          helper.gridstackNode = node;\r\n        }\r\n\r\n        // calculate the grid size based on element outer size\r\n        const w = node.w || Math.round(helper.offsetWidth / cellWidth) || 1;\r\n        const h = node.h || Math.round(helper.offsetHeight / cellHeight) || 1;\r\n\r\n        // if the item came from another grid, make a copy and save the original info in case we go back there\r\n        if (node.grid && node.grid !== this) {\r\n          // copy the node original values (min/max/id/etc...) but override width/height/other flags which are this grid specific\r\n          // console.log('dropover cloning node'); // TEST\r\n          if (!el._gridstackNodeOrig) el._gridstackNodeOrig = node; // shouldn't have multiple nested!\r\n          el.gridstackNode = node = { ...node, w, h, grid: this };\r\n          delete node.x;\r\n          delete node.y;\r\n          this.engine.cleanupNode(node)\r\n            .nodeBoundFix(node);\r\n          // restore some internal fields we need after clearing them all\r\n          node._initDD =\r\n            node._isExternal =  // DOM needs to be re-parented on a drop\r\n            node._temporaryRemoved = true; // so it can be inserted onDrag below\r\n        } else {\r\n          node.w = w;\r\n          node.h = h;\r\n          node._temporaryRemoved = true; // so we can insert it\r\n        }\r\n\r\n        // clear any marked for complete removal (Note: don't check _isAboutToRemove as that is cleared above - just do it)\r\n        GridStack._itemRemoving(node.el, false);\r\n\r\n        dd.on(el, 'drag', onDrag);\r\n        // make sure this is called at least once when going fast #1578\r\n        onDrag(event as DragEvent, el, helper);\r\n        return false; // prevent parent from receiving msg (which may be a grid as well)\r\n      })\r\n      /**\r\n       * Leaving our grid area...\r\n       */\r\n      .on(this.el, 'dropout', (event, el: GridItemHTMLElement, helper: GridItemHTMLElement) => {\r\n        // console.log(`out ${this.el.gridstack.opts.id} ${count++}`); // TEST\r\n        const node = helper?.gridstackNode || el.gridstackNode;\r\n        if (!node) return false;\r\n        // fix #1578 when dragging fast, we might get leave after other grid gets enter (which calls us to clean)\r\n        // so skip this one if we're not the active grid really..\r\n        if (!node.grid || node.grid === this) {\r\n          this._leave(el, helper);\r\n          // if we were created as temporary nested grid, go back to before state\r\n          if (this._isTemp) {\r\n            this.removeAsSubGrid(node);\r\n          }\r\n        }\r\n        return false; // prevent parent from receiving msg (which may be grid as well)\r\n      })\r\n      /**\r\n       * end - releasing the mouse\r\n       */\r\n      .on(this.el, 'drop', (event, el: GridItemHTMLElement, helper: GridItemHTMLElement) => {\r\n        const node = helper?.gridstackNode || el.gridstackNode;\r\n        // ignore drop on ourself from ourself that didn't come from the outside - dragend will handle the simple move instead\r\n        if (node?.grid === this && !node._isExternal) return false;\r\n\r\n        const wasAdded = !!this.placeholder.parentElement; // skip items not actually added to us because of constrains, but do cleanup #1419\r\n        const wasSidebar = el !== helper;\r\n        this.placeholder.remove();\r\n        delete this.placeholder.gridstackNode;\r\n\r\n        // disable animation when replacing a placeholder (already positioned) with actual content\r\n        const noAnim = wasAdded && this.opts.animate;\r\n        if (noAnim) this.setAnimation(false);\r\n\r\n        // notify previous grid of removal\r\n        // console.log('drop delete _gridstackNodeOrig') // TEST\r\n        const origNode = el._gridstackNodeOrig;\r\n        delete el._gridstackNodeOrig;\r\n        if (wasAdded && origNode?.grid && origNode.grid !== this) {\r\n          const oGrid = origNode.grid;\r\n          oGrid.engine.removeNodeFromLayoutCache(origNode);\r\n          oGrid.engine.removedNodes.push(origNode);\r\n          oGrid._triggerRemoveEvent()._triggerChangeEvent();\r\n          // if it's an empty sub-grid that got auto-created, nuke it\r\n          if (oGrid.parentGridNode && !oGrid.engine.nodes.length && oGrid.opts.subGridDynamic) {\r\n            oGrid.removeAsSubGrid();\r\n          }\r\n        }\r\n\r\n        if (!node) return false;\r\n\r\n        // use existing placeholder node as it's already in our list with drop location\r\n        if (wasAdded) {\r\n          this.engine.cleanupNode(node); // removes all internal _xyz values\r\n          node.grid = this;\r\n        }\r\n        delete node.grid?._isTemp;\r\n        dd.off(el, 'drag');\r\n        // if we made a copy insert that instead of the original (sidebar item)\r\n        if (helper !== el) {\r\n          helper.remove();\r\n          el = helper;\r\n        } else {\r\n          el.remove(); // reduce flicker as we change depth here, and size further down\r\n        }\r\n        this._removeDD(el);\r\n        if (!wasAdded) return false;\r\n        const subGrid = node.subGrid?.el?.gridstack; // set when actual sub-grid present\r\n        Utils.copyPos(node, this._readAttr(this.placeholder)); // placeholder values as moving VERY fast can throw things off #1578\r\n        Utils.removePositioningStyles(el);\r\n\r\n        // give the user a chance to alter the widget that will get inserted if new sidebar item\r\n        if (wasSidebar && (node.content || node.subGridOpts || GridStack.addRemoveCB)) {\r\n          delete node.el;\r\n          el = this.addWidget(node);\r\n        } else {\r\n          this._prepareElement(el, true, node);\r\n          this.el.appendChild(el);\r\n          // resizeToContent is skipped in _prepareElement() until node is visible (clientHeight=0) so call it now\r\n          this.resizeToContentCheck(false, node);\r\n          if (subGrid) {\r\n            subGrid.parentGridNode = node;\r\n          }\r\n          this._updateContainerHeight();\r\n        }\r\n        this.engine.addedNodes.push(node);\r\n        this._triggerAddEvent();\r\n        this._triggerChangeEvent();\r\n\r\n        this.engine.endUpdate();\r\n        if (this._gsEventHandler['dropped']) {\r\n          this._gsEventHandler['dropped']({ ...event, type: 'dropped' }, origNode && origNode.grid ? origNode : undefined, node);\r\n        }\r\n\r\n        // delay adding animation back\r\n        if (noAnim) this.setAnimation(this.opts.animate, true);\r\n\r\n        return false; // prevent parent from receiving msg (which may be grid as well)\r\n      });\r\n    return this;\r\n  }\r\n\r\n  /** @internal mark item for removal */\r\n  private static _itemRemoving(el: GridItemHTMLElement, remove: boolean) {\r\n    if (!el) return;\r\n    const node = el ? el.gridstackNode : undefined;\r\n    if (!node?.grid || el.classList.contains(node.grid.opts.removableOptions.decline)) return;\r\n    remove ? node._isAboutToRemove = true : delete node._isAboutToRemove;\r\n    remove ? el.classList.add('grid-stack-item-removing') : el.classList.remove('grid-stack-item-removing');\r\n  }\r\n\r\n  /** @internal called to setup a trash drop zone if the user specifies it */\r\n  protected _setupRemoveDrop(): GridStack {\r\n    if (typeof this.opts.removable !== 'string') return this;\r\n    const trashEl = document.querySelector(this.opts.removable) as HTMLElement;\r\n    if (!trashEl) return this;\r\n\r\n    // only register ONE static drop-over/dropout callback for the 'trash', and it will\r\n    // update the passed in item and parent grid because the '.trash' is a shared resource anyway,\r\n    // and Native DD only has 1 event CB (having a list and technically a per grid removableOptions complicates things greatly)\r\n    if (!this.opts.staticGrid && !dd.isDroppable(trashEl)) {\r\n      dd.droppable(trashEl, this.opts.removableOptions)\r\n        .on(trashEl, 'dropover', (event, el) => GridStack._itemRemoving(el, true))\r\n        .on(trashEl, 'dropout', (event, el) => GridStack._itemRemoving(el, false));\r\n    }\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * prepares the element for drag&drop - this is normally called by makeWidget() unless are are delay loading\r\n   * @param el GridItemHTMLElement of the widget\r\n   * @param [force=false]\r\n   * */\r\n  public prepareDragDrop(el: GridItemHTMLElement, force = false): GridStack {\r\n    const node = el?.gridstackNode;\r\n    if (!node) return;\r\n    const noMove = node.noMove || this.opts.disableDrag;\r\n    const noResize = node.noResize || this.opts.disableResize;\r\n\r\n    // check for disabled grid first\r\n    const disable = this.opts.staticGrid || (noMove && noResize);\r\n    if (force || disable) {\r\n      if (node._initDD) {\r\n        this._removeDD(el); // nukes everything instead of just disable, will add some styles back next\r\n        delete node._initDD;\r\n      }\r\n      if (disable) el.classList.add('ui-draggable-disabled', 'ui-resizable-disabled'); // add styles one might depend on #1435\r\n      if (!force) return this;\r\n    }\r\n\r\n    if (!node._initDD) {\r\n      // variables used/cashed between the 3 start/move/end methods, in addition to node passed above\r\n      let cellWidth: number;\r\n      let cellHeight: number;\r\n\r\n      /** called when item starts moving/resizing */\r\n      const onStartMoving = (event: Event, ui: DDUIData) => {\r\n        // trigger any 'dragstart' / 'resizestart' manually\r\n        this.triggerEvent(event, event.target as GridItemHTMLElement);\r\n        cellWidth = this.cellWidth();\r\n        cellHeight = this.getCellHeight(true); // force pixels for calculations\r\n\r\n        this._onStartMoving(el, event, ui, node, cellWidth, cellHeight);\r\n      }\r\n\r\n      /** called when item is being dragged/resized */\r\n      const dragOrResize = (event: MouseEvent, ui: DDUIData) => {\r\n        this._dragOrResize(el, event, ui, node, cellWidth, cellHeight);\r\n      }\r\n\r\n      /** called when the item stops moving/resizing */\r\n      const onEndMoving = (event: Event) => {\r\n        this.placeholder.remove();\r\n        delete this.placeholder.gridstackNode;\r\n        delete node._moving;\r\n        delete node._resizing;\r\n        delete node._event;\r\n        delete node._lastTried;\r\n        const widthChanged = node.w !== node._orig.w;\r\n\r\n        // if the item has moved to another grid, we're done here\r\n        const target: GridItemHTMLElement = event.target as GridItemHTMLElement;\r\n        if (!target.gridstackNode || target.gridstackNode.grid !== this) return;\r\n\r\n        node.el = target;\r\n\r\n        if (node._isAboutToRemove) {\r\n          const grid = el.gridstackNode.grid;\r\n          if (grid._gsEventHandler[event.type]) {\r\n            grid._gsEventHandler[event.type](event, target);\r\n          }\r\n          grid.engine.nodes.push(node); // temp add it back so we can proper remove it next\r\n          grid.removeWidget(el, true, true);\r\n        } else {\r\n          Utils.removePositioningStyles(target);\r\n          if (node._temporaryRemoved) {\r\n            // got removed - restore item back to before dragging position\r\n            Utils.copyPos(node, node._orig);// @ts-ignore\r\n            this._writePosAttr(target, node);\r\n            this.engine.addNode(node);\r\n          } else {\r\n            // move to new placeholder location\r\n            this._writePosAttr(target, node);\r\n          }\r\n          this.triggerEvent(event, target);\r\n        }\r\n        // @ts-ignore\r\n        this._extraDragRow = 0;// @ts-ignore\r\n        this._updateContainerHeight();// @ts-ignore\r\n        this._triggerChangeEvent();\r\n\r\n        this.engine.endUpdate();\r\n\r\n        if (event.type === 'resizestop') {\r\n          if (Number.isInteger(node.sizeToContent)) node.sizeToContent = node.h; // new soft limit\r\n          this.resizeToContentCheck(widthChanged, node); // wait for width animation if changed\r\n        }\r\n      }\r\n\r\n      dd.draggable(el, {\r\n        start: onStartMoving,\r\n        stop: onEndMoving,\r\n        drag: dragOrResize\r\n      }).resizable(el, {\r\n        start: onStartMoving,\r\n        stop: onEndMoving,\r\n        resize: dragOrResize\r\n      });\r\n      node._initDD = true; // we've set DD support now\r\n    }\r\n\r\n    // finally fine tune move vs resize by disabling any part...\r\n    dd.draggable(el, noMove ? 'disable' : 'enable')\r\n      .resizable(el, noResize ? 'disable' : 'enable');\r\n\r\n    return this;\r\n  }\r\n\r\n  /** @internal handles actual drag/resize start */\r\n  protected _onStartMoving(el: GridItemHTMLElement, event: Event, ui: DDUIData, node: GridStackNode, cellWidth: number, cellHeight: number): void {\r\n    this.engine.cleanNodes()\r\n      .beginUpdate(node);\r\n    // @ts-ignore\r\n    this._writePosAttr(this.placeholder, node)\r\n    this.el.appendChild(this.placeholder);\r\n    this.placeholder.gridstackNode = node;\r\n    // console.log('_onStartMoving placeholder') // TEST\r\n\r\n    // if the element is inside a grid, it has already been scaled\r\n    // we can use that as a scale reference\r\n    if (node.grid?.el) {\r\n      this.dragTransform = Utils.getValuesFromTransformedElement(el);\r\n    }\r\n    // if the element is being dragged from outside (not from any grid)\r\n    // we use the grid as the transformation reference, since the helper is not subject to transformation\r\n    else if (this.placeholder && this.placeholder.closest('.grid-stack')) {\r\n      const gridEl = this.placeholder.closest('.grid-stack') as HTMLElement;\r\n      this.dragTransform = Utils.getValuesFromTransformedElement(gridEl);\r\n    }\r\n    // Fallback\r\n    else {\r\n      this.dragTransform = {\r\n        xScale: 1,\r\n        xOffset: 0,\r\n        yScale: 1,\r\n        yOffset: 0,\r\n      }\r\n    }\r\n\r\n    node.el = this.placeholder;\r\n    node._lastUiPosition = ui.position;\r\n    node._prevYPix = ui.position.top;\r\n    node._moving = (event.type === 'dragstart'); // 'dropover' are not initially moving so they can go exactly where they enter (will push stuff out of the way)\r\n    node._resizing = (event.type === 'resizestart');\r\n    delete node._lastTried;\r\n\r\n    if (event.type === 'dropover' && node._temporaryRemoved) {\r\n      // console.log('engine.addNode x=' + node.x); // TEST\r\n      this.engine.addNode(node); // will add, fix collisions, update attr and clear _temporaryRemoved\r\n      node._moving = true; // AFTER, mark as moving object (wanted fix location before)\r\n    }\r\n\r\n    // set the min/max resize info taking into account the column count and position (so we don't resize outside the grid)\r\n    this.engine.cacheRects(cellWidth, cellHeight, this.opts.marginTop as number, this.opts.marginRight as number, this.opts.marginBottom as number, this.opts.marginLeft as number);\r\n    if (event.type === 'resizestart') {\r\n      const colLeft = this.getColumn() - node.x;\r\n      const rowLeft = (this.opts.maxRow || Number.MAX_SAFE_INTEGER) - node.y;\r\n      dd.resizable(el, 'option', 'minWidth', cellWidth * Math.min(node.minW || 1, colLeft))\r\n        .resizable(el, 'option', 'minHeight', cellHeight * Math.min(node.minH || 1, rowLeft))\r\n        .resizable(el, 'option', 'maxWidth', cellWidth * Math.min(node.maxW || Number.MAX_SAFE_INTEGER, colLeft))\r\n        .resizable(el, 'option', 'maxWidthMoveLeft', cellWidth * Math.min(node.maxW || Number.MAX_SAFE_INTEGER, node.x+node.w))\r\n        .resizable(el, 'option', 'maxHeight', cellHeight * Math.min(node.maxH || Number.MAX_SAFE_INTEGER, rowLeft))\r\n        .resizable(el, 'option', 'maxHeightMoveUp', cellHeight * Math.min(node.maxH || Number.MAX_SAFE_INTEGER, node.y+node.h));\r\n    }\r\n  }\r\n\r\n  /** @internal handles actual drag/resize */\r\n  protected _dragOrResize(el: GridItemHTMLElement, event: MouseEvent, ui: DDUIData, node: GridStackNode, cellWidth: number, cellHeight: number): void {\r\n    const p = { ...node._orig }; // could be undefined (_isExternal) which is ok (drag only set x,y and w,h will default to node value)\r\n    let resizing: boolean;\r\n    let mLeft = this.opts.marginLeft as number,\r\n      mRight = this.opts.marginRight as number,\r\n      mTop = this.opts.marginTop as number,\r\n      mBottom = this.opts.marginBottom as number;\r\n\r\n    // if margins (which are used to pass mid point by) are large relative to cell height/width, reduce them down #1855\r\n    const mHeight = Math.round(cellHeight * 0.1),\r\n      mWidth = Math.round(cellWidth * 0.1);\r\n    mLeft = Math.min(mLeft, mWidth);\r\n    mRight = Math.min(mRight, mWidth);\r\n    mTop = Math.min(mTop, mHeight);\r\n    mBottom = Math.min(mBottom, mHeight);\r\n\r\n    if (event.type === 'drag') {\r\n      if (node._temporaryRemoved) return; // handled by dropover\r\n      const distance = ui.position.top - node._prevYPix;\r\n      node._prevYPix = ui.position.top;\r\n      if (this.opts.draggable.scroll !== false) {\r\n        Utils.updateScrollPosition(el, ui.position, distance);\r\n      }\r\n\r\n      // get new position taking into account the margin in the direction we are moving! (need to pass mid point by margin)\r\n      const left = ui.position.left + (ui.position.left > node._lastUiPosition.left ? -mRight : mLeft);\r\n      const top = ui.position.top + (ui.position.top > node._lastUiPosition.top ? -mBottom : mTop);\r\n      p.x = Math.round(left / cellWidth);\r\n      p.y = Math.round(top / cellHeight);\r\n\r\n      // @ts-ignore// if we're at the bottom hitting something else, grow the grid so cursor doesn't leave when trying to place below others\r\n      const prev = this._extraDragRow;\r\n      if (this.engine.collide(node, p)) {\r\n        const row = this.getRow();\r\n        let extra = Math.max(0, (p.y + node.h) - row);\r\n        if (this.opts.maxRow && row + extra > this.opts.maxRow) {\r\n          extra = Math.max(0, this.opts.maxRow - row);\r\n        }// @ts-ignore\r\n        this._extraDragRow = extra;// @ts-ignore\r\n      } else this._extraDragRow = 0;// @ts-ignore\r\n      if (this._extraDragRow !== prev) this._updateContainerHeight();\r\n\r\n      if (node.x === p.x && node.y === p.y) return; // skip same\r\n      // DON'T skip one we tried as we might have failed because of coverage <50% before\r\n      // if (node._lastTried && node._lastTried.x === x && node._lastTried.y === y) return;\r\n    } else if (event.type === 'resize') {\r\n      if (p.x < 0) return;\r\n      // Scrolling page if needed\r\n      Utils.updateScrollResize(event, el, cellHeight);\r\n\r\n      // get new size\r\n      p.w = Math.round((ui.size.width - mLeft) / cellWidth);\r\n      p.h = Math.round((ui.size.height - mTop) / cellHeight);\r\n      if (node.w === p.w && node.h === p.h) return;\r\n      if (node._lastTried && node._lastTried.w === p.w && node._lastTried.h === p.h) return; // skip one we tried (but failed)\r\n\r\n      // if we size on left/top side this might move us, so get possible new position as well\r\n      const left = ui.position.left + mLeft;\r\n      const top = ui.position.top + mTop;\r\n      p.x = Math.round(left / cellWidth);\r\n      p.y = Math.round(top / cellHeight);\r\n\r\n      resizing = true;\r\n    }\r\n\r\n    node._event = event;\r\n    node._lastTried = p; // set as last tried (will nuke if we go there)\r\n    const rect: GridStackPosition = { // screen pix of the dragged box\r\n      x: ui.position.left + mLeft,\r\n      y: ui.position.top + mTop,\r\n      w: (ui.size ? ui.size.width : node.w * cellWidth) - mLeft - mRight,\r\n      h: (ui.size ? ui.size.height : node.h * cellHeight) - mTop - mBottom\r\n    };\r\n    if (this.engine.moveNodeCheck(node, { ...p, cellWidth, cellHeight, rect, resizing })) {\r\n      node._lastUiPosition = ui.position;\r\n      this.engine.cacheRects(cellWidth, cellHeight, mTop, mRight, mBottom, mLeft);\r\n      delete node._skipDown;\r\n      if (resizing && node.subGrid) node.subGrid.onResize();\r\n      this._extraDragRow = 0;// @ts-ignore\r\n      this._updateContainerHeight();\r\n\r\n      const target = event.target as GridItemHTMLElement;// @ts-ignore\r\n      // Do not write sidebar item attributes back to the original sidebar el\r\n      if (!node._sidebarOrig) {\r\n        this._writePosAttr(target, node);\r\n      }\r\n      this.triggerEvent(event, target);\r\n    }\r\n  }\r\n\r\n  /** call given event callback on our main top-most grid (if we're nested) */\r\n  protected triggerEvent(event: Event, target: GridItemHTMLElement) {\r\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\r\n    let grid: GridStack = this;\r\n    while (grid.parentGridNode) grid = grid.parentGridNode.grid;\r\n    if (grid._gsEventHandler[event.type]) {\r\n      grid._gsEventHandler[event.type](event, target);\r\n    }\r\n  }\r\n\r\n  /** @internal called when item leaving our area by either cursor dropout event\r\n   * or shape is outside our boundaries. remove it from us, and mark temporary if this was\r\n   * our item to start with else restore prev node values from prev grid it came from.\r\n   */\r\n  protected _leave(el: GridItemHTMLElement, helper?: GridItemHTMLElement): void {\r\n    helper = helper || el;\r\n    const node = helper.gridstackNode;\r\n    if (!node) return;\r\n\r\n    // remove the scale of the helper on leave\r\n    helper.style.transform = helper.style.transformOrigin = null;\r\n    dd.off(el, 'drag'); // no need to track while being outside\r\n\r\n    // this gets called when cursor leaves and shape is outside, so only do this once\r\n    if (node._temporaryRemoved) return;\r\n    node._temporaryRemoved = true;\r\n\r\n    this.engine.removeNode(node); // remove placeholder as well, otherwise it's a sign node is not in our list, which is a bigger issue\r\n    node.el = node._isExternal && helper ? helper : el; // point back to real item being dragged\r\n    const sidebarOrig = node._sidebarOrig;\r\n    if (node._isExternal) this.engine.cleanupNode(node);\r\n    // Restore sidebar item initial size info to stay consistent when dragging between multiple grids\r\n    node._sidebarOrig = sidebarOrig;\r\n\r\n    if (this.opts.removable === true) { // boolean vs a class string\r\n      // item leaving us and we are supposed to remove on leave (no need to drag onto trash) mark it so\r\n      GridStack._itemRemoving(el, true);\r\n    }\r\n\r\n    // finally if item originally came from another grid, but left us, restore things back to prev info\r\n    if (el._gridstackNodeOrig) {\r\n      // console.log('leave delete _gridstackNodeOrig') // TEST\r\n      el.gridstackNode = el._gridstackNodeOrig;\r\n      delete el._gridstackNodeOrig;\r\n    } else if (node._isExternal) {\r\n      // item came from outside restore all nodes back to original\r\n      this.engine.restoreInitial();\r\n    }\r\n  }\r\n\r\n  // legacy method removed\r\n  public commit(): GridStack { obsolete(this, this.batchUpdate(false), 'commit', 'batchUpdate', '5.2'); return this; }\r\n}\r\n", "import { GridStack, GridStackOptions, GridStackWidget } from 'gridstack';\nimport { createToast } from './bs';\nimport { apiPatch, hasError } from './util';\n\nfunction lockDashboard(): void {\n  const dashboard = document.getElementById('dashboard') as any;\n  if (dashboard) {\n    dashboard.gridstack.disable();\n  }\n}\n\nfunction unlockDashboard(): void {\n  const dashboard = document.getElementById('dashboard') as any;\n  if (dashboard) {\n    dashboard.gridstack.enable();\n  }\n}\n\nasync function saveDashboardLayout(\n  url: string,\n  gridData: GridStackWidget[] | GridStackOptions,\n): Promise<APIResponse<APIUserConfig>> {\n  let data = {\n    layout: gridData\n  }\n  return await apiPatch<APIUserConfig>(url, data);\n}\n\nexport function initDashboard(): void {\n  // Exit if this page does not contain a dashboard\n  const dashboard = document.getElementById('dashboard') as Nullable<HTMLDivElement>;\n  if (dashboard == null) {\n    return;\n  }\n\n  // Initialize the grid\n  let grid = GridStack.init({\n    cellHeight: 100,\n    disableDrag: true,\n    disableResize: true,\n    draggable: {\n      handle: '.grid-stack-item-content .card-header',\n      appendTo: 'body',\n      scroll: true\n    }\n  });\n\n  // Create a listener for the dashboard lock button\n  const gridLockButton = document.getElementById('lock_dashboard') as HTMLButtonElement;\n  if (gridLockButton) {\n    gridLockButton.addEventListener('click', () => {\n      lockDashboard();\n    });\n  }\n\n  // Create a listener for the dashboard unlock button\n  const gridUnlockButton = document.getElementById('unlock_dashboard') as HTMLButtonElement;\n  if (gridUnlockButton) {\n    gridUnlockButton.addEventListener('click', () => {\n      unlockDashboard();\n    });\n  }\n\n  // Create a listener for the dashboard save button\n  const gridSaveButton = document.getElementById('save_dashboard') as HTMLButtonElement;\n  if (gridSaveButton === null) {\n    return;\n  }\n  gridSaveButton.addEventListener('click', () => {\n    const url = gridSaveButton.getAttribute('data-url');\n    if (url == null) {\n      return;\n    }\n    let gridData = grid.save(false);\n    saveDashboardLayout(url, gridData).then(res => {\n      if (hasError(res)) {\n        const toast = createToast('danger', 'Error Saving Dashboard Config', res.error);\n        toast.show();\n      } else {\n        location.reload();\n      }\n    });\n  });\n}\n", "import { rackImagesState, RackViewSelection } from './stores';\nimport { getElements } from './util';\n\nimport type { StateManager } from './state';\n\nexport type RackViewState = { view: RackViewSelection };\n\n/**\n * Show or hide images and labels to build the desired rack view.\n */\nfunction setRackView(\n  view: RackViewSelection,\n  elevation: HTMLObjectElement,\n): void {\n  switch(view) {\n    case 'images-and-labels': {\n      showRackElements('image.device-image', elevation);\n      showRackElements('text.device-image-label', elevation);\n      break;\n    }\n    case 'images-only': {\n      showRackElements('image.device-image', elevation);\n      hideRackElements('text.device-image-label', elevation);\n      break;\n    }\n    case 'labels-only': {\n      hideRackElements('image.device-image', elevation);\n      hideRackElements('text.device-image-label', elevation);\n      break;\n    }\n  }\n}\n\nfunction showRackElements(\n  selector: string,\n  elevation: HTMLObjectElement,\n): void {\n  const elements = elevation.contentDocument?.querySelectorAll(selector) ?? [];\n  for (const element of elements) {\n    element.classList.remove('hidden');\n  }\n}\n\nfunction hideRackElements(\n  selector: string,\n  elevation: HTMLObjectElement,\n): void {\n  const elements = elevation.contentDocument?.querySelectorAll(selector) ?? [];\n  for (const element of elements) {\n    element.classList.add('hidden');\n  }\n}\n\n/**\n * Change the visibility of all racks in response to selection.\n */\nfunction handleRackViewSelect(\n  newView: RackViewSelection,\n  state: StateManager<RackViewState>,\n): void {\n  state.set('view', newView);\n  for (const elevation of getElements<HTMLObjectElement>('.rack_elevation')) {\n    setRackView(newView, elevation);\n  }\n}\n\n/**\n * Add change callback for selecting rack elevation images, and set\n * initial state of select and the images themselves\n */\nexport function initRackElevation(): void {\n  const initialView = rackImagesState.get('view');\n\n  for (const control of getElements<HTMLSelectElement>('select.rack-view')) {\n    control.selectedIndex = [...control.options].findIndex(o => o.value == initialView);\n    control.addEventListener(\n      'change',\n      event => {\n        handleRackViewSelect((event.currentTarget as any).value as RackViewSelection, rackImagesState);\n      },\n      false,\n    );\n  }\n\n  for (const element of getElements<HTMLObjectElement>('.rack_elevation')) {\n    element.addEventListener('load', () => {\n      setRackView(initialView, element);\n    });\n  }\n}\n", "import { getElements } from './util';\n\nfunction handleSelection(link: HTMLAnchorElement): void {\n  const selector_results = document.getElementById('selector_results');\n  if (selector_results == null) {\n    return\n  }\n  const target_id = selector_results.getAttribute('data-selector-target');\n  if (target_id == null) {\n    return\n  }\n  const target = document.getElementById(target_id);\n  if (target == null) {\n    return\n  }\n\n  const label = link.getAttribute('data-label');\n  const value = link.getAttribute('data-value');\n\n  //@ts-ignore\n  target.tomselect.addOption({\n    id: value,\n    display: label,\n  });\n  //@ts-ignore\n  target.tomselect.addItem(value);\n\n}\n\n\nexport function initObjectSelector(): void {\n  for (const element of getElements<HTMLAnchorElement>('#selector_results a')) {\n    element.addEventListener('click', () => handleSelection(element));\n  }\n}\n", "import { Modal } from 'bootstrap';\n\nfunction handleQuickAddObject(): void {\n  const quick_add = document.getElementById('quick-add-object');\n  if (quick_add == null) return;\n\n  const object_id = quick_add.getAttribute('data-object-id');\n  if (object_id == null) return;\n  const object_repr = quick_add.getAttribute('data-object-repr');\n  if (object_repr == null) return;\n\n  const target_id = quick_add.getAttribute('data-target-id');\n  if (target_id == null) return;\n  const target = document.getElementById(target_id);\n  if (target == null) return;\n\n  //@ts-expect-error tomselect added on init\n  target.tomselect.addOption({\n    id: object_id,\n    display: object_repr,\n  });\n  //@ts-expect-error tomselect added on init\n  target.tomselect.addItem(object_id);\n\n  const modal_element = document.getElementById('htmx-modal');\n  if (modal_element) {\n    const modal = Modal.getInstance(modal_element);\n    if (modal) {\n      modal.hide();\n    }\n  }\n}\n\nexport function initQuickAdd(): void {\n  const quick_add_modal = document.getElementById('htmx-modal-content');\n  if (quick_add_modal) {\n    quick_add_modal.addEventListener('htmx:afterSwap', () => handleQuickAddObject());\n  }\n}\n", "import { initForms } from './forms';\nimport { initButtons } from './buttons';\nimport { initClipboard } from './clipboard';\nimport { initSelects } from './select';\nimport { initObjectSelector } from './objectSelector';\nimport { initBootstrap } from './bs';\nimport { initMessages } from './messages';\nimport { initQuickAdd } from './quickAdd';\n\nfunction initDepedencies(): void {\n  initButtons();\n  initClipboard();\n  initForms();\n  initSelects();\n  initObjectSelector();\n  initQuickAdd();\n  initBootstrap();\n  initMessages();\n}\n\n/**\n * Hook into HTMX's event system to reinitialize specific native event listeners when HTMX swaps\n * elements.\n */\nexport function initHtmx(): void {\n  document.addEventListener('htmx:afterSettle', initDepedencies);\n}\n", "import { isTruthy } from '../util';\n\n/**\n * Handle saved filter change event.\n *\n * @param event \"change\" event for the saved filter select\n */\nfunction handleSavedFilterChange(event: Event): void {\n  const savedFilter = event.currentTarget as HTMLSelectElement;\n  let baseUrl = savedFilter.baseURI.split('?')[0];\n  const preFilter = '?';\n\n  const selectedOptions = Array.from(savedFilter.options)\n    .filter(option => option.selected)\n    .map(option => `filter_id=${option.value}`)\n    .join('&');\n\n  baseUrl += `${preFilter}${selectedOptions}`;\n  document.location.href = baseUrl;\n}\n\nexport function initSavedFilterSelect(): void {\n  const divResults = document.getElementById('results');\n  if (isTruthy(divResults)) {\n    const savedFilterSelect = document.getElementById('id_filter_id');\n    if (isTruthy(savedFilterSelect)) {\n      savedFilterSelect.addEventListener('change', handleSavedFilterChange);\n    }\n  }\n}\n", "import { initForms } from './forms';\nimport { initBootstrap } from './bs';\nimport { initQuickSearch } from './search';\nimport { initSelects } from './select';\nimport { initButtons } from './buttons';\nimport { initColorMode } from './colorMode';\nimport { initMessages } from './messages';\nimport { initClipboard } from './clipboard';\nimport { initDateSelector } from './dateSelector';\nimport { initTableConfig } from './tableConfig';\nimport { initInterfaceTable } from './tables';\nimport { initSideNav } from './sidenav';\nimport { initDashboard } from './dashboard';\nimport { initRackElevation } from './racks';\nimport { initHtmx } from './htmx';\nimport { initSavedFilterSelect } from './forms/savedFiltersSelect';\n\nfunction initDocument(): void {\n  for (const init of [\n    initBootstrap,\n    initColorMode,\n    initMessages,\n    initForms,\n    initQuickSearch,\n    initSelects,\n    initDateSelector,\n    initButtons,\n    initClipboard,\n    initTableConfig,\n    initInterfaceTable,\n    initSideNav,\n    initDashboard,\n    initRackElevation,\n    initHtmx,\n    initSavedFilterSelect,\n  ]) {\n    init();\n  }\n}\n\nfunction initWindow(): void {\n  const documentForms = document.forms;\n  for (const documentForm of documentForms) {\n    if (documentForm.method.toUpperCase() == 'GET') {\n      documentForm.addEventListener('formdata', function (event: FormDataEvent) {\n        const formData: FormData = event.formData;\n        for (const [name, value] of Array.from(formData.entries())) {\n          if (value === '') formData.delete(name);\n        }\n      });\n    }\n  }\n\n  const contentContainer = document.querySelector<HTMLElement>('.content-container');\n  if (contentContainer !== null) {\n    // Focus the content container for accessible navigation.\n    contentContainer.focus();\n  }\n}\n\nwindow.addEventListener('load', initWindow);\n\nif (document.readyState !== 'loading') {\n  initDocument();\n} else {\n  document.addEventListener('DOMContentLoaded', initDocument);\n}\n"],
  "mappings": "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",
  "names": ["require_clipboard", "__commonJSMin", "exports", "module", "root", "factory", "__webpack_modules__", "__unused_webpack_module", "__webpack_exports__", "__webpack_require__", "clipboard", "tiny_emitter", "tiny_emitter_default", "listen", "listen_default", "src_select", "select_default", "command", "type", "err", "ClipboardActionCut", "target", "selectedText", "actions_cut", "createFakeElement", "value", "isRTL", "fakeElement", "yPosition", "fakeCopyAction", "options", "ClipboardActionCopy", "actions_copy", "_typeof", "obj", "ClipboardActionDefault", "_options$action", "action", "container", "text", "actions_default", "clipboard_typeof", "_classCallCheck", "instance", "Constructor", "_defineProperties", "props", "i", "descriptor", "_createClass", "protoProps", "staticProps", "_inherits", "subClass", "superClass", "_setPrototypeOf", "o", "p", "_createSuper", "Derived", "hasNativeReflectConstruct", "_isNativeReflectConstruct", "Super", "_getPrototypeOf", "result", "NewTarget", "_possibleConstructorReturn", "self", "call", "_assertThisInitialized", "e", "getAttributeValue", "suffix", "element", "attribute", "Clipboard", "_Emitter", "_super", "trigger", "_this", "_this2", "selector", "actions", "support", "DOCUMENT_NODE_TYPE", "proto", "closest", "__unused_webpack_exports", "_delegate", "callback", "useCapture", "listenerFn", "listener", "delegate", "elements", "is", "listenNode", "listenNodeList", "listenSelector", "node", "nodeList", "select", "isReadOnly", "selection", "range", "E", "name", "ctx", "data", "evtArr", "len", "evts", "liveEvents", "__webpack_module_cache__", "moduleId", "getter", "definition", "key", "prop", "lib_exports", "__export", "afterMain", "afterRead", "afterWrite", "applyStyles_default", "arrow_default", "auto", "basePlacements", "beforeMain", "beforeRead", "beforeWrite", "bottom", "clippingParents", "computeStyles_default", "createPopper", "detectOverflow", "end", "eventListeners_default", "flip_default", "hide_default", "left", "main", "modifierPhases", "offset_default", "placements", "popper", "popperGenerator", "popperOffsets_default", "preventOverflow_default", "read", "reference", "right", "start", "top", "variationPlacements", "viewport", "write", "top", "bottom", "right", "left", "auto", "basePlacements", "start", "end", "clippingParents", "viewport", "popper", "reference", "variationPlacements", "acc", "placement", "placements", "beforeRead", "read", "afterRead", "beforeMain", "main", "afterMain", "beforeWrite", "write", "afterWrite", "modifierPhases", "getNodeName", "element", "getWindow", "node", "ownerDocument", "isElement", "node", "OwnElement", "getWindow", "isHTMLElement", "isShadowRoot", "applyStyles", "_ref", "state", "name", "style", "attributes", "element", "isHTMLElement", "getNodeName", "value", "effect", "_ref2", "initialStyles", "styleProperties", "property", "attribute", "applyStyles_default", "getBasePlacement", "placement", "max", "min", "round", "getUAString", "uaData", "item", "isLayoutViewport", "getUAString", "getBoundingClientRect", "element", "includeScale", "isFixedStrategy", "clientRect", "scaleX", "scaleY", "isHTMLElement", "round", "_ref", "isElement", "getWindow", "visualViewport", "addVisualOffsets", "isLayoutViewport", "x", "y", "width", "height", "getLayoutRect", "element", "clientRect", "getBoundingClientRect", "width", "height", "contains", "parent", "child", "rootNode", "isShadowRoot", "next", "getComputedStyle", "element", "getWindow", "isTableElement", "element", "getNodeName", "getDocumentElement", "element", "isElement", "getParentNode", "element", "getNodeName", "isShadowRoot", "getDocumentElement", "getTrueOffsetParent", "element", "isHTMLElement", "getComputedStyle", "getContainingBlock", "isFirefox", "getUAString", "isIE", "elementCss", "currentNode", "getParentNode", "isShadowRoot", "getNodeName", "css", "getOffsetParent", "window", "getWindow", "offsetParent", "isTableElement", "getMainAxisFromPlacement", "placement", "within", "min", "value", "max", "withinMaxClamp", "v", "getFreshSideObject", "mergePaddingObject", "paddingObject", "getFreshSideObject", "expandToHashMap", "value", "keys", "hashMap", "key", "toPaddingObject", "padding", "state", "mergePaddingObject", "expandToHashMap", "basePlacements", "arrow", "_ref", "_state$modifiersData$", "name", "options", "arrowElement", "popperOffsets", "basePlacement", "getBasePlacement", "axis", "getMainAxisFromPlacement", "isVertical", "left", "right", "len", "paddingObject", "arrowRect", "getLayoutRect", "minProp", "top", "maxProp", "bottom", "endDiff", "startDiff", "arrowOffsetParent", "getOffsetParent", "clientSize", "centerToReference", "min", "max", "center", "offset", "within", "axisProp", "effect", "_ref2", "_options$element", "contains", "arrow_default", "getVariation", "placement", "unsetSides", "roundOffsetsByDPR", "_ref", "win", "x", "y", "dpr", "round", "mapToStyles", "_ref2", "_Object$assign2", "popper", "popperRect", "placement", "variation", "offsets", "position", "gpuAcceleration", "adaptive", "roundOffsets", "isFixed", "_offsets$x", "_offsets$y", "_ref3", "hasX", "hasY", "sideX", "left", "sideY", "top", "offsetParent", "getOffsetParent", "heightProp", "widthProp", "getWindow", "getDocumentElement", "getComputedStyle", "right", "end", "bottom", "offsetY", "offsetX", "commonStyles", "_ref4", "_Object$assign", "computeStyles", "_ref5", "state", "options", "_options$gpuAccelerat", "_options$adaptive", "_options$roundOffsets", "getBasePlacement", "getVariation", "computeStyles_default", "passive", "effect", "_ref", "state", "instance", "options", "_options$scroll", "scroll", "_options$resize", "resize", "window", "getWindow", "scrollParents", "scrollParent", "eventListeners_default", "hash", "getOppositePlacement", "placement", "matched", "hash", "getOppositeVariationPlacement", "placement", "matched", "getWindowScroll", "node", "win", "getWindow", "scrollLeft", "scrollTop", "getWindowScrollBarX", "element", "getBoundingClientRect", "getDocumentElement", "getWindowScroll", "getViewportRect", "element", "strategy", "win", "getWindow", "html", "getDocumentElement", "visualViewport", "width", "height", "x", "y", "layoutViewport", "isLayoutViewport", "getWindowScrollBarX", "getDocumentRect", "element", "_element$ownerDocumen", "html", "getDocumentElement", "winScroll", "getWindowScroll", "body", "width", "max", "height", "x", "getWindowScrollBarX", "y", "getComputedStyle", "isScrollParent", "element", "_getComputedStyle", "getComputedStyle", "overflow", "overflowX", "overflowY", "getScrollParent", "node", "getNodeName", "isHTMLElement", "isScrollParent", "getParentNode", "listScrollParents", "element", "list", "_element$ownerDocumen", "scrollParent", "getScrollParent", "isBody", "win", "getWindow", "target", "isScrollParent", "updatedList", "getParentNode", "rectToClientRect", "rect", "getInnerBoundingClientRect", "element", "strategy", "rect", "getBoundingClientRect", "getClientRectFromMixedType", "clippingParent", "viewport", "rectToClientRect", "getViewportRect", "isElement", "getDocumentRect", "getDocumentElement", "getClippingParents", "clippingParents", "listScrollParents", "getParentNode", "canEscapeClipping", "getComputedStyle", "clipperElement", "isHTMLElement", "getOffsetParent", "contains", "getNodeName", "getClippingRect", "boundary", "rootBoundary", "mainClippingParents", "firstClippingParent", "clippingRect", "accRect", "max", "min", "computeOffsets", "_ref", "reference", "element", "placement", "basePlacement", "getBasePlacement", "variation", "getVariation", "commonX", "commonY", "offsets", "top", "bottom", "right", "left", "mainAxis", "getMainAxisFromPlacement", "len", "start", "end", "detectOverflow", "state", "options", "_options", "_options$placement", "placement", "_options$strategy", "strategy", "_options$boundary", "boundary", "clippingParents", "_options$rootBoundary", "rootBoundary", "viewport", "_options$elementConte", "elementContext", "popper", "_options$altBoundary", "altBoundary", "_options$padding", "padding", "paddingObject", "mergePaddingObject", "expandToHashMap", "basePlacements", "altContext", "reference", "popperRect", "element", "clippingClientRect", "getClippingRect", "isElement", "getDocumentElement", "referenceClientRect", "getBoundingClientRect", "popperOffsets", "computeOffsets", "popperClientRect", "rectToClientRect", "elementClientRect", "overflowOffsets", "offsetData", "offset", "key", "multiply", "right", "bottom", "axis", "top", "computeAutoPlacement", "state", "options", "_options", "placement", "boundary", "rootBoundary", "padding", "flipVariations", "_options$allowedAutoP", "allowedAutoPlacements", "placements", "variation", "getVariation", "variationPlacements", "basePlacements", "allowedPlacements", "overflows", "acc", "detectOverflow", "getBasePlacement", "a", "b", "getExpandedFallbackPlacements", "placement", "getBasePlacement", "auto", "oppositePlacement", "getOppositePlacement", "getOppositeVariationPlacement", "flip", "_ref", "state", "options", "name", "_options$mainAxis", "checkMainAxis", "_options$altAxis", "checkAltAxis", "specifiedFallbackPlacements", "padding", "boundary", "rootBoundary", "altBoundary", "_options$flipVariatio", "flipVariations", "allowedAutoPlacements", "preferredPlacement", "basePlacement", "isBasePlacement", "fallbackPlacements", "placements", "acc", "computeAutoPlacement", "referenceRect", "popperRect", "checksMap", "makeFallbackChecks", "firstFittingPlacement", "i", "_basePlacement", "isStartVariation", "getVariation", "start", "isVertical", "top", "bottom", "len", "overflow", "detectOverflow", "mainVariationSide", "right", "left", "altVariationSide", "checks", "check", "numberOfChecks", "_loop", "_i", "fittingPlacement", "_ret", "flip_default", "getSideOffsets", "overflow", "rect", "preventedOffsets", "isAnySideFullyClipped", "top", "right", "bottom", "left", "side", "hide", "_ref", "state", "name", "referenceRect", "popperRect", "referenceOverflow", "detectOverflow", "popperAltOverflow", "referenceClippingOffsets", "popperEscapeOffsets", "isReferenceHidden", "hasPopperEscaped", "hide_default", "distanceAndSkiddingToXY", "placement", "rects", "offset", "basePlacement", "getBasePlacement", "invertDistance", "left", "top", "_ref", "skidding", "distance", "right", "_ref2", "state", "options", "name", "_options$offset", "data", "placements", "acc", "_data$state$placement", "x", "y", "offset_default", "popperOffsets", "_ref", "state", "name", "computeOffsets", "popperOffsets_default", "getAltAxis", "axis", "preventOverflow", "_ref", "state", "options", "name", "_options$mainAxis", "checkMainAxis", "_options$altAxis", "checkAltAxis", "boundary", "rootBoundary", "altBoundary", "padding", "_options$tether", "tether", "_options$tetherOffset", "tetherOffset", "overflow", "detectOverflow", "basePlacement", "getBasePlacement", "variation", "getVariation", "isBasePlacement", "mainAxis", "getMainAxisFromPlacement", "altAxis", "getAltAxis", "popperOffsets", "referenceRect", "popperRect", "tetherOffsetValue", "normalizedTetherOffsetValue", "offsetModifierState", "data", "_offsetModifierState$", "mainSide", "top", "left", "altSide", "bottom", "right", "len", "offset", "min", "max", "additive", "minLen", "start", "maxLen", "arrowElement", "arrowRect", "getLayoutRect", "arrowPaddingObject", "getFreshSideObject", "arrowPaddingMin", "arrowPaddingMax", "arrowLen", "within", "minOffset", "maxOffset", "arrowOffsetParent", "getOffsetParent", "clientOffset", "offsetModifierValue", "tetherMin", "tetherMax", "preventedOffset", "_offsetModifierState$2", "_mainSide", "_altSide", "_offset", "_len", "_min", "_max", "isOriginSide", "_offsetModifierValue", "_tetherMin", "_tetherMax", "_preventedOffset", "withinMaxClamp", "preventOverflow_default", "getHTMLElementScroll", "element", "getNodeScroll", "node", "getWindow", "isHTMLElement", "getWindowScroll", "getHTMLElementScroll", "isElementScaled", "element", "rect", "scaleX", "round", "scaleY", "getCompositeRect", "elementOrVirtualElement", "offsetParent", "isFixed", "isOffsetParentAnElement", "isHTMLElement", "offsetParentIsScaled", "documentElement", "getDocumentElement", "getBoundingClientRect", "scroll", "offsets", "getNodeName", "isScrollParent", "getNodeScroll", "getWindowScrollBarX", "order", "modifiers", "map", "visited", "result", "modifier", "sort", "requires", "dep", "depModifier", "orderModifiers", "orderedModifiers", "modifierPhases", "acc", "phase", "debounce", "fn", "pending", "resolve", "mergeByName", "modifiers", "merged", "current", "existing", "key", "DEFAULT_OPTIONS", "areValidElements", "_len", "args", "_key", "element", "popperGenerator", "generatorOptions", "_generatorOptions", "_generatorOptions$def", "defaultModifiers", "_generatorOptions$def2", "defaultOptions", "reference", "popper", "options", "state", "effectCleanupFns", "isDestroyed", "instance", "setOptionsAction", "cleanupModifierEffects", "isElement", "listScrollParents", "orderedModifiers", "orderModifiers", "mergeByName", "m", "runModifierEffects", "_state$elements", "getCompositeRect", "getOffsetParent", "getLayoutRect", "modifier", "index", "_state$orderedModifie", "fn", "_state$orderedModifie2", "_options", "name", "debounce", "resolve", "_ref", "_ref$options", "effect", "cleanupFn", "noopFn", "createPopper", "defaultModifiers", "eventListeners_default", "popperOffsets_default", "computeStyles_default", "applyStyles_default", "createPopper", "popperGenerator", "defaultModifiers", "eventListeners_default", "popperOffsets_default", "computeStyles_default", "applyStyles_default", "offset_default", "flip_default", "preventOverflow_default", "arrow_default", "hide_default", "createPopper", "popperGenerator", "elementMap", "Map", "Data", "set", "element", "key", "instance", "has", "instanceMap", "get", "size", "console", "error", "Array", "from", "keys", "remove", "delete", "MAX_UID", "MILLISECONDS_MULTIPLIER", "TRANSITION_END", "parseSelector", "selector", "window", "CSS", "escape", "replace", "match", "id", "toType", "object", "Object", "prototype", "toString", "call", "toLowerCase", "getUID", "prefix", "Math", "floor", "random", "document", "getElementById", "getTransitionDurationFromElement", "transitionDuration", "transitionDelay", "getComputedStyle", "floatTransitionDuration", "Number", "parseFloat", "floatTransitionDelay", "split", "triggerTransitionEnd", "dispatchEvent", "Event", "isElement", "jquery", "nodeType", "getElement", "length", "querySelector", "isVisible", "getClientRects", "elementIsVisible", "getPropertyValue", "closedDetails", "closest", "summary", "parentNode", "isDisabled", "Node", "ELEMENT_NODE", "classList", "contains", "disabled", "hasAttribute", "getAttribute", "findShadowRoot", "documentElement", "attachShadow", "getRootNode", "root", "ShadowRoot", "noop", "reflow", "offsetHeight", "getjQuery", "jQuery", "body", "DOMContentLoadedCallbacks", "onDOMContentLoaded", "callback", "readyState", "addEventListener", "push", "isRTL", "dir", "defineJQueryPlugin", "plugin", "$", "name", "NAME", "JQUERY_NO_CONFLICT", "fn", "jQueryInterface", "Constructor", "noConflict", "execute", "possibleCallback", "args", "defaultValue", "executeAfterTransition", "transitionElement", "waitForTransition", "emulatedDuration", "called", "handler", "target", "removeEventListener", "setTimeout", "getNextActiveElement", "list", "activeElement", "shouldGetNext", "isCycleAllowed", "listLength", "index", "indexOf", "max", "min", "namespaceRegex", "stripNameRegex", "stripUidRegex", "eventRegistry", "uidEvent", "customEvents", "mouseenter", "mouseleave", "nativeEvents", "Set", "makeEventUid", "uid", "getElementEvents", "bootstrapHandler", "event", "hydrateObj", "delegateTarget", "oneOff", "EventHandler", "off", "type", "apply", "bootstrapDelegationHandler", "domElements", "querySelectorAll", "domElement", "findHandler", "events", "callable", "delegationSelector", "values", "find", "normalizeParameters", "originalTypeEvent", "delegationFunction", "isDelegated", "typeEvent", "getTypeEvent", "addHandler", "relatedTarget", "handlers", "previousFunction", "removeHandler", "Boolean", "removeNamespacedHandlers", "namespace", "storeElementEvent", "handlerKey", "entries", "includes", "on", "one", "inNamespace", "isNamespace", "startsWith", "elementEvent", "slice", "keyHandlers", "trigger", "jQueryEvent", "bubbles", "nativeDispatch", "defaultPrevented", "isPropagationStopped", "isImmediatePropagationStopped", "isDefaultPrevented", "evt", "cancelable", "preventDefault", "obj", "meta", "value", "_unused", "defineProperty", "configurable", "normalizeData", "JSON", "parse", "decodeURIComponent", "normalizeDataKey", "chr", "Manipulator", "setDataAttribute", "setAttribute", "removeDataAttribute", "removeAttribute", "getDataAttributes", "attributes", "bsKeys", "dataset", "filter", "pureKey", "charAt", "getDataAttribute", "Config", "Default", "DefaultType", "Error", "_getConfig", "config", "_mergeConfigObj", "_configAfterMerge", "_typeCheckConfig", "jsonConfig", "__spreadValues", "constructor", "configTypes", "property", "expectedTypes", "valueType", "RegExp", "test", "TypeError", "toUpperCase", "VERSION", "BaseComponent", "_element", "_config", "DATA_KEY", "dispose", "EVENT_KEY", "propertyName", "getOwnPropertyNames", "_queueCallback", "isAnimated", "getInstance", "getOrCreateInstance", "eventName", "getSelector", "hrefAttribute", "trim", "map", "sel", "join", "SelectorEngine", "concat", "Element", "findOne", "children", "child", "matches", "parents", "ancestor", "prev", "previous", "previousElementSibling", "next", "nextElementSibling", "focusableChildren", "focusables", "el", "getSelectorFromElement", "getElementFromSelector", "getMultipleElementsFromSelector", "enableDismissTrigger", "component", "method", "clickEvent", "tagName", "EVENT_CLOSE", "EVENT_CLOSED", "CLASS_NAME_FADE", "CLASS_NAME_SHOW", "Alert", "close", "_destroyElement", "each", "data", "undefined", "DATA_API_KEY", "CLASS_NAME_ACTIVE", "SELECTOR_DATA_TOGGLE", "EVENT_CLICK_DATA_API", "Button", "toggle", "button", "EVENT_TOUCHSTART", "EVENT_TOUCHMOVE", "EVENT_TOUCHEND", "EVENT_POINTERDOWN", "EVENT_POINTERUP", "POINTER_TYPE_TOUCH", "POINTER_TYPE_PEN", "CLASS_NAME_POINTER_EVENT", "SWIPE_THRESHOLD", "endCallback", "leftCallback", "rightCallback", "Swipe", "isSupported", "_deltaX", "_supportPointerEvents", "PointerEvent", "_initEvents", "_start", "touches", "clientX", "_eventIsPointerPenTouch", "_end", "_handleSwipe", "_move", "absDeltaX", "abs", "direction", "add", "pointerType", "navigator", "maxTouchPoints", "ARROW_LEFT_KEY", "ARROW_RIGHT_KEY", "TOUCHEVENT_COMPAT_WAIT", "ORDER_NEXT", "ORDER_PREV", "DIRECTION_LEFT", "DIRECTION_RIGHT", "EVENT_SLIDE", "EVENT_SLID", "EVENT_KEYDOWN", "EVENT_MOUSEENTER", "EVENT_MOUSELEAVE", "EVENT_DRAG_START", "EVENT_LOAD_DATA_API", "CLASS_NAME_CAROUSEL", "CLASS_NAME_SLIDE", "CLASS_NAME_END", "CLASS_NAME_START", "CLASS_NAME_NEXT", "CLASS_NAME_PREV", "SELECTOR_ACTIVE", "SELECTOR_ITEM", "SELECTOR_ACTIVE_ITEM", "SELECTOR_ITEM_IMG", "SELECTOR_INDICATORS", "SELECTOR_DATA_SLIDE", "SELECTOR_DATA_RIDE", "KEY_TO_DIRECTION", "interval", "keyboard", "pause", "ride", "touch", "wrap", "Carousel", "_interval", "_activeElement", "_isSliding", "touchTimeout", "_swipeHelper", "_indicatorsElement", "_addEventListeners", "cycle", "_slide", "nextWhenVisible", "hidden", "_clearInterval", "_updateInterval", "setInterval", "_maybeEnableCycle", "to", "items", "_getItems", "activeIndex", "_getItemIndex", "_getActive", "order", "defaultInterval", "_keydown", "_addTouchEventListeners", "img", "swipeConfig", "_directionToOrder", "endCallBack", "clearTimeout", "_setActiveIndicatorElement", "activeIndicator", "newActiveIndicator", "elementInterval", "parseInt", "isNext", "nextElement", "nextElementIndex", "triggerEvent", "_orderToDirection", "isCycling", "directionalClassName", "orderClassName", "completeCallBack", "_isAnimated", "clearInterval", "carousel", "slideIndex", "carousels", "EVENT_SHOW", "EVENT_SHOWN", "EVENT_HIDE", "EVENT_HIDDEN", "CLASS_NAME_COLLAPSE", "CLASS_NAME_COLLAPSING", "CLASS_NAME_COLLAPSED", "CLASS_NAME_DEEPER_CHILDREN", "CLASS_NAME_HORIZONTAL", "WIDTH", "HEIGHT", "SELECTOR_ACTIVES", "parent", "Collapse", "_isTransitioning", "_triggerArray", "toggleList", "elem", "filterElement", "foundElement", "_initializeChildren", "_addAriaAndCollapsedClass", "_isShown", "hide", "show", "activeChildren", "_getFirstLevelChildren", "activeInstance", "dimension", "_getDimension", "style", "complete", "scrollSize", "getBoundingClientRect", "selected", "triggerArray", "isOpen", "ESCAPE_KEY", "TAB_KEY", "ARROW_UP_KEY", "ARROW_DOWN_KEY", "RIGHT_MOUSE_BUTTON", "EVENT_KEYDOWN_DATA_API", "EVENT_KEYUP_DATA_API", "CLASS_NAME_DROPUP", "CLASS_NAME_DROPEND", "CLASS_NAME_DROPSTART", "CLASS_NAME_DROPUP_CENTER", "CLASS_NAME_DROPDOWN_CENTER", "SELECTOR_DATA_TOGGLE_SHOWN", "SELECTOR_MENU", "SELECTOR_NAVBAR", "SELECTOR_NAVBAR_NAV", "SELECTOR_VISIBLE_ITEMS", "PLACEMENT_TOP", "PLACEMENT_TOPEND", "PLACEMENT_BOTTOM", "PLACEMENT_BOTTOMEND", "PLACEMENT_RIGHT", "PLACEMENT_LEFT", "PLACEMENT_TOPCENTER", "PLACEMENT_BOTTOMCENTER", "autoClose", "boundary", "display", "offset", "popperConfig", "reference", "Dropdown", "_popper", "_parent", "_menu", "_inNavbar", "_detectNavbar", "showEvent", "_createPopper", "focus", "_completeHide", "destroy", "update", "hideEvent", "Popper", "referenceElement", "_getPopperConfig", "createPopper", "_getPlacement", "parentDropdown", "isEnd", "_getOffset", "popperData", "defaultBsPopperConfig", "placement", "modifiers", "options", "enabled", "_selectMenuItem", "clearMenus", "openToggles", "context", "composedPath", "isMenuTarget", "dataApiKeydownHandler", "isInput", "isEscapeEvent", "isUpOrDownEvent", "getToggleButton", "stopPropagation", "EVENT_MOUSEDOWN", "className", "clickCallback", "rootElement", "Backdrop", "_isAppended", "_append", "_getElement", "_emulateAnimation", "backdrop", "createElement", "append", "EVENT_FOCUSIN", "EVENT_KEYDOWN_TAB", "TAB_NAV_FORWARD", "TAB_NAV_BACKWARD", "autofocus", "trapElement", "FocusTrap", "_isActive", "_lastTabNavDirection", "activate", "_handleFocusin", "_handleKeydown", "deactivate", "elements", "shiftKey", "SELECTOR_FIXED_CONTENT", "SELECTOR_STICKY_CONTENT", "PROPERTY_PADDING", "PROPERTY_MARGIN", "ScrollBarHelper", "getWidth", "documentWidth", "clientWidth", "innerWidth", "width", "_disableOverFlow", "_setElementAttributes", "calculatedValue", "reset", "_resetElementAttributes", "isOverflowing", "_saveInitialAttribute", "overflow", "styleProperty", "scrollbarWidth", "manipulationCallBack", "setProperty", "_applyManipulationCallback", "actualValue", "removeProperty", "callBack", "EVENT_HIDE_PREVENTED", "EVENT_RESIZE", "EVENT_CLICK_DISMISS", "EVENT_MOUSEDOWN_DISMISS", "EVENT_KEYDOWN_DISMISS", "CLASS_NAME_OPEN", "CLASS_NAME_STATIC", "OPEN_SELECTOR", "SELECTOR_DIALOG", "SELECTOR_MODAL_BODY", "Modal", "_dialog", "_backdrop", "_initializeBackDrop", "_focustrap", "_initializeFocusTrap", "_scrollBar", "_adjustDialog", "_showElement", "_hideModal", "handleUpdate", "scrollTop", "modalBody", "transitionComplete", "_triggerBackdropTransition", "event2", "_resetAdjustments", "isModalOverflowing", "scrollHeight", "clientHeight", "initialOverflowY", "overflowY", "isBodyOverflowing", "paddingLeft", "paddingRight", "alreadyOpen", "CLASS_NAME_SHOWING", "CLASS_NAME_HIDING", "CLASS_NAME_BACKDROP", "scroll", "Offcanvas", "blur", "completeCallback", "position", "ARIA_ATTRIBUTE_PATTERN", "DefaultAllowlist", "a", "area", "b", "br", "col", "code", "dd", "div", "dl", "dt", "em", "hr", "h1", "h2", "h3", "h4", "h5", "h6", "i", "li", "ol", "p", "pre", "s", "small", "span", "sub", "sup", "strong", "u", "ul", "uriAttributes", "SAFE_URL_PATTERN", "allowedAttribute", "attribute", "allowedAttributeList", "attributeName", "nodeName", "nodeValue", "attributeRegex", "some", "regex", "sanitizeHtml", "unsafeHtml", "allowList", "sanitizeFunction", "createdDocument", "DOMParser", "parseFromString", "elementName", "attributeList", "allowedAttributes", "innerHTML", "content", "extraClass", "html", "sanitize", "sanitizeFn", "template", "DefaultContentType", "entry", "TemplateFactory", "getContent", "_resolvePossibleFunction", "hasContent", "changeContent", "_checkContent", "toHtml", "templateWrapper", "_maybeSanitize", "text", "_setContent", "arg", "templateElement", "_putElementInTemplate", "textContent", "DISALLOWED_ATTRIBUTES", "CLASS_NAME_MODAL", "SELECTOR_TOOLTIP_INNER", "SELECTOR_MODAL", "EVENT_MODAL_HIDE", "TRIGGER_HOVER", "TRIGGER_FOCUS", "TRIGGER_CLICK", "TRIGGER_MANUAL", "EVENT_INSERTED", "EVENT_CLICK", "EVENT_FOCUSOUT", "AttachmentMap", "AUTO", "TOP", "RIGHT", "BOTTOM", "LEFT", "animation", "container", "customClass", "delay", "fallbackPlacements", "title", "Tooltip", "_isEnabled", "_timeout", "_isHovered", "_activeTrigger", "_templateFactory", "_newContent", "tip", "_setListeners", "_fixTitle", "enable", "disable", "toggleEnabled", "_leave", "_enter", "_hideModalHandler", "_disposePopper", "_isWithContent", "isInTheDom", "ownerDocument", "_getTipElement", "_isWithActiveTrigger", "_getTitle", "_createTipElement", "_getContentForTemplate", "_getTemplateFactory", "tipId", "setContent", "__spreadProps", "_initializeOnDelegatedTarget", "_getDelegateConfig", "attachment", "phase", "state", "triggers", "eventIn", "eventOut", "_setTimeout", "timeout", "dataAttributes", "dataAttribute", "SELECTOR_TITLE", "SELECTOR_CONTENT", "Popover", "_getContent", "EVENT_ACTIVATE", "CLASS_NAME_DROPDOWN_ITEM", "SELECTOR_DATA_SPY", "SELECTOR_TARGET_LINKS", "SELECTOR_NAV_LIST_GROUP", "SELECTOR_NAV_LINKS", "SELECTOR_NAV_ITEMS", "SELECTOR_LIST_ITEMS", "SELECTOR_LINK_ITEMS", "SELECTOR_DROPDOWN", "SELECTOR_DROPDOWN_TOGGLE", "rootMargin", "smoothScroll", "threshold", "ScrollSpy", "_targetLinks", "_observableSections", "_rootElement", "_activeTarget", "_observer", "_previousScrollData", "visibleEntryTop", "parentScrollTop", "refresh", "_initializeTargetsAndObservables", "_maybeEnableSmoothScroll", "disconnect", "_getNewObserver", "section", "observe", "observableSection", "hash", "height", "offsetTop", "scrollTo", "top", "behavior", "IntersectionObserver", "_observerCallback", "targetElement", "_process", "userScrollsDown", "isIntersecting", "_clearActiveClass", "entryIsLowerThanPrevious", "targetLinks", "anchor", "decodeURI", "_activateParents", "listGroup", "item", "activeNodes", "node", "spy", "HOME_KEY", "END_KEY", "CLASS_DROPDOWN", "SELECTOR_DROPDOWN_MENU", "NOT_SELECTOR_DROPDOWN_TOGGLE", "SELECTOR_TAB_PANEL", "SELECTOR_OUTER", "SELECTOR_INNER", "SELECTOR_INNER_ELEM", "SELECTOR_DATA_TOGGLE_ACTIVE", "Tab", "_setInitialAttributes", "_getChildren", "innerElem", "_elemIsActive", "active", "_getActiveElem", "_deactivate", "_activate", "relatedElem", "_toggleDropDown", "nextActiveElement", "preventScroll", "_setAttributeIfNotExists", "_setInitialAttributesOnChild", "_getInnerElement", "isActive", "outerElem", "_getOuterElement", "_setInitialAttributesOnTargetPanel", "open", "EVENT_MOUSEOVER", "EVENT_MOUSEOUT", "CLASS_NAME_HIDE", "autohide", "Toast", "_hasMouseInteraction", "_hasKeyboardInteraction", "_clearTimeout", "_maybeScheduleHide", "isShown", "_onInteraction", "isInteracting", "htmx", "elt", "type", "verb", "str", "interval", "name", "qualifiedName", "parent", "global", "condition", "initialElement", "ancestor", "attributeName", "attributeValue", "disinherit", "inherit", "closestAttr", "e", "selector", "matchesFunction", "match", "resp", "fragment", "script", "newScript", "attr", "response", "responseWithNoHead", "startTag", "doc", "titleElement", "func", "o", "dataProp", "data", "arr", "returnArr", "i", "el", "rect", "elemTop", "elemBottom", "trigger", "obj1", "obj2", "key", "jString", "error", "test", "path", "url", "callback", "evt", "event", "eltOrSelector", "delay", "value", "clazz", "node", "child", "prefix", "suffix", "trimmedSelector", "parts", "chevronsCount", "offset", "char", "result", "unprocessedParts", "item", "standardSelector", "rootNode", "start", "results", "context", "arg1", "arg2", "arg3", "arg4", "eventArgs", "attrName", "attrTarget", "attribute", "targetStr", "attributesToSettle", "mergeTo", "mergeFrom", "swapStyle", "target", "extensions", "extension", "oobValue", "oobElement", "settleInfo", "targets", "oobElementClone", "beforeSwapDetails", "pantry", "preservedElt", "existingElement", "id", "parentNode", "newNode", "normalizedId", "normalizedTag", "parentElt", "oldNode", "newAttributes", "autofocus", "autoFocusedElt", "insertBefore", "string", "hash", "internalData", "handlerInfo", "element", "info", "newElt", "eltBeforeNewContent", "firstChild", "ext", "newElements", "j", "oobElts", "content", "swapSpec", "swapOptions", "activeElt", "selectionInfo", "oobSelectValues", "oobSelectValue", "template", "newFragment", "newActiveElt", "focusOptions", "doSettle", "task", "anchorTarget", "xhr", "header", "triggerBody", "triggers", "eventName", "detail", "eventNames", "tokens", "position", "startPosition", "startChar", "symbol", "token", "last", "paramName", "bracketCount", "conditionalSource", "conditionFunction", "explicitTrigger", "cache", "triggerSpecs", "initialLength", "every", "eventFilter", "triggerSpec", "from_arg", "handler", "spec", "nodeData", "rawAttribute", "source", "explicitCancel", "elementData", "eltsToListenOn", "eltToListenOn", "eventListener", "eventData", "lastValue", "load", "explicitAction", "observerOptions", "entries", "attributes", "elements", "iter", "boostedSelector", "extensionSelectors", "selectors", "s", "form", "code", "listener", "afterOnPosition", "nextChar", "attrHash", "toDo", "msg", "eventResult", "kebabName", "kebabedEvent", "rootElt", "innerHTML", "title", "scroll", "historyCache", "newHistoryItem", "className", "clone", "disableHistoryCache", "tasks", "request", "details", "historyElement", "cached", "indicators", "ic", "disabledElts", "disabledElement", "disabled", "ele", "processed", "formData", "v", "values", "errors", "validate", "input", "receiver", "donor", "priorityFormData", "button", "includes", "descendant", "returnStr", "realValue", "prompt", "headers", "inputValues", "paramsValue", "newValues", "swapInfoOverride", "swapInfo", "split", "splitSpec", "scrollVal", "selectorVal", "showVal", "focusScrollVal", "filteredParameters", "encodedParameters", "first", "evalAsDefault", "evaluateValue", "varsValues", "toEval", "defaultVal", "expressionVars", "headerValue", "regexp", "resolvedTarget", "requestConfig", "sameHost", "obj", "array", "index", "prop", "etc", "confirmed", "resolve", "reject", "promise", "_resolve", "_reject", "responseHandler", "select", "eltData", "submitter", "buttonPath", "buttonVerb", "confirmQuestion", "skipConfirmation", "syncElt", "syncStrategy", "queueStrategy", "abortable", "syncStrings", "endRequestLock", "promptQuestion", "promptResponse", "rawFormData", "allFormData", "filteredFormData", "requestAttrValues", "eltIsBoosted", "useUrlParams", "splitPath", "pathNoAnchor", "anchor", "finalPath", "responseInfo", "hierarchy", "disableElts", "secondaryTriggerElt", "parentEltInHierarchy", "params", "pathFromHeaders", "typeFromHeaders", "requestPath", "responsePath", "pushUrl", "replaceUrl", "elementIsBoosted", "saveType", "responseHandlingConfig", "status", "regExp", "responseHandlingElement", "titleElt", "responseInfoSelect", "redirectPath", "redirectSwapSpec", "shouldRefresh", "historyUpdate", "responseHandling", "shouldSwap", "isError", "ignoreTitle", "selectOverride", "swapOverride", "serverResponse", "settleResolve", "settleReject", "selectOOB", "doSwap", "finalElt", "shouldTransition", "settlePromise", "innerDoSwap", "api", "text", "parameters", "extensionsToReturn", "extensionsToIgnore", "extensionsForElement", "extensionName", "fn", "nonceAttribute", "metaConfig", "body", "restoredElts", "originalPopstate", "htmx_esm_default", "forEvents", "events", "callback", "event", "MicroEvent", "fct", "event_array", "n", "args", "self", "MicroPlugin", "Interface", "name", "fn", "plugins", "key", "self", "queue", "plugin", "arrayToPattern", "chars", "maxValueLength", "sequencePattern", "array", "hasDuplicates", "pattern", "prev_char_count", "prev_pattern", "char", "i", "setToPattern", "escape_regex", "str", "longest", "value", "unicodeLength", "allSubstrings", "input", "result", "start", "subresult", "tmp", "code_points", "accent_pat", "unicode_map", "multi_char_reg", "max_char_length", "latin_convert", "latin_condensed", "latin", "unicode", "i", "char", "convert_pat", "initialize", "_code_points", "generateMap", "normalize", "str", "form", "asciifold", "result", "_asciifold", "generator", "code_point_min", "code_point_max", "composed", "folded", "generateSets", "unicode_sets", "addMatching", "to_add", "folded_set", "patt", "setToPattern", "escape_regex", "value", "multi_char", "set", "a", "b", "multi_char_patt", "arrayToPattern", "mapSequence", "strings", "min_replacement", "chars_replaced", "sequencePattern", "substringsToPattern", "allSubstrings", "sub_pat", "sequencesToPattern", "sequences", "all", "sequence", "seq", "len", "j", "inSequences", "needle_seq", "needle_parts", "filter", "part", "needle_part", "Sequence", "_Sequence", "__publicField", "position", "last_piece", "clone", "parts", "last_part", "last_substr", "clone_last_len", "getPattern", "pattern", "match", "match_str", "overlapping", "added_types", "new_seq", "old_seq", "getAttr", "obj", "name", "getAttrNesting", "part", "names", "scoreValue", "value", "token", "weight", "score", "pos", "propToArray", "key", "iterate", "object", "callback", "cmp", "a", "b", "asciifold", "Sifter", "items", "settings", "__publicField", "query", "respect_word_boundaries", "weights", "tokens", "words", "field_regex", "escape_regex", "word", "field_match", "field", "regex", "getPattern", "options", "search", "token_count", "fields", "field_count", "getAttrFn", "scoreObject", "token", "data", "scoreValue", "sum", "value", "iterate", "weight", "score", "implicit_score", "sort_flds", "self", "sort", "get_field", "name", "result", "s", "fld", "a", "b", "sort_fld", "cmp", "optsUser", "propToArray", "getAttrNesting", "getAttr", "fn_score", "item", "id", "_", "fn_sort", "hash_key", "value", "get_hash", "escape_html", "str", "timeout", "fn", "loadDebounce", "delay", "callback", "self", "debounce_events", "types", "type", "trigger", "event_args", "getSelection", "input", "preventDefault", "evt", "stop", "addEvent", "target", "options", "isKeyDown", "key_name", "count", "getId", "el", "id", "existing_id", "addSlashes", "append", "parent", "node", "iterate", "object", "key", "getDom", "query", "isHtmlString", "tpl", "arg", "escapeQuery", "triggerEvent", "dom_el", "event_name", "event", "applyCSS", "css", "addClasses", "elmts", "classes", "norm_classes", "classesArray", "castAsArray", "el", "cls", "removeClasses", "args", "iterate", "_classes", "parentMatch", "target", "selector", "wrapper", "getTail", "list", "direction", "isEmptyObject", "obj", "nodeIndex", "amongst", "i", "setAttr", "attrs", "val", "attr", "replaceNode", "existing", "replacement", "highlight", "element", "regex", "highlightText", "node", "match", "spannode", "middlebit", "middleclone", "replaceNode", "highlightChildren", "highlightRecursive", "removeHighlight", "el", "elements", "parent", "IS_MAC", "KEY_SHORTCUT", "defaults_default", "query", "getSettings", "input", "settings_user", "settings", "defaults_default", "attr_data", "field_label", "field_value", "field_disabled", "field_optgroup", "field_optgroup_label", "field_optgroup_value", "tag_name", "placeholder", "option", "settings_element", "init_select", "tagName", "options", "optionsMap", "group_count", "$order", "readData", "el", "data", "json", "addOption", "group", "value", "hash_key", "arr", "option_data", "addGroup", "optgroup", "id", "optgroup_data", "iterate", "child", "init_textbox", "data_raw", "opt", "values", "instance_i", "TomSelect", "MicroPlugin", "MicroEvent", "input_arg", "user_settings", "dir", "input", "getDom", "computedStyle", "settings", "getSettings", "getId", "Sifter", "filter", "value", "wrapper", "control", "dropdown", "dropdown_content", "classes", "inputMode", "control_input", "addClasses", "append", "isHtmlString", "attrs", "iterate", "attr", "setAttr", "self", "focus_node", "passive_event", "listboxId", "control_id", "query", "escapeQuery", "label", "label_click", "addEvent", "label_id", "classes_plugins", "escape_regex", "loadDebounce", "e", "target_match", "parentMatch", "evt", "option", "preventDefault", "doc_mousedown", "target", "win_scroll", "options", "optgroups", "optgroup", "field_label", "field_optgroup", "templates", "data", "escape", "key", "fn", "callbacks", "get_settings", "triggerEvent", "pastedText", "splitInput", "piece", "hash_key", "character", "isKeyDown", "KEY_SHORTCUT", "next", "prev", "timeout", "wasFocused", "deactivate", "item", "callback", "removeClasses", "classList", "changed", "silent", "events", "debounce_events", "eventName", "i", "begin", "end", "swap", "last", "last_active", "idx", "scroll", "behavior", "content", "height_menu", "scrollTop", "height_item", "y", "activeItems", "sort", "result", "calculateScore", "hashed", "triggerDropdown", "j", "k", "n", "html", "has_create_option", "active_group", "create", "groups", "groups_order", "same_query", "results", "active_option", "show_dropdown", "getGroupFragment", "order", "group_order_i", "order_group", "group_fragment", "opt_value", "opt_hash", "get_hash", "option_el", "self_optgroup", "a", "b", "group_order", "group_heading", "group_options", "header", "group_html", "removeHighlight", "tok", "highlight", "add_template", "template", "active_index", "user_created", "dat", "id", "hashed_id", "item_new", "index_item", "value_old", "value_new", "data_old", "option_new", "replaceNode", "boundFilter", "selected", "direction", "type", "all", "addSlashes", "values", "items", "x", "last_item", "wasFull", "nodeIndex", "caret", "output", "created", "isFull", "isLocked", "wrap_classList", "isEmptyObject", "opts", "empty_option", "AddSelected", "escape_html", "has_selected", "reuse_opt", "applyCSS", "setTextboxValue", "trigger", "context", "rect", "top", "left", "el", "selection", "tail", "getSelection", "rm_items", "getTail", "rm_item", "adjacent", "new_pos", "lock", "disabled", "isReadOnly", "revertSettings", "templateName", "when", "method", "new_fn", "orig_method", "result_new", "addEvent", "target", "type", "callback", "options", "addEventListener", "plugin", "input", "sync", "hash_key", "value", "get_hash", "preventDefault", "evt", "stop", "stopPropagation", "getDom", "query", "jquery", "HTMLElement", "isHtmlString", "tpl", "document", "createElement", "innerHTML", "trim", "content", "firstChild", "querySelector", "arg", "indexOf", "plugin", "userOptions", "self", "orig_onOptionSelect", "onOptionSelect", "settings", "hideSelected", "cbOptions", "Object", "assign", "className", "checkedClassNames", "undefined", "uncheckedClassNames", "UpdateChecked", "checkbox", "toCheck", "checked", "classList", "remove", "add", "UpdateCheckbox", "option", "setTimeout", "HTMLInputElement", "contains", "hook", "orig_render_option", "render", "data", "escape_html", "rendered", "call", "addEventListener", "type", "hashed", "valueField", "items", "prepend", "on", "getOption", "removeItem", "dataset", "refreshOptions", "getDom", "query", "jquery", "HTMLElement", "isHtmlString", "tpl", "document", "createElement", "innerHTML", "trim", "content", "firstChild", "querySelector", "arg", "indexOf", "plugin", "userOptions", "self", "options", "Object", "assign", "className", "title", "html", "data", "on", "button", "addEventListener", "evt", "isLocked", "clear", "settings", "mode", "allowEmptyOption", "addItem", "preventDefault", "stopPropagation", "control", "appendChild", "preventDefault", "evt", "stop", "stopPropagation", "addEvent", "target", "type", "callback", "options", "addEventListener", "iterate", "object", "Array", "isArray", "forEach", "key", "hasOwnProperty", "getDom", "query", "jquery", "HTMLElement", "isHtmlString", "tpl", "document", "createElement", "innerHTML", "trim", "content", "firstChild", "querySelector", "arg", "indexOf", "setAttr", "el", "attrs", "val", "attr", "removeAttribute", "setAttribute", "insertAfter", "referenceNode", "newNode", "_referenceNode$parent", "parentNode", "insertBefore", "nextSibling", "_referenceNode$parent2", "isBefore", "_newNode", "previousElementSibling", "plugin", "self", "settings", "mode", "orig_lock", "lock", "orig_unlock", "unlock", "sortable", "drag_item", "hook", "orig_render_item", "render", "item", "data", "escape", "call", "mousedown", "dragStart", "setTimeout", "classList", "add", "dragOver", "moveitem", "dragLeave", "remove", "targetitem", "dragitem", "undefined", "dragend", "_drag_item", "querySelectorAll", "values", "control", "dataset", "value", "push", "setValue", "preventDefault", "evt", "stop", "stopPropagation", "getDom", "query", "jquery", "HTMLElement", "isHtmlString", "tpl", "document", "createElement", "innerHTML", "trim", "content", "firstChild", "querySelector", "arg", "indexOf", "plugin", "userOptions", "self", "options", "Object", "assign", "title", "headerClass", "titleRowClass", "labelClass", "closeClass", "html", "data", "on", "header", "close_link", "addEventListener", "close", "dropdown", "insertBefore", "iterate", "object", "callback", "Array", "isArray", "forEach", "key", "hasOwnProperty", "removeClasses", "elmts", "classes", "norm_classes", "classesArray", "castAsArray", "map", "el", "cls", "classList", "remove", "args", "_classes", "trim", "split", "concat", "filter", "Boolean", "arg", "nodeIndex", "amongst", "nodeName", "i", "previousElementSibling", "matches", "plugin", "self", "hook", "new_pos", "settings", "mode", "control", "contains", "control_input", "items", "length", "Math", "max", "min", "caretPos", "isPending", "controlChildren", "child", "j", "insertAdjacentElement", "appendChild", "direction", "isFocused", "last_active", "getLastActive", "idx", "setCaret", "setActiveItem", "preventDefault", "evt", "stop", "stopPropagation", "addEvent", "target", "type", "callback", "options", "addEventListener", "iterate", "object", "Array", "isArray", "forEach", "key", "hasOwnProperty", "getDom", "query", "jquery", "HTMLElement", "isHtmlString", "tpl", "document", "createElement", "innerHTML", "trim", "content", "firstChild", "querySelector", "arg", "indexOf", "addClasses", "elmts", "classes", "norm_classes", "classesArray", "castAsArray", "map", "el", "cls", "classList", "add", "args", "_classes", "split", "concat", "filter", "Boolean", "plugin", "self", "settings", "shouldOpen", "hook", "focus_node", "control", "control_input", "div", "append", "dropdown", "insertBefore", "placeholder", "on", "keyCode", "constants", "isOpen", "close", "clearActiveItems", "tabIndex", "onKeyDown", "call", "isDisabled", "focus", "orig_onBlur", "onBlur", "relatedTarget", "preventScroll", "addEvent", "target", "type", "callback", "options", "addEventListener", "plugin", "self", "on", "test_input", "document", "createElement", "control", "control_input", "style", "cssText", "wrapper", "appendChild", "transfer_styles", "style_name", "resize", "textContent", "value", "width", "clientWidth", "plugin", "self", "orig_deleteSelection", "deleteSelection", "hook", "evt", "activeItems", "length", "call", "plugin", "hook", "parentMatch", "target", "selector", "wrapper", "matches", "parentNode", "nodeIndex", "el", "amongst", "nodeName", "i", "previousElementSibling", "plugin", "self", "orig_keydown", "onKeyDown", "hook", "evt", "index", "option", "options", "optgroup", "isOpen", "keyCode", "constants", "call", "ignoreHover", "activeOption", "previousSibling", "nextSibling", "querySelectorAll", "Math", "min", "length", "setActiveOption", "escape_html", "str", "replace", "preventDefault", "evt", "stop", "stopPropagation", "addEvent", "target", "type", "callback", "options", "addEventListener", "getDom", "query", "jquery", "HTMLElement", "isHtmlString", "tpl", "document", "createElement", "innerHTML", "trim", "content", "firstChild", "querySelector", "arg", "indexOf", "plugin", "userOptions", "Object", "assign", "label", "title", "className", "append", "self", "html", "hook", "orig_render_item", "settings", "render", "item", "data", "escape", "call", "close_button", "appendChild", "isLocked", "shouldDelete", "removeItem", "refreshOptions", "inputState", "plugin", "userOptions", "self", "options", "Object", "assign", "text", "option", "settings", "labelField", "on", "value", "isFocused", "control_input", "trim", "setTextboxValue", "call", "iterate", "object", "callback", "Array", "isArray", "forEach", "key", "hasOwnProperty", "addClasses", "elmts", "classes", "norm_classes", "classesArray", "castAsArray", "map", "el", "cls", "classList", "add", "args", "_classes", "trim", "split", "concat", "filter", "Boolean", "arg", "plugin", "self", "orig_canLoad", "canLoad", "orig_clearActiveOption", "clearActiveOption", "orig_loadCallback", "loadCallback", "pagination", "dropdown_content", "loading_more", "load_more_opt", "default_values", "settings", "shouldLoadMore", "clientHeight", "scrollHeight", "scrollTop", "activeOption", "selectable", "index", "from", "indexOf", "length", "firstUrl", "sortField", "field", "canLoadMore", "query", "maxOptions", "children", "clearFilter", "option", "value", "items", "setNextUrl", "next_url", "getUrl", "clearPagination", "call", "hook", "options", "optgroups", "clearOptions", "first_option", "undefined", "dataset", "valueField", "lastValue", "render", "setAttribute", "querySelector", "optionClass", "append", "on", "Object", "keys", "assign", "no_more_results", "addEventListener", "load", "TomSelect", "plugin", "tom_select_complete_default", "hasError", "data", "isTruthy", "value", "badStrings", "isElement", "obj", "apiRequest", "url", "method", "data", "__async", "token", "headers", "body", "res", "contentType", "json", "apiPatch", "getElements", "key", "query", "element", "getElement", "id", "scrollTo", "element", "offset", "yOffset", "title", "top", "getSelectedOptions", "base", "selector", "selected", "select", "option", "findFirstAdjacent", "base", "query", "boundary", "atBoundary", "element", "match", "parent", "child", "createElement", "tag", "properties", "classes", "children", "k", "key", "value", "replaceAll", "input", "pattern", "replacement", "flags", "handleFormSubmit", "event", "form", "element", "getElements", "invalids", "firstInvalid", "scrollTo", "initFormElements", "submitters", "submitter", "resetButton", "initSpeedSelector", "element", "getElements", "handleClick", "event", "value", "input", "initForms", "func", "initFormElements", "initSpeedSelector", "Collapse", "Modal", "Popover", "Toast", "Tooltip", "initTooltips", "tooltip", "getElements", "initModals", "modal", "createToast", "level", "title", "message", "extra", "iconName", "container", "main", "header", "icon", "titleElement", "button", "body", "extraElement", "initTabs", "hash", "target", "element", "Tab", "initSidebarAccordions", "items", "handleToggle", "thisItem", "item", "initImagePreview", "maxWidth", "image", "createElement", "content", "initBootstrap", "func", "quickSearchEventHandler", "event", "quicksearch", "clearbtn", "isTruthy", "clearLinkParams", "link", "linkUpdated", "handleQuickSearchParams", "quickSearchParameters", "search_parameter", "initQuickSearch", "__async", "search", "f", "getPlugins", "element", "plugins", "data", "initStaticSelects", "select", "getElements", "tom_select_complete_default", "__spreadProps", "__spreadValues", "getPlugins", "initColorSelects", "renderColor", "item", "escape", "iterate", "object", "callback", "key", "addClasses", "elmts", "classes", "norm_classes", "classesArray", "castAsArray", "el", "cls", "classesArray", "args", "classes", "iterate", "_classes", "castAsArray", "arg", "base_exports", "__export", "exclude", "extract", "parse", "parseUrl", "pick", "stringify", "stringifyUrl", "token", "singleMatcher", "multiMatcher", "decodeComponents", "components", "split", "e", "left", "right", "decode", "input", "tokens", "customDecodeURIComponent", "replaceMap", "match", "result", "entries", "key", "decodeUriComponent", "encodedURI", "includeKeys", "object", "predicate", "result", "key", "descriptor", "value", "splitOnFirst", "string", "separator", "separatorIndex", "isNullOrUndefined", "value", "strictUriEncode", "string", "x", "encodeFragmentIdentifier", "encoderForArrayFormat", "options", "key", "result", "index", "encode", "keyValueSeparator", "parserForArrayFormat", "accumulator", "isArray", "isEncodedArray", "decode", "newValue", "item", "arrayValue", "validateArrayFormatSeparator", "decodeUriComponent", "keysSorter", "input", "a", "b", "removeHash", "hashStart", "getHash", "url", "hash", "parseValue", "type", "extract", "queryStart", "parse", "query", "__spreadValues", "formatter", "returnValue", "parameter", "parameter_", "splitOnFirst", "key2", "value2", "stringify", "object", "shouldFilter", "objectCopy", "keys", "parseUrl", "_a", "_b", "url_", "stringifyUrl", "queryFromUrl", "queryString", "urlObjectForFragmentEncode", "pick", "filter", "fragmentIdentifier", "includeKeys", "exclude", "exclusionFilter", "query_string_default", "base_exports", "isDataDynamicParams", "value", "item", "DynamicParamsMap", "fieldName", "value", "queryValue", "current", "isTruthy", "queryParam", "json", "deserialized", "isDataDynamicParams", "DynamicTomSelect", "tom_select_complete_default", "input_arg", "user_settings", "__publicField", "DynamicParamsMap", "nullOption", "valueField", "labelField", "key", "value", "filter", "self", "url", "addClasses", "response", "apiData", "results", "options", "result", "option", "search", "query", "replaceAll", "query_string_default", "data", "parent", "serialized", "deserialized", "queryParam", "queryValue", "err", "fieldName", "element", "elementValue", "current", "staticValue", "id", "getElement", "dependencies", "dep", "filterElement", "event", "target", "VALUE_FIELD", "LABEL_FIELD", "MAX_OPTIONS", "renderOption", "data", "escape", "html", "renderItem", "initDynamicSelects", "select", "getElements", "DynamicTomSelect", "__spreadProps", "__spreadValues", "getPlugins", "initSelects", "initStaticSelects", "initDynamicSelects", "initColorSelects", "setConnectionStatus", "element", "status", "_a", "row", "url", "isTruthy", "apiPatch", "res", "hasError", "createToast", "initConnectionToggle", "getElements", "ProxyStateHandler", "target", "key", "value", "StateManager", "raw", "options", "__publicField", "saved", "__spreadValues", "obj", "createState", "initial", "objectDepthState", "createState", "rackImagesState", "createState", "previousPkCheckState", "createState", "secretState", "createState", "toggleDepthButton", "hidden", "button", "showDepthIndicators", "element", "getElements", "hideDepthIndicators", "handleDepthToggle", "state", "initiallyHidden", "initDepthToggle", "objectDepthState", "event", "moveOptionUp", "element", "options", "i", "option", "moveOptionDown", "next", "initMoveButtons", "button", "getElements", "target", "select", "slugify", "slug", "chars", "initReslug", "slugButton", "getElements", "form", "slugField", "sourceId", "sourceField", "slugLengthAttr", "slugLength", "handlePkCheck", "event", "element", "getElements", "handleSelectAllToggle", "tableSelectAll", "table", "findFirstAdjacent", "confirmCard", "confirmCheckbox", "initSelectAll", "toggleFloat", "checkedCheckboxes", "buttonGroup", "isFloating", "initFloatBulk", "element", "getElements", "removeTextSelection", "_a", "updatePreviousPkCheckState", "eventTargetElement", "state", "toggleCheckboxRange", "previousStateElement", "elementList", "_b", "changePkCheckboxState", "element", "typedElement", "handlePkCheck", "event", "checkboxList", "getElements", "initSelectMultiple", "checkboxElements", "previousPkCheckState", "initMarkdownPreview", "markdownWidget", "previewButton", "textarea", "preview", "isTruthy", "height", "e", "initMarkdownPreviews", "toggleSecretButton", "hidden", "button", "showSecret", "secret", "getElement", "isTruthy", "value", "hideSecret", "handleSecretToggle", "state", "toggleCallback", "event", "secretState", "initSecretToggle", "getElements", "initButtons", "func", "initDepthToggle", "initConnectionToggle", "initReslug", "initSelectAll", "initSelectMultiple", "initFloatBulk", "initMoveButtons", "initMarkdownPreviews", "initSecretToggle", "COLOR_MODE_KEY", "isColorMode", "value", "storeColorMode", "mode", "updateElements", "targetMode", "_a", "_b", "body", "elevation", "getElements", "svg", "setColorMode", "handleColorModeToggle", "currentValue", "defaultColorMode", "isTruthy", "preference", "initColorModeToggle", "element", "initColorMode", "func", "initMessages", "elements", "element", "toast", "Toast", "import_clipboard", "initClipboard", "element", "getElements", "Clipboard", "HOOKS", "defaults", "err", "givenDate", "date", "week1", "english", "nth", "s", "default_default", "pad", "number", "length", "int", "bool", "debounce", "fn", "wait", "_this", "args", "arrayify", "obj", "toggleClass", "elem", "className", "bool", "createElement", "tag", "content", "e", "clearNode", "node", "findParent", "condition", "createNumberInput", "inputClassName", "opts", "wrapper", "numInput", "arrowUp", "arrowDown", "key", "getEventTarget", "event", "path", "error", "doNothing", "monthToStr", "monthNumber", "shorthand", "locale", "revFormat", "dateObj", "monthName", "hour", "day", "amPM", "int", "shortMonth", "seconds", "_", "unixSeconds", "weekNum", "weekNumber", "date", "year", "ISODate", "minutes", "month", "unixMillSeconds", "tokenRegex", "formats", "options", "pad", "createDateFormatter", "_a", "_b", "config", "defaults", "_c", "l10n", "english", "_d", "isMobile", "dateObj", "frmt", "overrideLocale", "locale", "c", "i", "arr", "formats", "createDateParser", "date", "givenFormat", "timeless", "customLocale", "parsedDate", "dateOrig", "format", "datestr", "matched", "ops", "matchIndex", "regexStr", "token", "isBackSlash", "escaped", "tokenRegex", "match", "revFormat", "fn", "val", "compareDates", "date1", "date2", "isBetween", "ts", "ts1", "ts2", "calculateSecondsSinceMidnight", "hours", "minutes", "seconds", "parseSeconds", "secondsSinceMidnight", "duration", "getDefaultHours", "config", "minHour", "minMinutes", "minSeconds", "maxHr", "maxMinutes", "target", "args", "_i", "_loop_1", "source", "key", "_a", "args_1", "__assign", "t", "s", "i", "n", "p", "__spreadArrays", "il", "r", "k", "a", "j", "jl", "DEBOUNCED_CHANGE_MS", "FlatpickrInstance", "element", "instanceConfig", "self", "defaults", "flatpickr", "default_default", "createDateParser", "bind", "setHoursFromDate", "positionCalendar", "changeMonth", "changeYear", "clear", "close", "onMouseOver", "createElement", "createDay", "destroy", "isEnabled", "jumpToDate", "updateValue", "open", "redraw", "set", "setDate", "toggle", "setupHelperFunctions", "month", "yr", "init", "parseConfig", "setupLocale", "setupInputs", "setupDates", "build", "bindEvents", "setCalendarWidth", "isSafari", "triggerEvent", "getClosestActiveElement", "_a", "bindToInstance", "fn", "config", "daysWidth", "updateTime", "e", "defaultDate", "compareDates", "getDefaultHours", "timeWrapper", "prevValue", "setHoursFromInputs", "ampm2military", "hour", "amPM", "int", "military2ampm", "hours", "minutes", "seconds", "limitMinHours", "limitMaxHours", "minBound", "calculateSecondsSinceMidnight", "maxBound", "currentTime", "result", "parseSeconds", "maxTime", "minTime", "setHours", "dateObj", "date", "pad", "onYearInput", "event", "eventTarget", "getEventTarget", "year", "handler", "options", "ev", "el", "triggerChange", "evt", "setupMobile", "debouncedResize", "debounce", "onResize", "onKeyDown", "documentClick", "onMonthNavClick", "selectDate", "selText", "timeIncrement", "onBlur", "jumpDate", "jumpTo", "oldYear", "oldMonth", "buildMonthSwitch", "incrementNumInput", "delta", "inputElem", "target", "input", "createEvent", "fragment", "buildMonthNav", "buildWeeks", "weekWrapper", "weekNumbers", "buildWeekdays", "buildDays", "buildTime", "toggleClass", "customAppend", "wrapper", "className", "_dayNumber", "dateIsEnabled", "dayElement", "isDateSelected", "isDateInRange", "focusOnDayElem", "targetNode", "getFirstAvailableDay", "startMonth", "endMonth", "m", "startIndex", "endIndex", "c", "getNextAvailableDay", "current", "givenMonth", "loopDelta", "numMonthDays", "focusOnDay", "offset", "activeElement", "dayFocused", "isInView", "startElem", "buildMonthDays", "firstOfMonth", "prevMonthDays", "daysInMonth", "days", "isMultiMonth", "prevMonthDayClass", "nextMonthDayClass", "dayNumber", "dayIndex", "dayNum", "dayContainer", "clearNode", "frag", "d", "shouldBuildMonth", "monthToStr", "buildMonth", "container", "monthNavFragment", "monthElement", "selectedMonth", "yearInput", "createNumberInput", "yearElement", "currentMonth", "buildMonths", "bool", "updateNavigationCurrentMonth", "separator", "hourInput", "minuteInput", "secondInput", "updateWeekdays", "firstDayOfWeek", "weekdays", "value", "isOffset", "triggerChangeEvent", "toInitial", "_", "isCalendarElem", "elem", "eventTarget_1", "isCalendarElement", "isInput", "lostFocus", "isIgnored", "newYear", "newYearNum", "isNewYear", "timeless", "dateToCheck", "array", "parsed", "valueChanged", "getDateStr", "allowInput", "allowKeydown", "allowInlineKeydown", "isTimeObj", "focusAndClose", "delta_1", "elems", "x", "cellClass", "hoverDate", "initialDate", "rangeStartDate", "rangeEndDate", "containsDisabled", "minRange", "maxRange", "duration", "hoverableCells", "dayElem", "timestamp", "outOfRange", "isBetween", "positionElement", "wasOpen", "minMaxDateSetter", "type", "inverseDateObj", "boolOpts", "userConfig", "formats", "dates", "parseDateRules", "timeMode", "defaultDateFormat", "defaultAltFormat", "minMaxTimeSetter", "val", "HOOKS", "hook", "arrayify", "pluginConf", "key", "getInputElem", "tokenRegex", "createDateFormatter", "customPositionElement", "calendarHeight", "acc", "child", "calendarWidth", "configPos", "configPosVertical", "configPosHorizontal", "inputBounds", "distanceFromBottom", "showOnTop", "top", "left", "isCenter", "isRight", "right", "rightMost", "centerMost", "doc", "getDocumentStyleSheet", "bodyWidth", "centerLeft", "centerBefore", "centerAfter", "centerIndex", "centerStyle", "editableSheet", "sheet", "err", "createStyleSheet", "style", "isSelectable", "day", "findParent", "selectedDate", "shouldChangeMonth", "selectedIndex", "b", "single", "range", "CALLBACKS", "updatePositionElement", "option", "setSelectedDate", "inputDate", "format", "arr", "rule", "preloadedDate", "inputType", "data", "hooks", "name", "specificFormat", "dObj", "isPrevMonth", "isNextMonth", "isKeyDown", "min", "max", "step", "curValue", "newValue", "isHourElem", "isMinuteElem", "_flatpickr", "nodeList", "nodes", "instances", "node", "selector", "l10n", "esm_default", "initDateSelector", "esm_default", "addColumns", "event", "selectedOption", "getElements", "selected", "removeColumns", "available", "submitFormConfig", "url", "formConfig", "__async", "apiPatch", "handleSubmit", "_a", "_b", "_c", "element", "createToast", "reset", "path", "data", "value", "key", "res", "hasError", "options", "getSelectedOptions", "formData", "opt", "initTableConfig", "isShowHide", "value", "TableStateError", "message", "table", "__publicField", "ButtonState", "button", "rows", "row", "state", "replaceAll", "event", "TableState", "toggleEnabledButton", "findFirstAdjacent", "toggleDisabledButton", "toggleVirtualButton", "toggleDisconnectedButton", "err", "instance", "initInterfaceTable", "element", "getElements", "SideNav", "base", "__publicField", "StateManager", "attr", "attrs", "toggler", "event", "getElements", "link", "collapse", "element", "section", "collapseInstance", "Collapse", "action", "_a", "dropdownMenu", "isElement", "groupItem", "groupLink", "menuitem", "href", "initSideNav", "sidenav", "obsolete", "self", "f", "oldName", "newName", "rev", "wrapper", "args", "Utils", "_Utils", "els", "root", "doc", "el", "list", "n", "_a", "_b", "classes", "parent", "c", "strict", "a", "b", "x0", "x1", "y0", "y1", "nodes", "dir", "_c", "_d", "diffY", "id", "v", "value", "val", "h", "unit", "match", "target", "sources", "source", "key", "doMinMax", "node", "aVal", "bVal", "removeEl", "func", "delay", "isWaiting", "args", "style", "position", "distance", "rect", "innerHeightOrClientHeight", "offsetDiffDown", "offsetDiffUp", "scrollEl", "prevScroll", "event", "height", "offsetTop", "pointerPosY", "top", "bottom", "obj", "__spreadValues", "skipFields", "ret", "k", "parentNode", "styles", "s", "info", "evt", "p", "simulatedType", "me", "simulatedEvent", "transformReference", "transformValues", "o", "tmp", "GridStackEngine", "_GridStackEngine", "opts", "flag", "doPack", "node", "nn", "collide", "opt", "area", "didMove", "newOpt", "counter", "moved", "__spreadProps", "__spreadValues", "newNN", "Utils", "skip", "skip2", "skipId", "skip2Id", "n", "o", "collides", "r0", "r", "overMax", "r2", "yOver", "xOver", "over", "w", "h", "top", "right", "bottom", "left", "a", "b", "_doSwap", "x", "y", "touching", "t", "layout", "doSort", "wasBatch", "wasColumnResize", "copyNodes", "index", "list", "after", "val", "dir", "newY", "i", "resizing", "_a", "id", "count", "defaults", "before", "copy", "verify", "removedNodes", "dirtyNodes", "nodeList", "column", "start", "found", "box", "triggerAddEvent", "dup", "skipCollision", "removeDOM", "triggerEvent", "clonedNode", "clone", "canMove", "c", "p", "_b", "wasUndefinedPack", "prevPos", "needToMove", "activeDrag", "a1", "a2", "row", "saveElement", "saveCB", "len", "wl", "l", "nodes", "ratio", "prevColumn", "doCompact", "newNodes", "cacheNodes", "lastIndex", "cacheNode", "_c", "j", "move", "scale", "clear", "existing", "n2", "prop", "gridDefaults", "DDManager", "isTouch", "DDTouch", "simulateMouseEvent", "e", "simulatedType", "Utils", "simulatePointerMouseEvent", "touchstart", "touchmove", "touchend", "wasDragging", "DDManager", "pointerdown", "pointerenter", "pointerleave", "DDResizableHandle", "_DDResizableHandle", "host", "dir", "option", "el", "isTouch", "touchstart", "pointerdown", "touchmove", "touchend", "s", "_a", "_b", "name", "event", "DDBaseImplement", "event", "callback", "eventName", "DDResizable", "_DDResizable", "DDBaseImplement", "el", "option", "containmentRect", "newRect", "rect", "event", "callback", "opts", "updateHandles", "updateAutoHide", "key", "auto", "DDManager", "dir", "DDResizableHandle", "Utils", "ev", "prop", "parent", "dragTransform", "i", "oEvent", "offsetX", "offsetY", "moveLeft", "moveUp", "constrain", "oWidth", "oHeight", "maxWidth", "minWidth", "maxHeight", "minHeight", "width", "height", "containmentEl", "left", "top", "value", "scaleReciprocal", "handle", "skipMouseDown", "DDDraggable", "_DDDraggable", "DDBaseImplement", "el", "option", "_a", "handleName", "n", "event", "callback", "dragEl", "isTouch", "touchstart", "pointerdown", "forDestroy", "opts", "key", "DDManager", "touchmove", "touchend", "ev", "Utils", "s", "pause", "grid", "_b", "__spreadValues", "helper", "prop", "style", "node", "transition", "containmentRect", "offset", "parent", "xformOffsetX", "xformOffsetY", "targetOffset", "DDDroppable", "DDBaseImplement", "el", "option", "event", "callback", "isTouch", "pointerenter", "pointerleave", "forDestroy", "opts", "key", "DDManager", "ev", "Utils", "calledByEnter", "_a", "parentDrop", "parent", "drag", "__spreadValues", "DDElement", "_DDElement", "el", "eventName", "callback", "opts", "DDDraggable", "DDResizable", "DDDroppable", "DDGridStack", "el", "opts", "key", "value", "dEl", "grid", "handles", "autoHide", "__spreadProps", "__spreadValues", "_a", "name", "callback", "event", "DDManager", "els", "create", "hosts", "Utils", "e", "DDElement", "d", "dd", "DDGridStack", "GridStack", "_GridStack", "options", "elOrString", "el", "Utils", "selector", "grids", "parent", "opt", "grid", "__spreadValues", "engineClass", "gridDefaults", "placeholderChild", "opts", "_a", "rowAttr", "resp", "bk", "a", "b", "defaults", "__spreadProps", "parentGridItem", "parentNode", "val", "isTouch", "GridStackEngine", "cbNodes", "n", "children", "DDManager", "w", "node", "domAttr", "cont", "entry", "_b", "ops", "nodeToAdd", "saveContent", "_c", "subGridTemplate", "autoColumn", "content", "newItem", "newItemOpt", "h", "style", "subGrid", "nodeThatRemoved", "pGrid", "saveGridOpt", "saveCB", "list", "itemContent", "listOrOpt", "origShow", "items", "addRemove", "column", "maxColumn", "prevCB", "removed", "blank", "updateNodes", "item", "sub", "flag", "forcePixel", "rows", "marginDiff", "data", "forBreakpoint", "newColumn", "i", "layout", "doSort", "oldColumn", "removeDOM", "position", "useDocRelative", "box", "containerPos", "relativeLeft", "relativeTop", "columnWidth", "rowHeight", "x", "y", "els", "resetIgnoreLayoutsNodeChange", "name", "callback", "event", "key", "triggerEvent", "doAnimate", "delay", "updateClass", "recurse", "o", "keys", "m", "k", "changed", "ddChanged", "widthChanged", "wasUpdating", "cell", "height", "padding", "itemH", "wantedH", "subRec", "parentRec", "child", "softMax", "relative", "rot", "pivotX", "pivotY", "_orig", "value", "elements", "addedNodes", "removedNodes", "type", "row", "cellHeight", "unit", "cssMinHeight", "minRow", "triggerAddEvent", "sizeToContent", "attrs", "clearDefaultAttr", "attr", "classes", "clientWidth", "columnChanged", "nodes", "forceRemove", "trackSize", "margin", "margins", "dragIn", "dragInOptions", "widgets", "root", "doEnable", "cellWidth", "onDrag", "helper", "helperRect", "top", "left", "rect", "ui", "canAccept", "error", "wasAdded", "wasSidebar", "noAnim", "origNode", "oGrid", "remove", "trashEl", "force", "noMove", "noResize", "disable", "onStartMoving", "dragOrResize", "onEndMoving", "target", "gridEl", "colLeft", "rowLeft", "p", "resizing", "mLeft", "mRight", "mTop", "mBottom", "mHeight", "mWidth", "distance", "prev", "extra", "sidebarOrig", "obsolete", "lockDashboard", "dashboard", "unlockDashboard", "saveDashboardLayout", "url", "gridData", "__async", "apiPatch", "initDashboard", "grid", "GridStack", "gridLockButton", "gridUnlockButton", "gridSaveButton", "res", "hasError", "createToast", "setRackView", "view", "elevation", "showRackElements", "hideRackElements", "selector", "_a", "_b", "elements", "element", "handleRackViewSelect", "newView", "state", "getElements", "initRackElevation", "initialView", "rackImagesState", "control", "o", "event", "handleSelection", "link", "selector_results", "target_id", "target", "label", "value", "initObjectSelector", "element", "getElements", "handleQuickAddObject", "quick_add", "object_id", "object_repr", "target_id", "target", "modal_element", "modal", "Modal", "initQuickAdd", "quick_add_modal", "initDepedencies", "initButtons", "initClipboard", "initForms", "initSelects", "initObjectSelector", "initQuickAdd", "initBootstrap", "initMessages", "initHtmx", "handleSavedFilterChange", "event", "savedFilter", "baseUrl", "preFilter", "selectedOptions", "option", "initSavedFilterSelect", "divResults", "isTruthy", "savedFilterSelect", "initDocument", "init", "initBootstrap", "initColorMode", "initMessages", "initForms", "initQuickSearch", "initSelects", "initDateSelector", "initButtons", "initClipboard", "initTableConfig", "initInterfaceTable", "initSideNav", "initDashboard", "initRackElevation", "initHtmx", "initSavedFilterSelect", "initWindow", "documentForms", "documentForm", "event", "formData", "name", "value", "contentContainer"]
}
